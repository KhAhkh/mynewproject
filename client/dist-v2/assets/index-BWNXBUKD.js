var Bp=e=>{throw TypeError(e)};var Ec=(e,t,n)=>t.has(e)||Bp("Cannot "+n);var q=(e,t,n)=>(Ec(e,t,"read from private field"),n?n.call(e):t.get(e)),pe=(e,t,n)=>t.has(e)?Bp("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),le=(e,t,n,r)=>(Ec(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),be=(e,t,n)=>(Ec(e,t,"access private method"),n);var ji=(e,t,n,r)=>({set _(a){le(e,t,a,n)},get _(){return q(e,t,r)}});function Ng(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in e)){const l=Object.getOwnPropertyDescriptor(r,a);l&&Object.defineProperty(e,a,l.get?l:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();var $f=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Rd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var If={exports:{}},Jo={},Af={exports:{}},Se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ei=Symbol.for("react.element"),Sg=Symbol.for("react.portal"),wg=Symbol.for("react.fragment"),kg=Symbol.for("react.strict_mode"),Cg=Symbol.for("react.profiler"),Eg=Symbol.for("react.provider"),_g=Symbol.for("react.context"),Rg=Symbol.for("react.forward_ref"),Dg=Symbol.for("react.suspense"),Pg=Symbol.for("react.memo"),Mg=Symbol.for("react.lazy"),zp=Symbol.iterator;function Lg(e){return e===null||typeof e!="object"?null:(e=zp&&e[zp]||e["@@iterator"],typeof e=="function"?e:null)}var qf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Bf=Object.assign,zf={};function Da(e,t,n){this.props=e,this.context=t,this.refs=zf,this.updater=n||qf}Da.prototype.isReactComponent={};Da.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Da.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Uf(){}Uf.prototype=Da.prototype;function Dd(e,t,n){this.props=e,this.context=t,this.refs=zf,this.updater=n||qf}var Pd=Dd.prototype=new Uf;Pd.constructor=Dd;Bf(Pd,Da.prototype);Pd.isPureReactComponent=!0;var Up=Array.isArray,Qf=Object.prototype.hasOwnProperty,Md={current:null},Yf={key:!0,ref:!0,__self:!0,__source:!0};function Hf(e,t,n){var r,a={},l=null,i=null;if(t!=null)for(r in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(l=""+t.key),t)Qf.call(t,r)&&!Yf.hasOwnProperty(r)&&(a[r]=t[r]);var o=arguments.length-2;if(o===1)a.children=n;else if(1<o){for(var u=Array(o),c=0;c<o;c++)u[c]=arguments[c+2];a.children=u}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)a[r]===void 0&&(a[r]=o[r]);return{$$typeof:ei,type:e,key:l,ref:i,props:a,_owner:Md.current}}function Fg(e,t){return{$$typeof:ei,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Ld(e){return typeof e=="object"&&e!==null&&e.$$typeof===ei}function Tg(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Qp=/\/+/g;function _c(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Tg(""+e.key):t.toString(36)}function Xi(e,t,n,r,a){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(l){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case ei:case Sg:i=!0}}if(i)return i=e,a=a(i),e=r===""?"."+_c(i,0):r,Up(a)?(n="",e!=null&&(n=e.replace(Qp,"$&/")+"/"),Xi(a,t,n,"",function(c){return c})):a!=null&&(Ld(a)&&(a=Fg(a,n+(!a.key||i&&i.key===a.key?"":(""+a.key).replace(Qp,"$&/")+"/")+e)),t.push(a)),1;if(i=0,r=r===""?".":r+":",Up(e))for(var o=0;o<e.length;o++){l=e[o];var u=r+_c(l,o);i+=Xi(l,t,n,u,a)}else if(u=Lg(e),typeof u=="function")for(e=u.call(e),o=0;!(l=e.next()).done;)l=l.value,u=r+_c(l,o++),i+=Xi(l,t,n,u,a);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function Ni(e,t,n){if(e==null)return e;var r=[],a=0;return Xi(e,r,"","",function(l){return t.call(n,l,a++)}),r}function Og(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Pt={current:null},Zi={transition:null},$g={ReactCurrentDispatcher:Pt,ReactCurrentBatchConfig:Zi,ReactCurrentOwner:Md};function Vf(){throw Error("act(...) is not supported in production builds of React.")}Se.Children={map:Ni,forEach:function(e,t,n){Ni(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ni(e,function(){t++}),t},toArray:function(e){return Ni(e,function(t){return t})||[]},only:function(e){if(!Ld(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Se.Component=Da;Se.Fragment=wg;Se.Profiler=Cg;Se.PureComponent=Dd;Se.StrictMode=kg;Se.Suspense=Dg;Se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$g;Se.act=Vf;Se.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Bf({},e.props),a=e.key,l=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,i=Md.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(u in t)Qf.call(t,u)&&!Yf.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&o!==void 0?o[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){o=Array(u);for(var c=0;c<u;c++)o[c]=arguments[c+2];r.children=o}return{$$typeof:ei,type:e.type,key:a,ref:l,props:r,_owner:i}};Se.createContext=function(e){return e={$$typeof:_g,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Eg,_context:e},e.Consumer=e};Se.createElement=Hf;Se.createFactory=function(e){var t=Hf.bind(null,e);return t.type=e,t};Se.createRef=function(){return{current:null}};Se.forwardRef=function(e){return{$$typeof:Rg,render:e}};Se.isValidElement=Ld;Se.lazy=function(e){return{$$typeof:Mg,_payload:{_status:-1,_result:e},_init:Og}};Se.memo=function(e,t){return{$$typeof:Pg,type:e,compare:t===void 0?null:t}};Se.startTransition=function(e){var t=Zi.transition;Zi.transition={};try{e()}finally{Zi.transition=t}};Se.unstable_act=Vf;Se.useCallback=function(e,t){return Pt.current.useCallback(e,t)};Se.useContext=function(e){return Pt.current.useContext(e)};Se.useDebugValue=function(){};Se.useDeferredValue=function(e){return Pt.current.useDeferredValue(e)};Se.useEffect=function(e,t){return Pt.current.useEffect(e,t)};Se.useId=function(){return Pt.current.useId()};Se.useImperativeHandle=function(e,t,n){return Pt.current.useImperativeHandle(e,t,n)};Se.useInsertionEffect=function(e,t){return Pt.current.useInsertionEffect(e,t)};Se.useLayoutEffect=function(e,t){return Pt.current.useLayoutEffect(e,t)};Se.useMemo=function(e,t){return Pt.current.useMemo(e,t)};Se.useReducer=function(e,t,n){return Pt.current.useReducer(e,t,n)};Se.useRef=function(e){return Pt.current.useRef(e)};Se.useState=function(e){return Pt.current.useState(e)};Se.useSyncExternalStore=function(e,t,n){return Pt.current.useSyncExternalStore(e,t,n)};Se.useTransition=function(){return Pt.current.useTransition()};Se.version="18.3.1";Af.exports=Se;var y=Af.exports;const ss=Rd(y),Ig=Ng({__proto__:null,default:ss},[y]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ag=y,qg=Symbol.for("react.element"),Bg=Symbol.for("react.fragment"),zg=Object.prototype.hasOwnProperty,Ug=Ag.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Qg={key:!0,ref:!0,__self:!0,__source:!0};function Wf(e,t,n){var r,a={},l=null,i=null;n!==void 0&&(l=""+n),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(i=t.ref);for(r in t)zg.call(t,r)&&!Qg.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)a[r]===void 0&&(a[r]=t[r]);return{$$typeof:qg,type:e,key:l,ref:i,props:a,_owner:Ug.current}}Jo.Fragment=Bg;Jo.jsx=Wf;Jo.jsxs=Wf;If.exports=Jo;var s=If.exports,du={},Kf={exports:{}},Xt={},Gf={exports:{}},Jf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(N,_){var $=N.length;N.push(_);e:for(;0<$;){var O=$-1>>>1,Q=N[O];if(0<a(Q,_))N[O]=_,N[$]=Q,$=O;else break e}}function n(N){return N.length===0?null:N[0]}function r(N){if(N.length===0)return null;var _=N[0],$=N.pop();if($!==_){N[0]=$;e:for(var O=0,Q=N.length,K=Q>>>1;O<K;){var D=2*(O+1)-1,B=N[D],ee=D+1,Z=N[ee];if(0>a(B,$))ee<Q&&0>a(Z,B)?(N[O]=Z,N[ee]=$,O=ee):(N[O]=B,N[D]=$,O=D);else if(ee<Q&&0>a(Z,$))N[O]=Z,N[ee]=$,O=ee;else break e}}return _}function a(N,_){var $=N.sortIndex-_.sortIndex;return $!==0?$:N.id-_.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var i=Date,o=i.now();e.unstable_now=function(){return i.now()-o}}var u=[],c=[],p=1,d=null,m=3,x=!1,h=!1,S=!1,C=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(N){for(var _=n(c);_!==null;){if(_.callback===null)r(c);else if(_.startTime<=N)r(c),_.sortIndex=_.expirationTime,t(u,_);else break;_=n(c)}}function R(N){if(S=!1,b(N),!h)if(n(u)!==null)h=!0,k(P);else{var _=n(c);_!==null&&F(R,_.startTime-N)}}function P(N,_){h=!1,S&&(S=!1,g(E),E=-1),x=!0;var $=m;try{for(b(_),d=n(u);d!==null&&(!(d.expirationTime>_)||N&&!U());){var O=d.callback;if(typeof O=="function"){d.callback=null,m=d.priorityLevel;var Q=O(d.expirationTime<=_);_=e.unstable_now(),typeof Q=="function"?d.callback=Q:d===n(u)&&r(u),b(_)}else r(u);d=n(u)}if(d!==null)var K=!0;else{var D=n(c);D!==null&&F(R,D.startTime-_),K=!1}return K}finally{d=null,m=$,x=!1}}var A=!1,v=null,E=-1,T=5,M=-1;function U(){return!(e.unstable_now()-M<T)}function X(){if(v!==null){var N=e.unstable_now();M=N;var _=!0;try{_=v(!0,N)}finally{_?L():(A=!1,v=null)}}else A=!1}var L;if(typeof f=="function")L=function(){f(X)};else if(typeof MessageChannel<"u"){var w=new MessageChannel,j=w.port2;w.port1.onmessage=X,L=function(){j.postMessage(null)}}else L=function(){C(X,0)};function k(N){v=N,A||(A=!0,L())}function F(N,_){E=C(function(){N(e.unstable_now())},_)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(N){N.callback=null},e.unstable_continueExecution=function(){h||x||(h=!0,k(P))},e.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<N?Math.floor(1e3/N):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(N){switch(m){case 1:case 2:case 3:var _=3;break;default:_=m}var $=m;m=_;try{return N()}finally{m=$}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(N,_){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var $=m;m=N;try{return _()}finally{m=$}},e.unstable_scheduleCallback=function(N,_,$){var O=e.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?O+$:O):$=O,N){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=$+Q,N={id:p++,callback:_,priorityLevel:N,startTime:$,expirationTime:Q,sortIndex:-1},$>O?(N.sortIndex=$,t(c,N),n(u)===null&&N===n(c)&&(S?(g(E),E=-1):S=!0,F(R,$-O))):(N.sortIndex=Q,t(u,N),h||x||(h=!0,k(P))),N},e.unstable_shouldYield=U,e.unstable_wrapCallback=function(N){var _=m;return function(){var $=m;m=_;try{return N.apply(this,arguments)}finally{m=$}}}})(Jf);Gf.exports=Jf;var Yg=Gf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hg=y,Jt=Yg;function se(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Xf=new Set,_l={};function Pr(e,t){ja(e,t),ja(e+"Capture",t)}function ja(e,t){for(_l[e]=t,e=0;e<t.length;e++)Xf.add(t[e])}var ls=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),pu=Object.prototype.hasOwnProperty,Vg=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Yp={},Hp={};function Wg(e){return pu.call(Hp,e)?!0:pu.call(Yp,e)?!1:Vg.test(e)?Hp[e]=!0:(Yp[e]=!0,!1)}function Kg(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Gg(e,t,n,r){if(t===null||typeof t>"u"||Kg(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Mt(e,t,n,r,a,l,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=i}var ft={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ft[e]=new Mt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ft[t]=new Mt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ft[e]=new Mt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ft[e]=new Mt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ft[e]=new Mt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ft[e]=new Mt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ft[e]=new Mt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ft[e]=new Mt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ft[e]=new Mt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Fd=/[\-:]([a-z])/g;function Td(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Fd,Td);ft[t]=new Mt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Fd,Td);ft[t]=new Mt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Fd,Td);ft[t]=new Mt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ft[e]=new Mt(e,1,!1,e.toLowerCase(),null,!1,!1)});ft.xlinkHref=new Mt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ft[e]=new Mt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Od(e,t,n,r){var a=ft.hasOwnProperty(t)?ft[t]:null;(a!==null?a.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Gg(t,n,a,r)&&(n=null),r||a===null?Wg(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,r=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var us=Hg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Si=Symbol.for("react.element"),Ur=Symbol.for("react.portal"),Qr=Symbol.for("react.fragment"),$d=Symbol.for("react.strict_mode"),mu=Symbol.for("react.profiler"),Zf=Symbol.for("react.provider"),ex=Symbol.for("react.context"),Id=Symbol.for("react.forward_ref"),hu=Symbol.for("react.suspense"),fu=Symbol.for("react.suspense_list"),Ad=Symbol.for("react.memo"),fs=Symbol.for("react.lazy"),tx=Symbol.for("react.offscreen"),Vp=Symbol.iterator;function Ga(e){return e===null||typeof e!="object"?null:(e=Vp&&e[Vp]||e["@@iterator"],typeof e=="function"?e:null)}var He=Object.assign,Rc;function dl(e){if(Rc===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Rc=t&&t[1]||""}return`
`+Rc+e}var Dc=!1;function Pc(e,t){if(!e||Dc)return"";Dc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var a=c.stack.split(`
`),l=r.stack.split(`
`),i=a.length-1,o=l.length-1;1<=i&&0<=o&&a[i]!==l[o];)o--;for(;1<=i&&0<=o;i--,o--)if(a[i]!==l[o]){if(i!==1||o!==1)do if(i--,o--,0>o||a[i]!==l[o]){var u=`
`+a[i].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=i&&0<=o);break}}}finally{Dc=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?dl(e):""}function Jg(e){switch(e.tag){case 5:return dl(e.type);case 16:return dl("Lazy");case 13:return dl("Suspense");case 19:return dl("SuspenseList");case 0:case 2:case 15:return e=Pc(e.type,!1),e;case 11:return e=Pc(e.type.render,!1),e;case 1:return e=Pc(e.type,!0),e;default:return""}}function xu(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Qr:return"Fragment";case Ur:return"Portal";case mu:return"Profiler";case $d:return"StrictMode";case hu:return"Suspense";case fu:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ex:return(e.displayName||"Context")+".Consumer";case Zf:return(e._context.displayName||"Context")+".Provider";case Id:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ad:return t=e.displayName||null,t!==null?t:xu(e.type)||"Memo";case fs:t=e._payload,e=e._init;try{return xu(e(t))}catch{}}return null}function Xg(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xu(t);case 8:return t===$d?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function zs(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function nx(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Zg(e){var t=nx(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(i){r=""+i,l.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function wi(e){e._valueTracker||(e._valueTracker=Zg(e))}function sx(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=nx(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function go(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function yu(e,t){var n=t.checked;return He({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Wp(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=zs(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function rx(e,t){t=t.checked,t!=null&&Od(e,"checked",t,!1)}function gu(e,t){rx(e,t);var n=zs(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?vu(e,t.type,n):t.hasOwnProperty("defaultValue")&&vu(e,t.type,zs(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Kp(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function vu(e,t,n){(t!=="number"||go(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var pl=Array.isArray;function na(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+zs(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,r&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function bu(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(se(91));return He({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Gp(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(se(92));if(pl(n)){if(1<n.length)throw Error(se(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:zs(n)}}function ax(e,t){var n=zs(t.value),r=zs(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Jp(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function lx(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ju(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?lx(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ki,ix=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ki=ki||document.createElement("div"),ki.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ki.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Rl(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var gl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ev=["Webkit","ms","Moz","O"];Object.keys(gl).forEach(function(e){ev.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),gl[t]=gl[e]})});function ox(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||gl.hasOwnProperty(e)&&gl[e]?(""+t).trim():t+"px"}function cx(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=ox(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}var tv=He({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Nu(e,t){if(t){if(tv[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(se(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(se(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(se(61))}if(t.style!=null&&typeof t.style!="object")throw Error(se(62))}}function Su(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wu=null;function qd(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ku=null,sa=null,ra=null;function Xp(e){if(e=si(e)){if(typeof ku!="function")throw Error(se(280));var t=e.stateNode;t&&(t=nc(t),ku(e.stateNode,e.type,t))}}function ux(e){sa?ra?ra.push(e):ra=[e]:sa=e}function dx(){if(sa){var e=sa,t=ra;if(ra=sa=null,Xp(e),t)for(e=0;e<t.length;e++)Xp(t[e])}}function px(e,t){return e(t)}function mx(){}var Mc=!1;function hx(e,t,n){if(Mc)return e(t,n);Mc=!0;try{return px(e,t,n)}finally{Mc=!1,(sa!==null||ra!==null)&&(mx(),dx())}}function Dl(e,t){var n=e.stateNode;if(n===null)return null;var r=nc(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(se(231,t,typeof n));return n}var Cu=!1;if(ls)try{var Ja={};Object.defineProperty(Ja,"passive",{get:function(){Cu=!0}}),window.addEventListener("test",Ja,Ja),window.removeEventListener("test",Ja,Ja)}catch{Cu=!1}function nv(e,t,n,r,a,l,i,o,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(p){this.onError(p)}}var vl=!1,vo=null,bo=!1,Eu=null,sv={onError:function(e){vl=!0,vo=e}};function rv(e,t,n,r,a,l,i,o,u){vl=!1,vo=null,nv.apply(sv,arguments)}function av(e,t,n,r,a,l,i,o,u){if(rv.apply(this,arguments),vl){if(vl){var c=vo;vl=!1,vo=null}else throw Error(se(198));bo||(bo=!0,Eu=c)}}function Mr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function fx(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Zp(e){if(Mr(e)!==e)throw Error(se(188))}function lv(e){var t=e.alternate;if(!t){if(t=Mr(e),t===null)throw Error(se(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(a===null)break;var l=a.alternate;if(l===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===l.child){for(l=a.child;l;){if(l===n)return Zp(a),e;if(l===r)return Zp(a),t;l=l.sibling}throw Error(se(188))}if(n.return!==r.return)n=a,r=l;else{for(var i=!1,o=a.child;o;){if(o===n){i=!0,n=a,r=l;break}if(o===r){i=!0,r=a,n=l;break}o=o.sibling}if(!i){for(o=l.child;o;){if(o===n){i=!0,n=l,r=a;break}if(o===r){i=!0,r=l,n=a;break}o=o.sibling}if(!i)throw Error(se(189))}}if(n.alternate!==r)throw Error(se(190))}if(n.tag!==3)throw Error(se(188));return n.stateNode.current===n?e:t}function xx(e){return e=lv(e),e!==null?yx(e):null}function yx(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=yx(e);if(t!==null)return t;e=e.sibling}return null}var gx=Jt.unstable_scheduleCallback,em=Jt.unstable_cancelCallback,iv=Jt.unstable_shouldYield,ov=Jt.unstable_requestPaint,Je=Jt.unstable_now,cv=Jt.unstable_getCurrentPriorityLevel,Bd=Jt.unstable_ImmediatePriority,vx=Jt.unstable_UserBlockingPriority,jo=Jt.unstable_NormalPriority,uv=Jt.unstable_LowPriority,bx=Jt.unstable_IdlePriority,Xo=null,qn=null;function dv(e){if(qn&&typeof qn.onCommitFiberRoot=="function")try{qn.onCommitFiberRoot(Xo,e,void 0,(e.current.flags&128)===128)}catch{}}var Sn=Math.clz32?Math.clz32:hv,pv=Math.log,mv=Math.LN2;function hv(e){return e>>>=0,e===0?32:31-(pv(e)/mv|0)|0}var Ci=64,Ei=4194304;function ml(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function No(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,a=e.suspendedLanes,l=e.pingedLanes,i=n&268435455;if(i!==0){var o=i&~a;o!==0?r=ml(o):(l&=i,l!==0&&(r=ml(l)))}else i=n&~a,i!==0?r=ml(i):l!==0&&(r=ml(l));if(r===0)return 0;if(t!==0&&t!==r&&!(t&a)&&(a=r&-r,l=t&-t,a>=l||a===16&&(l&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Sn(t),a=1<<n,r|=e[n],t&=~a;return r}function fv(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xv(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,l=e.pendingLanes;0<l;){var i=31-Sn(l),o=1<<i,u=a[i];u===-1?(!(o&n)||o&r)&&(a[i]=fv(o,t)):u<=t&&(e.expiredLanes|=o),l&=~o}}function _u(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function jx(){var e=Ci;return Ci<<=1,!(Ci&4194240)&&(Ci=64),e}function Lc(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ti(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Sn(t),e[t]=n}function yv(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-Sn(n),l=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~l}}function zd(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Sn(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var Pe=0;function Nx(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Sx,Ud,wx,kx,Cx,Ru=!1,_i=[],Ls=null,Fs=null,Ts=null,Pl=new Map,Ml=new Map,ys=[],gv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function tm(e,t){switch(e){case"focusin":case"focusout":Ls=null;break;case"dragenter":case"dragleave":Fs=null;break;case"mouseover":case"mouseout":Ts=null;break;case"pointerover":case"pointerout":Pl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ml.delete(t.pointerId)}}function Xa(e,t,n,r,a,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:l,targetContainers:[a]},t!==null&&(t=si(t),t!==null&&Ud(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function vv(e,t,n,r,a){switch(t){case"focusin":return Ls=Xa(Ls,e,t,n,r,a),!0;case"dragenter":return Fs=Xa(Fs,e,t,n,r,a),!0;case"mouseover":return Ts=Xa(Ts,e,t,n,r,a),!0;case"pointerover":var l=a.pointerId;return Pl.set(l,Xa(Pl.get(l)||null,e,t,n,r,a)),!0;case"gotpointercapture":return l=a.pointerId,Ml.set(l,Xa(Ml.get(l)||null,e,t,n,r,a)),!0}return!1}function Ex(e){var t=ar(e.target);if(t!==null){var n=Mr(t);if(n!==null){if(t=n.tag,t===13){if(t=fx(n),t!==null){e.blockedOn=t,Cx(e.priority,function(){wx(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function eo(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Du(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);wu=r,n.target.dispatchEvent(r),wu=null}else return t=si(n),t!==null&&Ud(t),e.blockedOn=n,!1;t.shift()}return!0}function nm(e,t,n){eo(e)&&n.delete(t)}function bv(){Ru=!1,Ls!==null&&eo(Ls)&&(Ls=null),Fs!==null&&eo(Fs)&&(Fs=null),Ts!==null&&eo(Ts)&&(Ts=null),Pl.forEach(nm),Ml.forEach(nm)}function Za(e,t){e.blockedOn===t&&(e.blockedOn=null,Ru||(Ru=!0,Jt.unstable_scheduleCallback(Jt.unstable_NormalPriority,bv)))}function Ll(e){function t(a){return Za(a,e)}if(0<_i.length){Za(_i[0],e);for(var n=1;n<_i.length;n++){var r=_i[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Ls!==null&&Za(Ls,e),Fs!==null&&Za(Fs,e),Ts!==null&&Za(Ts,e),Pl.forEach(t),Ml.forEach(t),n=0;n<ys.length;n++)r=ys[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<ys.length&&(n=ys[0],n.blockedOn===null);)Ex(n),n.blockedOn===null&&ys.shift()}var aa=us.ReactCurrentBatchConfig,So=!0;function jv(e,t,n,r){var a=Pe,l=aa.transition;aa.transition=null;try{Pe=1,Qd(e,t,n,r)}finally{Pe=a,aa.transition=l}}function Nv(e,t,n,r){var a=Pe,l=aa.transition;aa.transition=null;try{Pe=4,Qd(e,t,n,r)}finally{Pe=a,aa.transition=l}}function Qd(e,t,n,r){if(So){var a=Du(e,t,n,r);if(a===null)Uc(e,t,r,wo,n),tm(e,r);else if(vv(a,e,t,n,r))r.stopPropagation();else if(tm(e,r),t&4&&-1<gv.indexOf(e)){for(;a!==null;){var l=si(a);if(l!==null&&Sx(l),l=Du(e,t,n,r),l===null&&Uc(e,t,r,wo,n),l===a)break;a=l}a!==null&&r.stopPropagation()}else Uc(e,t,r,null,n)}}var wo=null;function Du(e,t,n,r){if(wo=null,e=qd(r),e=ar(e),e!==null)if(t=Mr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=fx(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return wo=e,null}function _x(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(cv()){case Bd:return 1;case vx:return 4;case jo:case uv:return 16;case bx:return 536870912;default:return 16}default:return 16}}var Ds=null,Yd=null,to=null;function Rx(){if(to)return to;var e,t=Yd,n=t.length,r,a="value"in Ds?Ds.value:Ds.textContent,l=a.length;for(e=0;e<n&&t[e]===a[e];e++);var i=n-e;for(r=1;r<=i&&t[n-r]===a[l-r];r++);return to=a.slice(e,1<r?1-r:void 0)}function no(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ri(){return!0}function sm(){return!1}function Zt(e){function t(n,r,a,l,i){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=l,this.target=i,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(n=e[o],this[o]=n?n(l):l[o]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?Ri:sm,this.isPropagationStopped=sm,this}return He(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ri)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ri)},persist:function(){},isPersistent:Ri}),t}var Pa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hd=Zt(Pa),ni=He({},Pa,{view:0,detail:0}),Sv=Zt(ni),Fc,Tc,el,Zo=He({},ni,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vd,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==el&&(el&&e.type==="mousemove"?(Fc=e.screenX-el.screenX,Tc=e.screenY-el.screenY):Tc=Fc=0,el=e),Fc)},movementY:function(e){return"movementY"in e?e.movementY:Tc}}),rm=Zt(Zo),wv=He({},Zo,{dataTransfer:0}),kv=Zt(wv),Cv=He({},ni,{relatedTarget:0}),Oc=Zt(Cv),Ev=He({},Pa,{animationName:0,elapsedTime:0,pseudoElement:0}),_v=Zt(Ev),Rv=He({},Pa,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Dv=Zt(Rv),Pv=He({},Pa,{data:0}),am=Zt(Pv),Mv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Lv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tv(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Fv[e])?!!t[e]:!1}function Vd(){return Tv}var Ov=He({},ni,{key:function(e){if(e.key){var t=Mv[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=no(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Lv[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vd,charCode:function(e){return e.type==="keypress"?no(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?no(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),$v=Zt(Ov),Iv=He({},Zo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lm=Zt(Iv),Av=He({},ni,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vd}),qv=Zt(Av),Bv=He({},Pa,{propertyName:0,elapsedTime:0,pseudoElement:0}),zv=Zt(Bv),Uv=He({},Zo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Qv=Zt(Uv),Yv=[9,13,27,32],Wd=ls&&"CompositionEvent"in window,bl=null;ls&&"documentMode"in document&&(bl=document.documentMode);var Hv=ls&&"TextEvent"in window&&!bl,Dx=ls&&(!Wd||bl&&8<bl&&11>=bl),im=" ",om=!1;function Px(e,t){switch(e){case"keyup":return Yv.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mx(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Yr=!1;function Vv(e,t){switch(e){case"compositionend":return Mx(t);case"keypress":return t.which!==32?null:(om=!0,im);case"textInput":return e=t.data,e===im&&om?null:e;default:return null}}function Wv(e,t){if(Yr)return e==="compositionend"||!Wd&&Px(e,t)?(e=Rx(),to=Yd=Ds=null,Yr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Dx&&t.locale!=="ko"?null:t.data;default:return null}}var Kv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cm(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Kv[e.type]:t==="textarea"}function Lx(e,t,n,r){ux(r),t=ko(t,"onChange"),0<t.length&&(n=new Hd("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var jl=null,Fl=null;function Gv(e){Qx(e,0)}function ec(e){var t=Wr(e);if(sx(t))return e}function Jv(e,t){if(e==="change")return t}var Fx=!1;if(ls){var $c;if(ls){var Ic="oninput"in document;if(!Ic){var um=document.createElement("div");um.setAttribute("oninput","return;"),Ic=typeof um.oninput=="function"}$c=Ic}else $c=!1;Fx=$c&&(!document.documentMode||9<document.documentMode)}function dm(){jl&&(jl.detachEvent("onpropertychange",Tx),Fl=jl=null)}function Tx(e){if(e.propertyName==="value"&&ec(Fl)){var t=[];Lx(t,Fl,e,qd(e)),hx(Gv,t)}}function Xv(e,t,n){e==="focusin"?(dm(),jl=t,Fl=n,jl.attachEvent("onpropertychange",Tx)):e==="focusout"&&dm()}function Zv(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ec(Fl)}function eb(e,t){if(e==="click")return ec(t)}function tb(e,t){if(e==="input"||e==="change")return ec(t)}function nb(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var kn=typeof Object.is=="function"?Object.is:nb;function Tl(e,t){if(kn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!pu.call(t,a)||!kn(e[a],t[a]))return!1}return!0}function pm(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function mm(e,t){var n=pm(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=pm(n)}}function Ox(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Ox(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function $x(){for(var e=window,t=go();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=go(e.document)}return t}function Kd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function sb(e){var t=$x(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Ox(n.ownerDocument.documentElement,n)){if(r!==null&&Kd(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,l=Math.min(r.start,a);r=r.end===void 0?l:Math.min(r.end,a),!e.extend&&l>r&&(a=r,r=l,l=a),a=mm(n,l);var i=mm(n,r);a&&i&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),l>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var rb=ls&&"documentMode"in document&&11>=document.documentMode,Hr=null,Pu=null,Nl=null,Mu=!1;function hm(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Mu||Hr==null||Hr!==go(r)||(r=Hr,"selectionStart"in r&&Kd(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Nl&&Tl(Nl,r)||(Nl=r,r=ko(Pu,"onSelect"),0<r.length&&(t=new Hd("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Hr)))}function Di(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Vr={animationend:Di("Animation","AnimationEnd"),animationiteration:Di("Animation","AnimationIteration"),animationstart:Di("Animation","AnimationStart"),transitionend:Di("Transition","TransitionEnd")},Ac={},Ix={};ls&&(Ix=document.createElement("div").style,"AnimationEvent"in window||(delete Vr.animationend.animation,delete Vr.animationiteration.animation,delete Vr.animationstart.animation),"TransitionEvent"in window||delete Vr.transitionend.transition);function tc(e){if(Ac[e])return Ac[e];if(!Vr[e])return e;var t=Vr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Ix)return Ac[e]=t[n];return e}var Ax=tc("animationend"),qx=tc("animationiteration"),Bx=tc("animationstart"),zx=tc("transitionend"),Ux=new Map,fm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qs(e,t){Ux.set(e,t),Pr(t,[e])}for(var qc=0;qc<fm.length;qc++){var Bc=fm[qc],ab=Bc.toLowerCase(),lb=Bc[0].toUpperCase()+Bc.slice(1);Qs(ab,"on"+lb)}Qs(Ax,"onAnimationEnd");Qs(qx,"onAnimationIteration");Qs(Bx,"onAnimationStart");Qs("dblclick","onDoubleClick");Qs("focusin","onFocus");Qs("focusout","onBlur");Qs(zx,"onTransitionEnd");ja("onMouseEnter",["mouseout","mouseover"]);ja("onMouseLeave",["mouseout","mouseover"]);ja("onPointerEnter",["pointerout","pointerover"]);ja("onPointerLeave",["pointerout","pointerover"]);Pr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Pr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Pr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Pr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Pr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Pr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ib=new Set("cancel close invalid load scroll toggle".split(" ").concat(hl));function xm(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,av(r,t,void 0,e),e.currentTarget=null}function Qx(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var l=void 0;if(t)for(var i=r.length-1;0<=i;i--){var o=r[i],u=o.instance,c=o.currentTarget;if(o=o.listener,u!==l&&a.isPropagationStopped())break e;xm(a,o,c),l=u}else for(i=0;i<r.length;i++){if(o=r[i],u=o.instance,c=o.currentTarget,o=o.listener,u!==l&&a.isPropagationStopped())break e;xm(a,o,c),l=u}}}if(bo)throw e=Eu,bo=!1,Eu=null,e}function Ie(e,t){var n=t[$u];n===void 0&&(n=t[$u]=new Set);var r=e+"__bubble";n.has(r)||(Yx(t,e,2,!1),n.add(r))}function zc(e,t,n){var r=0;t&&(r|=4),Yx(n,e,r,t)}var Pi="_reactListening"+Math.random().toString(36).slice(2);function Ol(e){if(!e[Pi]){e[Pi]=!0,Xf.forEach(function(n){n!=="selectionchange"&&(ib.has(n)||zc(n,!1,e),zc(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Pi]||(t[Pi]=!0,zc("selectionchange",!1,t))}}function Yx(e,t,n,r){switch(_x(t)){case 1:var a=jv;break;case 4:a=Nv;break;default:a=Qd}n=a.bind(null,t,n,e),a=void 0,!Cu||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),r?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Uc(e,t,n,r,a){var l=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var o=r.stateNode.containerInfo;if(o===a||o.nodeType===8&&o.parentNode===a)break;if(i===4)for(i=r.return;i!==null;){var u=i.tag;if((u===3||u===4)&&(u=i.stateNode.containerInfo,u===a||u.nodeType===8&&u.parentNode===a))return;i=i.return}for(;o!==null;){if(i=ar(o),i===null)return;if(u=i.tag,u===5||u===6){r=l=i;continue e}o=o.parentNode}}r=r.return}hx(function(){var c=l,p=qd(n),d=[];e:{var m=Ux.get(e);if(m!==void 0){var x=Hd,h=e;switch(e){case"keypress":if(no(n)===0)break e;case"keydown":case"keyup":x=$v;break;case"focusin":h="focus",x=Oc;break;case"focusout":h="blur",x=Oc;break;case"beforeblur":case"afterblur":x=Oc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=rm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=kv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=qv;break;case Ax:case qx:case Bx:x=_v;break;case zx:x=zv;break;case"scroll":x=Sv;break;case"wheel":x=Qv;break;case"copy":case"cut":case"paste":x=Dv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=lm}var S=(t&4)!==0,C=!S&&e==="scroll",g=S?m!==null?m+"Capture":null:m;S=[];for(var f=c,b;f!==null;){b=f;var R=b.stateNode;if(b.tag===5&&R!==null&&(b=R,g!==null&&(R=Dl(f,g),R!=null&&S.push($l(f,R,b)))),C)break;f=f.return}0<S.length&&(m=new x(m,h,null,n,p),d.push({event:m,listeners:S}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",x=e==="mouseout"||e==="pointerout",m&&n!==wu&&(h=n.relatedTarget||n.fromElement)&&(ar(h)||h[is]))break e;if((x||m)&&(m=p.window===p?p:(m=p.ownerDocument)?m.defaultView||m.parentWindow:window,x?(h=n.relatedTarget||n.toElement,x=c,h=h?ar(h):null,h!==null&&(C=Mr(h),h!==C||h.tag!==5&&h.tag!==6)&&(h=null)):(x=null,h=c),x!==h)){if(S=rm,R="onMouseLeave",g="onMouseEnter",f="mouse",(e==="pointerout"||e==="pointerover")&&(S=lm,R="onPointerLeave",g="onPointerEnter",f="pointer"),C=x==null?m:Wr(x),b=h==null?m:Wr(h),m=new S(R,f+"leave",x,n,p),m.target=C,m.relatedTarget=b,R=null,ar(p)===c&&(S=new S(g,f+"enter",h,n,p),S.target=b,S.relatedTarget=C,R=S),C=R,x&&h)t:{for(S=x,g=h,f=0,b=S;b;b=Ir(b))f++;for(b=0,R=g;R;R=Ir(R))b++;for(;0<f-b;)S=Ir(S),f--;for(;0<b-f;)g=Ir(g),b--;for(;f--;){if(S===g||g!==null&&S===g.alternate)break t;S=Ir(S),g=Ir(g)}S=null}else S=null;x!==null&&ym(d,m,x,S,!1),h!==null&&C!==null&&ym(d,C,h,S,!0)}}e:{if(m=c?Wr(c):window,x=m.nodeName&&m.nodeName.toLowerCase(),x==="select"||x==="input"&&m.type==="file")var P=Jv;else if(cm(m))if(Fx)P=tb;else{P=Zv;var A=Xv}else(x=m.nodeName)&&x.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(P=eb);if(P&&(P=P(e,c))){Lx(d,P,n,p);break e}A&&A(e,m,c),e==="focusout"&&(A=m._wrapperState)&&A.controlled&&m.type==="number"&&vu(m,"number",m.value)}switch(A=c?Wr(c):window,e){case"focusin":(cm(A)||A.contentEditable==="true")&&(Hr=A,Pu=c,Nl=null);break;case"focusout":Nl=Pu=Hr=null;break;case"mousedown":Mu=!0;break;case"contextmenu":case"mouseup":case"dragend":Mu=!1,hm(d,n,p);break;case"selectionchange":if(rb)break;case"keydown":case"keyup":hm(d,n,p)}var v;if(Wd)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Yr?Px(e,n)&&(E="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(Dx&&n.locale!=="ko"&&(Yr||E!=="onCompositionStart"?E==="onCompositionEnd"&&Yr&&(v=Rx()):(Ds=p,Yd="value"in Ds?Ds.value:Ds.textContent,Yr=!0)),A=ko(c,E),0<A.length&&(E=new am(E,e,null,n,p),d.push({event:E,listeners:A}),v?E.data=v:(v=Mx(n),v!==null&&(E.data=v)))),(v=Hv?Vv(e,n):Wv(e,n))&&(c=ko(c,"onBeforeInput"),0<c.length&&(p=new am("onBeforeInput","beforeinput",null,n,p),d.push({event:p,listeners:c}),p.data=v))}Qx(d,t)})}function $l(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ko(e,t){for(var n=t+"Capture",r=[];e!==null;){var a=e,l=a.stateNode;a.tag===5&&l!==null&&(a=l,l=Dl(e,n),l!=null&&r.unshift($l(e,l,a)),l=Dl(e,t),l!=null&&r.push($l(e,l,a))),e=e.return}return r}function Ir(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function ym(e,t,n,r,a){for(var l=t._reactName,i=[];n!==null&&n!==r;){var o=n,u=o.alternate,c=o.stateNode;if(u!==null&&u===r)break;o.tag===5&&c!==null&&(o=c,a?(u=Dl(n,l),u!=null&&i.unshift($l(n,u,o))):a||(u=Dl(n,l),u!=null&&i.push($l(n,u,o)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var ob=/\r\n?/g,cb=/\u0000|\uFFFD/g;function gm(e){return(typeof e=="string"?e:""+e).replace(ob,`
`).replace(cb,"")}function Mi(e,t,n){if(t=gm(t),gm(e)!==t&&n)throw Error(se(425))}function Co(){}var Lu=null,Fu=null;function Tu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ou=typeof setTimeout=="function"?setTimeout:void 0,ub=typeof clearTimeout=="function"?clearTimeout:void 0,vm=typeof Promise=="function"?Promise:void 0,db=typeof queueMicrotask=="function"?queueMicrotask:typeof vm<"u"?function(e){return vm.resolve(null).then(e).catch(pb)}:Ou;function pb(e){setTimeout(function(){throw e})}function Qc(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){e.removeChild(a),Ll(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);Ll(t)}function Os(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function bm(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Ma=Math.random().toString(36).slice(2),An="__reactFiber$"+Ma,Il="__reactProps$"+Ma,is="__reactContainer$"+Ma,$u="__reactEvents$"+Ma,mb="__reactListeners$"+Ma,hb="__reactHandles$"+Ma;function ar(e){var t=e[An];if(t)return t;for(var n=e.parentNode;n;){if(t=n[is]||n[An]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=bm(e);e!==null;){if(n=e[An])return n;e=bm(e)}return t}e=n,n=e.parentNode}return null}function si(e){return e=e[An]||e[is],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Wr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(se(33))}function nc(e){return e[Il]||null}var Iu=[],Kr=-1;function Ys(e){return{current:e}}function Ae(e){0>Kr||(e.current=Iu[Kr],Iu[Kr]=null,Kr--)}function Fe(e,t){Kr++,Iu[Kr]=e.current,e.current=t}var Us={},St=Ys(Us),Bt=Ys(!1),Sr=Us;function Na(e,t){var n=e.type.contextTypes;if(!n)return Us;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a={},l;for(l in n)a[l]=t[l];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function zt(e){return e=e.childContextTypes,e!=null}function Eo(){Ae(Bt),Ae(St)}function jm(e,t,n){if(St.current!==Us)throw Error(se(168));Fe(St,t),Fe(Bt,n)}function Hx(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in t))throw Error(se(108,Xg(e)||"Unknown",a));return He({},n,r)}function _o(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Us,Sr=St.current,Fe(St,e),Fe(Bt,Bt.current),!0}function Nm(e,t,n){var r=e.stateNode;if(!r)throw Error(se(169));n?(e=Hx(e,t,Sr),r.__reactInternalMemoizedMergedChildContext=e,Ae(Bt),Ae(St),Fe(St,e)):Ae(Bt),Fe(Bt,n)}var Gn=null,sc=!1,Yc=!1;function Vx(e){Gn===null?Gn=[e]:Gn.push(e)}function fb(e){sc=!0,Vx(e)}function Hs(){if(!Yc&&Gn!==null){Yc=!0;var e=0,t=Pe;try{var n=Gn;for(Pe=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Gn=null,sc=!1}catch(a){throw Gn!==null&&(Gn=Gn.slice(e+1)),gx(Bd,Hs),a}finally{Pe=t,Yc=!1}}return null}var Gr=[],Jr=0,Ro=null,Do=0,an=[],ln=0,wr=null,ts=1,ns="";function sr(e,t){Gr[Jr++]=Do,Gr[Jr++]=Ro,Ro=e,Do=t}function Wx(e,t,n){an[ln++]=ts,an[ln++]=ns,an[ln++]=wr,wr=e;var r=ts;e=ns;var a=32-Sn(r)-1;r&=~(1<<a),n+=1;var l=32-Sn(t)+a;if(30<l){var i=a-a%5;l=(r&(1<<i)-1).toString(32),r>>=i,a-=i,ts=1<<32-Sn(t)+a|n<<a|r,ns=l+e}else ts=1<<l|n<<a|r,ns=e}function Gd(e){e.return!==null&&(sr(e,1),Wx(e,1,0))}function Jd(e){for(;e===Ro;)Ro=Gr[--Jr],Gr[Jr]=null,Do=Gr[--Jr],Gr[Jr]=null;for(;e===wr;)wr=an[--ln],an[ln]=null,ns=an[--ln],an[ln]=null,ts=an[--ln],an[ln]=null}var Gt=null,Kt=null,ze=!1,Nn=null;function Kx(e,t){var n=cn(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Sm(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Gt=e,Kt=Os(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Gt=e,Kt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=wr!==null?{id:ts,overflow:ns}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=cn(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Gt=e,Kt=null,!0):!1;default:return!1}}function Au(e){return(e.mode&1)!==0&&(e.flags&128)===0}function qu(e){if(ze){var t=Kt;if(t){var n=t;if(!Sm(e,t)){if(Au(e))throw Error(se(418));t=Os(n.nextSibling);var r=Gt;t&&Sm(e,t)?Kx(r,n):(e.flags=e.flags&-4097|2,ze=!1,Gt=e)}}else{if(Au(e))throw Error(se(418));e.flags=e.flags&-4097|2,ze=!1,Gt=e}}}function wm(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Gt=e}function Li(e){if(e!==Gt)return!1;if(!ze)return wm(e),ze=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Tu(e.type,e.memoizedProps)),t&&(t=Kt)){if(Au(e))throw Gx(),Error(se(418));for(;t;)Kx(e,t),t=Os(t.nextSibling)}if(wm(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(se(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Kt=Os(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Kt=null}}else Kt=Gt?Os(e.stateNode.nextSibling):null;return!0}function Gx(){for(var e=Kt;e;)e=Os(e.nextSibling)}function Sa(){Kt=Gt=null,ze=!1}function Xd(e){Nn===null?Nn=[e]:Nn.push(e)}var xb=us.ReactCurrentBatchConfig;function tl(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(se(309));var r=n.stateNode}if(!r)throw Error(se(147,e));var a=r,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(i){var o=a.refs;i===null?delete o[l]:o[l]=i},t._stringRef=l,t)}if(typeof e!="string")throw Error(se(284));if(!n._owner)throw Error(se(290,e))}return e}function Fi(e,t){throw e=Object.prototype.toString.call(t),Error(se(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function km(e){var t=e._init;return t(e._payload)}function Jx(e){function t(g,f){if(e){var b=g.deletions;b===null?(g.deletions=[f],g.flags|=16):b.push(f)}}function n(g,f){if(!e)return null;for(;f!==null;)t(g,f),f=f.sibling;return null}function r(g,f){for(g=new Map;f!==null;)f.key!==null?g.set(f.key,f):g.set(f.index,f),f=f.sibling;return g}function a(g,f){return g=qs(g,f),g.index=0,g.sibling=null,g}function l(g,f,b){return g.index=b,e?(b=g.alternate,b!==null?(b=b.index,b<f?(g.flags|=2,f):b):(g.flags|=2,f)):(g.flags|=1048576,f)}function i(g){return e&&g.alternate===null&&(g.flags|=2),g}function o(g,f,b,R){return f===null||f.tag!==6?(f=Xc(b,g.mode,R),f.return=g,f):(f=a(f,b),f.return=g,f)}function u(g,f,b,R){var P=b.type;return P===Qr?p(g,f,b.props.children,R,b.key):f!==null&&(f.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===fs&&km(P)===f.type)?(R=a(f,b.props),R.ref=tl(g,f,b),R.return=g,R):(R=co(b.type,b.key,b.props,null,g.mode,R),R.ref=tl(g,f,b),R.return=g,R)}function c(g,f,b,R){return f===null||f.tag!==4||f.stateNode.containerInfo!==b.containerInfo||f.stateNode.implementation!==b.implementation?(f=Zc(b,g.mode,R),f.return=g,f):(f=a(f,b.children||[]),f.return=g,f)}function p(g,f,b,R,P){return f===null||f.tag!==7?(f=jr(b,g.mode,R,P),f.return=g,f):(f=a(f,b),f.return=g,f)}function d(g,f,b){if(typeof f=="string"&&f!==""||typeof f=="number")return f=Xc(""+f,g.mode,b),f.return=g,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case Si:return b=co(f.type,f.key,f.props,null,g.mode,b),b.ref=tl(g,null,f),b.return=g,b;case Ur:return f=Zc(f,g.mode,b),f.return=g,f;case fs:var R=f._init;return d(g,R(f._payload),b)}if(pl(f)||Ga(f))return f=jr(f,g.mode,b,null),f.return=g,f;Fi(g,f)}return null}function m(g,f,b,R){var P=f!==null?f.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return P!==null?null:o(g,f,""+b,R);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Si:return b.key===P?u(g,f,b,R):null;case Ur:return b.key===P?c(g,f,b,R):null;case fs:return P=b._init,m(g,f,P(b._payload),R)}if(pl(b)||Ga(b))return P!==null?null:p(g,f,b,R,null);Fi(g,b)}return null}function x(g,f,b,R,P){if(typeof R=="string"&&R!==""||typeof R=="number")return g=g.get(b)||null,o(f,g,""+R,P);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Si:return g=g.get(R.key===null?b:R.key)||null,u(f,g,R,P);case Ur:return g=g.get(R.key===null?b:R.key)||null,c(f,g,R,P);case fs:var A=R._init;return x(g,f,b,A(R._payload),P)}if(pl(R)||Ga(R))return g=g.get(b)||null,p(f,g,R,P,null);Fi(f,R)}return null}function h(g,f,b,R){for(var P=null,A=null,v=f,E=f=0,T=null;v!==null&&E<b.length;E++){v.index>E?(T=v,v=null):T=v.sibling;var M=m(g,v,b[E],R);if(M===null){v===null&&(v=T);break}e&&v&&M.alternate===null&&t(g,v),f=l(M,f,E),A===null?P=M:A.sibling=M,A=M,v=T}if(E===b.length)return n(g,v),ze&&sr(g,E),P;if(v===null){for(;E<b.length;E++)v=d(g,b[E],R),v!==null&&(f=l(v,f,E),A===null?P=v:A.sibling=v,A=v);return ze&&sr(g,E),P}for(v=r(g,v);E<b.length;E++)T=x(v,g,E,b[E],R),T!==null&&(e&&T.alternate!==null&&v.delete(T.key===null?E:T.key),f=l(T,f,E),A===null?P=T:A.sibling=T,A=T);return e&&v.forEach(function(U){return t(g,U)}),ze&&sr(g,E),P}function S(g,f,b,R){var P=Ga(b);if(typeof P!="function")throw Error(se(150));if(b=P.call(b),b==null)throw Error(se(151));for(var A=P=null,v=f,E=f=0,T=null,M=b.next();v!==null&&!M.done;E++,M=b.next()){v.index>E?(T=v,v=null):T=v.sibling;var U=m(g,v,M.value,R);if(U===null){v===null&&(v=T);break}e&&v&&U.alternate===null&&t(g,v),f=l(U,f,E),A===null?P=U:A.sibling=U,A=U,v=T}if(M.done)return n(g,v),ze&&sr(g,E),P;if(v===null){for(;!M.done;E++,M=b.next())M=d(g,M.value,R),M!==null&&(f=l(M,f,E),A===null?P=M:A.sibling=M,A=M);return ze&&sr(g,E),P}for(v=r(g,v);!M.done;E++,M=b.next())M=x(v,g,E,M.value,R),M!==null&&(e&&M.alternate!==null&&v.delete(M.key===null?E:M.key),f=l(M,f,E),A===null?P=M:A.sibling=M,A=M);return e&&v.forEach(function(X){return t(g,X)}),ze&&sr(g,E),P}function C(g,f,b,R){if(typeof b=="object"&&b!==null&&b.type===Qr&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Si:e:{for(var P=b.key,A=f;A!==null;){if(A.key===P){if(P=b.type,P===Qr){if(A.tag===7){n(g,A.sibling),f=a(A,b.props.children),f.return=g,g=f;break e}}else if(A.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===fs&&km(P)===A.type){n(g,A.sibling),f=a(A,b.props),f.ref=tl(g,A,b),f.return=g,g=f;break e}n(g,A);break}else t(g,A);A=A.sibling}b.type===Qr?(f=jr(b.props.children,g.mode,R,b.key),f.return=g,g=f):(R=co(b.type,b.key,b.props,null,g.mode,R),R.ref=tl(g,f,b),R.return=g,g=R)}return i(g);case Ur:e:{for(A=b.key;f!==null;){if(f.key===A)if(f.tag===4&&f.stateNode.containerInfo===b.containerInfo&&f.stateNode.implementation===b.implementation){n(g,f.sibling),f=a(f,b.children||[]),f.return=g,g=f;break e}else{n(g,f);break}else t(g,f);f=f.sibling}f=Zc(b,g.mode,R),f.return=g,g=f}return i(g);case fs:return A=b._init,C(g,f,A(b._payload),R)}if(pl(b))return h(g,f,b,R);if(Ga(b))return S(g,f,b,R);Fi(g,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,f!==null&&f.tag===6?(n(g,f.sibling),f=a(f,b),f.return=g,g=f):(n(g,f),f=Xc(b,g.mode,R),f.return=g,g=f),i(g)):n(g,f)}return C}var wa=Jx(!0),Xx=Jx(!1),Po=Ys(null),Mo=null,Xr=null,Zd=null;function ep(){Zd=Xr=Mo=null}function tp(e){var t=Po.current;Ae(Po),e._currentValue=t}function Bu(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function la(e,t){Mo=e,Zd=Xr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(qt=!0),e.firstContext=null)}function dn(e){var t=e._currentValue;if(Zd!==e)if(e={context:e,memoizedValue:t,next:null},Xr===null){if(Mo===null)throw Error(se(308));Xr=e,Mo.dependencies={lanes:0,firstContext:e}}else Xr=Xr.next=e;return t}var lr=null;function np(e){lr===null?lr=[e]:lr.push(e)}function Zx(e,t,n,r){var a=t.interleaved;return a===null?(n.next=n,np(t)):(n.next=a.next,a.next=n),t.interleaved=n,os(e,r)}function os(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var xs=!1;function sp(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function e0(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function rs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function $s(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Ee&2){var a=r.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),r.pending=t,os(e,n)}return a=r.interleaved,a===null?(t.next=t,np(r)):(t.next=a.next,a.next=t),r.interleaved=t,os(e,n)}function so(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,zd(e,n)}}function Cm(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?a=l=i:l=l.next=i,n=n.next}while(n!==null);l===null?a=l=t:l=l.next=t}else a=l=t;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:l,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Lo(e,t,n,r){var a=e.updateQueue;xs=!1;var l=a.firstBaseUpdate,i=a.lastBaseUpdate,o=a.shared.pending;if(o!==null){a.shared.pending=null;var u=o,c=u.next;u.next=null,i===null?l=c:i.next=c,i=u;var p=e.alternate;p!==null&&(p=p.updateQueue,o=p.lastBaseUpdate,o!==i&&(o===null?p.firstBaseUpdate=c:o.next=c,p.lastBaseUpdate=u))}if(l!==null){var d=a.baseState;i=0,p=c=u=null,o=l;do{var m=o.lane,x=o.eventTime;if((r&m)===m){p!==null&&(p=p.next={eventTime:x,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var h=e,S=o;switch(m=t,x=n,S.tag){case 1:if(h=S.payload,typeof h=="function"){d=h.call(x,d,m);break e}d=h;break e;case 3:h.flags=h.flags&-65537|128;case 0:if(h=S.payload,m=typeof h=="function"?h.call(x,d,m):h,m==null)break e;d=He({},d,m);break e;case 2:xs=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,m=a.effects,m===null?a.effects=[o]:m.push(o))}else x={eventTime:x,lane:m,tag:o.tag,payload:o.payload,callback:o.callback,next:null},p===null?(c=p=x,u=d):p=p.next=x,i|=m;if(o=o.next,o===null){if(o=a.shared.pending,o===null)break;m=o,o=m.next,m.next=null,a.lastBaseUpdate=m,a.shared.pending=null}}while(!0);if(p===null&&(u=d),a.baseState=u,a.firstBaseUpdate=c,a.lastBaseUpdate=p,t=a.shared.interleaved,t!==null){a=t;do i|=a.lane,a=a.next;while(a!==t)}else l===null&&(a.shared.lanes=0);Cr|=i,e.lanes=i,e.memoizedState=d}}function Em(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error(se(191,a));a.call(r)}}}var ri={},Bn=Ys(ri),Al=Ys(ri),ql=Ys(ri);function ir(e){if(e===ri)throw Error(se(174));return e}function rp(e,t){switch(Fe(ql,t),Fe(Al,e),Fe(Bn,ri),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ju(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ju(t,e)}Ae(Bn),Fe(Bn,t)}function ka(){Ae(Bn),Ae(Al),Ae(ql)}function t0(e){ir(ql.current);var t=ir(Bn.current),n=ju(t,e.type);t!==n&&(Fe(Al,e),Fe(Bn,n))}function ap(e){Al.current===e&&(Ae(Bn),Ae(Al))}var Ue=Ys(0);function Fo(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Hc=[];function lp(){for(var e=0;e<Hc.length;e++)Hc[e]._workInProgressVersionPrimary=null;Hc.length=0}var ro=us.ReactCurrentDispatcher,Vc=us.ReactCurrentBatchConfig,kr=0,Qe=null,st=null,ct=null,To=!1,Sl=!1,Bl=0,yb=0;function gt(){throw Error(se(321))}function ip(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!kn(e[n],t[n]))return!1;return!0}function op(e,t,n,r,a,l){if(kr=l,Qe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ro.current=e===null||e.memoizedState===null?jb:Nb,e=n(r,a),Sl){l=0;do{if(Sl=!1,Bl=0,25<=l)throw Error(se(301));l+=1,ct=st=null,t.updateQueue=null,ro.current=Sb,e=n(r,a)}while(Sl)}if(ro.current=Oo,t=st!==null&&st.next!==null,kr=0,ct=st=Qe=null,To=!1,t)throw Error(se(300));return e}function cp(){var e=Bl!==0;return Bl=0,e}function Tn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ct===null?Qe.memoizedState=ct=e:ct=ct.next=e,ct}function pn(){if(st===null){var e=Qe.alternate;e=e!==null?e.memoizedState:null}else e=st.next;var t=ct===null?Qe.memoizedState:ct.next;if(t!==null)ct=t,st=e;else{if(e===null)throw Error(se(310));st=e,e={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},ct===null?Qe.memoizedState=ct=e:ct=ct.next=e}return ct}function zl(e,t){return typeof t=="function"?t(e):t}function Wc(e){var t=pn(),n=t.queue;if(n===null)throw Error(se(311));n.lastRenderedReducer=e;var r=st,a=r.baseQueue,l=n.pending;if(l!==null){if(a!==null){var i=a.next;a.next=l.next,l.next=i}r.baseQueue=a=l,n.pending=null}if(a!==null){l=a.next,r=r.baseState;var o=i=null,u=null,c=l;do{var p=c.lane;if((kr&p)===p)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:p,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(o=u=d,i=r):u=u.next=d,Qe.lanes|=p,Cr|=p}c=c.next}while(c!==null&&c!==l);u===null?i=r:u.next=o,kn(r,t.memoizedState)||(qt=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){a=e;do l=a.lane,Qe.lanes|=l,Cr|=l,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Kc(e){var t=pn(),n=t.queue;if(n===null)throw Error(se(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,l=t.memoizedState;if(a!==null){n.pending=null;var i=a=a.next;do l=e(l,i.action),i=i.next;while(i!==a);kn(l,t.memoizedState)||(qt=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),n.lastRenderedState=l}return[l,r]}function n0(){}function s0(e,t){var n=Qe,r=pn(),a=t(),l=!kn(r.memoizedState,a);if(l&&(r.memoizedState=a,qt=!0),r=r.queue,up(l0.bind(null,n,r,e),[e]),r.getSnapshot!==t||l||ct!==null&&ct.memoizedState.tag&1){if(n.flags|=2048,Ul(9,a0.bind(null,n,r,a,t),void 0,null),ut===null)throw Error(se(349));kr&30||r0(n,t,a)}return a}function r0(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Qe.updateQueue,t===null?(t={lastEffect:null,stores:null},Qe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function a0(e,t,n,r){t.value=n,t.getSnapshot=r,i0(t)&&o0(e)}function l0(e,t,n){return n(function(){i0(t)&&o0(e)})}function i0(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!kn(e,n)}catch{return!0}}function o0(e){var t=os(e,1);t!==null&&wn(t,e,1,-1)}function _m(e){var t=Tn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:zl,lastRenderedState:e},t.queue=e,e=e.dispatch=bb.bind(null,Qe,e),[t.memoizedState,e]}function Ul(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Qe.updateQueue,t===null?(t={lastEffect:null,stores:null},Qe.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function c0(){return pn().memoizedState}function ao(e,t,n,r){var a=Tn();Qe.flags|=e,a.memoizedState=Ul(1|t,n,void 0,r===void 0?null:r)}function rc(e,t,n,r){var a=pn();r=r===void 0?null:r;var l=void 0;if(st!==null){var i=st.memoizedState;if(l=i.destroy,r!==null&&ip(r,i.deps)){a.memoizedState=Ul(t,n,l,r);return}}Qe.flags|=e,a.memoizedState=Ul(1|t,n,l,r)}function Rm(e,t){return ao(8390656,8,e,t)}function up(e,t){return rc(2048,8,e,t)}function u0(e,t){return rc(4,2,e,t)}function d0(e,t){return rc(4,4,e,t)}function p0(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function m0(e,t,n){return n=n!=null?n.concat([e]):null,rc(4,4,p0.bind(null,t,e),n)}function dp(){}function h0(e,t){var n=pn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ip(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function f0(e,t){var n=pn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ip(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function x0(e,t,n){return kr&21?(kn(n,t)||(n=jx(),Qe.lanes|=n,Cr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,qt=!0),e.memoizedState=n)}function gb(e,t){var n=Pe;Pe=n!==0&&4>n?n:4,e(!0);var r=Vc.transition;Vc.transition={};try{e(!1),t()}finally{Pe=n,Vc.transition=r}}function y0(){return pn().memoizedState}function vb(e,t,n){var r=As(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},g0(e))v0(t,n);else if(n=Zx(e,t,n,r),n!==null){var a=Dt();wn(n,e,r,a),b0(n,t,r)}}function bb(e,t,n){var r=As(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(g0(e))v0(t,a);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var i=t.lastRenderedState,o=l(i,n);if(a.hasEagerState=!0,a.eagerState=o,kn(o,i)){var u=t.interleaved;u===null?(a.next=a,np(t)):(a.next=u.next,u.next=a),t.interleaved=a;return}}catch{}finally{}n=Zx(e,t,a,r),n!==null&&(a=Dt(),wn(n,e,r,a),b0(n,t,r))}}function g0(e){var t=e.alternate;return e===Qe||t!==null&&t===Qe}function v0(e,t){Sl=To=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function b0(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,zd(e,n)}}var Oo={readContext:dn,useCallback:gt,useContext:gt,useEffect:gt,useImperativeHandle:gt,useInsertionEffect:gt,useLayoutEffect:gt,useMemo:gt,useReducer:gt,useRef:gt,useState:gt,useDebugValue:gt,useDeferredValue:gt,useTransition:gt,useMutableSource:gt,useSyncExternalStore:gt,useId:gt,unstable_isNewReconciler:!1},jb={readContext:dn,useCallback:function(e,t){return Tn().memoizedState=[e,t===void 0?null:t],e},useContext:dn,useEffect:Rm,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ao(4194308,4,p0.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ao(4194308,4,e,t)},useInsertionEffect:function(e,t){return ao(4,2,e,t)},useMemo:function(e,t){var n=Tn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Tn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=vb.bind(null,Qe,e),[r.memoizedState,e]},useRef:function(e){var t=Tn();return e={current:e},t.memoizedState=e},useState:_m,useDebugValue:dp,useDeferredValue:function(e){return Tn().memoizedState=e},useTransition:function(){var e=_m(!1),t=e[0];return e=gb.bind(null,e[1]),Tn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Qe,a=Tn();if(ze){if(n===void 0)throw Error(se(407));n=n()}else{if(n=t(),ut===null)throw Error(se(349));kr&30||r0(r,t,n)}a.memoizedState=n;var l={value:n,getSnapshot:t};return a.queue=l,Rm(l0.bind(null,r,l,e),[e]),r.flags|=2048,Ul(9,a0.bind(null,r,l,n,t),void 0,null),n},useId:function(){var e=Tn(),t=ut.identifierPrefix;if(ze){var n=ns,r=ts;n=(r&~(1<<32-Sn(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Bl++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=yb++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Nb={readContext:dn,useCallback:h0,useContext:dn,useEffect:up,useImperativeHandle:m0,useInsertionEffect:u0,useLayoutEffect:d0,useMemo:f0,useReducer:Wc,useRef:c0,useState:function(){return Wc(zl)},useDebugValue:dp,useDeferredValue:function(e){var t=pn();return x0(t,st.memoizedState,e)},useTransition:function(){var e=Wc(zl)[0],t=pn().memoizedState;return[e,t]},useMutableSource:n0,useSyncExternalStore:s0,useId:y0,unstable_isNewReconciler:!1},Sb={readContext:dn,useCallback:h0,useContext:dn,useEffect:up,useImperativeHandle:m0,useInsertionEffect:u0,useLayoutEffect:d0,useMemo:f0,useReducer:Kc,useRef:c0,useState:function(){return Kc(zl)},useDebugValue:dp,useDeferredValue:function(e){var t=pn();return st===null?t.memoizedState=e:x0(t,st.memoizedState,e)},useTransition:function(){var e=Kc(zl)[0],t=pn().memoizedState;return[e,t]},useMutableSource:n0,useSyncExternalStore:s0,useId:y0,unstable_isNewReconciler:!1};function gn(e,t){if(e&&e.defaultProps){t=He({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function zu(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:He({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ac={isMounted:function(e){return(e=e._reactInternals)?Mr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Dt(),a=As(e),l=rs(r,a);l.payload=t,n!=null&&(l.callback=n),t=$s(e,l,a),t!==null&&(wn(t,e,a,r),so(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Dt(),a=As(e),l=rs(r,a);l.tag=1,l.payload=t,n!=null&&(l.callback=n),t=$s(e,l,a),t!==null&&(wn(t,e,a,r),so(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Dt(),r=As(e),a=rs(n,r);a.tag=2,t!=null&&(a.callback=t),t=$s(e,a,r),t!==null&&(wn(t,e,r,n),so(t,e,r))}};function Dm(e,t,n,r,a,l,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,l,i):t.prototype&&t.prototype.isPureReactComponent?!Tl(n,r)||!Tl(a,l):!0}function j0(e,t,n){var r=!1,a=Us,l=t.contextType;return typeof l=="object"&&l!==null?l=dn(l):(a=zt(t)?Sr:St.current,r=t.contextTypes,l=(r=r!=null)?Na(e,a):Us),t=new t(n,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ac,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=l),t}function Pm(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ac.enqueueReplaceState(t,t.state,null)}function Uu(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},sp(e);var l=t.contextType;typeof l=="object"&&l!==null?a.context=dn(l):(l=zt(t)?Sr:St.current,a.context=Na(e,l)),a.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(zu(e,t,l,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&ac.enqueueReplaceState(a,a.state,null),Lo(e,n,a,r),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Ca(e,t){try{var n="",r=t;do n+=Jg(r),r=r.return;while(r);var a=n}catch(l){a=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:a,digest:null}}function Gc(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Qu(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var wb=typeof WeakMap=="function"?WeakMap:Map;function N0(e,t,n){n=rs(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Io||(Io=!0,ed=r),Qu(e,t)},n}function S0(e,t,n){n=rs(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){Qu(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){Qu(e,t),typeof r!="function"&&(Is===null?Is=new Set([this]):Is.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),n}function Mm(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new wb;var a=new Set;r.set(t,a)}else a=r.get(t),a===void 0&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=Ib.bind(null,e,t,n),t.then(e,e))}function Lm(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Fm(e,t,n,r,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=rs(-1,1),t.tag=2,$s(n,t,1))),n.lanes|=1),e)}var kb=us.ReactCurrentOwner,qt=!1;function Et(e,t,n,r){t.child=e===null?Xx(t,null,n,r):wa(t,e.child,n,r)}function Tm(e,t,n,r,a){n=n.render;var l=t.ref;return la(t,a),r=op(e,t,n,r,l,a),n=cp(),e!==null&&!qt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,cs(e,t,a)):(ze&&n&&Gd(t),t.flags|=1,Et(e,t,r,a),t.child)}function Om(e,t,n,r,a){if(e===null){var l=n.type;return typeof l=="function"&&!vp(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=l,w0(e,t,l,r,a)):(e=co(n.type,null,r,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&a)){var i=l.memoizedProps;if(n=n.compare,n=n!==null?n:Tl,n(i,r)&&e.ref===t.ref)return cs(e,t,a)}return t.flags|=1,e=qs(l,r),e.ref=t.ref,e.return=t,t.child=e}function w0(e,t,n,r,a){if(e!==null){var l=e.memoizedProps;if(Tl(l,r)&&e.ref===t.ref)if(qt=!1,t.pendingProps=r=l,(e.lanes&a)!==0)e.flags&131072&&(qt=!0);else return t.lanes=e.lanes,cs(e,t,a)}return Yu(e,t,n,r,a)}function k0(e,t,n){var r=t.pendingProps,a=r.children,l=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Fe(ea,Vt),Vt|=n;else{if(!(n&1073741824))return e=l!==null?l.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Fe(ea,Vt),Vt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=l!==null?l.baseLanes:n,Fe(ea,Vt),Vt|=r}else l!==null?(r=l.baseLanes|n,t.memoizedState=null):r=n,Fe(ea,Vt),Vt|=r;return Et(e,t,a,n),t.child}function C0(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Yu(e,t,n,r,a){var l=zt(n)?Sr:St.current;return l=Na(t,l),la(t,a),n=op(e,t,n,r,l,a),r=cp(),e!==null&&!qt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,cs(e,t,a)):(ze&&r&&Gd(t),t.flags|=1,Et(e,t,n,a),t.child)}function $m(e,t,n,r,a){if(zt(n)){var l=!0;_o(t)}else l=!1;if(la(t,a),t.stateNode===null)lo(e,t),j0(t,n,r),Uu(t,n,r,a),r=!0;else if(e===null){var i=t.stateNode,o=t.memoizedProps;i.props=o;var u=i.context,c=n.contextType;typeof c=="object"&&c!==null?c=dn(c):(c=zt(n)?Sr:St.current,c=Na(t,c));var p=n.getDerivedStateFromProps,d=typeof p=="function"||typeof i.getSnapshotBeforeUpdate=="function";d||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==r||u!==c)&&Pm(t,i,r,c),xs=!1;var m=t.memoizedState;i.state=m,Lo(t,r,i,a),u=t.memoizedState,o!==r||m!==u||Bt.current||xs?(typeof p=="function"&&(zu(t,n,p,r),u=t.memoizedState),(o=xs||Dm(t,n,o,r,m,u,c))?(d||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),i.props=r,i.state=u,i.context=c,r=o):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,e0(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:gn(t.type,o),i.props=c,d=t.pendingProps,m=i.context,u=n.contextType,typeof u=="object"&&u!==null?u=dn(u):(u=zt(n)?Sr:St.current,u=Na(t,u));var x=n.getDerivedStateFromProps;(p=typeof x=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==d||m!==u)&&Pm(t,i,r,u),xs=!1,m=t.memoizedState,i.state=m,Lo(t,r,i,a);var h=t.memoizedState;o!==d||m!==h||Bt.current||xs?(typeof x=="function"&&(zu(t,n,x,r),h=t.memoizedState),(c=xs||Dm(t,n,c,r,m,h,u)||!1)?(p||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,h,u),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,h,u)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=h),i.props=r,i.state=h,i.context=u,r=c):(typeof i.componentDidUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),r=!1)}return Hu(e,t,n,r,l,a)}function Hu(e,t,n,r,a,l){C0(e,t);var i=(t.flags&128)!==0;if(!r&&!i)return a&&Nm(t,n,!1),cs(e,t,l);r=t.stateNode,kb.current=t;var o=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&i?(t.child=wa(t,e.child,null,l),t.child=wa(t,null,o,l)):Et(e,t,o,l),t.memoizedState=r.state,a&&Nm(t,n,!0),t.child}function E0(e){var t=e.stateNode;t.pendingContext?jm(e,t.pendingContext,t.pendingContext!==t.context):t.context&&jm(e,t.context,!1),rp(e,t.containerInfo)}function Im(e,t,n,r,a){return Sa(),Xd(a),t.flags|=256,Et(e,t,n,r),t.child}var Vu={dehydrated:null,treeContext:null,retryLane:0};function Wu(e){return{baseLanes:e,cachePool:null,transitions:null}}function _0(e,t,n){var r=t.pendingProps,a=Ue.current,l=!1,i=(t.flags&128)!==0,o;if((o=i)||(o=e!==null&&e.memoizedState===null?!1:(a&2)!==0),o?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Fe(Ue,a&1),e===null)return qu(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=r.children,e=r.fallback,l?(r=t.mode,l=t.child,i={mode:"hidden",children:i},!(r&1)&&l!==null?(l.childLanes=0,l.pendingProps=i):l=oc(i,r,0,null),e=jr(e,r,n,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=Wu(n),t.memoizedState=Vu,e):pp(t,i));if(a=e.memoizedState,a!==null&&(o=a.dehydrated,o!==null))return Cb(e,t,i,r,o,a,n);if(l){l=r.fallback,i=t.mode,a=e.child,o=a.sibling;var u={mode:"hidden",children:r.children};return!(i&1)&&t.child!==a?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=qs(a,u),r.subtreeFlags=a.subtreeFlags&14680064),o!==null?l=qs(o,l):(l=jr(l,i,n,null),l.flags|=2),l.return=t,r.return=t,r.sibling=l,t.child=r,r=l,l=t.child,i=e.child.memoizedState,i=i===null?Wu(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},l.memoizedState=i,l.childLanes=e.childLanes&~n,t.memoizedState=Vu,r}return l=e.child,e=l.sibling,r=qs(l,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function pp(e,t){return t=oc({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ti(e,t,n,r){return r!==null&&Xd(r),wa(t,e.child,null,n),e=pp(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Cb(e,t,n,r,a,l,i){if(n)return t.flags&256?(t.flags&=-257,r=Gc(Error(se(422))),Ti(e,t,i,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=r.fallback,a=t.mode,r=oc({mode:"visible",children:r.children},a,0,null),l=jr(l,a,i,null),l.flags|=2,r.return=t,l.return=t,r.sibling=l,t.child=r,t.mode&1&&wa(t,e.child,null,i),t.child.memoizedState=Wu(i),t.memoizedState=Vu,l);if(!(t.mode&1))return Ti(e,t,i,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var o=r.dgst;return r=o,l=Error(se(419)),r=Gc(l,r,void 0),Ti(e,t,i,r)}if(o=(i&e.childLanes)!==0,qt||o){if(r=ut,r!==null){switch(i&-i){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|i)?0:a,a!==0&&a!==l.retryLane&&(l.retryLane=a,os(e,a),wn(r,e,a,-1))}return gp(),r=Gc(Error(se(421))),Ti(e,t,i,r)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=Ab.bind(null,e),a._reactRetry=t,null):(e=l.treeContext,Kt=Os(a.nextSibling),Gt=t,ze=!0,Nn=null,e!==null&&(an[ln++]=ts,an[ln++]=ns,an[ln++]=wr,ts=e.id,ns=e.overflow,wr=t),t=pp(t,r.children),t.flags|=4096,t)}function Am(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Bu(e.return,t,n)}function Jc(e,t,n,r,a){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=r,l.tail=n,l.tailMode=a)}function R0(e,t,n){var r=t.pendingProps,a=r.revealOrder,l=r.tail;if(Et(e,t,r.children,n),r=Ue.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Am(e,n,t);else if(e.tag===19)Am(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Fe(Ue,r),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&Fo(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Jc(t,!1,a,n,l);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Fo(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Jc(t,!0,n,null,l);break;case"together":Jc(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function lo(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function cs(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Cr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(se(153));if(t.child!==null){for(e=t.child,n=qs(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=qs(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Eb(e,t,n){switch(t.tag){case 3:E0(t),Sa();break;case 5:t0(t);break;case 1:zt(t.type)&&_o(t);break;case 4:rp(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Fe(Po,r._currentValue),r._currentValue=a;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Fe(Ue,Ue.current&1),t.flags|=128,null):n&t.child.childLanes?_0(e,t,n):(Fe(Ue,Ue.current&1),e=cs(e,t,n),e!==null?e.sibling:null);Fe(Ue,Ue.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return R0(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Fe(Ue,Ue.current),r)break;return null;case 22:case 23:return t.lanes=0,k0(e,t,n)}return cs(e,t,n)}var D0,Ku,P0,M0;D0=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ku=function(){};P0=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,ir(Bn.current);var l=null;switch(n){case"input":a=yu(e,a),r=yu(e,r),l=[];break;case"select":a=He({},a,{value:void 0}),r=He({},r,{value:void 0}),l=[];break;case"textarea":a=bu(e,a),r=bu(e,r),l=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Co)}Nu(n,r);var i;n=null;for(c in a)if(!r.hasOwnProperty(c)&&a.hasOwnProperty(c)&&a[c]!=null)if(c==="style"){var o=a[c];for(i in o)o.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(_l.hasOwnProperty(c)?l||(l=[]):(l=l||[]).push(c,null));for(c in r){var u=r[c];if(o=a!=null?a[c]:void 0,r.hasOwnProperty(c)&&u!==o&&(u!=null||o!=null))if(c==="style")if(o){for(i in o)!o.hasOwnProperty(i)||u&&u.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in u)u.hasOwnProperty(i)&&o[i]!==u[i]&&(n||(n={}),n[i]=u[i])}else n||(l||(l=[]),l.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,o=o?o.__html:void 0,u!=null&&o!==u&&(l=l||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(l=l||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(_l.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&Ie("scroll",e),l||o===u||(l=[])):(l=l||[]).push(c,u))}n&&(l=l||[]).push("style",n);var c=l;(t.updateQueue=c)&&(t.flags|=4)}};M0=function(e,t,n,r){n!==r&&(t.flags|=4)};function nl(e,t){if(!ze)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function vt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function _b(e,t,n){var r=t.pendingProps;switch(Jd(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vt(t),null;case 1:return zt(t.type)&&Eo(),vt(t),null;case 3:return r=t.stateNode,ka(),Ae(Bt),Ae(St),lp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Li(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Nn!==null&&(sd(Nn),Nn=null))),Ku(e,t),vt(t),null;case 5:ap(t);var a=ir(ql.current);if(n=t.type,e!==null&&t.stateNode!=null)P0(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(se(166));return vt(t),null}if(e=ir(Bn.current),Li(t)){r=t.stateNode,n=t.type;var l=t.memoizedProps;switch(r[An]=t,r[Il]=l,e=(t.mode&1)!==0,n){case"dialog":Ie("cancel",r),Ie("close",r);break;case"iframe":case"object":case"embed":Ie("load",r);break;case"video":case"audio":for(a=0;a<hl.length;a++)Ie(hl[a],r);break;case"source":Ie("error",r);break;case"img":case"image":case"link":Ie("error",r),Ie("load",r);break;case"details":Ie("toggle",r);break;case"input":Wp(r,l),Ie("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!l.multiple},Ie("invalid",r);break;case"textarea":Gp(r,l),Ie("invalid",r)}Nu(n,l),a=null;for(var i in l)if(l.hasOwnProperty(i)){var o=l[i];i==="children"?typeof o=="string"?r.textContent!==o&&(l.suppressHydrationWarning!==!0&&Mi(r.textContent,o,e),a=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(l.suppressHydrationWarning!==!0&&Mi(r.textContent,o,e),a=["children",""+o]):_l.hasOwnProperty(i)&&o!=null&&i==="onScroll"&&Ie("scroll",r)}switch(n){case"input":wi(r),Kp(r,l,!0);break;case"textarea":wi(r),Jp(r);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(r.onclick=Co)}r=a,t.updateQueue=r,r!==null&&(t.flags|=4)}else{i=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=lx(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=i.createElement(n,{is:r.is}):(e=i.createElement(n),n==="select"&&(i=e,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):e=i.createElementNS(e,n),e[An]=t,e[Il]=r,D0(e,t,!1,!1),t.stateNode=e;e:{switch(i=Su(n,r),n){case"dialog":Ie("cancel",e),Ie("close",e),a=r;break;case"iframe":case"object":case"embed":Ie("load",e),a=r;break;case"video":case"audio":for(a=0;a<hl.length;a++)Ie(hl[a],e);a=r;break;case"source":Ie("error",e),a=r;break;case"img":case"image":case"link":Ie("error",e),Ie("load",e),a=r;break;case"details":Ie("toggle",e),a=r;break;case"input":Wp(e,r),a=yu(e,r),Ie("invalid",e);break;case"option":a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=He({},r,{value:void 0}),Ie("invalid",e);break;case"textarea":Gp(e,r),a=bu(e,r),Ie("invalid",e);break;default:a=r}Nu(n,a),o=a;for(l in o)if(o.hasOwnProperty(l)){var u=o[l];l==="style"?cx(e,u):l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&ix(e,u)):l==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Rl(e,u):typeof u=="number"&&Rl(e,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(_l.hasOwnProperty(l)?u!=null&&l==="onScroll"&&Ie("scroll",e):u!=null&&Od(e,l,u,i))}switch(n){case"input":wi(e),Kp(e,r,!1);break;case"textarea":wi(e),Jp(e);break;case"option":r.value!=null&&e.setAttribute("value",""+zs(r.value));break;case"select":e.multiple=!!r.multiple,l=r.value,l!=null?na(e,!!r.multiple,l,!1):r.defaultValue!=null&&na(e,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Co)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return vt(t),null;case 6:if(e&&t.stateNode!=null)M0(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(se(166));if(n=ir(ql.current),ir(Bn.current),Li(t)){if(r=t.stateNode,n=t.memoizedProps,r[An]=t,(l=r.nodeValue!==n)&&(e=Gt,e!==null))switch(e.tag){case 3:Mi(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Mi(r.nodeValue,n,(e.mode&1)!==0)}l&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[An]=t,t.stateNode=r}return vt(t),null;case 13:if(Ae(Ue),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ze&&Kt!==null&&t.mode&1&&!(t.flags&128))Gx(),Sa(),t.flags|=98560,l=!1;else if(l=Li(t),r!==null&&r.dehydrated!==null){if(e===null){if(!l)throw Error(se(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(se(317));l[An]=t}else Sa(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;vt(t),l=!1}else Nn!==null&&(sd(Nn),Nn=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ue.current&1?at===0&&(at=3):gp())),t.updateQueue!==null&&(t.flags|=4),vt(t),null);case 4:return ka(),Ku(e,t),e===null&&Ol(t.stateNode.containerInfo),vt(t),null;case 10:return tp(t.type._context),vt(t),null;case 17:return zt(t.type)&&Eo(),vt(t),null;case 19:if(Ae(Ue),l=t.memoizedState,l===null)return vt(t),null;if(r=(t.flags&128)!==0,i=l.rendering,i===null)if(r)nl(l,!1);else{if(at!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=Fo(e),i!==null){for(t.flags|=128,nl(l,!1),r=i.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)l=n,e=r,l.flags&=14680066,i=l.alternate,i===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,l.type=i.type,e=i.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Fe(Ue,Ue.current&1|2),t.child}e=e.sibling}l.tail!==null&&Je()>Ea&&(t.flags|=128,r=!0,nl(l,!1),t.lanes=4194304)}else{if(!r)if(e=Fo(i),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),nl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!i.alternate&&!ze)return vt(t),null}else 2*Je()-l.renderingStartTime>Ea&&n!==1073741824&&(t.flags|=128,r=!0,nl(l,!1),t.lanes=4194304);l.isBackwards?(i.sibling=t.child,t.child=i):(n=l.last,n!==null?n.sibling=i:t.child=i,l.last=i)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Je(),t.sibling=null,n=Ue.current,Fe(Ue,r?n&1|2:n&1),t):(vt(t),null);case 22:case 23:return yp(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Vt&1073741824&&(vt(t),t.subtreeFlags&6&&(t.flags|=8192)):vt(t),null;case 24:return null;case 25:return null}throw Error(se(156,t.tag))}function Rb(e,t){switch(Jd(t),t.tag){case 1:return zt(t.type)&&Eo(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ka(),Ae(Bt),Ae(St),lp(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return ap(t),null;case 13:if(Ae(Ue),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(se(340));Sa()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ae(Ue),null;case 4:return ka(),null;case 10:return tp(t.type._context),null;case 22:case 23:return yp(),null;case 24:return null;default:return null}}var Oi=!1,bt=!1,Db=typeof WeakSet=="function"?WeakSet:Set,oe=null;function Zr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ke(e,t,r)}else n.current=null}function Gu(e,t,n){try{n()}catch(r){Ke(e,t,r)}}var qm=!1;function Pb(e,t){if(Lu=So,e=$x(),Kd(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,l=r.focusNode;r=r.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var i=0,o=-1,u=-1,c=0,p=0,d=e,m=null;t:for(;;){for(var x;d!==n||a!==0&&d.nodeType!==3||(o=i+a),d!==l||r!==0&&d.nodeType!==3||(u=i+r),d.nodeType===3&&(i+=d.nodeValue.length),(x=d.firstChild)!==null;)m=d,d=x;for(;;){if(d===e)break t;if(m===n&&++c===a&&(o=i),m===l&&++p===r&&(u=i),(x=d.nextSibling)!==null)break;d=m,m=d.parentNode}d=x}n=o===-1||u===-1?null:{start:o,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Fu={focusedElem:e,selectionRange:n},So=!1,oe=t;oe!==null;)if(t=oe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,oe=e;else for(;oe!==null;){t=oe;try{var h=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(h!==null){var S=h.memoizedProps,C=h.memoizedState,g=t.stateNode,f=g.getSnapshotBeforeUpdate(t.elementType===t.type?S:gn(t.type,S),C);g.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(se(163))}}catch(R){Ke(t,t.return,R)}if(e=t.sibling,e!==null){e.return=t.return,oe=e;break}oe=t.return}return h=qm,qm=!1,h}function wl(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var l=a.destroy;a.destroy=void 0,l!==void 0&&Gu(t,n,l)}a=a.next}while(a!==r)}}function lc(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Ju(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function L0(e){var t=e.alternate;t!==null&&(e.alternate=null,L0(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[An],delete t[Il],delete t[$u],delete t[mb],delete t[hb])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function F0(e){return e.tag===5||e.tag===3||e.tag===4}function Bm(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||F0(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Xu(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Co));else if(r!==4&&(e=e.child,e!==null))for(Xu(e,t,n),e=e.sibling;e!==null;)Xu(e,t,n),e=e.sibling}function Zu(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Zu(e,t,n),e=e.sibling;e!==null;)Zu(e,t,n),e=e.sibling}var mt=null,jn=!1;function ms(e,t,n){for(n=n.child;n!==null;)T0(e,t,n),n=n.sibling}function T0(e,t,n){if(qn&&typeof qn.onCommitFiberUnmount=="function")try{qn.onCommitFiberUnmount(Xo,n)}catch{}switch(n.tag){case 5:bt||Zr(n,t);case 6:var r=mt,a=jn;mt=null,ms(e,t,n),mt=r,jn=a,mt!==null&&(jn?(e=mt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):mt.removeChild(n.stateNode));break;case 18:mt!==null&&(jn?(e=mt,n=n.stateNode,e.nodeType===8?Qc(e.parentNode,n):e.nodeType===1&&Qc(e,n),Ll(e)):Qc(mt,n.stateNode));break;case 4:r=mt,a=jn,mt=n.stateNode.containerInfo,jn=!0,ms(e,t,n),mt=r,jn=a;break;case 0:case 11:case 14:case 15:if(!bt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var l=a,i=l.destroy;l=l.tag,i!==void 0&&(l&2||l&4)&&Gu(n,t,i),a=a.next}while(a!==r)}ms(e,t,n);break;case 1:if(!bt&&(Zr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Ke(n,t,o)}ms(e,t,n);break;case 21:ms(e,t,n);break;case 22:n.mode&1?(bt=(r=bt)||n.memoizedState!==null,ms(e,t,n),bt=r):ms(e,t,n);break;default:ms(e,t,n)}}function zm(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Db),t.forEach(function(r){var a=qb.bind(null,e,r);n.has(r)||(n.add(r),r.then(a,a))})}}function yn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var l=e,i=t,o=i;e:for(;o!==null;){switch(o.tag){case 5:mt=o.stateNode,jn=!1;break e;case 3:mt=o.stateNode.containerInfo,jn=!0;break e;case 4:mt=o.stateNode.containerInfo,jn=!0;break e}o=o.return}if(mt===null)throw Error(se(160));T0(l,i,a),mt=null,jn=!1;var u=a.alternate;u!==null&&(u.return=null),a.return=null}catch(c){Ke(a,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)O0(t,e),t=t.sibling}function O0(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(yn(t,e),Mn(e),r&4){try{wl(3,e,e.return),lc(3,e)}catch(S){Ke(e,e.return,S)}try{wl(5,e,e.return)}catch(S){Ke(e,e.return,S)}}break;case 1:yn(t,e),Mn(e),r&512&&n!==null&&Zr(n,n.return);break;case 5:if(yn(t,e),Mn(e),r&512&&n!==null&&Zr(n,n.return),e.flags&32){var a=e.stateNode;try{Rl(a,"")}catch(S){Ke(e,e.return,S)}}if(r&4&&(a=e.stateNode,a!=null)){var l=e.memoizedProps,i=n!==null?n.memoizedProps:l,o=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{o==="input"&&l.type==="radio"&&l.name!=null&&rx(a,l),Su(o,i);var c=Su(o,l);for(i=0;i<u.length;i+=2){var p=u[i],d=u[i+1];p==="style"?cx(a,d):p==="dangerouslySetInnerHTML"?ix(a,d):p==="children"?Rl(a,d):Od(a,p,d,c)}switch(o){case"input":gu(a,l);break;case"textarea":ax(a,l);break;case"select":var m=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!l.multiple;var x=l.value;x!=null?na(a,!!l.multiple,x,!1):m!==!!l.multiple&&(l.defaultValue!=null?na(a,!!l.multiple,l.defaultValue,!0):na(a,!!l.multiple,l.multiple?[]:"",!1))}a[Il]=l}catch(S){Ke(e,e.return,S)}}break;case 6:if(yn(t,e),Mn(e),r&4){if(e.stateNode===null)throw Error(se(162));a=e.stateNode,l=e.memoizedProps;try{a.nodeValue=l}catch(S){Ke(e,e.return,S)}}break;case 3:if(yn(t,e),Mn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ll(t.containerInfo)}catch(S){Ke(e,e.return,S)}break;case 4:yn(t,e),Mn(e);break;case 13:yn(t,e),Mn(e),a=e.child,a.flags&8192&&(l=a.memoizedState!==null,a.stateNode.isHidden=l,!l||a.alternate!==null&&a.alternate.memoizedState!==null||(fp=Je())),r&4&&zm(e);break;case 22:if(p=n!==null&&n.memoizedState!==null,e.mode&1?(bt=(c=bt)||p,yn(t,e),bt=c):yn(t,e),Mn(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!p&&e.mode&1)for(oe=e,p=e.child;p!==null;){for(d=oe=p;oe!==null;){switch(m=oe,x=m.child,m.tag){case 0:case 11:case 14:case 15:wl(4,m,m.return);break;case 1:Zr(m,m.return);var h=m.stateNode;if(typeof h.componentWillUnmount=="function"){r=m,n=m.return;try{t=r,h.props=t.memoizedProps,h.state=t.memoizedState,h.componentWillUnmount()}catch(S){Ke(r,n,S)}}break;case 5:Zr(m,m.return);break;case 22:if(m.memoizedState!==null){Qm(d);continue}}x!==null?(x.return=m,oe=x):Qm(d)}p=p.sibling}e:for(p=null,d=e;;){if(d.tag===5){if(p===null){p=d;try{a=d.stateNode,c?(l=a.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(o=d.stateNode,u=d.memoizedProps.style,i=u!=null&&u.hasOwnProperty("display")?u.display:null,o.style.display=ox("display",i))}catch(S){Ke(e,e.return,S)}}}else if(d.tag===6){if(p===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(S){Ke(e,e.return,S)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;p===d&&(p=null),d=d.return}p===d&&(p=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:yn(t,e),Mn(e),r&4&&zm(e);break;case 21:break;default:yn(t,e),Mn(e)}}function Mn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(F0(n)){var r=n;break e}n=n.return}throw Error(se(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(Rl(a,""),r.flags&=-33);var l=Bm(e);Zu(e,l,a);break;case 3:case 4:var i=r.stateNode.containerInfo,o=Bm(e);Xu(e,o,i);break;default:throw Error(se(161))}}catch(u){Ke(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Mb(e,t,n){oe=e,$0(e)}function $0(e,t,n){for(var r=(e.mode&1)!==0;oe!==null;){var a=oe,l=a.child;if(a.tag===22&&r){var i=a.memoizedState!==null||Oi;if(!i){var o=a.alternate,u=o!==null&&o.memoizedState!==null||bt;o=Oi;var c=bt;if(Oi=i,(bt=u)&&!c)for(oe=a;oe!==null;)i=oe,u=i.child,i.tag===22&&i.memoizedState!==null?Ym(a):u!==null?(u.return=i,oe=u):Ym(a);for(;l!==null;)oe=l,$0(l),l=l.sibling;oe=a,Oi=o,bt=c}Um(e)}else a.subtreeFlags&8772&&l!==null?(l.return=a,oe=l):Um(e)}}function Um(e){for(;oe!==null;){var t=oe;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:bt||lc(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!bt)if(n===null)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:gn(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&Em(t,l,r);break;case 3:var i=t.updateQueue;if(i!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Em(t,i,n)}break;case 5:var o=t.stateNode;if(n===null&&t.flags&4){n=o;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var p=c.memoizedState;if(p!==null){var d=p.dehydrated;d!==null&&Ll(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(se(163))}bt||t.flags&512&&Ju(t)}catch(m){Ke(t,t.return,m)}}if(t===e){oe=null;break}if(n=t.sibling,n!==null){n.return=t.return,oe=n;break}oe=t.return}}function Qm(e){for(;oe!==null;){var t=oe;if(t===e){oe=null;break}var n=t.sibling;if(n!==null){n.return=t.return,oe=n;break}oe=t.return}}function Ym(e){for(;oe!==null;){var t=oe;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{lc(4,t)}catch(u){Ke(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var a=t.return;try{r.componentDidMount()}catch(u){Ke(t,a,u)}}var l=t.return;try{Ju(t)}catch(u){Ke(t,l,u)}break;case 5:var i=t.return;try{Ju(t)}catch(u){Ke(t,i,u)}}}catch(u){Ke(t,t.return,u)}if(t===e){oe=null;break}var o=t.sibling;if(o!==null){o.return=t.return,oe=o;break}oe=t.return}}var Lb=Math.ceil,$o=us.ReactCurrentDispatcher,mp=us.ReactCurrentOwner,un=us.ReactCurrentBatchConfig,Ee=0,ut=null,et=null,ht=0,Vt=0,ea=Ys(0),at=0,Ql=null,Cr=0,ic=0,hp=0,kl=null,It=null,fp=0,Ea=1/0,Kn=null,Io=!1,ed=null,Is=null,$i=!1,Ps=null,Ao=0,Cl=0,td=null,io=-1,oo=0;function Dt(){return Ee&6?Je():io!==-1?io:io=Je()}function As(e){return e.mode&1?Ee&2&&ht!==0?ht&-ht:xb.transition!==null?(oo===0&&(oo=jx()),oo):(e=Pe,e!==0||(e=window.event,e=e===void 0?16:_x(e.type)),e):1}function wn(e,t,n,r){if(50<Cl)throw Cl=0,td=null,Error(se(185));ti(e,n,r),(!(Ee&2)||e!==ut)&&(e===ut&&(!(Ee&2)&&(ic|=n),at===4&&gs(e,ht)),Ut(e,r),n===1&&Ee===0&&!(t.mode&1)&&(Ea=Je()+500,sc&&Hs()))}function Ut(e,t){var n=e.callbackNode;xv(e,t);var r=No(e,e===ut?ht:0);if(r===0)n!==null&&em(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&em(n),t===1)e.tag===0?fb(Hm.bind(null,e)):Vx(Hm.bind(null,e)),db(function(){!(Ee&6)&&Hs()}),n=null;else{switch(Nx(r)){case 1:n=Bd;break;case 4:n=vx;break;case 16:n=jo;break;case 536870912:n=bx;break;default:n=jo}n=Y0(n,I0.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function I0(e,t){if(io=-1,oo=0,Ee&6)throw Error(se(327));var n=e.callbackNode;if(ia()&&e.callbackNode!==n)return null;var r=No(e,e===ut?ht:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=qo(e,r);else{t=r;var a=Ee;Ee|=2;var l=q0();(ut!==e||ht!==t)&&(Kn=null,Ea=Je()+500,br(e,t));do try{Ob();break}catch(o){A0(e,o)}while(!0);ep(),$o.current=l,Ee=a,et!==null?t=0:(ut=null,ht=0,t=at)}if(t!==0){if(t===2&&(a=_u(e),a!==0&&(r=a,t=nd(e,a))),t===1)throw n=Ql,br(e,0),gs(e,r),Ut(e,Je()),n;if(t===6)gs(e,r);else{if(a=e.current.alternate,!(r&30)&&!Fb(a)&&(t=qo(e,r),t===2&&(l=_u(e),l!==0&&(r=l,t=nd(e,l))),t===1))throw n=Ql,br(e,0),gs(e,r),Ut(e,Je()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(se(345));case 2:rr(e,It,Kn);break;case 3:if(gs(e,r),(r&130023424)===r&&(t=fp+500-Je(),10<t)){if(No(e,0)!==0)break;if(a=e.suspendedLanes,(a&r)!==r){Dt(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Ou(rr.bind(null,e,It,Kn),t);break}rr(e,It,Kn);break;case 4:if(gs(e,r),(r&4194240)===r)break;for(t=e.eventTimes,a=-1;0<r;){var i=31-Sn(r);l=1<<i,i=t[i],i>a&&(a=i),r&=~l}if(r=a,r=Je()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Lb(r/1960))-r,10<r){e.timeoutHandle=Ou(rr.bind(null,e,It,Kn),r);break}rr(e,It,Kn);break;case 5:rr(e,It,Kn);break;default:throw Error(se(329))}}}return Ut(e,Je()),e.callbackNode===n?I0.bind(null,e):null}function nd(e,t){var n=kl;return e.current.memoizedState.isDehydrated&&(br(e,t).flags|=256),e=qo(e,t),e!==2&&(t=It,It=n,t!==null&&sd(t)),e}function sd(e){It===null?It=e:It.push.apply(It,e)}function Fb(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],l=a.getSnapshot;a=a.value;try{if(!kn(l(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function gs(e,t){for(t&=~hp,t&=~ic,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Sn(t),r=1<<n;e[n]=-1,t&=~r}}function Hm(e){if(Ee&6)throw Error(se(327));ia();var t=No(e,0);if(!(t&1))return Ut(e,Je()),null;var n=qo(e,t);if(e.tag!==0&&n===2){var r=_u(e);r!==0&&(t=r,n=nd(e,r))}if(n===1)throw n=Ql,br(e,0),gs(e,t),Ut(e,Je()),n;if(n===6)throw Error(se(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,rr(e,It,Kn),Ut(e,Je()),null}function xp(e,t){var n=Ee;Ee|=1;try{return e(t)}finally{Ee=n,Ee===0&&(Ea=Je()+500,sc&&Hs())}}function Er(e){Ps!==null&&Ps.tag===0&&!(Ee&6)&&ia();var t=Ee;Ee|=1;var n=un.transition,r=Pe;try{if(un.transition=null,Pe=1,e)return e()}finally{Pe=r,un.transition=n,Ee=t,!(Ee&6)&&Hs()}}function yp(){Vt=ea.current,Ae(ea)}function br(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,ub(n)),et!==null)for(n=et.return;n!==null;){var r=n;switch(Jd(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Eo();break;case 3:ka(),Ae(Bt),Ae(St),lp();break;case 5:ap(r);break;case 4:ka();break;case 13:Ae(Ue);break;case 19:Ae(Ue);break;case 10:tp(r.type._context);break;case 22:case 23:yp()}n=n.return}if(ut=e,et=e=qs(e.current,null),ht=Vt=t,at=0,Ql=null,hp=ic=Cr=0,It=kl=null,lr!==null){for(t=0;t<lr.length;t++)if(n=lr[t],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,l=n.pending;if(l!==null){var i=l.next;l.next=a,r.next=i}n.pending=r}lr=null}return e}function A0(e,t){do{var n=et;try{if(ep(),ro.current=Oo,To){for(var r=Qe.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}To=!1}if(kr=0,ct=st=Qe=null,Sl=!1,Bl=0,mp.current=null,n===null||n.return===null){at=1,Ql=t,et=null;break}e:{var l=e,i=n.return,o=n,u=t;if(t=ht,o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,p=o,d=p.tag;if(!(p.mode&1)&&(d===0||d===11||d===15)){var m=p.alternate;m?(p.updateQueue=m.updateQueue,p.memoizedState=m.memoizedState,p.lanes=m.lanes):(p.updateQueue=null,p.memoizedState=null)}var x=Lm(i);if(x!==null){x.flags&=-257,Fm(x,i,o,l,t),x.mode&1&&Mm(l,c,t),t=x,u=c;var h=t.updateQueue;if(h===null){var S=new Set;S.add(u),t.updateQueue=S}else h.add(u);break e}else{if(!(t&1)){Mm(l,c,t),gp();break e}u=Error(se(426))}}else if(ze&&o.mode&1){var C=Lm(i);if(C!==null){!(C.flags&65536)&&(C.flags|=256),Fm(C,i,o,l,t),Xd(Ca(u,o));break e}}l=u=Ca(u,o),at!==4&&(at=2),kl===null?kl=[l]:kl.push(l),l=i;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var g=N0(l,u,t);Cm(l,g);break e;case 1:o=u;var f=l.type,b=l.stateNode;if(!(l.flags&128)&&(typeof f.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Is===null||!Is.has(b)))){l.flags|=65536,t&=-t,l.lanes|=t;var R=S0(l,o,t);Cm(l,R);break e}}l=l.return}while(l!==null)}z0(n)}catch(P){t=P,et===n&&n!==null&&(et=n=n.return);continue}break}while(!0)}function q0(){var e=$o.current;return $o.current=Oo,e===null?Oo:e}function gp(){(at===0||at===3||at===2)&&(at=4),ut===null||!(Cr&268435455)&&!(ic&268435455)||gs(ut,ht)}function qo(e,t){var n=Ee;Ee|=2;var r=q0();(ut!==e||ht!==t)&&(Kn=null,br(e,t));do try{Tb();break}catch(a){A0(e,a)}while(!0);if(ep(),Ee=n,$o.current=r,et!==null)throw Error(se(261));return ut=null,ht=0,at}function Tb(){for(;et!==null;)B0(et)}function Ob(){for(;et!==null&&!iv();)B0(et)}function B0(e){var t=Q0(e.alternate,e,Vt);e.memoizedProps=e.pendingProps,t===null?z0(e):et=t,mp.current=null}function z0(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Rb(n,t),n!==null){n.flags&=32767,et=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{at=6,et=null;return}}else if(n=_b(n,t,Vt),n!==null){et=n;return}if(t=t.sibling,t!==null){et=t;return}et=t=e}while(t!==null);at===0&&(at=5)}function rr(e,t,n){var r=Pe,a=un.transition;try{un.transition=null,Pe=1,$b(e,t,n,r)}finally{un.transition=a,Pe=r}return null}function $b(e,t,n,r){do ia();while(Ps!==null);if(Ee&6)throw Error(se(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(se(177));e.callbackNode=null,e.callbackPriority=0;var l=n.lanes|n.childLanes;if(yv(e,l),e===ut&&(et=ut=null,ht=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||$i||($i=!0,Y0(jo,function(){return ia(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=un.transition,un.transition=null;var i=Pe;Pe=1;var o=Ee;Ee|=4,mp.current=null,Pb(e,n),O0(n,e),sb(Fu),So=!!Lu,Fu=Lu=null,e.current=n,Mb(n),ov(),Ee=o,Pe=i,un.transition=l}else e.current=n;if($i&&($i=!1,Ps=e,Ao=a),l=e.pendingLanes,l===0&&(Is=null),dv(n.stateNode),Ut(e,Je()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(Io)throw Io=!1,e=ed,ed=null,e;return Ao&1&&e.tag!==0&&ia(),l=e.pendingLanes,l&1?e===td?Cl++:(Cl=0,td=e):Cl=0,Hs(),null}function ia(){if(Ps!==null){var e=Nx(Ao),t=un.transition,n=Pe;try{if(un.transition=null,Pe=16>e?16:e,Ps===null)var r=!1;else{if(e=Ps,Ps=null,Ao=0,Ee&6)throw Error(se(331));var a=Ee;for(Ee|=4,oe=e.current;oe!==null;){var l=oe,i=l.child;if(oe.flags&16){var o=l.deletions;if(o!==null){for(var u=0;u<o.length;u++){var c=o[u];for(oe=c;oe!==null;){var p=oe;switch(p.tag){case 0:case 11:case 15:wl(8,p,l)}var d=p.child;if(d!==null)d.return=p,oe=d;else for(;oe!==null;){p=oe;var m=p.sibling,x=p.return;if(L0(p),p===c){oe=null;break}if(m!==null){m.return=x,oe=m;break}oe=x}}}var h=l.alternate;if(h!==null){var S=h.child;if(S!==null){h.child=null;do{var C=S.sibling;S.sibling=null,S=C}while(S!==null)}}oe=l}}if(l.subtreeFlags&2064&&i!==null)i.return=l,oe=i;else e:for(;oe!==null;){if(l=oe,l.flags&2048)switch(l.tag){case 0:case 11:case 15:wl(9,l,l.return)}var g=l.sibling;if(g!==null){g.return=l.return,oe=g;break e}oe=l.return}}var f=e.current;for(oe=f;oe!==null;){i=oe;var b=i.child;if(i.subtreeFlags&2064&&b!==null)b.return=i,oe=b;else e:for(i=f;oe!==null;){if(o=oe,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:lc(9,o)}}catch(P){Ke(o,o.return,P)}if(o===i){oe=null;break e}var R=o.sibling;if(R!==null){R.return=o.return,oe=R;break e}oe=o.return}}if(Ee=a,Hs(),qn&&typeof qn.onPostCommitFiberRoot=="function")try{qn.onPostCommitFiberRoot(Xo,e)}catch{}r=!0}return r}finally{Pe=n,un.transition=t}}return!1}function Vm(e,t,n){t=Ca(n,t),t=N0(e,t,1),e=$s(e,t,1),t=Dt(),e!==null&&(ti(e,1,t),Ut(e,t))}function Ke(e,t,n){if(e.tag===3)Vm(e,e,n);else for(;t!==null;){if(t.tag===3){Vm(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Is===null||!Is.has(r))){e=Ca(n,e),e=S0(t,e,1),t=$s(t,e,1),e=Dt(),t!==null&&(ti(t,1,e),Ut(t,e));break}}t=t.return}}function Ib(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Dt(),e.pingedLanes|=e.suspendedLanes&n,ut===e&&(ht&n)===n&&(at===4||at===3&&(ht&130023424)===ht&&500>Je()-fp?br(e,0):hp|=n),Ut(e,t)}function U0(e,t){t===0&&(e.mode&1?(t=Ei,Ei<<=1,!(Ei&130023424)&&(Ei=4194304)):t=1);var n=Dt();e=os(e,t),e!==null&&(ti(e,t,n),Ut(e,n))}function Ab(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),U0(e,n)}function qb(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(se(314))}r!==null&&r.delete(t),U0(e,n)}var Q0;Q0=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Bt.current)qt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return qt=!1,Eb(e,t,n);qt=!!(e.flags&131072)}else qt=!1,ze&&t.flags&1048576&&Wx(t,Do,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;lo(e,t),e=t.pendingProps;var a=Na(t,St.current);la(t,n),a=op(null,t,r,e,a,n);var l=cp();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,zt(r)?(l=!0,_o(t)):l=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,sp(t),a.updater=ac,t.stateNode=a,a._reactInternals=t,Uu(t,r,e,n),t=Hu(null,t,r,!0,l,n)):(t.tag=0,ze&&l&&Gd(t),Et(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(lo(e,t),e=t.pendingProps,a=r._init,r=a(r._payload),t.type=r,a=t.tag=zb(r),e=gn(r,e),a){case 0:t=Yu(null,t,r,e,n);break e;case 1:t=$m(null,t,r,e,n);break e;case 11:t=Tm(null,t,r,e,n);break e;case 14:t=Om(null,t,r,gn(r.type,e),n);break e}throw Error(se(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:gn(r,a),Yu(e,t,r,a,n);case 1:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:gn(r,a),$m(e,t,r,a,n);case 3:e:{if(E0(t),e===null)throw Error(se(387));r=t.pendingProps,l=t.memoizedState,a=l.element,e0(e,t),Lo(t,r,null,n);var i=t.memoizedState;if(r=i.element,l.isDehydrated)if(l={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){a=Ca(Error(se(423)),t),t=Im(e,t,r,n,a);break e}else if(r!==a){a=Ca(Error(se(424)),t),t=Im(e,t,r,n,a);break e}else for(Kt=Os(t.stateNode.containerInfo.firstChild),Gt=t,ze=!0,Nn=null,n=Xx(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Sa(),r===a){t=cs(e,t,n);break e}Et(e,t,r,n)}t=t.child}return t;case 5:return t0(t),e===null&&qu(t),r=t.type,a=t.pendingProps,l=e!==null?e.memoizedProps:null,i=a.children,Tu(r,a)?i=null:l!==null&&Tu(r,l)&&(t.flags|=32),C0(e,t),Et(e,t,i,n),t.child;case 6:return e===null&&qu(t),null;case 13:return _0(e,t,n);case 4:return rp(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=wa(t,null,r,n):Et(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:gn(r,a),Tm(e,t,r,a,n);case 7:return Et(e,t,t.pendingProps,n),t.child;case 8:return Et(e,t,t.pendingProps.children,n),t.child;case 12:return Et(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,l=t.memoizedProps,i=a.value,Fe(Po,r._currentValue),r._currentValue=i,l!==null)if(kn(l.value,i)){if(l.children===a.children&&!Bt.current){t=cs(e,t,n);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var o=l.dependencies;if(o!==null){i=l.child;for(var u=o.firstContext;u!==null;){if(u.context===r){if(l.tag===1){u=rs(-1,n&-n),u.tag=2;var c=l.updateQueue;if(c!==null){c=c.shared;var p=c.pending;p===null?u.next=u:(u.next=p.next,p.next=u),c.pending=u}}l.lanes|=n,u=l.alternate,u!==null&&(u.lanes|=n),Bu(l.return,n,t),o.lanes|=n;break}u=u.next}}else if(l.tag===10)i=l.type===t.type?null:l.child;else if(l.tag===18){if(i=l.return,i===null)throw Error(se(341));i.lanes|=n,o=i.alternate,o!==null&&(o.lanes|=n),Bu(i,n,t),i=l.sibling}else i=l.child;if(i!==null)i.return=l;else for(i=l;i!==null;){if(i===t){i=null;break}if(l=i.sibling,l!==null){l.return=i.return,i=l;break}i=i.return}l=i}Et(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,la(t,n),a=dn(a),r=r(a),t.flags|=1,Et(e,t,r,n),t.child;case 14:return r=t.type,a=gn(r,t.pendingProps),a=gn(r.type,a),Om(e,t,r,a,n);case 15:return w0(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:gn(r,a),lo(e,t),t.tag=1,zt(r)?(e=!0,_o(t)):e=!1,la(t,n),j0(t,r,a),Uu(t,r,a,n),Hu(null,t,r,!0,e,n);case 19:return R0(e,t,n);case 22:return k0(e,t,n)}throw Error(se(156,t.tag))};function Y0(e,t){return gx(e,t)}function Bb(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cn(e,t,n,r){return new Bb(e,t,n,r)}function vp(e){return e=e.prototype,!(!e||!e.isReactComponent)}function zb(e){if(typeof e=="function")return vp(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Id)return 11;if(e===Ad)return 14}return 2}function qs(e,t){var n=e.alternate;return n===null?(n=cn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function co(e,t,n,r,a,l){var i=2;if(r=e,typeof e=="function")vp(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case Qr:return jr(n.children,a,l,t);case $d:i=8,a|=8;break;case mu:return e=cn(12,n,t,a|2),e.elementType=mu,e.lanes=l,e;case hu:return e=cn(13,n,t,a),e.elementType=hu,e.lanes=l,e;case fu:return e=cn(19,n,t,a),e.elementType=fu,e.lanes=l,e;case tx:return oc(n,a,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Zf:i=10;break e;case ex:i=9;break e;case Id:i=11;break e;case Ad:i=14;break e;case fs:i=16,r=null;break e}throw Error(se(130,e==null?e:typeof e,""))}return t=cn(i,n,t,a),t.elementType=e,t.type=r,t.lanes=l,t}function jr(e,t,n,r){return e=cn(7,e,r,t),e.lanes=n,e}function oc(e,t,n,r){return e=cn(22,e,r,t),e.elementType=tx,e.lanes=n,e.stateNode={isHidden:!1},e}function Xc(e,t,n){return e=cn(6,e,null,t),e.lanes=n,e}function Zc(e,t,n){return t=cn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ub(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Lc(0),this.expirationTimes=Lc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Lc(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function bp(e,t,n,r,a,l,i,o,u){return e=new Ub(e,t,n,o,u),t===1?(t=1,l===!0&&(t|=8)):t=0,l=cn(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},sp(l),e}function Qb(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ur,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function H0(e){if(!e)return Us;e=e._reactInternals;e:{if(Mr(e)!==e||e.tag!==1)throw Error(se(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(zt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(se(171))}if(e.tag===1){var n=e.type;if(zt(n))return Hx(e,n,t)}return t}function V0(e,t,n,r,a,l,i,o,u){return e=bp(n,r,!0,e,a,l,i,o,u),e.context=H0(null),n=e.current,r=Dt(),a=As(n),l=rs(r,a),l.callback=t??null,$s(n,l,a),e.current.lanes=a,ti(e,a,r),Ut(e,r),e}function cc(e,t,n,r){var a=t.current,l=Dt(),i=As(a);return n=H0(n),t.context===null?t.context=n:t.pendingContext=n,t=rs(l,i),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=$s(a,t,i),e!==null&&(wn(e,a,i,l),so(e,a,i)),i}function Bo(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Wm(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function jp(e,t){Wm(e,t),(e=e.alternate)&&Wm(e,t)}function Yb(){return null}var W0=typeof reportError=="function"?reportError:function(e){console.error(e)};function Np(e){this._internalRoot=e}uc.prototype.render=Np.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(se(409));cc(e,t,null,null)};uc.prototype.unmount=Np.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Er(function(){cc(null,e,null,null)}),t[is]=null}};function uc(e){this._internalRoot=e}uc.prototype.unstable_scheduleHydration=function(e){if(e){var t=kx();e={blockedOn:null,target:e,priority:t};for(var n=0;n<ys.length&&t!==0&&t<ys[n].priority;n++);ys.splice(n,0,e),n===0&&Ex(e)}};function Sp(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function dc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Km(){}function Hb(e,t,n,r,a){if(a){if(typeof r=="function"){var l=r;r=function(){var c=Bo(i);l.call(c)}}var i=V0(t,r,e,0,null,!1,!1,"",Km);return e._reactRootContainer=i,e[is]=i.current,Ol(e.nodeType===8?e.parentNode:e),Er(),i}for(;a=e.lastChild;)e.removeChild(a);if(typeof r=="function"){var o=r;r=function(){var c=Bo(u);o.call(c)}}var u=bp(e,0,!1,null,null,!1,!1,"",Km);return e._reactRootContainer=u,e[is]=u.current,Ol(e.nodeType===8?e.parentNode:e),Er(function(){cc(t,u,n,r)}),u}function pc(e,t,n,r,a){var l=n._reactRootContainer;if(l){var i=l;if(typeof a=="function"){var o=a;a=function(){var u=Bo(i);o.call(u)}}cc(t,i,e,a)}else i=Hb(n,t,e,a,r);return Bo(i)}Sx=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ml(t.pendingLanes);n!==0&&(zd(t,n|1),Ut(t,Je()),!(Ee&6)&&(Ea=Je()+500,Hs()))}break;case 13:Er(function(){var r=os(e,1);if(r!==null){var a=Dt();wn(r,e,1,a)}}),jp(e,1)}};Ud=function(e){if(e.tag===13){var t=os(e,134217728);if(t!==null){var n=Dt();wn(t,e,134217728,n)}jp(e,134217728)}};wx=function(e){if(e.tag===13){var t=As(e),n=os(e,t);if(n!==null){var r=Dt();wn(n,e,t,r)}jp(e,t)}};kx=function(){return Pe};Cx=function(e,t){var n=Pe;try{return Pe=e,t()}finally{Pe=n}};ku=function(e,t,n){switch(t){case"input":if(gu(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=nc(r);if(!a)throw Error(se(90));sx(r),gu(r,a)}}}break;case"textarea":ax(e,n);break;case"select":t=n.value,t!=null&&na(e,!!n.multiple,t,!1)}};px=xp;mx=Er;var Vb={usingClientEntryPoint:!1,Events:[si,Wr,nc,ux,dx,xp]},sl={findFiberByHostInstance:ar,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Wb={bundleType:sl.bundleType,version:sl.version,rendererPackageName:sl.rendererPackageName,rendererConfig:sl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:us.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=xx(e),e===null?null:e.stateNode},findFiberByHostInstance:sl.findFiberByHostInstance||Yb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ii=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ii.isDisabled&&Ii.supportsFiber)try{Xo=Ii.inject(Wb),qn=Ii}catch{}}Xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Vb;Xt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Sp(t))throw Error(se(200));return Qb(e,t,null,n)};Xt.createRoot=function(e,t){if(!Sp(e))throw Error(se(299));var n=!1,r="",a=W0;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=bp(e,1,!1,null,null,n,!1,r,a),e[is]=t.current,Ol(e.nodeType===8?e.parentNode:e),new Np(t)};Xt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(se(188)):(e=Object.keys(e).join(","),Error(se(268,e)));return e=xx(t),e=e===null?null:e.stateNode,e};Xt.flushSync=function(e){return Er(e)};Xt.hydrate=function(e,t,n){if(!dc(t))throw Error(se(200));return pc(null,e,t,!0,n)};Xt.hydrateRoot=function(e,t,n){if(!Sp(e))throw Error(se(405));var r=n!=null&&n.hydratedSources||null,a=!1,l="",i=W0;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),t=V0(t,null,e,1,n??null,a,!1,l,i),e[is]=t.current,Ol(e),r)for(e=0;e<r.length;e++)n=r[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new uc(t)};Xt.render=function(e,t,n){if(!dc(t))throw Error(se(200));return pc(null,e,t,!1,n)};Xt.unmountComponentAtNode=function(e){if(!dc(e))throw Error(se(40));return e._reactRootContainer?(Er(function(){pc(null,null,e,!1,function(){e._reactRootContainer=null,e[is]=null})}),!0):!1};Xt.unstable_batchedUpdates=xp;Xt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!dc(n))throw Error(se(200));if(e==null||e._reactInternals===void 0)throw Error(se(38));return pc(e,t,n,!1,r)};Xt.version="18.3.1-next-f1338f8080-20240426";function K0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(K0)}catch(e){console.error(e)}}K0(),Kf.exports=Xt;var G0=Kf.exports,Gm=G0;du.createRoot=Gm.createRoot,du.hydrateRoot=Gm.hydrateRoot;/**
 * react-router v7.10.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var J0=e=>{throw TypeError(e)},Kb=(e,t,n)=>t.has(e)||J0("Cannot "+n),eu=(e,t,n)=>(Kb(e,t,"read from private field"),n?n.call(e):t.get(e)),Gb=(e,t,n)=>t.has(e)?J0("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Jm="popstate";function Jb(e={}){function t(r,a){let{pathname:l,search:i,hash:o}=r.location;return Yl("",{pathname:l,search:i,hash:o},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(r,a){return typeof a=="string"?a:Un(a)}return Zb(t,n,null,e)}function Ne(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Ye(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Xb(){return Math.random().toString(36).substring(2,10)}function Xm(e,t){return{usr:e.state,key:e.key,idx:t}}function Yl(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Vs(t):t,state:n,key:t&&t.key||r||Xb()}}function Un({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Vs(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function Zb(e,t,n,r={}){let{window:a=document.defaultView,v5Compat:l=!1}=r,i=a.history,o="POP",u=null,c=p();c==null&&(c=0,i.replaceState({...i.state,idx:c},""));function p(){return(i.state||{idx:null}).idx}function d(){o="POP";let C=p(),g=C==null?null:C-c;c=C,u&&u({action:o,location:S.location,delta:g})}function m(C,g){o="PUSH";let f=Yl(S.location,C,g);c=p()+1;let b=Xm(f,c),R=S.createHref(f);try{i.pushState(b,"",R)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;a.location.assign(R)}l&&u&&u({action:o,location:S.location,delta:1})}function x(C,g){o="REPLACE";let f=Yl(S.location,C,g);c=p();let b=Xm(f,c),R=S.createHref(f);i.replaceState(b,"",R),l&&u&&u({action:o,location:S.location,delta:0})}function h(C){return X0(C)}let S={get action(){return o},get location(){return e(a,i)},listen(C){if(u)throw new Error("A history only accepts one active listener");return a.addEventListener(Jm,d),u=C,()=>{a.removeEventListener(Jm,d),u=null}},createHref(C){return t(a,C)},createURL:h,encodeLocation(C){let g=h(C);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:m,replace:x,go(C){return i.go(C)}};return S}function X0(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Ne(n,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:Un(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}var fl,Zm=class{constructor(e){if(Gb(this,fl,new Map),e)for(let[t,n]of e)this.set(t,n)}get(e){if(eu(this,fl).has(e))return eu(this,fl).get(e);if(e.defaultValue!==void 0)return e.defaultValue;throw new Error("No value found for context")}set(e,t){eu(this,fl).set(e,t)}};fl=new WeakMap;var ej=new Set(["lazy","caseSensitive","path","id","index","children"]);function tj(e){return ej.has(e)}var nj=new Set(["lazy","caseSensitive","path","id","index","middleware","children"]);function sj(e){return nj.has(e)}function rj(e){return e.index===!0}function Hl(e,t,n=[],r={},a=!1){return e.map((l,i)=>{let o=[...n,String(i)],u=typeof l.id=="string"?l.id:o.join("-");if(Ne(l.index!==!0||!l.children,"Cannot specify children on an index route"),Ne(a||!r[u],`Found a route id collision on id "${u}".  Route id's must be globally unique within Data Router usages`),rj(l)){let c={...l,id:u};return r[u]=eh(c,t(c)),c}else{let c={...l,id:u,children:void 0};return r[u]=eh(c,t(c)),l.children&&(c.children=Hl(l.children,t,o,r,a)),c}})}function eh(e,t){return Object.assign(e,{...t,...typeof t.lazy=="object"&&t.lazy!=null?{lazy:{...e.lazy,...t.lazy}}:{}})}function vs(e,t,n="/"){return xl(e,t,n,!1)}function xl(e,t,n,r){let a=typeof t=="string"?Vs(t):t,l=mn(a.pathname||"/",n);if(l==null)return null;let i=Z0(e);lj(i);let o=null;for(let u=0;o==null&&u<i.length;++u){let c=yj(l);o=fj(i[u],c,r)}return o}function aj(e,t){let{route:n,pathname:r,params:a}=e;return{id:n.id,pathname:r,params:a,data:t[n.id],loaderData:t[n.id],handle:n.handle}}function Z0(e,t=[],n=[],r="",a=!1){let l=(i,o,u=a,c)=>{let p={relativePath:c===void 0?i.path||"":c,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(r)&&u)return;Ne(p.relativePath.startsWith(r),`Absolute route path "${p.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(r.length)}let d=zn([r,p.relativePath]),m=n.concat(p);i.children&&i.children.length>0&&(Ne(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),Z0(i.children,t,m,d,u)),!(i.path==null&&!i.index)&&t.push({path:d,score:mj(d,i.index),routesMeta:m})};return e.forEach((i,o)=>{var u;if(i.path===""||!((u=i.path)!=null&&u.includes("?")))l(i,o);else for(let c of ey(i.path))l(i,o,!0,c)}),t}function ey(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,a=n.endsWith("?"),l=n.replace(/\?$/,"");if(r.length===0)return a?[l,""]:[l];let i=ey(r.join("/")),o=[];return o.push(...i.map(u=>u===""?l:[l,u].join("/"))),a&&o.push(...i),o.map(u=>e.startsWith("/")&&u===""?"/":u)}function lj(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:hj(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var ij=/^:[\w-]+$/,oj=3,cj=2,uj=1,dj=10,pj=-2,th=e=>e==="*";function mj(e,t){let n=e.split("/"),r=n.length;return n.some(th)&&(r+=pj),t&&(r+=cj),n.filter(a=>!th(a)).reduce((a,l)=>a+(ij.test(l)?oj:l===""?uj:dj),r)}function hj(e,t){return e.length===t.length&&e.slice(0,-1).every((r,a)=>r===t[a])?e[e.length-1]-t[t.length-1]:0}function fj(e,t,n=!1){let{routesMeta:r}=e,a={},l="/",i=[];for(let o=0;o<r.length;++o){let u=r[o],c=o===r.length-1,p=l==="/"?t:t.slice(l.length)||"/",d=zo({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},p),m=u.route;if(!d&&c&&n&&!r[r.length-1].route.index&&(d=zo({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},p)),!d)return null;Object.assign(a,d.params),i.push({params:a,pathname:zn([l,d.pathname]),pathnameBase:jj(zn([l,d.pathnameBase])),route:m}),d.pathnameBase!=="/"&&(l=zn([l,d.pathnameBase]))}return i}function zo(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=xj(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let l=a[0],i=l.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:r.reduce((c,{paramName:p,isOptional:d},m)=>{if(p==="*"){let h=o[m]||"";i=l.slice(0,l.length-h.length).replace(/(.)\/+$/,"$1")}const x=o[m];return d&&!x?c[p]=void 0:c[p]=(x||"").replace(/%2F/g,"/"),c},{}),pathname:l,pathnameBase:i,pattern:e}}function xj(e,t=!1,n=!0){Ye(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,o,u)=>(r.push({paramName:o,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),r]}function yj(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Ye(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function mn(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function gj({basename:e,pathname:t}){return t==="/"?e:zn([e,t])}var vj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,mc=e=>vj.test(e);function bj(e,t="/"){let{pathname:n,search:r="",hash:a=""}=typeof e=="string"?Vs(e):e,l;if(n)if(mc(n))l=n;else{if(n.includes("//")){let i=n;n=n.replace(/\/\/+/g,"/"),Ye(!1,`Pathnames cannot have embedded double slashes - normalizing ${i} -> ${n}`)}n.startsWith("/")?l=nh(n.substring(1),"/"):l=nh(n,t)}else l=t;return{pathname:l,search:Nj(r),hash:Sj(a)}}function nh(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function tu(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function ty(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function hc(e){let t=ty(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function fc(e,t,n,r=!1){let a;typeof e=="string"?a=Vs(e):(a={...e},Ne(!a.pathname||!a.pathname.includes("?"),tu("?","pathname","search",a)),Ne(!a.pathname||!a.pathname.includes("#"),tu("#","pathname","hash",a)),Ne(!a.search||!a.search.includes("#"),tu("#","search","hash",a)));let l=e===""||a.pathname==="",i=l?"/":a.pathname,o;if(i==null)o=n;else{let d=t.length-1;if(!r&&i.startsWith("..")){let m=i.split("/");for(;m[0]==="..";)m.shift(),d-=1;a.pathname=m.join("/")}o=d>=0?t[d]:"/"}let u=bj(a,o),c=i&&i!=="/"&&i.endsWith("/"),p=(l||i===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(c||p)&&(u.pathname+="/"),u}var zn=e=>e.join("/").replace(/\/\/+/g,"/"),jj=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Nj=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Sj=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,xc=class{constructor(e,t,n,r=!1){this.status=e,this.statusText=t||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function Vl(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function ai(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Ms=Symbol("Uninstrumented");function wj(e,t){let n={lazy:[],"lazy.loader":[],"lazy.action":[],"lazy.middleware":[],middleware:[],loader:[],action:[]};e.forEach(a=>a({id:t.id,index:t.index,path:t.path,instrument(l){let i=Object.keys(n);for(let o of i)l[o]&&n[o].push(l[o])}}));let r={};if(typeof t.lazy=="function"&&n.lazy.length>0){let a=ta(n.lazy,t.lazy,()=>{});a&&(r.lazy=a)}if(typeof t.lazy=="object"){let a=t.lazy;["middleware","loader","action"].forEach(l=>{let i=a[l],o=n[`lazy.${l}`];if(typeof i=="function"&&o.length>0){let u=ta(o,i,()=>{});u&&(r.lazy=Object.assign(r.lazy||{},{[l]:u}))}})}return["loader","action"].forEach(a=>{let l=t[a];if(typeof l=="function"&&n[a].length>0){let i=l[Ms]??l,o=ta(n[a],i,(...u)=>sh(u[0]));o&&(o[Ms]=i,r[a]=o)}}),t.middleware&&t.middleware.length>0&&n.middleware.length>0&&(r.middleware=t.middleware.map(a=>{let l=a[Ms]??a,i=ta(n.middleware,l,(...o)=>sh(o[0]));return i?(i[Ms]=l,i):a})),r}function kj(e,t){let n={navigate:[],fetch:[]};if(t.forEach(r=>r({instrument(a){let l=Object.keys(a);for(let i of l)a[i]&&n[i].push(a[i])}})),n.navigate.length>0){let r=e.navigate[Ms]??e.navigate,a=ta(n.navigate,r,(...l)=>{let[i,o]=l;return{to:typeof i=="number"||typeof i=="string"?i:i?Un(i):".",...rh(e,o??{})}});a&&(a[Ms]=r,e.navigate=a)}if(n.fetch.length>0){let r=e.fetch[Ms]??e.fetch,a=ta(n.fetch,r,(...l)=>{let[i,,o,u]=l;return{href:o??".",fetcherKey:i,...rh(e,u??{})}});a&&(a[Ms]=r,e.fetch=a)}return e}function ta(e,t,n){return e.length===0?null:async(...r)=>{let a=await ny(e,n(...r),()=>t(...r),e.length-1);if(a.type==="error")throw a.value;return a.value}}async function ny(e,t,n,r){let a=e[r],l;if(a){let i,o=async()=>(i?console.error("You cannot call instrumented handlers more than once"):i=ny(e,t,n,r-1),l=await i,Ne(l,"Expected a result"),l.type==="error"&&l.value instanceof Error?{status:"error",error:l.value}:{status:"success",error:void 0});try{await a(o,t)}catch(u){console.error("An instrumentation function threw an error:",u)}i||await o(),await i}else try{l={type:"success",value:await n()}}catch(i){l={type:"error",value:i}}return l||{type:"error",value:new Error("No result assigned in instrumentation chain.")}}function sh(e){let{request:t,context:n,params:r,unstable_pattern:a}=e;return{request:Cj(t),params:{...r},unstable_pattern:a,context:Ej(n)}}function rh(e,t){return{currentUrl:Un(e.state.location),..."formMethod"in t?{formMethod:t.formMethod}:{},..."formEncType"in t?{formEncType:t.formEncType}:{},..."formData"in t?{formData:t.formData}:{},..."body"in t?{body:t.body}:{}}}function Cj(e){return{method:e.method,url:e.url,headers:{get:(...t)=>e.headers.get(...t)}}}function Ej(e){if(Rj(e)){let t={...e};return Object.freeze(t),t}else return{get:t=>e.get(t)}}var _j=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Rj(e){if(e===null||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);return t===Object.prototype||t===null||Object.getOwnPropertyNames(t).sort().join("\0")===_j}var sy=["POST","PUT","PATCH","DELETE"],Dj=new Set(sy),Pj=["GET",...sy],Mj=new Set(Pj),Lj=new Set([301,302,303,307,308]),Fj=new Set([307,308]),nu={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Tj={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},rl={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Oj=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),ry="remix-router-transitions",ay=Symbol("ResetLoaderData");function $j(e){const t=e.window?e.window:typeof window<"u"?window:void 0,n=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u";Ne(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let r=e.hydrationRouteProperties||[],a=e.mapRouteProperties||Oj,l=a;if(e.unstable_instrumentations){let I=e.unstable_instrumentations;l=Y=>({...a(Y),...wj(I.map(V=>V.route).filter(Boolean),Y)})}let i={},o=Hl(e.routes,l,void 0,i),u,c=e.basename||"/";c.startsWith("/")||(c=`/${c}`);let p=e.dataStrategy||zj,d={...e.future},m=null,x=new Set,h=null,S=null,C=null,g=e.hydrationData!=null,f=vs(o,e.history.location,c),b=!1,R=null,P;if(f==null&&!e.patchRoutesOnNavigation){let I=sn(404,{pathname:e.history.location.pathname}),{matches:Y,route:V}=Ai(o);P=!0,f=Y,R={[V.id]:I}}else if(f&&!e.hydrationData&&Gs(f,o,e.history.location.pathname).active&&(f=null),f)if(f.some(I=>I.route.lazy))P=!1;else if(!f.some(I=>wp(I.route)))P=!0;else{let I=e.hydrationData?e.hydrationData.loaderData:null,Y=e.hydrationData?e.hydrationData.errors:null;if(Y){let V=f.findIndex(te=>Y[te.route.id]!==void 0);P=f.slice(0,V+1).every(te=>!ad(te.route,I,Y))}else P=f.every(V=>!ad(V.route,I,Y))}else{P=!1,f=[];let I=Gs(null,o,e.history.location.pathname);I.active&&I.matches&&(b=!0,f=I.matches)}let A,v={historyAction:e.history.action,location:e.history.location,matches:f,initialized:P,navigation:nu,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||R,fetchers:new Map,blockers:new Map},E="POP",T=null,M=!1,U,X=!1,L=new Map,w=null,j=!1,k=!1,F=new Set,N=new Map,_=0,$=-1,O=new Map,Q=new Set,K=new Map,D=new Map,B=new Set,ee=new Map,Z,re=null;function he(){if(m=e.history.listen(({action:I,location:Y,delta:V})=>{if(Z){Z(),Z=void 0;return}Ye(ee.size===0||V!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let te=Qa({currentLocation:v.location,nextLocation:Y,historyAction:I});if(te&&V!=null){let ae=new Promise(ce=>{Z=ce});e.history.go(V*-1),Ks(te,{state:"blocked",location:Y,proceed(){Ks(te,{state:"proceeding",proceed:void 0,reset:void 0,location:Y}),ae.then(()=>e.history.go(V))},reset(){let ce=new Map(v.blockers);ce.set(te,rl),ve({blockers:ce})}}),T==null||T.resolve(),T=null;return}return dt(I,Y)}),n){rN(t,L);let I=()=>aN(t,L);t.addEventListener("pagehide",I),w=()=>t.removeEventListener("pagehide",I)}return v.initialized||dt("POP",v.location,{initialHydration:!0}),A}function ge(){m&&m(),w&&w(),x.clear(),U&&U.abort(),v.fetchers.forEach((I,Y)=>Dn(Y)),v.blockers.forEach((I,Y)=>Ua(Y))}function Te(I){return x.add(I),()=>x.delete(I)}function ve(I,Y={}){I.matches&&(I.matches=I.matches.map(ae=>{let ce=i[ae.route.id],z=ae.route;return z.element!==ce.element||z.errorElement!==ce.errorElement||z.hydrateFallbackElement!==ce.hydrateFallbackElement?{...ae,route:ce}:ae})),v={...v,...I};let V=[],te=[];v.fetchers.forEach((ae,ce)=>{ae.state==="idle"&&(B.has(ce)?V.push(ce):te.push(ce))}),B.forEach(ae=>{!v.fetchers.has(ae)&&!N.has(ae)&&V.push(ae)}),[...x].forEach(ae=>ae(v,{deletedFetchers:V,newErrors:I.errors??null,viewTransitionOpts:Y.viewTransitionOpts,flushSync:Y.flushSync===!0})),V.forEach(ae=>Dn(ae)),te.forEach(ae=>v.fetchers.delete(ae))}function tt(I,Y,{flushSync:V}={}){var me,de;let te=v.actionData!=null&&v.navigation.formMethod!=null&&Rt(v.navigation.formMethod)&&v.navigation.state==="loading"&&((me=I.state)==null?void 0:me._isRedirect)!==!0,ae;Y.actionData?Object.keys(Y.actionData).length>0?ae=Y.actionData:ae=null:te?ae=v.actionData:ae=null;let ce=Y.loaderData?hh(v.loaderData,Y.loaderData,Y.matches||[],Y.errors):v.loaderData,z=v.blockers;z.size>0&&(z=new Map(z),z.forEach((fe,_e)=>z.set(_e,rl)));let G=j?!1:Ha(I,Y.matches||v.matches),ne=M===!0||v.navigation.formMethod!=null&&Rt(v.navigation.formMethod)&&((de=I.state)==null?void 0:de._isRedirect)!==!0;u&&(o=u,u=void 0),j||E==="POP"||(E==="PUSH"?e.history.push(I,I.state):E==="REPLACE"&&e.history.replace(I,I.state));let ue;if(E==="POP"){let fe=L.get(v.location.pathname);fe&&fe.has(I.pathname)?ue={currentLocation:v.location,nextLocation:I}:L.has(I.pathname)&&(ue={currentLocation:I,nextLocation:v.location})}else if(X){let fe=L.get(v.location.pathname);fe?fe.add(I.pathname):(fe=new Set([I.pathname]),L.set(v.location.pathname,fe)),ue={currentLocation:v.location,nextLocation:I}}ve({...Y,actionData:ae,loaderData:ce,historyAction:E,location:I,initialized:!0,navigation:nu,revalidation:"idle",restoreScrollPosition:G,preventScrollReset:ne,blockers:z},{viewTransitionOpts:ue,flushSync:V===!0}),E="POP",M=!1,X=!1,j=!1,k=!1,T==null||T.resolve(),T=null,re==null||re.resolve(),re=null}async function Be(I,Y){if(T==null||T.resolve(),T=null,typeof I=="number"){T||(T=gh());let _e=T.promise;return e.history.go(I),_e}let V=rd(v.location,v.matches,c,I,Y==null?void 0:Y.fromRouteId,Y==null?void 0:Y.relative),{path:te,submission:ae,error:ce}=ah(!1,V,Y),z=v.location,G=Yl(v.location,te,Y&&Y.state);G={...G,...e.history.encodeLocation(G)};let ne=Y&&Y.replace!=null?Y.replace:void 0,ue="PUSH";ne===!0?ue="REPLACE":ne===!1||ae!=null&&Rt(ae.formMethod)&&ae.formAction===v.location.pathname+v.location.search&&(ue="REPLACE");let me=Y&&"preventScrollReset"in Y?Y.preventScrollReset===!0:void 0,de=(Y&&Y.flushSync)===!0,fe=Qa({currentLocation:z,nextLocation:G,historyAction:ue});if(fe){Ks(fe,{state:"blocked",location:G,proceed(){Ks(fe,{state:"proceeding",proceed:void 0,reset:void 0,location:G}),Be(I,Y)},reset(){let _e=new Map(v.blockers);_e.set(fe,rl),ve({blockers:_e})}});return}await dt(ue,G,{submission:ae,pendingError:ce,preventScrollReset:me,replace:Y&&Y.replace,enableViewTransition:Y&&Y.viewTransition,flushSync:de})}function wt(){re||(re=gh()),Fr(),ve({revalidation:"loading"});let I=re.promise;return v.navigation.state==="submitting"?I:v.navigation.state==="idle"?(dt(v.historyAction,v.location,{startUninterruptedRevalidation:!0}),I):(dt(E||v.historyAction,v.navigation.location,{overrideNavigation:v.navigation,enableViewTransition:X===!0}),I)}async function dt(I,Y,V){U&&U.abort(),U=null,E=I,j=(V&&V.startUninterruptedRevalidation)===!0,fi(v.location,v.matches),M=(V&&V.preventScrollReset)===!0,X=(V&&V.enableViewTransition)===!0;let te=u||o,ae=V&&V.overrideNavigation,ce=V!=null&&V.initialHydration&&v.matches&&v.matches.length>0&&!b?v.matches:vs(te,Y,c),z=(V&&V.flushSync)===!0;if(ce&&v.initialized&&!k&&Gj(v.location,Y)&&!(V&&V.submission&&Rt(V.submission.formMethod))){tt(Y,{matches:ce},{flushSync:z});return}let G=Gs(ce,te,Y.pathname);if(G.active&&G.matches&&(ce=G.matches),!ce){let{error:it,notFoundMatches:Oe,route:$e}=Or(Y.pathname);tt(Y,{matches:Oe,loaderData:{},errors:{[$e.id]:it}},{flushSync:z});return}U=new AbortController;let ne=Br(e.history,Y,U.signal,V&&V.submission),ue=e.getContext?await e.getContext():new Zm,me;if(V&&V.pendingError)me=[bs(ce).route.id,{type:"error",error:V.pendingError}];else if(V&&V.submission&&Rt(V.submission.formMethod)){let it=await Lt(ne,Y,V.submission,ce,ue,G.active,V&&V.initialHydration===!0,{replace:V.replace,flushSync:z});if(it.shortCircuited)return;if(it.pendingActionResult){let[Oe,$e]=it.pendingActionResult;if(Wt($e)&&Vl($e.error)&&$e.error.status===404){U=null,tt(Y,{matches:it.matches,loaderData:{},errors:{[Oe]:$e.error}});return}}ce=it.matches||ce,me=it.pendingActionResult,ae=su(Y,V.submission),z=!1,G.active=!1,ne=Br(e.history,ne.url,ne.signal)}let{shortCircuited:de,matches:fe,loaderData:_e,errors:nt}=await _n(ne,Y,ce,ue,G.active,ae,V&&V.submission,V&&V.fetcherSubmission,V&&V.replace,V&&V.initialHydration===!0,z,me);de||(U=null,tt(Y,{matches:fe||ce,...fh(me),loaderData:_e,errors:nt}))}async function Lt(I,Y,V,te,ae,ce,z,G={}){Fr();let ne=nN(Y,V);if(ve({navigation:ne},{flushSync:G.flushSync===!0}),ce){let de=await Js(te,Y.pathname,I.signal);if(de.type==="aborted")return{shortCircuited:!0};if(de.type==="error"){if(de.partialMatches.length===0){let{matches:_e,route:nt}=Ai(o);return{matches:_e,pendingActionResult:[nt.id,{type:"error",error:de.error}]}}let fe=bs(de.partialMatches).route.id;return{matches:de.partialMatches,pendingActionResult:[fe,{type:"error",error:de.error}]}}else if(de.matches)te=de.matches;else{let{notFoundMatches:fe,error:_e,route:nt}=Or(Y.pathname);return{matches:fe,pendingActionResult:[nt.id,{type:"error",error:_e}]}}}let ue,me=uo(te,Y);if(!me.route.action&&!me.route.lazy)ue={type:"error",error:sn(405,{method:I.method,pathname:Y.pathname,routeId:me.route.id})};else{let de=oa(l,i,I,te,me,z?[]:r,ae),fe=await en(I,de,ae,null);if(ue=fe[me.route.id],!ue){for(let _e of te)if(fe[_e.route.id]){ue=fe[_e.route.id];break}}if(I.signal.aborted)return{shortCircuited:!0}}if(or(ue)){let de;return G&&G.replace!=null?de=G.replace:de=dh(ue.response.headers.get("Location"),new URL(I.url),c)===v.location.pathname+v.location.search,await Rn(I,ue,!0,{submission:V,replace:de}),{shortCircuited:!0}}if(Wt(ue)){let de=bs(te,me.route.id);return(G&&G.replace)!==!0&&(E="PUSH"),{matches:te,pendingActionResult:[de.route.id,ue,me.route.id]}}return{matches:te,pendingActionResult:[me.route.id,ue]}}async function _n(I,Y,V,te,ae,ce,z,G,ne,ue,me,de){let fe=ce||su(Y,z),_e=z||G||yh(fe),nt=!j&&!ue;if(ae){if(nt){let yt=xn(de);ve({navigation:fe,...yt!==void 0?{actionData:yt}:{}},{flushSync:me})}let Ce=await Js(V,Y.pathname,I.signal);if(Ce.type==="aborted")return{shortCircuited:!0};if(Ce.type==="error"){if(Ce.partialMatches.length===0){let{matches:$r,route:er}=Ai(o);return{matches:$r,loaderData:{},errors:{[er.id]:Ce.error}}}let yt=bs(Ce.partialMatches).route.id;return{matches:Ce.partialMatches,loaderData:{},errors:{[yt]:Ce.error}}}else if(Ce.matches)V=Ce.matches;else{let{error:yt,notFoundMatches:$r,route:er}=Or(Y.pathname);return{matches:$r,loaderData:{},errors:{[er.id]:yt}}}}let it=u||o,{dsMatches:Oe,revalidatingFetchers:$e}=lh(I,te,l,i,e.history,v,V,_e,Y,ue?[]:r,ue===!0,k,F,B,K,Q,it,c,e.patchRoutesOnNavigation!=null,de);if($=++_,!e.dataStrategy&&!Oe.some(Ce=>Ce.shouldLoad)&&!Oe.some(Ce=>Ce.route.middleware&&Ce.route.middleware.length>0)&&$e.length===0){let Ce=Qn();return tt(Y,{matches:V,loaderData:{},errors:de&&Wt(de[1])?{[de[0]]:de[1].error}:null,...fh(de),...Ce?{fetchers:new Map(v.fetchers)}:{}},{flushSync:me}),{shortCircuited:!0}}if(nt){let Ce={};if(!ae){Ce.navigation=fe;let yt=xn(de);yt!==void 0&&(Ce.actionData=yt)}$e.length>0&&(Ce.fetchers=$a($e)),ve(Ce,{flushSync:me})}$e.forEach(Ce=>{Ht(Ce.key),Ce.controller&&N.set(Ce.key,Ce.controller)});let Xs=()=>$e.forEach(Ce=>Ht(Ce.key));U&&U.signal.addEventListener("abort",Xs);let{loaderResults:Wa,fetcherResults:ps}=await Aa(Oe,$e,I,te);if(I.signal.aborted)return{shortCircuited:!0};U&&U.signal.removeEventListener("abort",Xs),$e.forEach(Ce=>N.delete(Ce.key));let Pn=qi(Wa);if(Pn)return await Rn(I,Pn.result,!0,{replace:ne}),{shortCircuited:!0};if(Pn=qi(ps),Pn)return Q.add(Pn.key),await Rn(I,Pn.result,!0,{replace:ne}),{shortCircuited:!0};let{loaderData:Cc,errors:Ka}=mh(v,V,Wa,de,$e,ps);ue&&v.errors&&(Ka={...v.errors,...Ka});let Zs=Qn(),gi=Ba($),vi=Zs||gi||$e.length>0;return{matches:V,loaderData:Cc,errors:Ka,...vi?{fetchers:new Map(v.fetchers)}:{}}}function xn(I){if(I&&!Wt(I[1]))return{[I[0]]:I[1].data};if(v.actionData)return Object.keys(v.actionData).length===0?null:v.actionData}function $a(I){return I.forEach(Y=>{let V=v.fetchers.get(Y.key),te=al(void 0,V?V.data:void 0);v.fetchers.set(Y.key,te)}),new Map(v.fetchers)}async function ds(I,Y,V,te){Ht(I);let ae=(te&&te.flushSync)===!0,ce=u||o,z=rd(v.location,v.matches,c,V,Y,te==null?void 0:te.relative),G=vs(ce,z,c),ne=Gs(G,ce,z);if(ne.active&&ne.matches&&(G=ne.matches),!G){tn(I,Y,sn(404,{pathname:z}),{flushSync:ae});return}let{path:ue,submission:me,error:de}=ah(!0,z,te);if(de){tn(I,Y,de,{flushSync:ae});return}let fe=e.getContext?await e.getContext():new Zm,_e=(te&&te.preventScrollReset)===!0;if(me&&Rt(me.formMethod)){await pi(I,Y,ue,G,fe,ne.active,ae,_e,me);return}K.set(I,{routeId:Y,path:ue}),await Ia(I,Y,ue,G,fe,ne.active,ae,_e,me)}async function pi(I,Y,V,te,ae,ce,z,G,ne){Fr(),K.delete(I);let ue=v.fetchers.get(I);xt(I,sN(ne,ue),{flushSync:z});let me=new AbortController,de=Br(e.history,V,me.signal,ne);if(ce){let Ve=await Js(te,new URL(de.url).pathname,de.signal,I);if(Ve.type==="aborted")return;if(Ve.type==="error"){tn(I,Y,Ve.error,{flushSync:z});return}else if(Ve.matches)te=Ve.matches;else{tn(I,Y,sn(404,{pathname:V}),{flushSync:z});return}}let fe=uo(te,V);if(!fe.route.action&&!fe.route.lazy){let Ve=sn(405,{method:ne.formMethod,pathname:V,routeId:Y});tn(I,Y,Ve,{flushSync:z});return}N.set(I,me);let _e=_,nt=oa(l,i,de,te,fe,r,ae),it=await en(de,nt,ae,I),Oe=it[fe.route.id];if(!Oe){for(let Ve of nt)if(it[Ve.route.id]){Oe=it[Ve.route.id];break}}if(de.signal.aborted){N.get(I)===me&&N.delete(I);return}if(B.has(I)){if(or(Oe)||Wt(Oe)){xt(I,Vn(void 0));return}}else{if(or(Oe))if(N.delete(I),$>_e){xt(I,Vn(void 0));return}else return Q.add(I),xt(I,al(ne)),Rn(de,Oe,!1,{fetcherSubmission:ne,preventScrollReset:G});if(Wt(Oe)){tn(I,Y,Oe.error);return}}let $e=v.navigation.location||v.location,Xs=Br(e.history,$e,me.signal),Wa=u||o,ps=v.navigation.state!=="idle"?vs(Wa,v.navigation.location,c):v.matches;Ne(ps,"Didn't find any matches after fetcher action");let Pn=++_;O.set(I,Pn);let Cc=al(ne,Oe.data);v.fetchers.set(I,Cc);let{dsMatches:Ka,revalidatingFetchers:Zs}=lh(Xs,ae,l,i,e.history,v,ps,ne,$e,r,!1,k,F,B,K,Q,Wa,c,e.patchRoutesOnNavigation!=null,[fe.route.id,Oe]);Zs.filter(Ve=>Ve.key!==I).forEach(Ve=>{let bi=Ve.key,qp=v.fetchers.get(bi),jg=al(void 0,qp?qp.data:void 0);v.fetchers.set(bi,jg),Ht(bi),Ve.controller&&N.set(bi,Ve.controller)}),ve({fetchers:new Map(v.fetchers)});let gi=()=>Zs.forEach(Ve=>Ht(Ve.key));me.signal.addEventListener("abort",gi);let{loaderResults:vi,fetcherResults:Ce}=await Aa(Ka,Zs,Xs,ae);if(me.signal.aborted)return;if(me.signal.removeEventListener("abort",gi),O.delete(I),N.delete(I),Zs.forEach(Ve=>N.delete(Ve.key)),v.fetchers.has(I)){let Ve=Vn(Oe.data);v.fetchers.set(I,Ve)}let yt=qi(vi);if(yt)return Rn(Xs,yt.result,!1,{preventScrollReset:G});if(yt=qi(Ce),yt)return Q.add(yt.key),Rn(Xs,yt.result,!1,{preventScrollReset:G});let{loaderData:$r,errors:er}=mh(v,ps,vi,void 0,Zs,Ce);Ba(Pn),v.navigation.state==="loading"&&Pn>$?(Ne(E,"Expected pending action"),U&&U.abort(),tt(v.navigation.location,{matches:ps,loaderData:$r,errors:er,fetchers:new Map(v.fetchers)})):(ve({errors:er,loaderData:hh(v.loaderData,$r,ps,er),fetchers:new Map(v.fetchers)}),k=!1)}async function Ia(I,Y,V,te,ae,ce,z,G,ne){let ue=v.fetchers.get(I);xt(I,al(ne,ue?ue.data:void 0),{flushSync:z});let me=new AbortController,de=Br(e.history,V,me.signal);if(ce){let $e=await Js(te,new URL(de.url).pathname,de.signal,I);if($e.type==="aborted")return;if($e.type==="error"){tn(I,Y,$e.error,{flushSync:z});return}else if($e.matches)te=$e.matches;else{tn(I,Y,sn(404,{pathname:V}),{flushSync:z});return}}let fe=uo(te,V);N.set(I,me);let _e=_,nt=oa(l,i,de,te,fe,r,ae),Oe=(await en(de,nt,ae,I))[fe.route.id];if(N.get(I)===me&&N.delete(I),!de.signal.aborted){if(B.has(I)){xt(I,Vn(void 0));return}if(or(Oe))if($>_e){xt(I,Vn(void 0));return}else{Q.add(I),await Rn(de,Oe,!1,{preventScrollReset:G});return}if(Wt(Oe)){tn(I,Y,Oe.error);return}xt(I,Vn(Oe.data))}}async function Rn(I,Y,V,{submission:te,fetcherSubmission:ae,preventScrollReset:ce,replace:z}={}){V||(T==null||T.resolve(),T=null),Y.response.headers.has("X-Remix-Revalidate")&&(k=!0);let G=Y.response.headers.get("Location");Ne(G,"Expected a Location header on the redirect Response"),G=dh(G,new URL(I.url),c);let ne=Yl(v.location,G,{_isRedirect:!0});if(n){let nt=!1;if(Y.response.headers.has("X-Remix-Reload-Document"))nt=!0;else if(mc(G)){const it=X0(G,!0);nt=it.origin!==t.location.origin||mn(it.pathname,c)==null}if(nt){z?t.location.replace(G):t.location.assign(G);return}}U=null;let ue=z===!0||Y.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:me,formAction:de,formEncType:fe}=v.navigation;!te&&!ae&&me&&de&&fe&&(te=yh(v.navigation));let _e=te||ae;if(Fj.has(Y.response.status)&&_e&&Rt(_e.formMethod))await dt(ue,ne,{submission:{..._e,formAction:G},preventScrollReset:ce||M,enableViewTransition:V?X:void 0});else{let nt=su(ne,te);await dt(ue,ne,{overrideNavigation:nt,fetcherSubmission:ae,preventScrollReset:ce||M,enableViewTransition:V?X:void 0})}}async function en(I,Y,V,te){let ae,ce={};try{ae=await Qj(p,I,Y,te,V,!1)}catch(z){return Y.filter(G=>G.shouldLoad).forEach(G=>{ce[G.route.id]={type:"error",error:z}}),ce}if(I.signal.aborted)return ce;for(let[z,G]of Object.entries(ae))if(eN(G)){let ne=G.result;ce[z]={type:"redirect",response:Wj(ne,I,z,Y,c)}}else ce[z]=await Vj(G);return ce}async function Aa(I,Y,V,te){let ae=en(V,I,te,null),ce=Promise.all(Y.map(async ne=>{if(ne.matches&&ne.match&&ne.request&&ne.controller){let me=(await en(ne.request,ne.matches,te,ne.key))[ne.match.route.id];return{[ne.key]:me}}else return Promise.resolve({[ne.key]:{type:"error",error:sn(404,{pathname:ne.path})}})})),z=await ae,G=(await ce).reduce((ne,ue)=>Object.assign(ne,ue),{});return{loaderResults:z,fetcherResults:G}}function Fr(){k=!0,K.forEach((I,Y)=>{N.has(Y)&&F.add(Y),Ht(Y)})}function xt(I,Y,V={}){v.fetchers.set(I,Y),ve({fetchers:new Map(v.fetchers)},{flushSync:(V&&V.flushSync)===!0})}function tn(I,Y,V,te={}){let ae=bs(v.matches,Y);Dn(I),ve({errors:{[ae.route.id]:V},fetchers:new Map(v.fetchers)},{flushSync:(te&&te.flushSync)===!0})}function Ws(I){return D.set(I,(D.get(I)||0)+1),B.has(I)&&B.delete(I),v.fetchers.get(I)||Tj}function Tr(I,Y){Ht(I,Y==null?void 0:Y.reason),xt(I,Vn(null))}function Dn(I){let Y=v.fetchers.get(I);N.has(I)&&!(Y&&Y.state==="loading"&&O.has(I))&&Ht(I),K.delete(I),O.delete(I),Q.delete(I),B.delete(I),F.delete(I),v.fetchers.delete(I)}function mi(I){let Y=(D.get(I)||0)-1;Y<=0?(D.delete(I),B.add(I)):D.set(I,Y),ve({fetchers:new Map(v.fetchers)})}function Ht(I,Y){let V=N.get(I);V&&(V.abort(Y),N.delete(I))}function qa(I){for(let Y of I){let V=Ws(Y),te=Vn(V.data);v.fetchers.set(Y,te)}}function Qn(){let I=[],Y=!1;for(let V of Q){let te=v.fetchers.get(V);Ne(te,`Expected fetcher: ${V}`),te.state==="loading"&&(Q.delete(V),I.push(V),Y=!0)}return qa(I),Y}function Ba(I){let Y=[];for(let[V,te]of O)if(te<I){let ae=v.fetchers.get(V);Ne(ae,`Expected fetcher: ${V}`),ae.state==="loading"&&(Ht(V),O.delete(V),Y.push(V))}return qa(Y),Y.length>0}function za(I,Y){let V=v.blockers.get(I)||rl;return ee.get(I)!==Y&&ee.set(I,Y),V}function Ua(I){v.blockers.delete(I),ee.delete(I)}function Ks(I,Y){let V=v.blockers.get(I)||rl;Ne(V.state==="unblocked"&&Y.state==="blocked"||V.state==="blocked"&&Y.state==="blocked"||V.state==="blocked"&&Y.state==="proceeding"||V.state==="blocked"&&Y.state==="unblocked"||V.state==="proceeding"&&Y.state==="unblocked",`Invalid blocker state transition: ${V.state} -> ${Y.state}`);let te=new Map(v.blockers);te.set(I,Y),ve({blockers:te})}function Qa({currentLocation:I,nextLocation:Y,historyAction:V}){if(ee.size===0)return;ee.size>1&&Ye(!1,"A router only supports one blocker at a time");let te=Array.from(ee.entries()),[ae,ce]=te[te.length-1],z=v.blockers.get(ae);if(!(z&&z.state==="proceeding")&&ce({currentLocation:I,nextLocation:Y,historyAction:V}))return ae}function Or(I){let Y=sn(404,{pathname:I}),V=u||o,{matches:te,route:ae}=Ai(V);return{notFoundMatches:te,route:ae,error:Y}}function hi(I,Y,V){if(h=I,C=Y,S=V||null,!g&&v.navigation===nu){g=!0;let te=Ha(v.location,v.matches);te!=null&&ve({restoreScrollPosition:te})}return()=>{h=null,C=null,S=null}}function Ya(I,Y){return S&&S(I,Y.map(te=>aj(te,v.loaderData)))||I.key}function fi(I,Y){if(h&&C){let V=Ya(I,Y);h[V]=C()}}function Ha(I,Y){if(h){let V=Ya(I,Y),te=h[V];if(typeof te=="number")return te}return null}function Gs(I,Y,V){if(e.patchRoutesOnNavigation)if(I){if(Object.keys(I[0].params).length>0)return{active:!0,matches:xl(Y,V,c,!0)}}else return{active:!0,matches:xl(Y,V,c,!0)||[]};return{active:!1,matches:null}}async function Js(I,Y,V,te){if(!e.patchRoutesOnNavigation)return{type:"success",matches:I};let ae=I;for(;;){let ce=u==null,z=u||o,G=i;try{await e.patchRoutesOnNavigation({signal:V,path:Y,matches:ae,fetcherKey:te,patch:(me,de)=>{V.aborted||ih(me,de,z,G,l,!1)}})}catch(me){return{type:"error",error:me,partialMatches:ae}}finally{ce&&!V.aborted&&(o=[...o])}if(V.aborted)return{type:"aborted"};let ne=vs(z,Y,c),ue=null;if(ne){if(Object.keys(ne[0].params).length===0)return{type:"success",matches:ne};if(ue=xl(z,Y,c,!0),!(ue&&ae.length<ue.length&&Va(ae,ue.slice(0,ae.length))))return{type:"success",matches:ne}}if(ue||(ue=xl(z,Y,c,!0)),!ue||Va(ae,ue))return{type:"success",matches:null};ae=ue}}function Va(I,Y){return I.length===Y.length&&I.every((V,te)=>V.route.id===Y[te].route.id)}function xi(I){i={},u=Hl(I,l,void 0,i)}function yi(I,Y,V=!1){let te=u==null;ih(I,Y,u||o,i,l,V),te&&(o=[...o],ve({}))}return A={get basename(){return c},get future(){return d},get state(){return v},get routes(){return o},get window(){return t},initialize:he,subscribe:Te,enableScrollRestoration:hi,navigate:Be,fetch:ds,revalidate:wt,createHref:I=>e.history.createHref(I),encodeLocation:I=>e.history.encodeLocation(I),getFetcher:Ws,resetFetcher:Tr,deleteFetcher:mi,dispose:ge,getBlocker:za,deleteBlocker:Ua,patchRoutes:yi,_internalFetchControllers:N,_internalSetRoutes:xi,_internalSetStateDoNotUseOrYouWillBreakYourApp(I){ve(I)}},e.unstable_instrumentations&&(A=kj(A,e.unstable_instrumentations.map(I=>I.router).filter(Boolean))),A}function Ij(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function rd(e,t,n,r,a,l){let i,o;if(a){i=[];for(let c of t)if(i.push(c),c.route.id===a){o=c;break}}else i=t,o=t[t.length-1];let u=fc(r||".",hc(i),mn(e.pathname,n)||e.pathname,l==="path");if(r==null&&(u.search=e.search,u.hash=e.hash),(r==null||r===""||r===".")&&o){let c=kp(u.search);if(o.route.index&&!c)u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index";else if(!o.route.index&&c){let p=new URLSearchParams(u.search),d=p.getAll("index");p.delete("index"),d.filter(x=>x).forEach(x=>p.append("index",x));let m=p.toString();u.search=m?`?${m}`:""}}return n!=="/"&&(u.pathname=gj({basename:n,pathname:u.pathname})),Un(u)}function ah(e,t,n){if(!n||!Ij(n))return{path:t};if(n.formMethod&&!tN(n.formMethod))return{path:t,error:sn(405,{method:n.formMethod})};let r=()=>({path:t,error:sn(400,{type:"invalid-body"})}),l=(n.formMethod||"get").toUpperCase(),i=dy(t);if(n.body!==void 0){if(n.formEncType==="text/plain"){if(!Rt(l))return r();let d=typeof n.body=="string"?n.body:n.body instanceof FormData||n.body instanceof URLSearchParams?Array.from(n.body.entries()).reduce((m,[x,h])=>`${m}${x}=${h}
`,""):String(n.body);return{path:t,submission:{formMethod:l,formAction:i,formEncType:n.formEncType,formData:void 0,json:void 0,text:d}}}else if(n.formEncType==="application/json"){if(!Rt(l))return r();try{let d=typeof n.body=="string"?JSON.parse(n.body):n.body;return{path:t,submission:{formMethod:l,formAction:i,formEncType:n.formEncType,formData:void 0,json:d,text:void 0}}}catch{return r()}}}Ne(typeof FormData=="function","FormData is not available in this environment");let o,u;if(n.formData)o=id(n.formData),u=n.formData;else if(n.body instanceof FormData)o=id(n.body),u=n.body;else if(n.body instanceof URLSearchParams)o=n.body,u=ph(o);else if(n.body==null)o=new URLSearchParams,u=new FormData;else try{o=new URLSearchParams(n.body),u=ph(o)}catch{return r()}let c={formMethod:l,formAction:i,formEncType:n&&n.formEncType||"application/x-www-form-urlencoded",formData:u,json:void 0,text:void 0};if(Rt(c.formMethod))return{path:t,submission:c};let p=Vs(t);return e&&p.search&&kp(p.search)&&o.append("index",""),p.search=`?${o}`,{path:Un(p),submission:c}}function lh(e,t,n,r,a,l,i,o,u,c,p,d,m,x,h,S,C,g,f,b){var w;let R=b?Wt(b[1])?b[1].error:b[1].data:void 0,P=a.createURL(l.location),A=a.createURL(u),v;if(p&&l.errors){let j=Object.keys(l.errors)[0];v=i.findIndex(k=>k.route.id===j)}else if(b&&Wt(b[1])){let j=b[0];v=i.findIndex(k=>k.route.id===j)-1}let E=b?b[1].statusCode:void 0,T=E&&E>=400,M={currentUrl:P,currentParams:((w=l.matches[0])==null?void 0:w.params)||{},nextUrl:A,nextParams:i[0].params,...o,actionResult:R,actionStatus:E},U=ai(i),X=i.map((j,k)=>{let{route:F}=j,N=null;if(v!=null&&k>v?N=!1:F.lazy?N=!0:wp(F)?p?N=ad(F,l.loaderData,l.errors):Aj(l.loaderData,l.matches[k],j)&&(N=!0):N=!1,N!==null)return ld(n,r,e,U,j,c,t,N);let _=T?!1:d||P.pathname+P.search===A.pathname+A.search||P.search!==A.search||qj(l.matches[k],j),$={...M,defaultShouldRevalidate:_},O=Uo(j,$);return ld(n,r,e,U,j,c,t,O,$)}),L=[];return h.forEach((j,k)=>{if(p||!i.some(D=>D.route.id===j.routeId)||x.has(k))return;let F=l.fetchers.get(k),N=F&&F.state!=="idle"&&F.data===void 0,_=vs(C,j.path,g);if(!_){if(f&&N)return;L.push({key:k,routeId:j.routeId,path:j.path,matches:null,match:null,request:null,controller:null});return}if(S.has(k))return;let $=uo(_,j.path),O=new AbortController,Q=Br(a,j.path,O.signal),K=null;if(m.has(k))m.delete(k),K=oa(n,r,Q,_,$,c,t);else if(N)d&&(K=oa(n,r,Q,_,$,c,t));else{let D={...M,defaultShouldRevalidate:T?!1:d};Uo($,D)&&(K=oa(n,r,Q,_,$,c,t,D))}K&&L.push({key:k,routeId:j.routeId,path:j.path,matches:K,match:$,request:Q,controller:O})}),{dsMatches:X,revalidatingFetchers:L}}function wp(e){return e.loader!=null||e.middleware!=null&&e.middleware.length>0}function ad(e,t,n){if(e.lazy)return!0;if(!wp(e))return!1;let r=t!=null&&e.id in t,a=n!=null&&n[e.id]!==void 0;return!r&&a?!1:typeof e.loader=="function"&&e.loader.hydrate===!0?!0:!r&&!a}function Aj(e,t,n){let r=!t||n.route.id!==t.route.id,a=!e.hasOwnProperty(n.route.id);return r||a}function qj(e,t){let n=e.route.path;return e.pathname!==t.pathname||n!=null&&n.endsWith("*")&&e.params["*"]!==t.params["*"]}function Uo(e,t){if(e.route.shouldRevalidate){let n=e.route.shouldRevalidate(t);if(typeof n=="boolean")return n}return t.defaultShouldRevalidate}function ih(e,t,n,r,a,l){let i;if(e){let c=r[e];Ne(c,`No route found to patch children into: routeId = ${e}`),c.children||(c.children=[]),i=c.children}else i=n;let o=[],u=[];if(t.forEach(c=>{let p=i.find(d=>ly(c,d));p?u.push({existingRoute:p,newRoute:c}):o.push(c)}),o.length>0){let c=Hl(o,a,[e||"_","patch",String((i==null?void 0:i.length)||"0")],r);i.push(...c)}if(l&&u.length>0)for(let c=0;c<u.length;c++){let{existingRoute:p,newRoute:d}=u[c],m=p,[x]=Hl([d],a,[],{},!0);Object.assign(m,{element:x.element?x.element:m.element,errorElement:x.errorElement?x.errorElement:m.errorElement,hydrateFallbackElement:x.hydrateFallbackElement?x.hydrateFallbackElement:m.hydrateFallbackElement})}}function ly(e,t){return"id"in e&&"id"in t&&e.id===t.id?!0:e.index===t.index&&e.path===t.path&&e.caseSensitive===t.caseSensitive?(!e.children||e.children.length===0)&&(!t.children||t.children.length===0)?!0:e.children.every((n,r)=>{var a;return(a=t.children)==null?void 0:a.some(l=>ly(n,l))}):!1}var oh=new WeakMap,iy=({key:e,route:t,manifest:n,mapRouteProperties:r})=>{let a=n[t.id];if(Ne(a,"No route found in manifest"),!a.lazy||typeof a.lazy!="object")return;let l=a.lazy[e];if(!l)return;let i=oh.get(a);i||(i={},oh.set(a,i));let o=i[e];if(o)return o;let u=(async()=>{let c=tj(e),d=a[e]!==void 0&&e!=="hasErrorBoundary";if(c)Ye(!c,"Route property "+e+" is not a supported lazy route property. This property will be ignored."),i[e]=Promise.resolve();else if(d)Ye(!1,`Route "${a.id}" has a static property "${e}" defined. The lazy property will be ignored.`);else{let m=await l();m!=null&&(Object.assign(a,{[e]:m}),Object.assign(a,r(a)))}typeof a.lazy=="object"&&(a.lazy[e]=void 0,Object.values(a.lazy).every(m=>m===void 0)&&(a.lazy=void 0))})();return i[e]=u,u},ch=new WeakMap;function Bj(e,t,n,r,a){let l=n[e.id];if(Ne(l,"No route found in manifest"),!e.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof e.lazy=="function"){let p=ch.get(l);if(p)return{lazyRoutePromise:p,lazyHandlerPromise:p};let d=(async()=>{Ne(typeof e.lazy=="function","No lazy route function found");let m=await e.lazy(),x={};for(let h in m){let S=m[h];if(S===void 0)continue;let C=sj(h),f=l[h]!==void 0&&h!=="hasErrorBoundary";C?Ye(!C,"Route property "+h+" is not a supported property to be returned from a lazy route function. This property will be ignored."):f?Ye(!f,`Route "${l.id}" has a static property "${h}" defined but its lazy function is also returning a value for this property. The lazy route property "${h}" will be ignored.`):x[h]=S}Object.assign(l,x),Object.assign(l,{...r(l),lazy:void 0})})();return ch.set(l,d),d.catch(()=>{}),{lazyRoutePromise:d,lazyHandlerPromise:d}}let i=Object.keys(e.lazy),o=[],u;for(let p of i){if(a&&a.includes(p))continue;let d=iy({key:p,route:e,manifest:n,mapRouteProperties:r});d&&(o.push(d),p===t&&(u=d))}let c=o.length>0?Promise.all(o).then(()=>{}):void 0;return c==null||c.catch(()=>{}),u==null||u.catch(()=>{}),{lazyRoutePromise:c,lazyHandlerPromise:u}}async function uh(e){let t=e.matches.filter(a=>a.shouldLoad),n={};return(await Promise.all(t.map(a=>a.resolve()))).forEach((a,l)=>{n[t[l].route.id]=a}),n}async function zj(e){return e.matches.some(t=>t.route.middleware)?oy(e,()=>uh(e)):uh(e)}function oy(e,t){return Uj(e,t,r=>r,Xj,n);function n(r,a,l){if(l)return Promise.resolve(Object.assign(l.value,{[a]:{type:"error",result:r}}));{let{matches:i}=e,o=Math.min(Math.max(i.findIndex(c=>c.route.id===a),0),Math.max(i.findIndex(c=>c.shouldCallHandler()),0)),u=bs(i,i[o].route.id).route.id;return Promise.resolve({[u]:{type:"error",result:r}})}}}async function Uj(e,t,n,r,a){let{matches:l,request:i,params:o,context:u,unstable_pattern:c}=e,p=l.flatMap(m=>m.route.middleware?m.route.middleware.map(x=>[m.route.id,x]):[]);return await cy({request:i,params:o,context:u,unstable_pattern:c},p,t,n,r,a)}async function cy(e,t,n,r,a,l,i=0){let{request:o}=e;if(o.signal.aborted)throw o.signal.reason??new Error(`Request aborted: ${o.method} ${o.url}`);let u=t[i];if(!u)return await n();let[c,p]=u,d,m=async()=>{if(d)throw new Error("You may only call `next()` once per middleware");try{return d={value:await cy(e,t,n,r,a,l,i+1)},d.value}catch(x){return d={value:await l(x,c,d)},d.value}};try{let x=await p(e,m),h=x!=null?r(x):void 0;return a(h)?h:d?h??d.value:(d={value:await m()},d.value)}catch(x){return await l(x,c,d)}}function uy(e,t,n,r,a){let l=iy({key:"middleware",route:r.route,manifest:t,mapRouteProperties:e}),i=Bj(r.route,Rt(n.method)?"action":"loader",t,e,a);return{middleware:l,route:i.lazyRoutePromise,handler:i.lazyHandlerPromise}}function ld(e,t,n,r,a,l,i,o,u=null){let c=!1,p=uy(e,t,n,a,l);return{...a,_lazyPromises:p,shouldLoad:o,shouldRevalidateArgs:u,shouldCallHandler(d){return c=!0,u?typeof d=="boolean"?Uo(a,{...u,defaultShouldRevalidate:d}):Uo(a,u):o},resolve(d){let{lazy:m,loader:x,middleware:h}=a.route,S=c||o||d&&!Rt(n.method)&&(m||x),C=h&&h.length>0&&!x&&!m;return S&&(Rt(n.method)||!C)?Yj({request:n,unstable_pattern:r,match:a,lazyHandlerPromise:p==null?void 0:p.handler,lazyRoutePromise:p==null?void 0:p.route,handlerOverride:d,scopedContext:i}):Promise.resolve({type:"data",result:void 0})}}}function oa(e,t,n,r,a,l,i,o=null){return r.map(u=>u.route.id!==a.route.id?{...u,shouldLoad:!1,shouldRevalidateArgs:o,shouldCallHandler:()=>!1,_lazyPromises:uy(e,t,n,u,l),resolve:()=>Promise.resolve({type:"data",result:void 0})}:ld(e,t,n,ai(r),u,l,i,!0,o))}async function Qj(e,t,n,r,a,l){n.some(c=>{var p;return(p=c._lazyPromises)==null?void 0:p.middleware})&&await Promise.all(n.map(c=>{var p;return(p=c._lazyPromises)==null?void 0:p.middleware}));let i={request:t,unstable_pattern:ai(n),params:n[0].params,context:a,matches:n},u=await e({...i,fetcherKey:r,runClientMiddleware:c=>{let p=i;return oy(p,()=>c({...p,fetcherKey:r,runClientMiddleware:()=>{throw new Error("Cannot call `runClientMiddleware()` from within an `runClientMiddleware` handler")}}))}});try{await Promise.all(n.flatMap(c=>{var p,d;return[(p=c._lazyPromises)==null?void 0:p.handler,(d=c._lazyPromises)==null?void 0:d.route]}))}catch{}return u}async function Yj({request:e,unstable_pattern:t,match:n,lazyHandlerPromise:r,lazyRoutePromise:a,handlerOverride:l,scopedContext:i}){let o,u,c=Rt(e.method),p=c?"action":"loader",d=m=>{let x,h=new Promise((g,f)=>x=f);u=()=>x(),e.signal.addEventListener("abort",u);let S=g=>typeof m!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${p}" [routeId: ${n.route.id}]`)):m({request:e,unstable_pattern:t,params:n.params,context:i},...g!==void 0?[g]:[]),C=(async()=>{try{return{type:"data",result:await(l?l(f=>S(f)):S())}}catch(g){return{type:"error",result:g}}})();return Promise.race([C,h])};try{let m=c?n.route.action:n.route.loader;if(r||a)if(m){let x,[h]=await Promise.all([d(m).catch(S=>{x=S}),r,a]);if(x!==void 0)throw x;o=h}else{await r;let x=c?n.route.action:n.route.loader;if(x)[o]=await Promise.all([d(x),a]);else if(p==="action"){let h=new URL(e.url),S=h.pathname+h.search;throw sn(405,{method:e.method,pathname:S,routeId:n.route.id})}else return{type:"data",result:void 0}}else if(m)o=await d(m);else{let x=new URL(e.url),h=x.pathname+x.search;throw sn(404,{pathname:h})}}catch(m){return{type:"error",result:m}}finally{u&&e.signal.removeEventListener("abort",u)}return o}async function Hj(e){let t=e.headers.get("Content-Type");return t&&/\bapplication\/json\b/.test(t)?e.body==null?null:e.json():e.text()}async function Vj(e){var r,a,l,i,o;let{result:t,type:n}=e;if(py(t)){let u;try{u=await Hj(t)}catch(c){return{type:"error",error:c}}return n==="error"?{type:"error",error:new xc(t.status,t.statusText,u),statusCode:t.status,headers:t.headers}:{type:"data",data:u,statusCode:t.status,headers:t.headers}}return n==="error"?xh(t)?t.data instanceof Error?{type:"error",error:t.data,statusCode:(r=t.init)==null?void 0:r.status,headers:(a=t.init)!=null&&a.headers?new Headers(t.init.headers):void 0}:{type:"error",error:Jj(t),statusCode:Vl(t)?t.status:void 0,headers:(l=t.init)!=null&&l.headers?new Headers(t.init.headers):void 0}:{type:"error",error:t,statusCode:Vl(t)?t.status:void 0}:xh(t)?{type:"data",data:t.data,statusCode:(i=t.init)==null?void 0:i.status,headers:(o=t.init)!=null&&o.headers?new Headers(t.init.headers):void 0}:{type:"data",data:t}}function Wj(e,t,n,r,a){let l=e.headers.get("Location");if(Ne(l,"Redirects returned/thrown from loaders/actions must have a Location header"),!mc(l)){let i=r.slice(0,r.findIndex(o=>o.route.id===n)+1);l=rd(new URL(t.url),i,a,l),e.headers.set("Location",l)}return e}function dh(e,t,n){if(mc(e)){let r=e,a=r.startsWith("//")?new URL(t.protocol+r):new URL(r),l=mn(a.pathname,n)!=null;if(a.origin===t.origin&&l)return a.pathname+a.search+a.hash}return e}function Br(e,t,n,r){let a=e.createURL(dy(t)).toString(),l={signal:n};if(r&&Rt(r.formMethod)){let{formMethod:i,formEncType:o}=r;l.method=i.toUpperCase(),o==="application/json"?(l.headers=new Headers({"Content-Type":o}),l.body=JSON.stringify(r.json)):o==="text/plain"?l.body=r.text:o==="application/x-www-form-urlencoded"&&r.formData?l.body=id(r.formData):l.body=r.formData}return new Request(a,l)}function id(e){let t=new URLSearchParams;for(let[n,r]of e.entries())t.append(n,typeof r=="string"?r:r.name);return t}function ph(e){let t=new FormData;for(let[n,r]of e.entries())t.append(n,r);return t}function Kj(e,t,n,r=!1,a=!1){let l={},i=null,o,u=!1,c={},p=n&&Wt(n[1])?n[1].error:void 0;return e.forEach(d=>{if(!(d.route.id in t))return;let m=d.route.id,x=t[m];if(Ne(!or(x),"Cannot handle redirect results in processLoaderData"),Wt(x)){let h=x.error;if(p!==void 0&&(h=p,p=void 0),i=i||{},a)i[m]=h;else{let S=bs(e,m);i[S.route.id]==null&&(i[S.route.id]=h)}r||(l[m]=ay),u||(u=!0,o=Vl(x.error)?x.error.status:500),x.headers&&(c[m]=x.headers)}else l[m]=x.data,x.statusCode&&x.statusCode!==200&&!u&&(o=x.statusCode),x.headers&&(c[m]=x.headers)}),p!==void 0&&n&&(i={[n[0]]:p},n[2]&&(l[n[2]]=void 0)),{loaderData:l,errors:i,statusCode:o||200,loaderHeaders:c}}function mh(e,t,n,r,a,l){let{loaderData:i,errors:o}=Kj(t,n,r);return a.filter(u=>!u.matches||u.matches.some(c=>c.shouldLoad)).forEach(u=>{let{key:c,match:p,controller:d}=u;if(d&&d.signal.aborted)return;let m=l[c];if(Ne(m,"Did not find corresponding fetcher result"),Wt(m)){let x=bs(e.matches,p==null?void 0:p.route.id);o&&o[x.route.id]||(o={...o,[x.route.id]:m.error}),e.fetchers.delete(c)}else if(or(m))Ne(!1,"Unhandled fetcher revalidation redirect");else{let x=Vn(m.data);e.fetchers.set(c,x)}}),{loaderData:i,errors:o}}function hh(e,t,n,r){let a=Object.entries(t).filter(([,l])=>l!==ay).reduce((l,[i,o])=>(l[i]=o,l),{});for(let l of n){let i=l.route.id;if(!t.hasOwnProperty(i)&&e.hasOwnProperty(i)&&l.route.loader&&(a[i]=e[i]),r&&r.hasOwnProperty(i))break}return a}function fh(e){return e?Wt(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function bs(e,t){return(t?e.slice(0,e.findIndex(r=>r.route.id===t)+1):[...e]).reverse().find(r=>r.route.hasErrorBoundary===!0)||e[0]}function Ai(e){let t=e.length===1?e[0]:e.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function sn(e,{pathname:t,routeId:n,method:r,type:a,message:l}={}){let i="Unknown Server Error",o="Unknown @remix-run/router error";return e===400?(i="Bad Request",r&&t&&n?o=`You made a ${r} request to "${t}" but did not provide a \`loader\` for route "${n}", so there is no way to handle the request.`:a==="invalid-body"&&(o="Unable to encode submission body")):e===403?(i="Forbidden",o=`Route "${n}" does not match URL "${t}"`):e===404?(i="Not Found",o=`No route matches URL "${t}"`):e===405&&(i="Method Not Allowed",r&&t&&n?o=`You made a ${r.toUpperCase()} request to "${t}" but did not provide an \`action\` for route "${n}", so there is no way to handle the request.`:r&&(o=`Invalid request method "${r.toUpperCase()}"`)),new xc(e||500,i,new Error(o),!0)}function qi(e){let t=Object.entries(e);for(let n=t.length-1;n>=0;n--){let[r,a]=t[n];if(or(a))return{key:r,result:a}}}function dy(e){let t=typeof e=="string"?Vs(e):e;return Un({...t,hash:""})}function Gj(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function Jj(e){var t,n;return new xc(((t=e.init)==null?void 0:t.status)??500,((n=e.init)==null?void 0:n.statusText)??"Internal Server Error",e.data)}function Xj(e){return e!=null&&typeof e=="object"&&Object.entries(e).every(([t,n])=>typeof t=="string"&&Zj(n))}function Zj(e){return e!=null&&typeof e=="object"&&"type"in e&&"result"in e&&(e.type==="data"||e.type==="error")}function eN(e){return py(e.result)&&Lj.has(e.result.status)}function Wt(e){return e.type==="error"}function or(e){return(e&&e.type)==="redirect"}function xh(e){return typeof e=="object"&&e!=null&&"type"in e&&"data"in e&&"init"in e&&e.type==="DataWithResponseInit"}function py(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function tN(e){return Mj.has(e.toUpperCase())}function Rt(e){return Dj.has(e.toUpperCase())}function kp(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function uo(e,t){let n=typeof t=="string"?Vs(t).search:t.search;if(e[e.length-1].route.index&&kp(n||""))return e[e.length-1];let r=ty(e);return r[r.length-1]}function yh(e){let{formMethod:t,formAction:n,formEncType:r,text:a,formData:l,json:i}=e;if(!(!t||!n||!r)){if(a!=null)return{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:void 0,text:a};if(l!=null)return{formMethod:t,formAction:n,formEncType:r,formData:l,json:void 0,text:void 0};if(i!==void 0)return{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:i,text:void 0}}}function su(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function nN(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function al(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function sN(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function Vn(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function rN(e,t){try{let n=e.sessionStorage.getItem(ry);if(n){let r=JSON.parse(n);for(let[a,l]of Object.entries(r||{}))l&&Array.isArray(l)&&t.set(a,new Set(l||[]))}}catch{}}function aN(e,t){if(t.size>0){let n={};for(let[r,a]of t)n[r]=[...a];try{e.sessionStorage.setItem(ry,JSON.stringify(n))}catch(r){Ye(!1,`Failed to save applied view transitions in sessionStorage (${r}).`)}}}function gh(){let e,t,n=new Promise((r,a)=>{e=async l=>{r(l);try{await n}catch{}},t=async l=>{a(l);try{await n}catch{}}});return{promise:n,resolve:e,reject:t}}var Lr=y.createContext(null);Lr.displayName="DataRouter";var li=y.createContext(null);li.displayName="DataRouterState";y.createContext(!1);var Cp=y.createContext({isTransitioning:!1});Cp.displayName="ViewTransition";var my=y.createContext(new Map);my.displayName="Fetchers";var lN=y.createContext(null);lN.displayName="Await";var hn=y.createContext(null);hn.displayName="Navigation";var yc=y.createContext(null);yc.displayName="Location";var fn=y.createContext({outlet:null,matches:[],isDataRoute:!1});fn.displayName="Route";var Ep=y.createContext(null);Ep.displayName="RouteError";function iN(e,{relative:t}={}){Ne(La(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=y.useContext(hn),{hash:a,pathname:l,search:i}=ii(e,{relative:t}),o=l;return n!=="/"&&(o=l==="/"?n:zn([n,l])),r.createHref({pathname:o,search:i,hash:a})}function La(){return y.useContext(yc)!=null}function Cn(){return Ne(La(),"useLocation() may be used only in the context of a <Router> component."),y.useContext(yc).location}var hy="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function fy(e){y.useContext(hn).static||y.useLayoutEffect(e)}function gc(){let{isDataRoute:e}=y.useContext(fn);return e?NN():oN()}function oN(){Ne(La(),"useNavigate() may be used only in the context of a <Router> component.");let e=y.useContext(Lr),{basename:t,navigator:n}=y.useContext(hn),{matches:r}=y.useContext(fn),{pathname:a}=Cn(),l=JSON.stringify(hc(r)),i=y.useRef(!1);return fy(()=>{i.current=!0}),y.useCallback((u,c={})=>{if(Ye(i.current,hy),!i.current)return;if(typeof u=="number"){n.go(u);return}let p=fc(u,JSON.parse(l),a,c.relative==="path");e==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:zn([t,p.pathname])),(c.replace?n.replace:n.push)(p,c.state,c)},[t,n,l,a,e])}var cN=y.createContext(null);function uN(e){let t=y.useContext(fn).outlet;return y.useMemo(()=>t&&y.createElement(cN.Provider,{value:e},t),[t,e])}function dN(){let{matches:e}=y.useContext(fn),t=e[e.length-1];return t?t.params:{}}function ii(e,{relative:t}={}){let{matches:n}=y.useContext(fn),{pathname:r}=Cn(),a=JSON.stringify(hc(n));return y.useMemo(()=>fc(e,JSON.parse(a),r,t==="path"),[e,a,r,t])}function pN(e,t,n,r,a){Ne(La(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=y.useContext(hn),{matches:i}=y.useContext(fn),o=i[i.length-1],u=o?o.params:{},c=o?o.pathname:"/",p=o?o.pathnameBase:"/",d=o&&o.route;{let f=d&&d.path||"";yy(c,!d||f.endsWith("*")||f.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${f}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${f}"> to <Route path="${f==="/"?"*":`${f}/*`}">.`)}let m=Cn(),x;x=m;let h=x.pathname||"/",S=h;if(p!=="/"){let f=p.replace(/^\//,"").split("/");S="/"+h.replace(/^\//,"").split("/").slice(f.length).join("/")}let C=vs(e,{pathname:S});return Ye(d||C!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),Ye(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),yN(C&&C.map(f=>Object.assign({},f,{params:Object.assign({},u,f.params),pathname:zn([p,l.encodeLocation?l.encodeLocation(f.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:f.pathname]),pathnameBase:f.pathnameBase==="/"?p:zn([p,l.encodeLocation?l.encodeLocation(f.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:f.pathnameBase])})),i,n,r,a)}function mN(){let e=xy(),t=Vl(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},l={padding:"2px 4px",backgroundColor:r},i=null;return console.error("Error handled by React Router default ErrorBoundary:",e),i=y.createElement(y.Fragment,null,y.createElement("p",null," Hey developer "),y.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",y.createElement("code",{style:l},"ErrorBoundary")," or"," ",y.createElement("code",{style:l},"errorElement")," prop on your route.")),y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},t),n?y.createElement("pre",{style:a},n):null,i)}var hN=y.createElement(mN,null),fN=class extends y.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?y.createElement(fn.Provider,{value:this.props.routeContext},y.createElement(Ep.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function xN({routeContext:e,match:t,children:n}){let r=y.useContext(Lr);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),y.createElement(fn.Provider,{value:e},n)}function yN(e,t=[],n=null,r=null,a=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let l=e,i=n==null?void 0:n.errors;if(i!=null){let p=l.findIndex(d=>d.route.id&&(i==null?void 0:i[d.route.id])!==void 0);Ne(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),l=l.slice(0,Math.min(l.length,p+1))}let o=!1,u=-1;if(n)for(let p=0;p<l.length;p++){let d=l[p];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=p),d.route.id){let{loaderData:m,errors:x}=n,h=d.route.loader&&!m.hasOwnProperty(d.route.id)&&(!x||x[d.route.id]===void 0);if(d.route.lazy||h){o=!0,u>=0?l=l.slice(0,u+1):l=[l[0]];break}}}let c=n&&r?(p,d)=>{var m,x;r(p,{location:n.location,params:((x=(m=n.matches)==null?void 0:m[0])==null?void 0:x.params)??{},unstable_pattern:ai(n.matches),errorInfo:d})}:void 0;return l.reduceRight((p,d,m)=>{let x,h=!1,S=null,C=null;n&&(x=i&&d.route.id?i[d.route.id]:void 0,S=d.route.errorElement||hN,o&&(u<0&&m===0?(yy("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,C=null):u===m&&(h=!0,C=d.route.hydrateFallbackElement||null)));let g=t.concat(l.slice(0,m+1)),f=()=>{let b;return x?b=S:h?b=C:d.route.Component?b=y.createElement(d.route.Component,null):d.route.element?b=d.route.element:b=p,y.createElement(xN,{match:d,routeContext:{outlet:p,matches:g,isDataRoute:n!=null},children:b})};return n&&(d.route.ErrorBoundary||d.route.errorElement||m===0)?y.createElement(fN,{location:n.location,revalidation:n.revalidation,component:S,error:x,children:f(),routeContext:{outlet:null,matches:g,isDataRoute:!0},onError:c}):f()},null)}function _p(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function gN(e){let t=y.useContext(Lr);return Ne(t,_p(e)),t}function vN(e){let t=y.useContext(li);return Ne(t,_p(e)),t}function bN(e){let t=y.useContext(fn);return Ne(t,_p(e)),t}function Rp(e){let t=bN(e),n=t.matches[t.matches.length-1];return Ne(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function jN(){return Rp("useRouteId")}function xy(){var r;let e=y.useContext(Ep),t=vN("useRouteError"),n=Rp("useRouteError");return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function NN(){let{router:e}=gN("useNavigate"),t=Rp("useNavigate"),n=y.useRef(!1);return fy(()=>{n.current=!0}),y.useCallback(async(a,l={})=>{Ye(n.current,hy),n.current&&(typeof a=="number"?await e.navigate(a):await e.navigate(a,{fromRouteId:t,...l}))},[e,t])}var vh={};function yy(e,t,n){!t&&!vh[e]&&(vh[e]=!0,Ye(!1,n))}var bh={};function jh(e,t){!e&&!bh[t]&&(bh[t]=!0,console.warn(t))}var SN="useOptimistic",Nh=Ig[SN];function wN(e){return Nh?Nh(e):[e,()=>{}]}function kN(e){let t={hasErrorBoundary:e.hasErrorBoundary||e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&(e.element&&Ye(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(t,{element:y.createElement(e.Component),Component:void 0})),e.HydrateFallback&&(e.hydrateFallbackElement&&Ye(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(t,{hydrateFallbackElement:y.createElement(e.HydrateFallback),HydrateFallback:void 0})),e.ErrorBoundary&&(e.errorElement&&Ye(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(t,{errorElement:y.createElement(e.ErrorBoundary),ErrorBoundary:void 0})),t}var CN=["HydrateFallback","hydrateFallbackElement"],EN=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=n=>{this.status==="pending"&&(this.status="resolved",e(n))},this.reject=n=>{this.status==="pending"&&(this.status="rejected",t(n))}})}};function _N({router:e,flushSync:t,unstable_onError:n,unstable_useTransitions:r}){let[a,l]=y.useState(e.state),[i,o]=wN(a),[u,c]=y.useState(),[p,d]=y.useState({isTransitioning:!1}),[m,x]=y.useState(),[h,S]=y.useState(),[C,g]=y.useState(),f=y.useRef(new Map),b=y.useCallback((v,{deletedFetchers:E,newErrors:T,flushSync:M,viewTransitionOpts:U})=>{T&&n&&Object.values(T).forEach(L=>{var w;return n(L,{location:v.location,params:((w=v.matches[0])==null?void 0:w.params)??{},unstable_pattern:ai(v.matches)})}),v.fetchers.forEach((L,w)=>{L.data!==void 0&&f.current.set(w,L.data)}),E.forEach(L=>f.current.delete(L)),jh(M===!1||t!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let X=e.window!=null&&e.window.document!=null&&typeof e.window.document.startViewTransition=="function";if(jh(U==null||X,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!U||!X){t&&M?t(()=>l(v)):r===!1?l(v):y.startTransition(()=>{r===!0&&o(L=>Sh(L,v)),l(v)});return}if(t&&M){t(()=>{h&&(m==null||m.resolve(),h.skipTransition()),d({isTransitioning:!0,flushSync:!0,currentLocation:U.currentLocation,nextLocation:U.nextLocation})});let L=e.window.document.startViewTransition(()=>{t(()=>l(v))});L.finished.finally(()=>{t(()=>{x(void 0),S(void 0),c(void 0),d({isTransitioning:!1})})}),t(()=>S(L));return}h?(m==null||m.resolve(),h.skipTransition(),g({state:v,currentLocation:U.currentLocation,nextLocation:U.nextLocation})):(c(v),d({isTransitioning:!0,flushSync:!1,currentLocation:U.currentLocation,nextLocation:U.nextLocation}))},[e.window,t,h,m,r,o,n]);y.useLayoutEffect(()=>e.subscribe(b),[e,b]),y.useEffect(()=>{p.isTransitioning&&!p.flushSync&&x(new EN)},[p]),y.useEffect(()=>{if(m&&u&&e.window){let v=u,E=m.promise,T=e.window.document.startViewTransition(async()=>{r===!1?l(v):y.startTransition(()=>{r===!0&&o(M=>Sh(M,v)),l(v)}),await E});T.finished.finally(()=>{x(void 0),S(void 0),c(void 0),d({isTransitioning:!1})}),S(T)}},[u,m,e.window,r,o]),y.useEffect(()=>{m&&u&&i.location.key===u.location.key&&m.resolve()},[m,h,i.location,u]),y.useEffect(()=>{!p.isTransitioning&&C&&(c(C.state),d({isTransitioning:!0,flushSync:!1,currentLocation:C.currentLocation,nextLocation:C.nextLocation}),g(void 0))},[p.isTransitioning,C]);let R=y.useMemo(()=>({createHref:e.createHref,encodeLocation:e.encodeLocation,go:v=>e.navigate(v),push:(v,E,T)=>e.navigate(v,{state:E,preventScrollReset:T==null?void 0:T.preventScrollReset}),replace:(v,E,T)=>e.navigate(v,{replace:!0,state:E,preventScrollReset:T==null?void 0:T.preventScrollReset})}),[e]),P=e.basename||"/",A=y.useMemo(()=>({router:e,navigator:R,static:!1,basename:P,unstable_onError:n}),[e,R,P,n]);return y.createElement(y.Fragment,null,y.createElement(Lr.Provider,{value:A},y.createElement(li.Provider,{value:i},y.createElement(my.Provider,{value:f.current},y.createElement(Cp.Provider,{value:p},y.createElement(MN,{basename:P,location:i.location,navigationType:i.historyAction,navigator:R,unstable_useTransitions:r===!0},y.createElement(RN,{routes:e.routes,future:e.future,state:i,unstable_onError:n})))))),null)}function Sh(e,t){return{...e,navigation:t.navigation.state!=="idle"?t.navigation:e.navigation,revalidation:t.revalidation!=="idle"?t.revalidation:e.revalidation,actionData:t.navigation.state!=="submitting"?t.actionData:e.actionData,fetchers:t.fetchers}}var RN=y.memo(DN);function DN({routes:e,future:t,state:n,unstable_onError:r}){return pN(e,void 0,n,r,t)}function gy({to:e,replace:t,state:n,relative:r}){Ne(La(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=y.useContext(hn);Ye(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=y.useContext(fn),{pathname:i}=Cn(),o=gc(),u=fc(e,hc(l),i,r==="path"),c=JSON.stringify(u);return y.useEffect(()=>{o(JSON.parse(c),{replace:t,state:n,relative:r})},[o,c,r,t,n]),null}function PN(e){return uN(e.context)}function MN({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:a,static:l=!1,unstable_useTransitions:i}){Ne(!La(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),u=y.useMemo(()=>({basename:o,navigator:a,static:l,unstable_useTransitions:i,future:{}}),[o,a,l,i]);typeof n=="string"&&(n=Vs(n));let{pathname:c="/",search:p="",hash:d="",state:m=null,key:x="default"}=n,h=y.useMemo(()=>{let S=mn(c,o);return S==null?null:{location:{pathname:S,search:p,hash:d,state:m,key:x},navigationType:r}},[o,c,p,d,m,x,r]);return Ye(h!=null,`<Router basename="${o}"> is not able to match the URL "${c}${p}${d}" because it does not start with the basename, so the <Router> won't render anything.`),h==null?null:y.createElement(hn.Provider,{value:u},y.createElement(yc.Provider,{children:t,value:h}))}var po="get",mo="application/x-www-form-urlencoded";function vc(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function LN(e){return vc(e)&&e.tagName.toLowerCase()==="button"}function FN(e){return vc(e)&&e.tagName.toLowerCase()==="form"}function TN(e){return vc(e)&&e.tagName.toLowerCase()==="input"}function ON(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function $N(e,t){return e.button===0&&(!t||t==="_self")&&!ON(e)}function od(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(a=>[n,a]):[[n,r]])},[]))}function IN(e,t){let n=od(e);return t&&t.forEach((r,a)=>{n.has(a)||t.getAll(a).forEach(l=>{n.append(a,l)})}),n}var Bi=null;function AN(){if(Bi===null)try{new FormData(document.createElement("form"),0),Bi=!1}catch{Bi=!0}return Bi}var qN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ru(e){return e!=null&&!qN.has(e)?(Ye(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${mo}"`),null):e}function BN(e,t){let n,r,a,l,i;if(FN(e)){let o=e.getAttribute("action");r=o?mn(o,t):null,n=e.getAttribute("method")||po,a=ru(e.getAttribute("enctype"))||mo,l=new FormData(e)}else if(LN(e)||TN(e)&&(e.type==="submit"||e.type==="image")){let o=e.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=e.getAttribute("formaction")||o.getAttribute("action");if(r=u?mn(u,t):null,n=e.getAttribute("formmethod")||o.getAttribute("method")||po,a=ru(e.getAttribute("formenctype"))||ru(o.getAttribute("enctype"))||mo,l=new FormData(o,e),!AN()){let{name:c,type:p,value:d}=e;if(p==="image"){let m=c?`${c}.`:"";l.append(`${m}x`,"0"),l.append(`${m}y`,"0")}else c&&l.append(c,d)}}else{if(vc(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=po,r=null,a=mo,i=e}return l&&a==="text/plain"&&(i=l,l=void 0),{action:r,method:n.toLowerCase(),encType:a,formData:l,body:i}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Dp(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function zN(e,t,n){let r=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r.pathname==="/"?r.pathname=`_root.${n}`:t&&mn(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function UN(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function QN(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function YN(e,t,n){let r=await Promise.all(e.map(async a=>{let l=t.routes[a.route.id];if(l){let i=await UN(l,n);return i.links?i.links():[]}return[]}));return KN(r.flat(1).filter(QN).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function wh(e,t,n,r,a,l){let i=(u,c)=>n[c]?u.route.id!==n[c].route.id:!0,o=(u,c)=>{var p;return n[c].pathname!==u.pathname||((p=n[c].route.path)==null?void 0:p.endsWith("*"))&&n[c].params["*"]!==u.params["*"]};return l==="assets"?t.filter((u,c)=>i(u,c)||o(u,c)):l==="data"?t.filter((u,c)=>{var d;let p=r.routes[u.route.id];if(!p||!p.hasLoader)return!1;if(i(u,c)||o(u,c))return!0;if(u.route.shouldRevalidate){let m=u.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((d=n[0])==null?void 0:d.params)||{},nextUrl:new URL(e,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function HN(e,t,{includeHydrateFallback:n}={}){return VN(e.map(r=>{let a=t.routes[r.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),n&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function VN(e){return[...new Set(e)]}function WN(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function KN(e,t){let n=new Set;return new Set(t),e.reduce((r,a)=>{let l=JSON.stringify(WN(a));return n.has(l)||(n.add(l),r.push({key:l,link:a})),r},[])}function vy(){let e=y.useContext(Lr);return Dp(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function GN(){let e=y.useContext(li);return Dp(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Pp=y.createContext(void 0);Pp.displayName="FrameworkContext";function by(){let e=y.useContext(Pp);return Dp(e,"You must render this element inside a <HydratedRouter> element"),e}function JN(e,t){let n=y.useContext(Pp),[r,a]=y.useState(!1),[l,i]=y.useState(!1),{onFocus:o,onBlur:u,onMouseEnter:c,onMouseLeave:p,onTouchStart:d}=t,m=y.useRef(null);y.useEffect(()=>{if(e==="render"&&i(!0),e==="viewport"){let S=g=>{g.forEach(f=>{i(f.isIntersecting)})},C=new IntersectionObserver(S,{threshold:.5});return m.current&&C.observe(m.current),()=>{C.disconnect()}}},[e]),y.useEffect(()=>{if(r){let S=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(S)}}},[r]);let x=()=>{a(!0)},h=()=>{a(!1),i(!1)};return n?e!=="intent"?[l,m,{}]:[l,m,{onFocus:ll(o,x),onBlur:ll(u,h),onMouseEnter:ll(c,x),onMouseLeave:ll(p,h),onTouchStart:ll(d,x)}]:[!1,m,{}]}function ll(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function XN({page:e,...t}){let{router:n}=vy(),r=y.useMemo(()=>vs(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?y.createElement(eS,{page:e,matches:r,...t}):null}function ZN(e){let{manifest:t,routeModules:n}=by(),[r,a]=y.useState([]);return y.useEffect(()=>{let l=!1;return YN(e,t,n).then(i=>{l||a(i)}),()=>{l=!0}},[e,t,n]),r}function eS({page:e,matches:t,...n}){let r=Cn(),{manifest:a,routeModules:l}=by(),{basename:i}=vy(),{loaderData:o,matches:u}=GN(),c=y.useMemo(()=>wh(e,t,u,a,r,"data"),[e,t,u,a,r]),p=y.useMemo(()=>wh(e,t,u,a,r,"assets"),[e,t,u,a,r]),d=y.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let h=new Set,S=!1;if(t.forEach(g=>{var b;let f=a.routes[g.route.id];!f||!f.hasLoader||(!c.some(R=>R.route.id===g.route.id)&&g.route.id in o&&((b=l[g.route.id])!=null&&b.shouldRevalidate)||f.hasClientLoader?S=!0:h.add(g.route.id))}),h.size===0)return[];let C=zN(e,i,"data");return S&&h.size>0&&C.searchParams.set("_routes",t.filter(g=>h.has(g.route.id)).map(g=>g.route.id).join(",")),[C.pathname+C.search]},[i,o,r,a,c,t,e,l]),m=y.useMemo(()=>HN(p,a),[p,a]),x=ZN(p);return y.createElement(y.Fragment,null,d.map(h=>y.createElement("link",{key:h,rel:"prefetch",as:"fetch",href:h,...n})),m.map(h=>y.createElement("link",{key:h,rel:"modulepreload",href:h,...n})),x.map(({key:h,link:S})=>y.createElement("link",{key:h,nonce:n.nonce,...S})))}function tS(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var jy=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{jy&&(window.__reactRouterVersion="7.10.0")}catch{}function nS(e,t){return $j({basename:t==null?void 0:t.basename,getContext:t==null?void 0:t.getContext,future:t==null?void 0:t.future,history:Jb({window:t==null?void 0:t.window}),hydrationData:sS(),routes:e,mapRouteProperties:kN,hydrationRouteProperties:CN,dataStrategy:t==null?void 0:t.dataStrategy,patchRoutesOnNavigation:t==null?void 0:t.patchRoutesOnNavigation,window:t==null?void 0:t.window,unstable_instrumentations:t==null?void 0:t.unstable_instrumentations}).initialize()}function sS(){let e=window==null?void 0:window.__staticRouterHydrationData;return e&&e.errors&&(e={...e,errors:rS(e.errors)}),e}function rS(e){if(!e)return null;let t=Object.entries(e),n={};for(let[r,a]of t)if(a&&a.__type==="RouteErrorResponse")n[r]=new xc(a.status,a.statusText,a.data,a.internal===!0);else if(a&&a.__type==="Error"){if(a.__subType){let l=window[a.__subType];if(typeof l=="function")try{let i=new l(a.message);i.stack="",n[r]=i}catch{}}if(n[r]==null){let l=new Error(a.message);l.stack="",n[r]=l}}else n[r]=a;return n}var Ny=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,lt=y.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:a,reloadDocument:l,replace:i,state:o,target:u,to:c,preventScrollReset:p,viewTransition:d,...m},x){let{basename:h,unstable_useTransitions:S}=y.useContext(hn),C=typeof c=="string"&&Ny.test(c),g,f=!1;if(typeof c=="string"&&C&&(g=c,jy))try{let M=new URL(window.location.href),U=c.startsWith("//")?new URL(M.protocol+c):new URL(c),X=mn(U.pathname,h);U.origin===M.origin&&X!=null?c=X+U.search+U.hash:f=!0}catch{Ye(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let b=iN(c,{relative:a}),[R,P,A]=JN(r,m),v=iS(c,{replace:i,state:o,target:u,preventScrollReset:p,relative:a,viewTransition:d,unstable_useTransitions:S});function E(M){t&&t(M),M.defaultPrevented||v(M)}let T=y.createElement("a",{...m,...A,href:g||b,onClick:f||l?t:E,ref:tS(x,P),target:u,"data-discover":!C&&n==="render"?"true":void 0});return R&&!C?y.createElement(y.Fragment,null,T,y.createElement(XN,{page:b})):T});lt.displayName="Link";var zr=y.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:a=!1,style:l,to:i,viewTransition:o,children:u,...c},p){let d=ii(i,{relative:c.relative}),m=Cn(),x=y.useContext(li),{navigator:h,basename:S}=y.useContext(hn),C=x!=null&&mS(d)&&o===!0,g=h.encodeLocation?h.encodeLocation(d).pathname:d.pathname,f=m.pathname,b=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;n||(f=f.toLowerCase(),b=b?b.toLowerCase():null,g=g.toLowerCase()),b&&S&&(b=mn(b,S)||b);const R=g!=="/"&&g.endsWith("/")?g.length-1:g.length;let P=f===g||!a&&f.startsWith(g)&&f.charAt(R)==="/",A=b!=null&&(b===g||!a&&b.startsWith(g)&&b.charAt(g.length)==="/"),v={isActive:P,isPending:A,isTransitioning:C},E=P?t:void 0,T;typeof r=="function"?T=r(v):T=[r,P?"active":null,A?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let M=typeof l=="function"?l(v):l;return y.createElement(lt,{...c,"aria-current":E,className:T,ref:p,style:M,to:i,viewTransition:o},typeof u=="function"?u(v):u)});zr.displayName="NavLink";var aS=y.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:a,state:l,method:i=po,action:o,onSubmit:u,relative:c,preventScrollReset:p,viewTransition:d,...m},x)=>{let{unstable_useTransitions:h}=y.useContext(hn),S=dS(),C=pS(o,{relative:c}),g=i.toLowerCase()==="get"?"get":"post",f=typeof o=="string"&&Ny.test(o),b=R=>{if(u&&u(R),R.defaultPrevented)return;R.preventDefault();let P=R.nativeEvent.submitter,A=(P==null?void 0:P.getAttribute("formmethod"))||i,v=()=>S(P||R.currentTarget,{fetcherKey:t,method:A,navigate:n,replace:a,state:l,relative:c,preventScrollReset:p,viewTransition:d});h&&n!==!1?y.startTransition(()=>v()):v()};return y.createElement("form",{ref:x,method:g,action:C,onSubmit:r?u:b,...m,"data-discover":!f&&e==="render"?"true":void 0})});aS.displayName="Form";function lS(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Sy(e){let t=y.useContext(Lr);return Ne(t,lS(e)),t}function iS(e,{target:t,replace:n,state:r,preventScrollReset:a,relative:l,viewTransition:i,unstable_useTransitions:o}={}){let u=gc(),c=Cn(),p=ii(e,{relative:l});return y.useCallback(d=>{if($N(d,t)){d.preventDefault();let m=n!==void 0?n:Un(c)===Un(p),x=()=>u(e,{replace:m,state:r,preventScrollReset:a,relative:l,viewTransition:i});o?y.startTransition(()=>x()):x()}},[c,u,p,n,r,t,e,a,l,i,o])}function oS(e){Ye(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=y.useRef(od(e)),n=y.useRef(!1),r=Cn(),a=y.useMemo(()=>IN(r.search,n.current?null:t.current),[r.search]),l=gc(),i=y.useCallback((o,u)=>{const c=od(typeof o=="function"?o(new URLSearchParams(a)):o);n.current=!0,l("?"+c,u)},[l,a]);return[a,i]}var cS=0,uS=()=>`__${String(++cS)}__`;function dS(){let{router:e}=Sy("useSubmit"),{basename:t}=y.useContext(hn),n=jN(),r=e.fetch,a=e.navigate;return y.useCallback(async(l,i={})=>{let{action:o,method:u,encType:c,formData:p,body:d}=BN(l,t);if(i.navigate===!1){let m=i.fetcherKey||uS();await r(m,n,i.action||o,{preventScrollReset:i.preventScrollReset,formData:p,body:d,formMethod:i.method||u,formEncType:i.encType||c,flushSync:i.flushSync})}else await a(i.action||o,{preventScrollReset:i.preventScrollReset,formData:p,body:d,formMethod:i.method||u,formEncType:i.encType||c,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[r,a,t,n])}function pS(e,{relative:t}={}){let{basename:n}=y.useContext(hn),r=y.useContext(fn);Ne(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),l={...ii(e||".",{relative:t})},i=Cn();if(e==null){l.search=i.search;let o=new URLSearchParams(l.search),u=o.getAll("index");if(u.some(p=>p==="")){o.delete("index"),u.filter(d=>d).forEach(d=>o.append("index",d));let p=o.toString();l.search=p?`?${p}`:""}}return(!e||e===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(l.pathname=l.pathname==="/"?n:zn([n,l.pathname])),Un(l)}function mS(e,{relative:t}={}){let n=y.useContext(Cp);Ne(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Sy("useViewTransitionState"),a=ii(e,{relative:t});if(!n.isTransitioning)return!1;let l=mn(n.currentLocation.pathname,r)||n.currentLocation.pathname,i=mn(n.nextLocation.pathname,r)||n.nextLocation.pathname;return zo(a.pathname,i)!=null||zo(a.pathname,l)!=null}function hS(e){return y.createElement(_N,{flushSync:G0.flushSync,...e})}var Fa=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},fS={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},js,_d,Cf,xS=(Cf=class{constructor(){pe(this,js,fS);pe(this,_d,!1)}setTimeoutProvider(e){le(this,js,e)}setTimeout(e,t){return q(this,js).setTimeout(e,t)}clearTimeout(e){q(this,js).clearTimeout(e)}setInterval(e,t){return q(this,js).setInterval(e,t)}clearInterval(e){q(this,js).clearInterval(e)}},js=new WeakMap,_d=new WeakMap,Cf),cr=new xS;function yS(e){setTimeout(e,0)}var _r=typeof window>"u"||"Deno"in globalThis;function _t(){}function gS(e,t){return typeof e=="function"?e(t):e}function cd(e){return typeof e=="number"&&e>=0&&e!==1/0}function wy(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Bs(e,t){return typeof e=="function"?e(t):e}function rn(e,t){return typeof e=="function"?e(t):e}function kh(e,t){const{type:n="all",exact:r,fetchStatus:a,predicate:l,queryKey:i,stale:o}=e;if(i){if(r){if(t.queryHash!==Mp(i,t.options))return!1}else if(!Wl(t.queryKey,i))return!1}if(n!=="all"){const u=t.isActive();if(n==="active"&&!u||n==="inactive"&&u)return!1}return!(typeof o=="boolean"&&t.isStale()!==o||a&&a!==t.state.fetchStatus||l&&!l(t))}function Ch(e,t){const{exact:n,status:r,predicate:a,mutationKey:l}=e;if(l){if(!t.options.mutationKey)return!1;if(n){if(Rr(t.options.mutationKey)!==Rr(l))return!1}else if(!Wl(t.options.mutationKey,l))return!1}return!(r&&t.state.status!==r||a&&!a(t))}function Mp(e,t){return((t==null?void 0:t.queryKeyHashFn)||Rr)(e)}function Rr(e){return JSON.stringify(e,(t,n)=>ud(n)?Object.keys(n).sort().reduce((r,a)=>(r[a]=n[a],r),{}):n)}function Wl(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>Wl(e[n],t[n])):!1}var vS=Object.prototype.hasOwnProperty;function ky(e,t){if(e===t)return e;const n=Eh(e)&&Eh(t);if(!n&&!(ud(e)&&ud(t)))return t;const a=(n?e:Object.keys(e)).length,l=n?t:Object.keys(t),i=l.length,o=n?new Array(i):{};let u=0;for(let c=0;c<i;c++){const p=n?c:l[c],d=e[p],m=t[p];if(d===m){o[p]=d,(n?c<a:vS.call(e,p))&&u++;continue}if(d===null||m===null||typeof d!="object"||typeof m!="object"){o[p]=m;continue}const x=ky(d,m);o[p]=x,x===d&&u++}return a===i&&u===a?e:o}function Qo(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function Eh(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function ud(e){if(!_h(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!_h(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function _h(e){return Object.prototype.toString.call(e)==="[object Object]"}function bS(e){return new Promise(t=>{cr.setTimeout(t,e)})}function dd(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?ky(e,t):t}function jS(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function NS(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var Lp=Symbol();function Cy(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Lp?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Ey(e,t){return typeof e=="function"?e(...t):!!e}var dr,Ns,ca,Ef,SS=(Ef=class extends Fa{constructor(){super();pe(this,dr);pe(this,Ns);pe(this,ca);le(this,ca,t=>{if(!_r&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){q(this,Ns)||this.setEventListener(q(this,ca))}onUnsubscribe(){var t;this.hasListeners()||((t=q(this,Ns))==null||t.call(this),le(this,Ns,void 0))}setEventListener(t){var n;le(this,ca,t),(n=q(this,Ns))==null||n.call(this),le(this,Ns,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){q(this,dr)!==t&&(le(this,dr,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof q(this,dr)=="boolean"?q(this,dr):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},dr=new WeakMap,Ns=new WeakMap,ca=new WeakMap,Ef),Fp=new SS;function pd(){let e,t;const n=new Promise((a,l)=>{e=a,t=l});n.status="pending",n.catch(()=>{});function r(a){Object.assign(n,a),delete n.resolve,delete n.reject}return n.resolve=a=>{r({status:"fulfilled",value:a}),e(a)},n.reject=a=>{r({status:"rejected",reason:a}),t(a)},n}var wS=yS;function kS(){let e=[],t=0,n=o=>{o()},r=o=>{o()},a=wS;const l=o=>{t?e.push(o):a(()=>{n(o)})},i=()=>{const o=e;e=[],o.length&&a(()=>{r(()=>{o.forEach(u=>{n(u)})})})};return{batch:o=>{let u;t++;try{u=o()}finally{t--,t||i()}return u},batchCalls:o=>(...u)=>{l(()=>{o(...u)})},schedule:l,setNotifyFunction:o=>{n=o},setBatchNotifyFunction:o=>{r=o},setScheduler:o=>{a=o}}}var rt=kS(),ua,Ss,da,_f,CS=(_f=class extends Fa{constructor(){super();pe(this,ua,!0);pe(this,Ss);pe(this,da);le(this,da,t=>{if(!_r&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){q(this,Ss)||this.setEventListener(q(this,da))}onUnsubscribe(){var t;this.hasListeners()||((t=q(this,Ss))==null||t.call(this),le(this,Ss,void 0))}setEventListener(t){var n;le(this,da,t),(n=q(this,Ss))==null||n.call(this),le(this,Ss,t(this.setOnline.bind(this)))}setOnline(t){q(this,ua)!==t&&(le(this,ua,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return q(this,ua)}},ua=new WeakMap,Ss=new WeakMap,da=new WeakMap,_f),Yo=new CS;function ES(e){return Math.min(1e3*2**e,3e4)}function _y(e){return(e??"online")==="online"?Yo.isOnline():!0}var md=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Ry(e){let t=!1,n=0,r;const a=pd(),l=()=>a.status!=="pending",i=S=>{var C;if(!l()){const g=new md(S);m(g),(C=e.onCancel)==null||C.call(e,g)}},o=()=>{t=!0},u=()=>{t=!1},c=()=>Fp.isFocused()&&(e.networkMode==="always"||Yo.isOnline())&&e.canRun(),p=()=>_y(e.networkMode)&&e.canRun(),d=S=>{l()||(r==null||r(),a.resolve(S))},m=S=>{l()||(r==null||r(),a.reject(S))},x=()=>new Promise(S=>{var C;r=g=>{(l()||c())&&S(g)},(C=e.onPause)==null||C.call(e)}).then(()=>{var S;r=void 0,l()||(S=e.onContinue)==null||S.call(e)}),h=()=>{if(l())return;let S;const C=n===0?e.initialPromise:void 0;try{S=C??e.fn()}catch(g){S=Promise.reject(g)}Promise.resolve(S).then(d).catch(g=>{var A;if(l())return;const f=e.retry??(_r?0:3),b=e.retryDelay??ES,R=typeof b=="function"?b(n,g):b,P=f===!0||typeof f=="number"&&n<f||typeof f=="function"&&f(n,g);if(t||!P){m(g);return}n++,(A=e.onFail)==null||A.call(e,n,g),bS(R).then(()=>c()?void 0:x()).then(()=>{t?m(g):h()})})};return{promise:a,status:()=>a.status,cancel:i,continue:()=>(r==null||r(),a),cancelRetry:o,continueRetry:u,canStart:p,start:()=>(p()?h():x().then(h),a)}}var pr,Rf,Dy=(Rf=class{constructor(){pe(this,pr)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),cd(this.gcTime)&&le(this,pr,cr.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(_r?1/0:5*60*1e3))}clearGcTimeout(){q(this,pr)&&(cr.clearTimeout(q(this,pr)),le(this,pr,void 0))}},pr=new WeakMap,Rf),mr,pa,nn,hr,ot,Kl,fr,vn,Wn,Df,_S=(Df=class extends Dy{constructor(t){super();pe(this,vn);pe(this,mr);pe(this,pa);pe(this,nn);pe(this,hr);pe(this,ot);pe(this,Kl);pe(this,fr);le(this,fr,!1),le(this,Kl,t.defaultOptions),this.setOptions(t.options),this.observers=[],le(this,hr,t.client),le(this,nn,q(this,hr).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,le(this,mr,Dh(this.options)),this.state=t.state??q(this,mr),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=q(this,ot))==null?void 0:t.promise}setOptions(t){if(this.options={...q(this,Kl),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=Dh(this.options);n.data!==void 0&&(this.setState(Rh(n.data,n.dataUpdatedAt)),le(this,mr,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&q(this,nn).remove(this)}setData(t,n){const r=dd(this.state.data,t,this.options);return be(this,vn,Wn).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){be(this,vn,Wn).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,a;const n=(r=q(this,ot))==null?void 0:r.promise;return(a=q(this,ot))==null||a.cancel(t),n?n.then(_t).catch(_t):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(q(this,mr))}isActive(){return this.observers.some(t=>rn(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Lp||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Bs(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!wy(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=q(this,ot))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=q(this,ot))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),q(this,nn).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(q(this,ot)&&(q(this,fr)?q(this,ot).cancel({revert:!0}):q(this,ot).cancelRetry()),this.scheduleGc()),q(this,nn).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||be(this,vn,Wn).call(this,{type:"invalidate"})}async fetch(t,n){var u,c,p,d,m,x,h,S,C,g,f,b;if(this.state.fetchStatus!=="idle"&&((u=q(this,ot))==null?void 0:u.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(q(this,ot))return q(this,ot).continueRetry(),q(this,ot).promise}if(t&&this.setOptions(t),!this.options.queryFn){const R=this.observers.find(P=>P.options.queryFn);R&&this.setOptions(R.options)}const r=new AbortController,a=R=>{Object.defineProperty(R,"signal",{enumerable:!0,get:()=>(le(this,fr,!0),r.signal)})},l=()=>{const R=Cy(this.options,n),A=(()=>{const v={client:q(this,hr),queryKey:this.queryKey,meta:this.meta};return a(v),v})();return le(this,fr,!1),this.options.persister?this.options.persister(R,A,this):R(A)},o=(()=>{const R={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:q(this,hr),state:this.state,fetchFn:l};return a(R),R})();(c=this.options.behavior)==null||c.onFetch(o,this),le(this,pa,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((p=o.fetchOptions)==null?void 0:p.meta))&&be(this,vn,Wn).call(this,{type:"fetch",meta:(d=o.fetchOptions)==null?void 0:d.meta}),le(this,ot,Ry({initialPromise:n==null?void 0:n.initialPromise,fn:o.fetchFn,onCancel:R=>{R instanceof md&&R.revert&&this.setState({...q(this,pa),fetchStatus:"idle"}),r.abort()},onFail:(R,P)=>{be(this,vn,Wn).call(this,{type:"failed",failureCount:R,error:P})},onPause:()=>{be(this,vn,Wn).call(this,{type:"pause"})},onContinue:()=>{be(this,vn,Wn).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0}));try{const R=await q(this,ot).start();if(R===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(R),(x=(m=q(this,nn).config).onSuccess)==null||x.call(m,R,this),(S=(h=q(this,nn).config).onSettled)==null||S.call(h,R,this.state.error,this),R}catch(R){if(R instanceof md){if(R.silent)return q(this,ot).promise;if(R.revert){if(this.state.data===void 0)throw R;return this.state.data}}throw be(this,vn,Wn).call(this,{type:"error",error:R}),(g=(C=q(this,nn).config).onError)==null||g.call(C,R,this),(b=(f=q(this,nn).config).onSettled)==null||b.call(f,this.state.data,R,this),R}finally{this.scheduleGc()}}},mr=new WeakMap,pa=new WeakMap,nn=new WeakMap,hr=new WeakMap,ot=new WeakMap,Kl=new WeakMap,fr=new WeakMap,vn=new WeakSet,Wn=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...Py(r.data,this.options),fetchMeta:t.meta??null};case"success":const a={...r,...Rh(t.data,t.dataUpdatedAt),dataUpdateCount:r.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return le(this,pa,t.manual?a:void 0),a;case"error":const l=t.error;return{...r,error:l,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:l,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),rt.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),q(this,nn).notify({query:this,type:"updated",action:t})})},Df);function Py(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:_y(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Rh(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Dh(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Tt,we,Gl,kt,xr,ma,Jn,ws,Jl,ha,fa,yr,gr,ks,xa,De,yl,hd,fd,xd,yd,gd,vd,bd,My,Pf,RS=(Pf=class extends Fa{constructor(t,n){super();pe(this,De);pe(this,Tt);pe(this,we);pe(this,Gl);pe(this,kt);pe(this,xr);pe(this,ma);pe(this,Jn);pe(this,ws);pe(this,Jl);pe(this,ha);pe(this,fa);pe(this,yr);pe(this,gr);pe(this,ks);pe(this,xa,new Set);this.options=n,le(this,Tt,t),le(this,ws,null),le(this,Jn,pd()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(q(this,we).addObserver(this),Ph(q(this,we),this.options)?be(this,De,yl).call(this):this.updateResult(),be(this,De,yd).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return jd(q(this,we),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return jd(q(this,we),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,be(this,De,gd).call(this),be(this,De,vd).call(this),q(this,we).removeObserver(this)}setOptions(t){const n=this.options,r=q(this,we);if(this.options=q(this,Tt).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof rn(this.options.enabled,q(this,we))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");be(this,De,bd).call(this),q(this,we).setOptions(this.options),n._defaulted&&!Qo(this.options,n)&&q(this,Tt).getQueryCache().notify({type:"observerOptionsUpdated",query:q(this,we),observer:this});const a=this.hasListeners();a&&Mh(q(this,we),r,this.options,n)&&be(this,De,yl).call(this),this.updateResult(),a&&(q(this,we)!==r||rn(this.options.enabled,q(this,we))!==rn(n.enabled,q(this,we))||Bs(this.options.staleTime,q(this,we))!==Bs(n.staleTime,q(this,we)))&&be(this,De,hd).call(this);const l=be(this,De,fd).call(this);a&&(q(this,we)!==r||rn(this.options.enabled,q(this,we))!==rn(n.enabled,q(this,we))||l!==q(this,ks))&&be(this,De,xd).call(this,l)}getOptimisticResult(t){const n=q(this,Tt).getQueryCache().build(q(this,Tt),t),r=this.createResult(n,t);return PS(this,r)&&(le(this,kt,r),le(this,ma,this.options),le(this,xr,q(this,we).state)),r}getCurrentResult(){return q(this,kt)}trackResult(t,n){return new Proxy(t,{get:(r,a)=>(this.trackProp(a),n==null||n(a),a==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&q(this,Jn).status==="pending"&&q(this,Jn).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,a))})}trackProp(t){q(this,xa).add(t)}getCurrentQuery(){return q(this,we)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=q(this,Tt).defaultQueryOptions(t),r=q(this,Tt).getQueryCache().build(q(this,Tt),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(t){return be(this,De,yl).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),q(this,kt)))}createResult(t,n){var T;const r=q(this,we),a=this.options,l=q(this,kt),i=q(this,xr),o=q(this,ma),c=t!==r?t.state:q(this,Gl),{state:p}=t;let d={...p},m=!1,x;if(n._optimisticResults){const M=this.hasListeners(),U=!M&&Ph(t,n),X=M&&Mh(t,r,n,a);(U||X)&&(d={...d,...Py(p.data,t.options)}),n._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:h,errorUpdatedAt:S,status:C}=d;x=d.data;let g=!1;if(n.placeholderData!==void 0&&x===void 0&&C==="pending"){let M;l!=null&&l.isPlaceholderData&&n.placeholderData===(o==null?void 0:o.placeholderData)?(M=l.data,g=!0):M=typeof n.placeholderData=="function"?n.placeholderData((T=q(this,fa))==null?void 0:T.state.data,q(this,fa)):n.placeholderData,M!==void 0&&(C="success",x=dd(l==null?void 0:l.data,M,n),m=!0)}if(n.select&&x!==void 0&&!g)if(l&&x===(i==null?void 0:i.data)&&n.select===q(this,Jl))x=q(this,ha);else try{le(this,Jl,n.select),x=n.select(x),x=dd(l==null?void 0:l.data,x,n),le(this,ha,x),le(this,ws,null)}catch(M){le(this,ws,M)}q(this,ws)&&(h=q(this,ws),x=q(this,ha),S=Date.now(),C="error");const f=d.fetchStatus==="fetching",b=C==="pending",R=C==="error",P=b&&f,A=x!==void 0,E={status:C,fetchStatus:d.fetchStatus,isPending:b,isSuccess:C==="success",isError:R,isInitialLoading:P,isLoading:P,data:x,dataUpdatedAt:d.dataUpdatedAt,error:h,errorUpdatedAt:S,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>c.dataUpdateCount||d.errorUpdateCount>c.errorUpdateCount,isFetching:f,isRefetching:f&&!b,isLoadingError:R&&!A,isPaused:d.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:R&&A,isStale:Tp(t,n),refetch:this.refetch,promise:q(this,Jn),isEnabled:rn(n.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const M=L=>{E.status==="error"?L.reject(E.error):E.data!==void 0&&L.resolve(E.data)},U=()=>{const L=le(this,Jn,E.promise=pd());M(L)},X=q(this,Jn);switch(X.status){case"pending":t.queryHash===r.queryHash&&M(X);break;case"fulfilled":(E.status==="error"||E.data!==X.value)&&U();break;case"rejected":(E.status!=="error"||E.error!==X.reason)&&U();break}}return E}updateResult(){const t=q(this,kt),n=this.createResult(q(this,we),this.options);if(le(this,xr,q(this,we).state),le(this,ma,this.options),q(this,xr).data!==void 0&&le(this,fa,q(this,we)),Qo(n,t))return;le(this,kt,n);const r=()=>{if(!t)return!0;const{notifyOnChangeProps:a}=this.options,l=typeof a=="function"?a():a;if(l==="all"||!l&&!q(this,xa).size)return!0;const i=new Set(l??q(this,xa));return this.options.throwOnError&&i.add("error"),Object.keys(q(this,kt)).some(o=>{const u=o;return q(this,kt)[u]!==t[u]&&i.has(u)})};be(this,De,My).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&be(this,De,yd).call(this)}},Tt=new WeakMap,we=new WeakMap,Gl=new WeakMap,kt=new WeakMap,xr=new WeakMap,ma=new WeakMap,Jn=new WeakMap,ws=new WeakMap,Jl=new WeakMap,ha=new WeakMap,fa=new WeakMap,yr=new WeakMap,gr=new WeakMap,ks=new WeakMap,xa=new WeakMap,De=new WeakSet,yl=function(t){be(this,De,bd).call(this);let n=q(this,we).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(_t)),n},hd=function(){be(this,De,gd).call(this);const t=Bs(this.options.staleTime,q(this,we));if(_r||q(this,kt).isStale||!cd(t))return;const r=wy(q(this,kt).dataUpdatedAt,t)+1;le(this,yr,cr.setTimeout(()=>{q(this,kt).isStale||this.updateResult()},r))},fd=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(q(this,we)):this.options.refetchInterval)??!1},xd=function(t){be(this,De,vd).call(this),le(this,ks,t),!(_r||rn(this.options.enabled,q(this,we))===!1||!cd(q(this,ks))||q(this,ks)===0)&&le(this,gr,cr.setInterval(()=>{(this.options.refetchIntervalInBackground||Fp.isFocused())&&be(this,De,yl).call(this)},q(this,ks)))},yd=function(){be(this,De,hd).call(this),be(this,De,xd).call(this,be(this,De,fd).call(this))},gd=function(){q(this,yr)&&(cr.clearTimeout(q(this,yr)),le(this,yr,void 0))},vd=function(){q(this,gr)&&(cr.clearInterval(q(this,gr)),le(this,gr,void 0))},bd=function(){const t=q(this,Tt).getQueryCache().build(q(this,Tt),this.options);if(t===q(this,we))return;const n=q(this,we);le(this,we,t),le(this,Gl,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},My=function(t){rt.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(q(this,kt))}),q(this,Tt).getQueryCache().notify({query:q(this,we),type:"observerResultsUpdated"})})},Pf);function DS(e,t){return rn(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Ph(e,t){return DS(e,t)||e.state.data!==void 0&&jd(e,t,t.refetchOnMount)}function jd(e,t,n){if(rn(t.enabled,e)!==!1&&Bs(t.staleTime,e)!=="static"){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&Tp(e,t)}return!1}function Mh(e,t,n,r){return(e!==t||rn(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&Tp(e,n)}function Tp(e,t){return rn(t.enabled,e)!==!1&&e.isStaleByTime(Bs(t.staleTime,e))}function PS(e,t){return!Qo(e.getCurrentResult(),t)}function Lh(e){return{onFetch:(t,n)=>{var p,d,m,x,h;const r=t.options,a=(m=(d=(p=t.fetchOptions)==null?void 0:p.meta)==null?void 0:d.fetchMore)==null?void 0:m.direction,l=((x=t.state.data)==null?void 0:x.pages)||[],i=((h=t.state.data)==null?void 0:h.pageParams)||[];let o={pages:[],pageParams:[]},u=0;const c=async()=>{let S=!1;const C=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(t.signal.aborted?S=!0:t.signal.addEventListener("abort",()=>{S=!0}),t.signal)})},g=Cy(t.options,t.fetchOptions),f=async(b,R,P)=>{if(S)return Promise.reject();if(R==null&&b.pages.length)return Promise.resolve(b);const v=(()=>{const U={client:t.client,queryKey:t.queryKey,pageParam:R,direction:P?"backward":"forward",meta:t.options.meta};return C(U),U})(),E=await g(v),{maxPages:T}=t.options,M=P?NS:jS;return{pages:M(b.pages,E,T),pageParams:M(b.pageParams,R,T)}};if(a&&l.length){const b=a==="backward",R=b?MS:Fh,P={pages:l,pageParams:i},A=R(r,P);o=await f(P,A,b)}else{const b=e??l.length;do{const R=u===0?i[0]??r.initialPageParam:Fh(r,o);if(u>0&&R==null)break;o=await f(o,R),u++}while(u<b)}return o};t.options.persister?t.fetchFn=()=>{var S,C;return(C=(S=t.options).persister)==null?void 0:C.call(S,c,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=c}}}function Fh(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function MS(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var Xl,On,Ct,vr,$n,hs,Mf,LS=(Mf=class extends Dy{constructor(t){super();pe(this,$n);pe(this,Xl);pe(this,On);pe(this,Ct);pe(this,vr);le(this,Xl,t.client),this.mutationId=t.mutationId,le(this,Ct,t.mutationCache),le(this,On,[]),this.state=t.state||Ly(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){q(this,On).includes(t)||(q(this,On).push(t),this.clearGcTimeout(),q(this,Ct).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){le(this,On,q(this,On).filter(n=>n!==t)),this.scheduleGc(),q(this,Ct).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){q(this,On).length||(this.state.status==="pending"?this.scheduleGc():q(this,Ct).remove(this))}continue(){var t;return((t=q(this,vr))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var i,o,u,c,p,d,m,x,h,S,C,g,f,b,R,P,A,v,E,T;const n=()=>{be(this,$n,hs).call(this,{type:"continue"})},r={client:q(this,Xl),meta:this.options.meta,mutationKey:this.options.mutationKey};le(this,vr,Ry({fn:()=>this.options.mutationFn?this.options.mutationFn(t,r):Promise.reject(new Error("No mutationFn found")),onFail:(M,U)=>{be(this,$n,hs).call(this,{type:"failed",failureCount:M,error:U})},onPause:()=>{be(this,$n,hs).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>q(this,Ct).canRun(this)}));const a=this.state.status==="pending",l=!q(this,vr).canStart();try{if(a)n();else{be(this,$n,hs).call(this,{type:"pending",variables:t,isPaused:l}),await((o=(i=q(this,Ct).config).onMutate)==null?void 0:o.call(i,t,this,r));const U=await((c=(u=this.options).onMutate)==null?void 0:c.call(u,t,r));U!==this.state.context&&be(this,$n,hs).call(this,{type:"pending",context:U,variables:t,isPaused:l})}const M=await q(this,vr).start();return await((d=(p=q(this,Ct).config).onSuccess)==null?void 0:d.call(p,M,t,this.state.context,this,r)),await((x=(m=this.options).onSuccess)==null?void 0:x.call(m,M,t,this.state.context,r)),await((S=(h=q(this,Ct).config).onSettled)==null?void 0:S.call(h,M,null,this.state.variables,this.state.context,this,r)),await((g=(C=this.options).onSettled)==null?void 0:g.call(C,M,null,t,this.state.context,r)),be(this,$n,hs).call(this,{type:"success",data:M}),M}catch(M){try{throw await((b=(f=q(this,Ct).config).onError)==null?void 0:b.call(f,M,t,this.state.context,this,r)),await((P=(R=this.options).onError)==null?void 0:P.call(R,M,t,this.state.context,r)),await((v=(A=q(this,Ct).config).onSettled)==null?void 0:v.call(A,void 0,M,this.state.variables,this.state.context,this,r)),await((T=(E=this.options).onSettled)==null?void 0:T.call(E,void 0,M,t,this.state.context,r)),M}finally{be(this,$n,hs).call(this,{type:"error",error:M})}}finally{q(this,Ct).runNext(this)}}},Xl=new WeakMap,On=new WeakMap,Ct=new WeakMap,vr=new WeakMap,$n=new WeakSet,hs=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),rt.batch(()=>{q(this,On).forEach(r=>{r.onMutationUpdate(t)}),q(this,Ct).notify({mutation:this,type:"updated",action:t})})},Mf);function Ly(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Xn,bn,Zl,Lf,FS=(Lf=class extends Fa{constructor(t={}){super();pe(this,Xn);pe(this,bn);pe(this,Zl);this.config=t,le(this,Xn,new Set),le(this,bn,new Map),le(this,Zl,0)}build(t,n,r){const a=new LS({client:t,mutationCache:this,mutationId:++ji(this,Zl)._,options:t.defaultMutationOptions(n),state:r});return this.add(a),a}add(t){q(this,Xn).add(t);const n=zi(t);if(typeof n=="string"){const r=q(this,bn).get(n);r?r.push(t):q(this,bn).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(q(this,Xn).delete(t)){const n=zi(t);if(typeof n=="string"){const r=q(this,bn).get(n);if(r)if(r.length>1){const a=r.indexOf(t);a!==-1&&r.splice(a,1)}else r[0]===t&&q(this,bn).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=zi(t);if(typeof n=="string"){const r=q(this,bn).get(n),a=r==null?void 0:r.find(l=>l.state.status==="pending");return!a||a===t}else return!0}runNext(t){var r;const n=zi(t);if(typeof n=="string"){const a=(r=q(this,bn).get(n))==null?void 0:r.find(l=>l!==t&&l.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){rt.batch(()=>{q(this,Xn).forEach(t=>{this.notify({type:"removed",mutation:t})}),q(this,Xn).clear(),q(this,bn).clear()})}getAll(){return Array.from(q(this,Xn))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>Ch(n,r))}findAll(t={}){return this.getAll().filter(n=>Ch(t,n))}notify(t){rt.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return rt.batch(()=>Promise.all(t.map(n=>n.continue().catch(_t))))}},Xn=new WeakMap,bn=new WeakMap,Zl=new WeakMap,Lf);function zi(e){var t;return(t=e.options.scope)==null?void 0:t.id}var Zn,Cs,Ot,es,as,ho,Nd,Ff,TS=(Ff=class extends Fa{constructor(n,r){super();pe(this,as);pe(this,Zn);pe(this,Cs);pe(this,Ot);pe(this,es);le(this,Zn,n),this.setOptions(r),this.bindMethods(),be(this,as,ho).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var a;const r=this.options;this.options=q(this,Zn).defaultMutationOptions(n),Qo(this.options,r)||q(this,Zn).getMutationCache().notify({type:"observerOptionsUpdated",mutation:q(this,Ot),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&Rr(r.mutationKey)!==Rr(this.options.mutationKey)?this.reset():((a=q(this,Ot))==null?void 0:a.state.status)==="pending"&&q(this,Ot).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=q(this,Ot))==null||n.removeObserver(this)}onMutationUpdate(n){be(this,as,ho).call(this),be(this,as,Nd).call(this,n)}getCurrentResult(){return q(this,Cs)}reset(){var n;(n=q(this,Ot))==null||n.removeObserver(this),le(this,Ot,void 0),be(this,as,ho).call(this),be(this,as,Nd).call(this)}mutate(n,r){var a;return le(this,es,r),(a=q(this,Ot))==null||a.removeObserver(this),le(this,Ot,q(this,Zn).getMutationCache().build(q(this,Zn),this.options)),q(this,Ot).addObserver(this),q(this,Ot).execute(n)}},Zn=new WeakMap,Cs=new WeakMap,Ot=new WeakMap,es=new WeakMap,as=new WeakSet,ho=function(){var r;const n=((r=q(this,Ot))==null?void 0:r.state)??Ly();le(this,Cs,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},Nd=function(n){rt.batch(()=>{var r,a,l,i,o,u,c,p;if(q(this,es)&&this.hasListeners()){const d=q(this,Cs).variables,m=q(this,Cs).context,x={client:q(this,Zn),meta:this.options.meta,mutationKey:this.options.mutationKey};(n==null?void 0:n.type)==="success"?((a=(r=q(this,es)).onSuccess)==null||a.call(r,n.data,d,m,x),(i=(l=q(this,es)).onSettled)==null||i.call(l,n.data,null,d,m,x)):(n==null?void 0:n.type)==="error"&&((u=(o=q(this,es)).onError)==null||u.call(o,n.error,d,m,x),(p=(c=q(this,es)).onSettled)==null||p.call(c,void 0,n.error,d,m,x))}this.listeners.forEach(d=>{d(q(this,Cs))})})},Ff),In,Tf,OS=(Tf=class extends Fa{constructor(t={}){super();pe(this,In);this.config=t,le(this,In,new Map)}build(t,n,r){const a=n.queryKey,l=n.queryHash??Mp(a,n);let i=this.get(l);return i||(i=new _S({client:t,queryKey:a,queryHash:l,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(a)}),this.add(i)),i}add(t){q(this,In).has(t.queryHash)||(q(this,In).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=q(this,In).get(t.queryHash);n&&(t.destroy(),n===t&&q(this,In).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){rt.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return q(this,In).get(t)}getAll(){return[...q(this,In).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>kh(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>kh(t,r)):n}notify(t){rt.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){rt.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){rt.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},In=new WeakMap,Tf),We,Es,_s,ya,ga,Rs,va,ba,Of,$S=(Of=class{constructor(e={}){pe(this,We);pe(this,Es);pe(this,_s);pe(this,ya);pe(this,ga);pe(this,Rs);pe(this,va);pe(this,ba);le(this,We,e.queryCache||new OS),le(this,Es,e.mutationCache||new FS),le(this,_s,e.defaultOptions||{}),le(this,ya,new Map),le(this,ga,new Map),le(this,Rs,0)}mount(){ji(this,Rs)._++,q(this,Rs)===1&&(le(this,va,Fp.subscribe(async e=>{e&&(await this.resumePausedMutations(),q(this,We).onFocus())})),le(this,ba,Yo.subscribe(async e=>{e&&(await this.resumePausedMutations(),q(this,We).onOnline())})))}unmount(){var e,t;ji(this,Rs)._--,q(this,Rs)===0&&((e=q(this,va))==null||e.call(this),le(this,va,void 0),(t=q(this,ba))==null||t.call(this),le(this,ba,void 0))}isFetching(e){return q(this,We).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return q(this,Es).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=q(this,We).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=q(this,We).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(Bs(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return q(this,We).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),a=q(this,We).get(r.queryHash),l=a==null?void 0:a.state.data,i=gS(t,l);if(i!==void 0)return q(this,We).build(this,r).setData(i,{...n,manual:!0})}setQueriesData(e,t,n){return rt.batch(()=>q(this,We).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=q(this,We).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=q(this,We);rt.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=q(this,We);return rt.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=rt.batch(()=>q(this,We).findAll(e).map(a=>a.cancel(n)));return Promise.all(r).then(_t).catch(_t)}invalidateQueries(e,t={}){return rt.batch(()=>(q(this,We).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=rt.batch(()=>q(this,We).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let l=a.fetch(void 0,n);return n.throwOnError||(l=l.catch(_t)),a.state.fetchStatus==="paused"?Promise.resolve():l}));return Promise.all(r).then(_t)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=q(this,We).build(this,t);return n.isStaleByTime(Bs(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(_t).catch(_t)}fetchInfiniteQuery(e){return e.behavior=Lh(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(_t).catch(_t)}ensureInfiniteQueryData(e){return e.behavior=Lh(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Yo.isOnline()?q(this,Es).resumePausedMutations():Promise.resolve()}getQueryCache(){return q(this,We)}getMutationCache(){return q(this,Es)}getDefaultOptions(){return q(this,_s)}setDefaultOptions(e){le(this,_s,e)}setQueryDefaults(e,t){q(this,ya).set(Rr(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...q(this,ya).values()],n={};return t.forEach(r=>{Wl(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){q(this,ga).set(Rr(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...q(this,ga).values()],n={};return t.forEach(r=>{Wl(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...q(this,_s).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Mp(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Lp&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...q(this,_s).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){q(this,We).clear(),q(this,Es).clear()}},We=new WeakMap,Es=new WeakMap,_s=new WeakMap,ya=new WeakMap,ga=new WeakMap,Rs=new WeakMap,va=new WeakMap,ba=new WeakMap,Of),Fy=y.createContext(void 0),Ze=e=>{const t=y.useContext(Fy);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},IS=({client:e,children:t})=>(y.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),s.jsx(Fy.Provider,{value:e,children:t})),Ty=y.createContext(!1),AS=()=>y.useContext(Ty);Ty.Provider;function qS(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var BS=y.createContext(qS()),zS=()=>y.useContext(BS),US=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},QS=e=>{y.useEffect(()=>{e.clearReset()},[e])},YS=({result:e,errorResetBoundary:t,throwOnError:n,query:r,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(a&&e.data===void 0||Ey(n,[e.error,r])),HS=e=>{if(e.suspense){const n=a=>a==="static"?a:Math.max(a??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...a)=>n(r(...a)):n(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},VS=(e,t)=>e.isLoading&&e.isFetching&&!t,WS=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,Th=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function KS(e,t,n){var d,m,x,h,S;const r=AS(),a=zS(),l=Ze(),i=l.defaultQueryOptions(e);(m=(d=l.getDefaultOptions().queries)==null?void 0:d._experimental_beforeQuery)==null||m.call(d,i),i._optimisticResults=r?"isRestoring":"optimistic",HS(i),US(i,a),QS(a);const o=!l.getQueryCache().get(i.queryHash),[u]=y.useState(()=>new t(l,i)),c=u.getOptimisticResult(i),p=!r&&e.subscribed!==!1;if(y.useSyncExternalStore(y.useCallback(C=>{const g=p?u.subscribe(rt.batchCalls(C)):_t;return u.updateResult(),g},[u,p]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),y.useEffect(()=>{u.setOptions(i)},[i,u]),WS(i,c))throw Th(i,u,a);if(YS({result:c,errorResetBoundary:a,throwOnError:i.throwOnError,query:l.getQueryCache().get(i.queryHash),suspense:i.suspense}))throw c.error;if((h=(x=l.getDefaultOptions().queries)==null?void 0:x._experimental_afterQuery)==null||h.call(x,i,c),i.experimental_prefetchInRender&&!_r&&VS(c,r)){const C=o?Th(i,u,a):(S=l.getQueryCache().get(i.queryHash))==null?void 0:S.promise;C==null||C.catch(_t).finally(()=>{u.updateResult()})}return i.notifyOnChangeProps?c:u.trackResult(c)}function ie(e,t){return KS(e,RS)}function Me(e,t){const n=Ze(),[r]=y.useState(()=>new TS(n,e));y.useEffect(()=>{r.setOptions(e)},[r,e]);const a=y.useSyncExternalStore(y.useCallback(i=>r.subscribe(rt.batchCalls(i)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),l=y.useCallback((i,o)=>{r.mutate(i,o).catch(_t)},[r]);if(a.error&&Ey(r.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:l,mutateAsync:a.mutate}}var Oy={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Oh=ss.createContext&&ss.createContext(Oy),GS=["attr","size","title"];function JS(e,t){if(e==null)return{};var n=XS(e,t),r,a;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)r=l[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function XS(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Ho(){return Ho=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ho.apply(this,arguments)}function $h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Vo(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$h(Object(n),!0).forEach(function(r){ZS(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$h(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ZS(e,t,n){return t=ew(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ew(e){var t=tw(e,"string");return typeof t=="symbol"?t:t+""}function tw(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $y(e){return e&&e.map((t,n)=>ss.createElement(t.tag,Vo({key:n},t.attr),$y(t.child)))}function Ge(e){return t=>ss.createElement(nw,Ho({attr:Vo({},e.attr)},t),$y(e.child))}function nw(e){var t=n=>{var{attr:r,size:a,title:l}=e,i=JS(e,GS),o=a||n.size||"1em",u;return n.className&&(u=n.className),e.className&&(u=(u?u+" ":"")+e.className),ss.createElement("svg",Ho({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,i,{className:u,style:Vo(Vo({color:e.color||n.color},n.style),e.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),l&&ss.createElement("title",null,l),e.children)};return Oh!==void 0?ss.createElement(Oh.Consumer,null,n=>t(n)):t(Oy)}function Ih(e){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 5 19 12 12 19"},child:[]}]})(e)}function Iy(e){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"20",x2:"18",y2:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"20",x2:"12",y2:"4"},child:[]},{tag:"line",attr:{x1:"6",y1:"20",x2:"6",y2:"14"},child:[]}]})(e)}function bc(e){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"},child:[]},{tag:"polyline",attr:{points:"3.27 6.96 12 12.01 20.73 6.96"},child:[]},{tag:"line",attr:{x1:"12",y1:"22.08",x2:"12",y2:"12"},child:[]}]})(e)}function sw(e){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"},child:[]}]})(e)}function Ui(e){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 18 15 12 9 6"},child:[]}]})(e)}function Wo(e){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"},child:[]},{tag:"rect",attr:{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"},child:[]}]})(e)}function rw(e){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 14 4 9 9 4"},child:[]},{tag:"path",attr:{d:"M20 20v-7a4 4 0 0 0-4-4H4"},child:[]}]})(e)}function aw(e){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"15 14 20 9 15 4"},child:[]},{tag:"path",attr:{d:"M4 20v-7a4 4 0 0 1 4-4h12"},child:[]}]})(e)}function Ay(e){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"1",y:"4",width:"22",height:"16",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"1",y1:"10",x2:"23",y2:"10"},child:[]}]})(e)}function lw(e){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"ellipse",attr:{cx:"12",cy:"5",rx:"9",ry:"3"},child:[]},{tag:"path",attr:{d:"M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"},child:[]},{tag:"path",attr:{d:"M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"},child:[]}]})(e)}function _a(e){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"23"},child:[]},{tag:"path",attr:{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"},child:[]}]})(e)}function iw(e){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"},child:[]},{tag:"path",attr:{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"},child:[]}]})(e)}function ow(e){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"},child:[]},{tag:"polyline",attr:{points:"9 22 9 12 15 12 15 22"},child:[]}]})(e)}function qy(e){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"12 2 2 7 12 12 22 7 12 2"},child:[]},{tag:"polyline",attr:{points:"2 17 12 22 22 17"},child:[]},{tag:"polyline",attr:{points:"2 12 12 17 22 12"},child:[]}]})(e)}function cw(e){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"},child:[]}]})(e)}function By(e){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"22",y1:"2",x2:"11",y2:"13"},child:[]},{tag:"polygon",attr:{points:"22 2 15 22 11 13 2 9 22 2"},child:[]}]})(e)}function zy(e){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"9",cy:"21",r:"1"},child:[]},{tag:"circle",attr:{cx:"20",cy:"21",r:"1"},child:[]},{tag:"path",attr:{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"},child:[]}]})(e)}function Uy(e){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"},child:[]},{tag:"line",attr:{x1:"7",y1:"7",x2:"7.01",y2:"7"},child:[]}]})(e)}function Qy(e){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 6 13.5 15.5 8.5 10.5 1 18"},child:[]},{tag:"polyline",attr:{points:"17 6 23 6 23 12"},child:[]}]})(e)}function Yy(e){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"1",y:"3",width:"15",height:"13"},child:[]},{tag:"polygon",attr:{points:"16 8 20 8 23 11 23 16 16 16 16 8"},child:[]},{tag:"circle",attr:{cx:"5.5",cy:"18.5",r:"2.5"},child:[]},{tag:"circle",attr:{cx:"18.5",cy:"18.5",r:"2.5"},child:[]}]})(e)}function uw(e){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(e)}function Hy(e){return Ge({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(e)}const Ah=[{to:"/master/company",label:"Company Registration",icon:sw,iconClass:"text-indigo-400"},{to:"/master/item",label:"Item Registration",icon:Uy,iconClass:"text-emerald-400"},{to:"/master/supplier",label:"Supplier Registration",icon:Yy,iconClass:"text-amber-400"},{to:"/master/area",label:"Area Registration",icon:cw,iconClass:"text-cyan-400"},{to:"/master/salesman",label:"Salesman Registration",icon:Hy,iconClass:"text-purple-400"},{to:"/master/customer",label:"Customer Registration",icon:uw,iconClass:"text-blue-400"},{to:"/master/expense",label:"Expense Definition",icon:Ay,iconClass:"text-rose-400"},{to:"/master/bank",label:"Bank Registration",icon:lw,iconClass:"text-sky-400"}],dw=[{to:"/transactions/purchase",label:"Purchase",icon:zy,iconClass:"text-lime-400"},{to:"/transactions/sales",label:"Sales",icon:Qy,iconClass:"text-emerald-400"},{to:"/transactions/sale-return",label:"Sale Return",icon:rw,iconClass:"text-orange-400"},{to:"/transactions/purchase-return",label:"Purchase Return",icon:aw,iconClass:"text-teal-400"},{to:"/transactions/expense-entry",label:"Expense Entry",icon:Wo,iconClass:"text-fuchsia-400"},{to:"/transactions/customer-receipt",label:"Customer Receipt",icon:By,iconClass:"text-cyan-400"},{to:"/transactions/supplier-payment",label:"Supplier Payment",icon:_a,iconClass:"text-rose-300"},{to:"/transactions/opening-balance",label:"Opening Balance",icon:qy,iconClass:"text-slate-400"},{to:"/transactions/salesman-receipt",label:"Salesman Receipt",icon:Ay,iconClass:"text-violet-400"},{to:"/transactions/bank",label:"Bank Transaction",icon:_a,iconClass:"text-amber-300"},{to:"/transactions/damage",label:"Damage-IN/Out",icon:bc,iconClass:"text-rose-300"}],pw=[{to:"/editing/sales",label:"Edit Sales Invoice",icon:Qy,iconClass:"text-emerald-400"},{to:"/editing/purchase",label:"Edit Purchase Invoice",icon:zy,iconClass:"text-lime-400"},{to:"/editing/expense-entry",label:"Edit Expense Entry",icon:Wo,iconClass:"text-fuchsia-400"},{to:"/editing/bank-transaction",label:"Edit Bank Transaction",icon:_a,iconClass:"text-amber-300"},{to:"/editing/customer-receipt",label:"Edit Customer Receipt",icon:By,iconClass:"text-cyan-400"},{to:"/editing/supplier-payment",label:"Edit Supplier Payment",icon:_a,iconClass:"text-rose-300"},{to:"/editing/item",label:"Edit Item Registration",icon:Uy,iconClass:"text-emerald-400"}],mw=[{to:"/reports/receivables/customer-ledger",label:"Receivable  Customer Ledger",icon:Iy,iconClass:"text-purple-400"},{to:"/reports/stock",label:"Stock Report",icon:bc,iconClass:"text-indigo-400"},{to:"/reports/bank-deposits",label:"Bank Transactions",icon:_a,iconClass:"text-emerald-400"},{to:"/reports/damage",label:"Damage-IN/Out Report",icon:Wo,iconClass:"text-rose-400"},{to:"/reports/legacy",label:"Sales Reports",icon:Wo,iconClass:"text-amber-400"}],hw=()=>{const e=Cn(),t=Ah.some(L=>e.pathname.startsWith(L.to)),n=e.pathname.startsWith("/transactions"),r=e.pathname.startsWith("/editing"),a=e.pathname.startsWith("/reports"),[l,i]=y.useState(t),[o,u]=y.useState(n),[c,p]=y.useState(r),[d,m]=y.useState(a),x=y.useRef(null),h=y.useRef(null),S=y.useRef(null),C=y.useRef(null),g=y.useRef(null),f=y.useRef(null),b=y.useRef(null),R=y.useRef(null),[P,A]=y.useState(null),[v,E]=y.useState(null),[T,M]=y.useState(null),[U,X]=y.useState(null);return y.useEffect(()=>{t&&(i(!0),u(!1),p(!1),m(!1))},[t]),y.useEffect(()=>{n&&(u(!0),i(!1),p(!1),m(!1))},[n]),y.useEffect(()=>{r&&(p(!0),i(!1),u(!1),m(!1))},[r]),y.useEffect(()=>{a&&(m(!0),i(!1),u(!1),p(!1))},[a]),y.useLayoutEffect(()=>{if(l&&x.current&&g.current){const L=x.current.getBoundingClientRect(),w=g.current.getBoundingClientRect(),j=window.innerHeight,k=L.top,F=j-w.height-24,N=Math.max(16,Math.min(k,F));A({top:N,left:L.right+12,transformOrigin:`${Math.min((L.top-N)/Math.max(w.height,1),1)*100}% 50%`})}},[l]),y.useLayoutEffect(()=>{if(o&&h.current&&f.current){const L=h.current.getBoundingClientRect(),w=f.current.getBoundingClientRect(),j=window.innerHeight,k=L.top,F=j-w.height-24,N=Math.max(16,Math.min(k,F));E({top:N,left:L.right+12,transformOrigin:`${Math.min((L.top-N)/Math.max(w.height,1),1)*100}% 50%`})}},[o]),y.useLayoutEffect(()=>{if(c&&S.current&&b.current){const L=S.current.getBoundingClientRect(),w=b.current.getBoundingClientRect(),j=window.innerHeight,k=L.top,F=j-w.height-24,N=Math.max(16,Math.min(k,F));M({top:N,left:L.right+12,transformOrigin:`${Math.min((L.top-N)/Math.max(w.height,1),1)*100}% 50%`})}},[c]),y.useLayoutEffect(()=>{if(d&&C.current&&R.current){const L=C.current.getBoundingClientRect(),w=R.current.getBoundingClientRect(),j=window.innerHeight,k=L.top,F=j-w.height-24,N=Math.max(16,Math.min(k,F));X({top:N,left:L.right+12,transformOrigin:`${Math.min((L.top-N)/Math.max(w.height,1),1)*100}% 50%`})}},[d]),y.useEffect(()=>{if(!l)return;const L=()=>{if(!x.current||!g.current)return;const w=x.current.getBoundingClientRect(),j=g.current.getBoundingClientRect(),k=window.innerHeight,F=w.top,N=k-j.height-24,_=Math.max(16,Math.min(F,N));A({top:_,left:w.right+12,transformOrigin:`${Math.min((w.top-_)/Math.max(j.height,1),1)*100}% 50%`})};return window.addEventListener("resize",L),window.addEventListener("scroll",L,!0),()=>{window.removeEventListener("resize",L),window.removeEventListener("scroll",L,!0)}},[l]),y.useEffect(()=>{if(!o)return;const L=()=>{if(!h.current||!f.current)return;const w=h.current.getBoundingClientRect(),j=f.current.getBoundingClientRect(),k=window.innerHeight,F=w.top,N=k-j.height-24,_=Math.max(16,Math.min(F,N));E({top:_,left:w.right+12,transformOrigin:`${Math.min((w.top-_)/Math.max(j.height,1),1)*100}% 50%`})};return window.addEventListener("resize",L),window.addEventListener("scroll",L,!0),()=>{window.removeEventListener("resize",L),window.removeEventListener("scroll",L,!0)}},[o]),y.useEffect(()=>{if(!c)return;const L=()=>{if(!S.current||!b.current)return;const w=S.current.getBoundingClientRect(),j=b.current.getBoundingClientRect(),k=window.innerHeight,F=w.top,N=k-j.height-24,_=Math.max(16,Math.min(F,N));M({top:_,left:w.right+12,transformOrigin:`${Math.min((w.top-_)/Math.max(j.height,1),1)*100}% 50%`})};return window.addEventListener("resize",L),window.addEventListener("scroll",L,!0),()=>{window.removeEventListener("resize",L),window.removeEventListener("scroll",L,!0)}},[c]),y.useEffect(()=>{if(!d)return;const L=()=>{if(!C.current||!R.current)return;const w=C.current.getBoundingClientRect(),j=R.current.getBoundingClientRect(),k=window.innerHeight,F=w.top,N=k-j.height-24,_=Math.max(16,Math.min(F,N));X({top:_,left:w.right+12,transformOrigin:`${Math.min((w.top-_)/Math.max(j.height,1),1)*100}% 50%`})};return window.addEventListener("resize",L),window.addEventListener("scroll",L,!0),()=>{window.removeEventListener("resize",L),window.removeEventListener("scroll",L,!0)}},[d]),s.jsxs("aside",{className:"relative z-30 w-72 bg-gradient-to-b from-[#0f172a] via-[#101f36] to-[#182c53] text-slate-100 h-screen sticky top-0 shadow-xl print:hidden",children:[s.jsxs("div",{className:"px-6 py-6 border-b border-white/10",children:[s.jsx("div",{className:"text-xl font-semibold tracking-wide text-white",children:"DIGITAL ZONE NEXUS"}),s.jsx("p",{className:"mt-1 text-sm text-slate-300/80",children:"Modern operations cockpit"})]}),s.jsxs("div",{className:"px-6 py-6 space-y-4",children:[s.jsxs(zr,{to:"/",className:({isActive:L})=>`flex items-center gap-3 px-4 py-2.5 text-sm rounded-lg transition ${L?"bg-white/15 text-white shadow-[0_18px_35px_-28px_rgba(15,23,42,0.9)]":"text-slate-200 hover:bg-white/10"}`,children:[s.jsx(ow,{className:"text-lg"}),s.jsx("span",{children:"Dashboard"})]}),s.jsxs("div",{className:"relative overflow-visible",children:[s.jsx("p",{className:"mb-3 text-xs uppercase tracking-wider text-sky-200/80",children:"Master Data"}),s.jsxs("button",{ref:x,type:"button",onClick:()=>{i(L=>{const w=!L;return w&&(u(!1),p(!1),m(!1)),w})},className:"w-full flex items-center justify-between gap-3 px-4 py-2.5 text-sm rounded-lg bg-white/5 border border-white/10 text-slate-200 hover:bg-white/10 transition",children:[s.jsxs("span",{className:"inline-flex items-center gap-3",children:[s.jsx(qy,{className:"text-lg"}),"Master Data Options"]}),s.jsx(Ui,{className:`transition-transform ${l?"rotate-90":""}`})]}),l?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-[998]",onClick:()=>i(!1),"aria-hidden":"true"}),s.jsx("div",{ref:g,className:"fixed z-[999] pointer-events-auto origin-left animate-fade-in",style:{top:(P==null?void 0:P.top)??0,left:(P==null?void 0:P.left)??0,transformOrigin:(P==null?void 0:P.transformOrigin)||"left top"},children:s.jsx("nav",{className:"w-64 rounded-xl border border-white/10 bg-[#111c2f] p-3 shadow-[0_28px_45px_-35px_rgba(15,23,42,0.85)] divide-y divide-white/5",children:Ah.map(L=>{const w=L.icon;return s.jsxs(zr,{to:L.to,className:({isActive:j})=>`flex items-center gap-3 px-3 py-2 text-sm rounded-md transition ${j?"bg-white/15 text-white":"text-slate-200 hover:bg-white/10"}`,onClick:()=>i(!1),children:[s.jsx(w,{className:`text-lg ${L.iconClass}`}),s.jsx("span",{className:"flex-1",children:L.label})]},L.to)})})})]}):null]}),s.jsxs("div",{className:"relative overflow-visible",children:[s.jsx("p",{className:"mb-3 text-xs uppercase tracking-wider text-sky-200/80",children:"Transactions"}),s.jsxs("button",{ref:h,type:"button",onClick:()=>{u(L=>{const w=!L;return w&&(i(!1),p(!1),m(!1)),w})},className:"w-full flex items-center justify-between gap-3 px-4 py-2.5 text-sm rounded-lg bg-white/5 border border-white/10 text-slate-200 hover:bg-white/10 transition",children:[s.jsxs("span",{className:"inline-flex items-center gap-3",children:[s.jsx(Iy,{className:"text-lg text-emerald-400"}),"Transaction Options"]}),s.jsx(Ui,{className:`transition-transform ${o?"rotate-90":""}`})]}),o?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-[998]",onClick:()=>u(!1),"aria-hidden":"true"}),s.jsx("div",{ref:f,className:"fixed z-[999] pointer-events-auto origin-left animate-fade-in",style:{top:(v==null?void 0:v.top)??0,left:(v==null?void 0:v.left)??0,transformOrigin:(v==null?void 0:v.transformOrigin)||"left top"},children:s.jsx("nav",{className:"w-64 rounded-xl border border-white/10 bg-[#111c2f] p-3 shadow-[0_28px_45px_-35px_rgba(15,23,42,0.85)] divide-y divide-white/5",children:dw.map(L=>{const w=L.icon;return s.jsxs(zr,{to:L.to,className:({isActive:j})=>`flex items-center gap-3 px-3 py-2 text-sm rounded-md transition ${j?"bg-white/15 text-white":"text-slate-200 hover:bg-white/10"}`,onClick:()=>u(!1),children:[s.jsx(w,{className:`text-lg ${L.iconClass}`}),s.jsx("span",{className:"flex-1",children:L.label})]},L.to)})})})]}):null]}),s.jsxs("div",{className:"relative overflow-visible",children:[s.jsx("p",{className:"mb-3 text-xs uppercase tracking-wider text-sky-200/80",children:"Reports"}),s.jsxs("button",{ref:C,type:"button",onClick:()=>{m(L=>{const w=!L;return w&&(i(!1),u(!1),p(!1)),w})},className:"w-full flex items-center justify-between gap-3 px-4 py-2.5 text-sm rounded-lg bg-white/5 border border-white/10 text-slate-200 hover:bg-white/10 transition",children:[s.jsxs("span",{className:"inline-flex items-center gap-3",children:[s.jsx(bc,{className:"text-lg text-emerald-400"}),"Report Options"]}),s.jsx(Ui,{className:`transition-transform ${d?"rotate-90":""}`})]}),d?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-[998]",onClick:()=>m(!1),"aria-hidden":"true"}),s.jsx("div",{ref:R,className:"fixed z-[999] pointer-events-auto origin-left animate-fade-in",style:{top:(U==null?void 0:U.top)??0,left:(U==null?void 0:U.left)??0,transformOrigin:(U==null?void 0:U.transformOrigin)||"left top"},children:s.jsx("nav",{className:"w-64 rounded-xl border border-white/10 bg-[#111c2f] p-3 shadow-[0_28px_45px_-35px_rgba(15,23,42,0.85)] divide-y divide-white/5",children:mw.map(L=>{const w=L.icon;return s.jsxs(zr,{to:L.to,className:({isActive:j})=>`flex items-center gap-3 px-3 py-2 text-sm rounded-md transition ${j?"bg-white/15 text-white":"text-slate-200 hover:bg-white/10"}`,onClick:()=>m(!1),children:[s.jsx(w,{className:`text-lg ${L.iconClass}`}),s.jsx("span",{className:"flex-1",children:L.label})]},L.to)})})})]}):null]}),s.jsxs("div",{className:"relative overflow-visible",children:[s.jsx("p",{className:"mb-3 text-xs uppercase tracking-wider text-sky-200/80",children:"Editing"}),s.jsxs("button",{ref:S,type:"button",onClick:()=>{p(L=>{const w=!L;return w&&(i(!1),u(!1),m(!1)),w})},className:"w-full flex items-center justify-between gap-3 px-4 py-2.5 text-sm rounded-lg bg-white/5 border border-white/10 text-slate-200 hover:bg-white/10 transition",children:[s.jsxs("span",{className:"inline-flex items-center gap-3",children:[s.jsx(iw,{className:"text-lg text-sky-400"}),"Editing Options"]}),s.jsx(Ui,{className:`transition-transform ${c?"rotate-90":""}`})]}),c?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-[998]",onClick:()=>p(!1),"aria-hidden":"true"}),s.jsx("div",{ref:b,className:"fixed z-[999] pointer-events-auto origin-left animate-fade-in",style:{top:(T==null?void 0:T.top)??0,left:(T==null?void 0:T.left)??0,transformOrigin:(T==null?void 0:T.transformOrigin)||"left top"},children:s.jsx("nav",{className:"w-64 rounded-xl border border-white/10 bg-[#111c2f] p-3 shadow-[0_28px_45px_-35px_rgba(15,23,42,0.85)] divide-y divide-white/5",children:pw.map(L=>{const w=L.icon;return s.jsxs(zr,{to:L.to,className:({isActive:j})=>`flex items-center gap-3 px-3 py-2 text-sm rounded-md transition ${j?"bg-white/15 text-white":"text-slate-200 hover:bg-white/10"}`,onClick:()=>p(!1),children:[s.jsx(w,{className:`text-lg ${L.iconClass}`}),s.jsx("span",{className:"flex-1",children:L.label})]},L.to)})})})]}):null]})]})]})};var Vy={exports:{}};(function(e,t){(function(n,r){e.exports=r()})($f,function(){var n=1e3,r=6e4,a=36e5,l="millisecond",i="second",o="minute",u="hour",c="day",p="week",d="month",m="quarter",x="year",h="date",S="Invalid Date",C=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,g=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,f={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(w){var j=["th","st","nd","rd"],k=w%100;return"["+w+(j[(k-20)%10]||j[k]||j[0])+"]"}},b=function(w,j,k){var F=String(w);return!F||F.length>=j?w:""+Array(j+1-F.length).join(k)+w},R={s:b,z:function(w){var j=-w.utcOffset(),k=Math.abs(j),F=Math.floor(k/60),N=k%60;return(j<=0?"+":"-")+b(F,2,"0")+":"+b(N,2,"0")},m:function w(j,k){if(j.date()<k.date())return-w(k,j);var F=12*(k.year()-j.year())+(k.month()-j.month()),N=j.clone().add(F,d),_=k-N<0,$=j.clone().add(F+(_?-1:1),d);return+(-(F+(k-N)/(_?N-$:$-N))||0)},a:function(w){return w<0?Math.ceil(w)||0:Math.floor(w)},p:function(w){return{M:d,y:x,w:p,d:c,D:h,h:u,m:o,s:i,ms:l,Q:m}[w]||String(w||"").toLowerCase().replace(/s$/,"")},u:function(w){return w===void 0}},P="en",A={};A[P]=f;var v="$isDayjsObject",E=function(w){return w instanceof X||!(!w||!w[v])},T=function w(j,k,F){var N;if(!j)return P;if(typeof j=="string"){var _=j.toLowerCase();A[_]&&(N=_),k&&(A[_]=k,N=_);var $=j.split("-");if(!N&&$.length>1)return w($[0])}else{var O=j.name;A[O]=j,N=O}return!F&&N&&(P=N),N||!F&&P},M=function(w,j){if(E(w))return w.clone();var k=typeof j=="object"?j:{};return k.date=w,k.args=arguments,new X(k)},U=R;U.l=T,U.i=E,U.w=function(w,j){return M(w,{locale:j.$L,utc:j.$u,x:j.$x,$offset:j.$offset})};var X=function(){function w(k){this.$L=T(k.locale,null,!0),this.parse(k),this.$x=this.$x||k.x||{},this[v]=!0}var j=w.prototype;return j.parse=function(k){this.$d=function(F){var N=F.date,_=F.utc;if(N===null)return new Date(NaN);if(U.u(N))return new Date;if(N instanceof Date)return new Date(N);if(typeof N=="string"&&!/Z$/i.test(N)){var $=N.match(C);if($){var O=$[2]-1||0,Q=($[7]||"0").substring(0,3);return _?new Date(Date.UTC($[1],O,$[3]||1,$[4]||0,$[5]||0,$[6]||0,Q)):new Date($[1],O,$[3]||1,$[4]||0,$[5]||0,$[6]||0,Q)}}return new Date(N)}(k),this.init()},j.init=function(){var k=this.$d;this.$y=k.getFullYear(),this.$M=k.getMonth(),this.$D=k.getDate(),this.$W=k.getDay(),this.$H=k.getHours(),this.$m=k.getMinutes(),this.$s=k.getSeconds(),this.$ms=k.getMilliseconds()},j.$utils=function(){return U},j.isValid=function(){return this.$d.toString()!==S},j.isSame=function(k,F){var N=M(k);return this.startOf(F)<=N&&N<=this.endOf(F)},j.isAfter=function(k,F){return M(k)<this.startOf(F)},j.isBefore=function(k,F){return this.endOf(F)<M(k)},j.$g=function(k,F,N){return U.u(k)?this[F]:this.set(N,k)},j.unix=function(){return Math.floor(this.valueOf()/1e3)},j.valueOf=function(){return this.$d.getTime()},j.startOf=function(k,F){var N=this,_=!!U.u(F)||F,$=U.p(k),O=function(he,ge){var Te=U.w(N.$u?Date.UTC(N.$y,ge,he):new Date(N.$y,ge,he),N);return _?Te:Te.endOf(c)},Q=function(he,ge){return U.w(N.toDate()[he].apply(N.toDate("s"),(_?[0,0,0,0]:[23,59,59,999]).slice(ge)),N)},K=this.$W,D=this.$M,B=this.$D,ee="set"+(this.$u?"UTC":"");switch($){case x:return _?O(1,0):O(31,11);case d:return _?O(1,D):O(0,D+1);case p:var Z=this.$locale().weekStart||0,re=(K<Z?K+7:K)-Z;return O(_?B-re:B+(6-re),D);case c:case h:return Q(ee+"Hours",0);case u:return Q(ee+"Minutes",1);case o:return Q(ee+"Seconds",2);case i:return Q(ee+"Milliseconds",3);default:return this.clone()}},j.endOf=function(k){return this.startOf(k,!1)},j.$set=function(k,F){var N,_=U.p(k),$="set"+(this.$u?"UTC":""),O=(N={},N[c]=$+"Date",N[h]=$+"Date",N[d]=$+"Month",N[x]=$+"FullYear",N[u]=$+"Hours",N[o]=$+"Minutes",N[i]=$+"Seconds",N[l]=$+"Milliseconds",N)[_],Q=_===c?this.$D+(F-this.$W):F;if(_===d||_===x){var K=this.clone().set(h,1);K.$d[O](Q),K.init(),this.$d=K.set(h,Math.min(this.$D,K.daysInMonth())).$d}else O&&this.$d[O](Q);return this.init(),this},j.set=function(k,F){return this.clone().$set(k,F)},j.get=function(k){return this[U.p(k)]()},j.add=function(k,F){var N,_=this;k=Number(k);var $=U.p(F),O=function(D){var B=M(_);return U.w(B.date(B.date()+Math.round(D*k)),_)};if($===d)return this.set(d,this.$M+k);if($===x)return this.set(x,this.$y+k);if($===c)return O(1);if($===p)return O(7);var Q=(N={},N[o]=r,N[u]=a,N[i]=n,N)[$]||1,K=this.$d.getTime()+k*Q;return U.w(K,this)},j.subtract=function(k,F){return this.add(-1*k,F)},j.format=function(k){var F=this,N=this.$locale();if(!this.isValid())return N.invalidDate||S;var _=k||"YYYY-MM-DDTHH:mm:ssZ",$=U.z(this),O=this.$H,Q=this.$m,K=this.$M,D=N.weekdays,B=N.months,ee=N.meridiem,Z=function(ge,Te,ve,tt){return ge&&(ge[Te]||ge(F,_))||ve[Te].slice(0,tt)},re=function(ge){return U.s(O%12||12,ge,"0")},he=ee||function(ge,Te,ve){var tt=ge<12?"AM":"PM";return ve?tt.toLowerCase():tt};return _.replace(g,function(ge,Te){return Te||function(ve){switch(ve){case"YY":return String(F.$y).slice(-2);case"YYYY":return U.s(F.$y,4,"0");case"M":return K+1;case"MM":return U.s(K+1,2,"0");case"MMM":return Z(N.monthsShort,K,B,3);case"MMMM":return Z(B,K);case"D":return F.$D;case"DD":return U.s(F.$D,2,"0");case"d":return String(F.$W);case"dd":return Z(N.weekdaysMin,F.$W,D,2);case"ddd":return Z(N.weekdaysShort,F.$W,D,3);case"dddd":return D[F.$W];case"H":return String(O);case"HH":return U.s(O,2,"0");case"h":return re(1);case"hh":return re(2);case"a":return he(O,Q,!0);case"A":return he(O,Q,!1);case"m":return String(Q);case"mm":return U.s(Q,2,"0");case"s":return String(F.$s);case"ss":return U.s(F.$s,2,"0");case"SSS":return U.s(F.$ms,3,"0");case"Z":return $}return null}(ge)||$.replace(":","")})},j.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},j.diff=function(k,F,N){var _,$=this,O=U.p(F),Q=M(k),K=(Q.utcOffset()-this.utcOffset())*r,D=this-Q,B=function(){return U.m($,Q)};switch(O){case x:_=B()/12;break;case d:_=B();break;case m:_=B()/3;break;case p:_=(D-K)/6048e5;break;case c:_=(D-K)/864e5;break;case u:_=D/a;break;case o:_=D/r;break;case i:_=D/n;break;default:_=D}return N?_:U.a(_)},j.daysInMonth=function(){return this.endOf(d).$D},j.$locale=function(){return A[this.$L]},j.locale=function(k,F){if(!k)return this.$L;var N=this.clone(),_=T(k,F,!0);return _&&(N.$L=_),N},j.clone=function(){return U.w(this.$d,this)},j.toDate=function(){return new Date(this.valueOf())},j.toJSON=function(){return this.isValid()?this.toISOString():null},j.toISOString=function(){return this.$d.toISOString()},j.toString=function(){return this.$d.toUTCString()},w}(),L=X.prototype;return M.prototype=L,[["$ms",l],["$s",i],["$m",o],["$H",u],["$W",c],["$M",d],["$y",x],["$D",h]].forEach(function(w){L[w[1]]=function(j){return this.$g(j,w[0],w[1])}}),M.extend=function(w,j){return w.$i||(w(j,X,M),w.$i=!0),M},M.locale=T,M.isDayjs=E,M.unix=function(w){return M(1e3*w)},M.en=A[P],M.Ls=A,M.p={},M})})(Vy);var fw=Vy.exports;const on=Rd(fw);function Wy(e,t){return function(){return e.apply(t,arguments)}}const{toString:xw}=Object.prototype,{getPrototypeOf:Op}=Object,{iterator:jc,toStringTag:Ky}=Symbol,Nc=(e=>t=>{const n=xw.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),En=e=>(e=e.toLowerCase(),t=>Nc(t)===e),Sc=e=>t=>typeof t===e,{isArray:Ta}=Array,Ra=Sc("undefined");function oi(e){return e!==null&&!Ra(e)&&e.constructor!==null&&!Ra(e.constructor)&&Qt(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Gy=En("ArrayBuffer");function yw(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Gy(e.buffer),t}const gw=Sc("string"),Qt=Sc("function"),Jy=Sc("number"),ci=e=>e!==null&&typeof e=="object",vw=e=>e===!0||e===!1,fo=e=>{if(Nc(e)!=="object")return!1;const t=Op(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Ky in e)&&!(jc in e)},bw=e=>{if(!ci(e)||oi(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},jw=En("Date"),Nw=En("File"),Sw=En("Blob"),ww=En("FileList"),kw=e=>ci(e)&&Qt(e.pipe),Cw=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Qt(e.append)&&((t=Nc(e))==="formdata"||t==="object"&&Qt(e.toString)&&e.toString()==="[object FormData]"))},Ew=En("URLSearchParams"),[_w,Rw,Dw,Pw]=["ReadableStream","Request","Response","Headers"].map(En),Mw=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ui(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,a;if(typeof e!="object"&&(e=[e]),Ta(e))for(r=0,a=e.length;r<a;r++)t.call(null,e[r],r,e);else{if(oi(e))return;const l=n?Object.getOwnPropertyNames(e):Object.keys(e),i=l.length;let o;for(r=0;r<i;r++)o=l[r],t.call(null,e[o],o,e)}}function Xy(e,t){if(oi(e))return null;t=t.toLowerCase();const n=Object.keys(e);let r=n.length,a;for(;r-- >0;)if(a=n[r],t===a.toLowerCase())return a;return null}const ur=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Zy=e=>!Ra(e)&&e!==ur;function Sd(){const{caseless:e,skipUndefined:t}=Zy(this)&&this||{},n={},r=(a,l)=>{const i=e&&Xy(n,l)||l;fo(n[i])&&fo(a)?n[i]=Sd(n[i],a):fo(a)?n[i]=Sd({},a):Ta(a)?n[i]=a.slice():(!t||!Ra(a))&&(n[i]=a)};for(let a=0,l=arguments.length;a<l;a++)arguments[a]&&ui(arguments[a],r);return n}const Lw=(e,t,n,{allOwnKeys:r}={})=>(ui(t,(a,l)=>{n&&Qt(a)?e[l]=Wy(a,n):e[l]=a},{allOwnKeys:r}),e),Fw=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Tw=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},Ow=(e,t,n,r)=>{let a,l,i;const o={};if(t=t||{},e==null)return t;do{for(a=Object.getOwnPropertyNames(e),l=a.length;l-- >0;)i=a[l],(!r||r(i,e,t))&&!o[i]&&(t[i]=e[i],o[i]=!0);e=n!==!1&&Op(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},$w=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},Iw=e=>{if(!e)return null;if(Ta(e))return e;let t=e.length;if(!Jy(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},Aw=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Op(Uint8Array)),qw=(e,t)=>{const r=(e&&e[jc]).call(e);let a;for(;(a=r.next())&&!a.done;){const l=a.value;t.call(e,l[0],l[1])}},Bw=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},zw=En("HTMLFormElement"),Uw=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,a){return r.toUpperCase()+a}),qh=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),Qw=En("RegExp"),eg=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};ui(n,(a,l)=>{let i;(i=t(a,l,e))!==!1&&(r[l]=i||a)}),Object.defineProperties(e,r)},Yw=e=>{eg(e,(t,n)=>{if(Qt(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(Qt(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Hw=(e,t)=>{const n={},r=a=>{a.forEach(l=>{n[l]=!0})};return Ta(e)?r(e):r(String(e).split(t)),n},Vw=()=>{},Ww=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function Kw(e){return!!(e&&Qt(e.append)&&e[Ky]==="FormData"&&e[jc])}const Gw=e=>{const t=new Array(10),n=(r,a)=>{if(ci(r)){if(t.indexOf(r)>=0)return;if(oi(r))return r;if(!("toJSON"in r)){t[a]=r;const l=Ta(r)?[]:{};return ui(r,(i,o)=>{const u=n(i,a+1);!Ra(u)&&(l[o]=u)}),t[a]=void 0,l}}return r};return n(e,0)},Jw=En("AsyncFunction"),Xw=e=>e&&(ci(e)||Qt(e))&&Qt(e.then)&&Qt(e.catch),tg=((e,t)=>e?setImmediate:t?((n,r)=>(ur.addEventListener("message",({source:a,data:l})=>{a===ur&&l===n&&r.length&&r.shift()()},!1),a=>{r.push(a),ur.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Qt(ur.postMessage)),Zw=typeof queueMicrotask<"u"?queueMicrotask.bind(ur):typeof process<"u"&&process.nextTick||tg,e2=e=>e!=null&&Qt(e[jc]),W={isArray:Ta,isArrayBuffer:Gy,isBuffer:oi,isFormData:Cw,isArrayBufferView:yw,isString:gw,isNumber:Jy,isBoolean:vw,isObject:ci,isPlainObject:fo,isEmptyObject:bw,isReadableStream:_w,isRequest:Rw,isResponse:Dw,isHeaders:Pw,isUndefined:Ra,isDate:jw,isFile:Nw,isBlob:Sw,isRegExp:Qw,isFunction:Qt,isStream:kw,isURLSearchParams:Ew,isTypedArray:Aw,isFileList:ww,forEach:ui,merge:Sd,extend:Lw,trim:Mw,stripBOM:Fw,inherits:Tw,toFlatObject:Ow,kindOf:Nc,kindOfTest:En,endsWith:$w,toArray:Iw,forEachEntry:qw,matchAll:Bw,isHTMLForm:zw,hasOwnProperty:qh,hasOwnProp:qh,reduceDescriptors:eg,freezeMethods:Yw,toObjectSet:Hw,toCamelCase:Uw,noop:Vw,toFiniteNumber:Ww,findKey:Xy,global:ur,isContextDefined:Zy,isSpecCompliantForm:Kw,toJSONObject:Gw,isAsyncFn:Jw,isThenable:Xw,setImmediate:tg,asap:Zw,isIterable:e2};function xe(e,t,n,r,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),a&&(this.response=a,this.status=a.status?a.status:null)}W.inherits(xe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:W.toJSONObject(this.config),code:this.code,status:this.status}}});const ng=xe.prototype,sg={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{sg[e]={value:e}});Object.defineProperties(xe,sg);Object.defineProperty(ng,"isAxiosError",{value:!0});xe.from=(e,t,n,r,a,l)=>{const i=Object.create(ng);W.toFlatObject(e,i,function(p){return p!==Error.prototype},c=>c!=="isAxiosError");const o=e&&e.message?e.message:"Error",u=t==null&&e?e.code:t;return xe.call(i,o,u,n,r,a),e&&i.cause==null&&Object.defineProperty(i,"cause",{value:e,configurable:!0}),i.name=e&&e.name||"Error",l&&Object.assign(i,l),i};const t2=null;function wd(e){return W.isPlainObject(e)||W.isArray(e)}function rg(e){return W.endsWith(e,"[]")?e.slice(0,-2):e}function Bh(e,t,n){return e?e.concat(t).map(function(a,l){return a=rg(a),!n&&l?"["+a+"]":a}).join(n?".":""):t}function n2(e){return W.isArray(e)&&!e.some(wd)}const s2=W.toFlatObject(W,{},null,function(t){return/^is[A-Z]/.test(t)});function wc(e,t,n){if(!W.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=W.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(S,C){return!W.isUndefined(C[S])});const r=n.metaTokens,a=n.visitor||p,l=n.dots,i=n.indexes,u=(n.Blob||typeof Blob<"u"&&Blob)&&W.isSpecCompliantForm(t);if(!W.isFunction(a))throw new TypeError("visitor must be a function");function c(h){if(h===null)return"";if(W.isDate(h))return h.toISOString();if(W.isBoolean(h))return h.toString();if(!u&&W.isBlob(h))throw new xe("Blob is not supported. Use a Buffer instead.");return W.isArrayBuffer(h)||W.isTypedArray(h)?u&&typeof Blob=="function"?new Blob([h]):Buffer.from(h):h}function p(h,S,C){let g=h;if(h&&!C&&typeof h=="object"){if(W.endsWith(S,"{}"))S=r?S:S.slice(0,-2),h=JSON.stringify(h);else if(W.isArray(h)&&n2(h)||(W.isFileList(h)||W.endsWith(S,"[]"))&&(g=W.toArray(h)))return S=rg(S),g.forEach(function(b,R){!(W.isUndefined(b)||b===null)&&t.append(i===!0?Bh([S],R,l):i===null?S:S+"[]",c(b))}),!1}return wd(h)?!0:(t.append(Bh(C,S,l),c(h)),!1)}const d=[],m=Object.assign(s2,{defaultVisitor:p,convertValue:c,isVisitable:wd});function x(h,S){if(!W.isUndefined(h)){if(d.indexOf(h)!==-1)throw Error("Circular reference detected in "+S.join("."));d.push(h),W.forEach(h,function(g,f){(!(W.isUndefined(g)||g===null)&&a.call(t,g,W.isString(f)?f.trim():f,S,m))===!0&&x(g,S?S.concat(f):[f])}),d.pop()}}if(!W.isObject(e))throw new TypeError("data must be an object");return x(e),t}function zh(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function $p(e,t){this._pairs=[],e&&wc(e,this,t)}const ag=$p.prototype;ag.append=function(t,n){this._pairs.push([t,n])};ag.toString=function(t){const n=t?function(r){return t.call(this,r,zh)}:zh;return this._pairs.map(function(a){return n(a[0])+"="+n(a[1])},"").join("&")};function r2(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function lg(e,t,n){if(!t)return e;const r=n&&n.encode||r2;W.isFunction(n)&&(n={serialize:n});const a=n&&n.serialize;let l;if(a?l=a(t,n):l=W.isURLSearchParams(t)?t.toString():new $p(t,n).toString(r),l){const i=e.indexOf("#");i!==-1&&(e=e.slice(0,i)),e+=(e.indexOf("?")===-1?"?":"&")+l}return e}class Uh{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){W.forEach(this.handlers,function(r){r!==null&&t(r)})}}const ig={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},a2=typeof URLSearchParams<"u"?URLSearchParams:$p,l2=typeof FormData<"u"?FormData:null,i2=typeof Blob<"u"?Blob:null,o2={isBrowser:!0,classes:{URLSearchParams:a2,FormData:l2,Blob:i2},protocols:["http","https","file","blob","url","data"]},Ip=typeof window<"u"&&typeof document<"u",kd=typeof navigator=="object"&&navigator||void 0,c2=Ip&&(!kd||["ReactNative","NativeScript","NS"].indexOf(kd.product)<0),u2=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",d2=Ip&&window.location.href||"http://localhost",p2=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ip,hasStandardBrowserEnv:c2,hasStandardBrowserWebWorkerEnv:u2,navigator:kd,origin:d2},Symbol.toStringTag,{value:"Module"})),jt={...p2,...o2};function m2(e,t){return wc(e,new jt.classes.URLSearchParams,{visitor:function(n,r,a,l){return jt.isNode&&W.isBuffer(n)?(this.append(r,n.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)},...t})}function h2(e){return W.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function f2(e){const t={},n=Object.keys(e);let r;const a=n.length;let l;for(r=0;r<a;r++)l=n[r],t[l]=e[l];return t}function og(e){function t(n,r,a,l){let i=n[l++];if(i==="__proto__")return!0;const o=Number.isFinite(+i),u=l>=n.length;return i=!i&&W.isArray(a)?a.length:i,u?(W.hasOwnProp(a,i)?a[i]=[a[i],r]:a[i]=r,!o):((!a[i]||!W.isObject(a[i]))&&(a[i]=[]),t(n,r,a[i],l)&&W.isArray(a[i])&&(a[i]=f2(a[i])),!o)}if(W.isFormData(e)&&W.isFunction(e.entries)){const n={};return W.forEachEntry(e,(r,a)=>{t(h2(r),a,n,0)}),n}return null}function x2(e,t,n){if(W.isString(e))try{return(t||JSON.parse)(e),W.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const di={transitional:ig,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const r=n.getContentType()||"",a=r.indexOf("application/json")>-1,l=W.isObject(t);if(l&&W.isHTMLForm(t)&&(t=new FormData(t)),W.isFormData(t))return a?JSON.stringify(og(t)):t;if(W.isArrayBuffer(t)||W.isBuffer(t)||W.isStream(t)||W.isFile(t)||W.isBlob(t)||W.isReadableStream(t))return t;if(W.isArrayBufferView(t))return t.buffer;if(W.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let o;if(l){if(r.indexOf("application/x-www-form-urlencoded")>-1)return m2(t,this.formSerializer).toString();if((o=W.isFileList(t))||r.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return wc(o?{"files[]":t}:t,u&&new u,this.formSerializer)}}return l||a?(n.setContentType("application/json",!1),x2(t)):t}],transformResponse:[function(t){const n=this.transitional||di.transitional,r=n&&n.forcedJSONParsing,a=this.responseType==="json";if(W.isResponse(t)||W.isReadableStream(t))return t;if(t&&W.isString(t)&&(r&&!this.responseType||a)){const i=!(n&&n.silentJSONParsing)&&a;try{return JSON.parse(t,this.parseReviver)}catch(o){if(i)throw o.name==="SyntaxError"?xe.from(o,xe.ERR_BAD_RESPONSE,this,null,this.response):o}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:jt.classes.FormData,Blob:jt.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};W.forEach(["delete","get","head","post","put","patch"],e=>{di.headers[e]={}});const y2=W.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),g2=e=>{const t={};let n,r,a;return e&&e.split(`
`).forEach(function(i){a=i.indexOf(":"),n=i.substring(0,a).trim().toLowerCase(),r=i.substring(a+1).trim(),!(!n||t[n]&&y2[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},Qh=Symbol("internals");function il(e){return e&&String(e).trim().toLowerCase()}function xo(e){return e===!1||e==null?e:W.isArray(e)?e.map(xo):String(e)}function v2(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const b2=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function au(e,t,n,r,a){if(W.isFunction(r))return r.call(this,t,n);if(a&&(t=n),!!W.isString(t)){if(W.isString(r))return t.indexOf(r)!==-1;if(W.isRegExp(r))return r.test(t)}}function j2(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function N2(e,t){const n=W.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(a,l,i){return this[r].call(this,t,a,l,i)},configurable:!0})})}let Yt=class{constructor(t){t&&this.set(t)}set(t,n,r){const a=this;function l(o,u,c){const p=il(u);if(!p)throw new Error("header name must be a non-empty string");const d=W.findKey(a,p);(!d||a[d]===void 0||c===!0||c===void 0&&a[d]!==!1)&&(a[d||u]=xo(o))}const i=(o,u)=>W.forEach(o,(c,p)=>l(c,p,u));if(W.isPlainObject(t)||t instanceof this.constructor)i(t,n);else if(W.isString(t)&&(t=t.trim())&&!b2(t))i(g2(t),n);else if(W.isObject(t)&&W.isIterable(t)){let o={},u,c;for(const p of t){if(!W.isArray(p))throw TypeError("Object iterator must return a key-value pair");o[c=p[0]]=(u=o[c])?W.isArray(u)?[...u,p[1]]:[u,p[1]]:p[1]}i(o,n)}else t!=null&&l(n,t,r);return this}get(t,n){if(t=il(t),t){const r=W.findKey(this,t);if(r){const a=this[r];if(!n)return a;if(n===!0)return v2(a);if(W.isFunction(n))return n.call(this,a,r);if(W.isRegExp(n))return n.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=il(t),t){const r=W.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||au(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let a=!1;function l(i){if(i=il(i),i){const o=W.findKey(r,i);o&&(!n||au(r,r[o],o,n))&&(delete r[o],a=!0)}}return W.isArray(t)?t.forEach(l):l(t),a}clear(t){const n=Object.keys(this);let r=n.length,a=!1;for(;r--;){const l=n[r];(!t||au(this,this[l],l,t,!0))&&(delete this[l],a=!0)}return a}normalize(t){const n=this,r={};return W.forEach(this,(a,l)=>{const i=W.findKey(r,l);if(i){n[i]=xo(a),delete n[l];return}const o=t?j2(l):String(l).trim();o!==l&&delete n[l],n[o]=xo(a),r[o]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return W.forEach(this,(r,a)=>{r!=null&&r!==!1&&(n[a]=t&&W.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(a=>r.set(a)),r}static accessor(t){const r=(this[Qh]=this[Qh]={accessors:{}}).accessors,a=this.prototype;function l(i){const o=il(i);r[o]||(N2(a,i),r[o]=!0)}return W.isArray(t)?t.forEach(l):l(t),this}};Yt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);W.reduceDescriptors(Yt.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});W.freezeMethods(Yt);function lu(e,t){const n=this||di,r=t||n,a=Yt.from(r.headers);let l=r.data;return W.forEach(e,function(o){l=o.call(n,l,a.normalize(),t?t.status:void 0)}),a.normalize(),l}function cg(e){return!!(e&&e.__CANCEL__)}function Oa(e,t,n){xe.call(this,e??"canceled",xe.ERR_CANCELED,t,n),this.name="CanceledError"}W.inherits(Oa,xe,{__CANCEL__:!0});function ug(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new xe("Request failed with status code "+n.status,[xe.ERR_BAD_REQUEST,xe.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function S2(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function w2(e,t){e=e||10;const n=new Array(e),r=new Array(e);let a=0,l=0,i;return t=t!==void 0?t:1e3,function(u){const c=Date.now(),p=r[l];i||(i=c),n[a]=u,r[a]=c;let d=l,m=0;for(;d!==a;)m+=n[d++],d=d%e;if(a=(a+1)%e,a===l&&(l=(l+1)%e),c-i<t)return;const x=p&&c-p;return x?Math.round(m*1e3/x):void 0}}function k2(e,t){let n=0,r=1e3/t,a,l;const i=(c,p=Date.now())=>{n=p,a=null,l&&(clearTimeout(l),l=null),e(...c)};return[(...c)=>{const p=Date.now(),d=p-n;d>=r?i(c,p):(a=c,l||(l=setTimeout(()=>{l=null,i(a)},r-d)))},()=>a&&i(a)]}const Ko=(e,t,n=3)=>{let r=0;const a=w2(50,250);return k2(l=>{const i=l.loaded,o=l.lengthComputable?l.total:void 0,u=i-r,c=a(u),p=i<=o;r=i;const d={loaded:i,total:o,progress:o?i/o:void 0,bytes:u,rate:c||void 0,estimated:c&&o&&p?(o-i)/c:void 0,event:l,lengthComputable:o!=null,[t?"download":"upload"]:!0};e(d)},n)},Yh=(e,t)=>{const n=e!=null;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},Hh=e=>(...t)=>W.asap(()=>e(...t)),C2=jt.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,jt.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(jt.origin),jt.navigator&&/(msie|trident)/i.test(jt.navigator.userAgent)):()=>!0,E2=jt.hasStandardBrowserEnv?{write(e,t,n,r,a,l,i){if(typeof document>"u")return;const o=[`${e}=${encodeURIComponent(t)}`];W.isNumber(n)&&o.push(`expires=${new Date(n).toUTCString()}`),W.isString(r)&&o.push(`path=${r}`),W.isString(a)&&o.push(`domain=${a}`),l===!0&&o.push("secure"),W.isString(i)&&o.push(`SameSite=${i}`),document.cookie=o.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function _2(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function R2(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function dg(e,t,n){let r=!_2(t);return e&&(r||n==!1)?R2(e,t):t}const Vh=e=>e instanceof Yt?{...e}:e;function Dr(e,t){t=t||{};const n={};function r(c,p,d,m){return W.isPlainObject(c)&&W.isPlainObject(p)?W.merge.call({caseless:m},c,p):W.isPlainObject(p)?W.merge({},p):W.isArray(p)?p.slice():p}function a(c,p,d,m){if(W.isUndefined(p)){if(!W.isUndefined(c))return r(void 0,c,d,m)}else return r(c,p,d,m)}function l(c,p){if(!W.isUndefined(p))return r(void 0,p)}function i(c,p){if(W.isUndefined(p)){if(!W.isUndefined(c))return r(void 0,c)}else return r(void 0,p)}function o(c,p,d){if(d in t)return r(c,p);if(d in e)return r(void 0,c)}const u={url:l,method:l,data:l,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:o,headers:(c,p,d)=>a(Vh(c),Vh(p),d,!0)};return W.forEach(Object.keys({...e,...t}),function(p){const d=u[p]||a,m=d(e[p],t[p],p);W.isUndefined(m)&&d!==o||(n[p]=m)}),n}const pg=e=>{const t=Dr({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:a,xsrfCookieName:l,headers:i,auth:o}=t;if(t.headers=i=Yt.from(i),t.url=lg(dg(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),o&&i.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),W.isFormData(n)){if(jt.hasStandardBrowserEnv||jt.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if(W.isFunction(n.getHeaders)){const u=n.getHeaders(),c=["content-type","content-length"];Object.entries(u).forEach(([p,d])=>{c.includes(p.toLowerCase())&&i.set(p,d)})}}if(jt.hasStandardBrowserEnv&&(r&&W.isFunction(r)&&(r=r(t)),r||r!==!1&&C2(t.url))){const u=a&&l&&E2.read(l);u&&i.set(a,u)}return t},D2=typeof XMLHttpRequest<"u",P2=D2&&function(e){return new Promise(function(n,r){const a=pg(e);let l=a.data;const i=Yt.from(a.headers).normalize();let{responseType:o,onUploadProgress:u,onDownloadProgress:c}=a,p,d,m,x,h;function S(){x&&x(),h&&h(),a.cancelToken&&a.cancelToken.unsubscribe(p),a.signal&&a.signal.removeEventListener("abort",p)}let C=new XMLHttpRequest;C.open(a.method.toUpperCase(),a.url,!0),C.timeout=a.timeout;function g(){if(!C)return;const b=Yt.from("getAllResponseHeaders"in C&&C.getAllResponseHeaders()),P={data:!o||o==="text"||o==="json"?C.responseText:C.response,status:C.status,statusText:C.statusText,headers:b,config:e,request:C};ug(function(v){n(v),S()},function(v){r(v),S()},P),C=null}"onloadend"in C?C.onloadend=g:C.onreadystatechange=function(){!C||C.readyState!==4||C.status===0&&!(C.responseURL&&C.responseURL.indexOf("file:")===0)||setTimeout(g)},C.onabort=function(){C&&(r(new xe("Request aborted",xe.ECONNABORTED,e,C)),C=null)},C.onerror=function(R){const P=R&&R.message?R.message:"Network Error",A=new xe(P,xe.ERR_NETWORK,e,C);A.event=R||null,r(A),C=null},C.ontimeout=function(){let R=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const P=a.transitional||ig;a.timeoutErrorMessage&&(R=a.timeoutErrorMessage),r(new xe(R,P.clarifyTimeoutError?xe.ETIMEDOUT:xe.ECONNABORTED,e,C)),C=null},l===void 0&&i.setContentType(null),"setRequestHeader"in C&&W.forEach(i.toJSON(),function(R,P){C.setRequestHeader(P,R)}),W.isUndefined(a.withCredentials)||(C.withCredentials=!!a.withCredentials),o&&o!=="json"&&(C.responseType=a.responseType),c&&([m,h]=Ko(c,!0),C.addEventListener("progress",m)),u&&C.upload&&([d,x]=Ko(u),C.upload.addEventListener("progress",d),C.upload.addEventListener("loadend",x)),(a.cancelToken||a.signal)&&(p=b=>{C&&(r(!b||b.type?new Oa(null,e,C):b),C.abort(),C=null)},a.cancelToken&&a.cancelToken.subscribe(p),a.signal&&(a.signal.aborted?p():a.signal.addEventListener("abort",p)));const f=S2(a.url);if(f&&jt.protocols.indexOf(f)===-1){r(new xe("Unsupported protocol "+f+":",xe.ERR_BAD_REQUEST,e));return}C.send(l||null)})},M2=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let r=new AbortController,a;const l=function(c){if(!a){a=!0,o();const p=c instanceof Error?c:this.reason;r.abort(p instanceof xe?p:new Oa(p instanceof Error?p.message:p))}};let i=t&&setTimeout(()=>{i=null,l(new xe(`timeout ${t} of ms exceeded`,xe.ETIMEDOUT))},t);const o=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach(c=>{c.unsubscribe?c.unsubscribe(l):c.removeEventListener("abort",l)}),e=null)};e.forEach(c=>c.addEventListener("abort",l));const{signal:u}=r;return u.unsubscribe=()=>W.asap(o),u}},L2=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let r=0,a;for(;r<n;)a=r+t,yield e.slice(r,a),r=a},F2=async function*(e,t){for await(const n of T2(e))yield*L2(n,t)},T2=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n)break;yield r}}finally{await t.cancel()}},Wh=(e,t,n,r)=>{const a=F2(e,t);let l=0,i,o=u=>{i||(i=!0,r&&r(u))};return new ReadableStream({async pull(u){try{const{done:c,value:p}=await a.next();if(c){o(),u.close();return}let d=p.byteLength;if(n){let m=l+=d;n(m)}u.enqueue(new Uint8Array(p))}catch(c){throw o(c),c}},cancel(u){return o(u),a.return()}},{highWaterMark:2})},Kh=64*1024,{isFunction:Qi}=W,O2=(({Request:e,Response:t})=>({Request:e,Response:t}))(W.global),{ReadableStream:Gh,TextEncoder:Jh}=W.global,Xh=(e,...t)=>{try{return!!e(...t)}catch{return!1}},$2=e=>{e=W.merge.call({skipUndefined:!0},O2,e);const{fetch:t,Request:n,Response:r}=e,a=t?Qi(t):typeof fetch=="function",l=Qi(n),i=Qi(r);if(!a)return!1;const o=a&&Qi(Gh),u=a&&(typeof Jh=="function"?(h=>S=>h.encode(S))(new Jh):async h=>new Uint8Array(await new n(h).arrayBuffer())),c=l&&o&&Xh(()=>{let h=!1;const S=new n(jt.origin,{body:new Gh,method:"POST",get duplex(){return h=!0,"half"}}).headers.has("Content-Type");return h&&!S}),p=i&&o&&Xh(()=>W.isReadableStream(new r("").body)),d={stream:p&&(h=>h.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(h=>{!d[h]&&(d[h]=(S,C)=>{let g=S&&S[h];if(g)return g.call(S);throw new xe(`Response type '${h}' is not supported`,xe.ERR_NOT_SUPPORT,C)})});const m=async h=>{if(h==null)return 0;if(W.isBlob(h))return h.size;if(W.isSpecCompliantForm(h))return(await new n(jt.origin,{method:"POST",body:h}).arrayBuffer()).byteLength;if(W.isArrayBufferView(h)||W.isArrayBuffer(h))return h.byteLength;if(W.isURLSearchParams(h)&&(h=h+""),W.isString(h))return(await u(h)).byteLength},x=async(h,S)=>{const C=W.toFiniteNumber(h.getContentLength());return C??m(S)};return async h=>{let{url:S,method:C,data:g,signal:f,cancelToken:b,timeout:R,onDownloadProgress:P,onUploadProgress:A,responseType:v,headers:E,withCredentials:T="same-origin",fetchOptions:M}=pg(h),U=t||fetch;v=v?(v+"").toLowerCase():"text";let X=M2([f,b&&b.toAbortSignal()],R),L=null;const w=X&&X.unsubscribe&&(()=>{X.unsubscribe()});let j;try{if(A&&c&&C!=="get"&&C!=="head"&&(j=await x(E,g))!==0){let O=new n(S,{method:"POST",body:g,duplex:"half"}),Q;if(W.isFormData(g)&&(Q=O.headers.get("content-type"))&&E.setContentType(Q),O.body){const[K,D]=Yh(j,Ko(Hh(A)));g=Wh(O.body,Kh,K,D)}}W.isString(T)||(T=T?"include":"omit");const k=l&&"credentials"in n.prototype,F={...M,signal:X,method:C.toUpperCase(),headers:E.normalize().toJSON(),body:g,duplex:"half",credentials:k?T:void 0};L=l&&new n(S,F);let N=await(l?U(L,M):U(S,F));const _=p&&(v==="stream"||v==="response");if(p&&(P||_&&w)){const O={};["status","statusText","headers"].forEach(B=>{O[B]=N[B]});const Q=W.toFiniteNumber(N.headers.get("content-length")),[K,D]=P&&Yh(Q,Ko(Hh(P),!0))||[];N=new r(Wh(N.body,Kh,K,()=>{D&&D(),w&&w()}),O)}v=v||"text";let $=await d[W.findKey(d,v)||"text"](N,h);return!_&&w&&w(),await new Promise((O,Q)=>{ug(O,Q,{data:$,headers:Yt.from(N.headers),status:N.status,statusText:N.statusText,config:h,request:L})})}catch(k){throw w&&w(),k&&k.name==="TypeError"&&/Load failed|fetch/i.test(k.message)?Object.assign(new xe("Network Error",xe.ERR_NETWORK,h,L),{cause:k.cause||k}):xe.from(k,k&&k.code,h,L)}}},I2=new Map,mg=e=>{let t=e&&e.env||{};const{fetch:n,Request:r,Response:a}=t,l=[r,a,n];let i=l.length,o=i,u,c,p=I2;for(;o--;)u=l[o],c=p.get(u),c===void 0&&p.set(u,c=o?new Map:$2(t)),p=c;return c};mg();const Ap={http:t2,xhr:P2,fetch:{get:mg}};W.forEach(Ap,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Zh=e=>`- ${e}`,A2=e=>W.isFunction(e)||e===null||e===!1;function q2(e,t){e=W.isArray(e)?e:[e];const{length:n}=e;let r,a;const l={};for(let i=0;i<n;i++){r=e[i];let o;if(a=r,!A2(r)&&(a=Ap[(o=String(r)).toLowerCase()],a===void 0))throw new xe(`Unknown adapter '${o}'`);if(a&&(W.isFunction(a)||(a=a.get(t))))break;l[o||"#"+i]=a}if(!a){const i=Object.entries(l).map(([u,c])=>`adapter ${u} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=n?i.length>1?`since :
`+i.map(Zh).join(`
`):" "+Zh(i[0]):"as no adapter specified";throw new xe("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return a}const hg={getAdapter:q2,adapters:Ap};function iu(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Oa(null,e)}function ef(e){return iu(e),e.headers=Yt.from(e.headers),e.data=lu.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),hg.getAdapter(e.adapter||di.adapter,e)(e).then(function(r){return iu(e),r.data=lu.call(e,e.transformResponse,r),r.headers=Yt.from(r.headers),r},function(r){return cg(r)||(iu(e),r&&r.response&&(r.response.data=lu.call(e,e.transformResponse,r.response),r.response.headers=Yt.from(r.response.headers))),Promise.reject(r)})}const fg="1.13.2",kc={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{kc[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const tf={};kc.transitional=function(t,n,r){function a(l,i){return"[Axios v"+fg+"] Transitional option '"+l+"'"+i+(r?". "+r:"")}return(l,i,o)=>{if(t===!1)throw new xe(a(i," has been removed"+(n?" in "+n:"")),xe.ERR_DEPRECATED);return n&&!tf[i]&&(tf[i]=!0,console.warn(a(i," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(l,i,o):!0}};kc.spelling=function(t){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function B2(e,t,n){if(typeof e!="object")throw new xe("options must be an object",xe.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let a=r.length;for(;a-- >0;){const l=r[a],i=t[l];if(i){const o=e[l],u=o===void 0||i(o,l,e);if(u!==!0)throw new xe("option "+l+" must be "+u,xe.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new xe("Unknown option "+l,xe.ERR_BAD_OPTION)}}const yo={assertOptions:B2,validators:kc},Ln=yo.validators;let Nr=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Uh,response:new Uh}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const l=a.stack?a.stack.replace(/^.+\n/,""):"";try{r.stack?l&&!String(r.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+l):r.stack=l}catch{}}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Dr(this.defaults,n);const{transitional:r,paramsSerializer:a,headers:l}=n;r!==void 0&&yo.assertOptions(r,{silentJSONParsing:Ln.transitional(Ln.boolean),forcedJSONParsing:Ln.transitional(Ln.boolean),clarifyTimeoutError:Ln.transitional(Ln.boolean)},!1),a!=null&&(W.isFunction(a)?n.paramsSerializer={serialize:a}:yo.assertOptions(a,{encode:Ln.function,serialize:Ln.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),yo.assertOptions(n,{baseUrl:Ln.spelling("baseURL"),withXsrfToken:Ln.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let i=l&&W.merge(l.common,l[n.method]);l&&W.forEach(["delete","get","head","post","put","patch","common"],h=>{delete l[h]}),n.headers=Yt.concat(i,l);const o=[];let u=!0;this.interceptors.request.forEach(function(S){typeof S.runWhen=="function"&&S.runWhen(n)===!1||(u=u&&S.synchronous,o.unshift(S.fulfilled,S.rejected))});const c=[];this.interceptors.response.forEach(function(S){c.push(S.fulfilled,S.rejected)});let p,d=0,m;if(!u){const h=[ef.bind(this),void 0];for(h.unshift(...o),h.push(...c),m=h.length,p=Promise.resolve(n);d<m;)p=p.then(h[d++],h[d++]);return p}m=o.length;let x=n;for(;d<m;){const h=o[d++],S=o[d++];try{x=h(x)}catch(C){S.call(this,C);break}}try{p=ef.call(this,x)}catch(h){return Promise.reject(h)}for(d=0,m=c.length;d<m;)p=p.then(c[d++],c[d++]);return p}getUri(t){t=Dr(this.defaults,t);const n=dg(t.baseURL,t.url,t.allowAbsoluteUrls);return lg(n,t.params,t.paramsSerializer)}};W.forEach(["delete","get","head","options"],function(t){Nr.prototype[t]=function(n,r){return this.request(Dr(r||{},{method:t,url:n,data:(r||{}).data}))}});W.forEach(["post","put","patch"],function(t){function n(r){return function(l,i,o){return this.request(Dr(o||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:l,data:i}))}}Nr.prototype[t]=n(),Nr.prototype[t+"Form"]=n(!0)});let z2=class xg{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(l){n=l});const r=this;this.promise.then(a=>{if(!r._listeners)return;let l=r._listeners.length;for(;l-- >0;)r._listeners[l](a);r._listeners=null}),this.promise.then=a=>{let l;const i=new Promise(o=>{r.subscribe(o),l=o}).then(a);return i.cancel=function(){r.unsubscribe(l)},i},t(function(l,i,o){r.reason||(r.reason=new Oa(l,i,o),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=r=>{t.abort(r)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new xg(function(a){t=a}),cancel:t}}};function U2(e){return function(n){return e.apply(null,n)}}function Q2(e){return W.isObject(e)&&e.isAxiosError===!0}const Cd={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Cd).forEach(([e,t])=>{Cd[t]=e});function yg(e){const t=new Nr(e),n=Wy(Nr.prototype.request,t);return W.extend(n,Nr.prototype,t,{allOwnKeys:!0}),W.extend(n,t,null,{allOwnKeys:!0}),n.create=function(a){return yg(Dr(e,a))},n}const Xe=yg(di);Xe.Axios=Nr;Xe.CanceledError=Oa;Xe.CancelToken=z2;Xe.isCancel=cg;Xe.VERSION=fg;Xe.toFormData=wc;Xe.AxiosError=xe;Xe.Cancel=Xe.CanceledError;Xe.all=function(t){return Promise.all(t)};Xe.spread=U2;Xe.isAxiosError=Q2;Xe.mergeConfig=Dr;Xe.AxiosHeaders=Yt;Xe.formToJSON=e=>og(W.isHTMLForm(e)?new FormData(e):e);Xe.getAdapter=hg.getAdapter;Xe.HttpStatusCode=Cd;Xe.default=Xe;const{Axios:ok,AxiosError:ck,CanceledError:uk,isCancel:dk,CancelToken:pk,VERSION:mk,all:hk,Cancel:fk,isAxiosError:xk,spread:yk,toFormData:gk,AxiosHeaders:vk,HttpStatusCode:bk,formToJSON:jk,getAdapter:Nk,mergeConfig:Sk}=Xe,J=Xe.create({baseURL:"/api"});J.interceptors.response.use(e=>e,e=>{var n,r;const t=((r=(n=e==null?void 0:e.response)==null?void 0:n.data)==null?void 0:r.message)||e.message;return t&&(e.message=t),e!=null&&e.response&&(e.status=e.response.status,e.data=e.response.data),Promise.reject(e)});const Y2=()=>{const e=Ze(),[t,n]=y.useState(null),{data:r=[],isFetching:a}=ie({queryKey:["db-backups"],queryFn:async()=>(await J.get("/db/backups")).data}),l=Me({mutationFn:async()=>(await J.post("/db/backup")).data,onSuccess:()=>{e.invalidateQueries({queryKey:["db-backups"]})}}),i=Me({mutationFn:async c=>{const p=new FormData;return p.append("backup",c),(await J.post("/db/restore",p,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:()=>{e.invalidateQueries({queryKey:["db-backups"]})}}),o=()=>{t&&i.mutate(t)},u=l.isPending||i.isPending;return s.jsx("div",{className:"border-t border-slate-200 bg-white/80 backdrop-blur shadow-[0_18px_45px_rgba(15,23,42,0.12)]",children:s.jsxs("div",{className:"max-w-6xl mx-auto px-8 py-6 flex flex-col gap-6 text-slate-700",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[s.jsx("button",{className:"primary text-sm",onClick:()=>l.mutate(),disabled:u,children:l.isPending?"Creating backup...":"Create Backup"}),s.jsxs("label",{className:"secondary text-sm cursor-pointer",children:[t?t.name:"Select Backup",s.jsx("input",{type:"file",hidden:!0,accept:".db",onChange:c=>{var d;const p=(d=c.target.files)==null?void 0:d[0];p&&n(p)}})]}),s.jsx("button",{className:"secondary text-sm",onClick:o,disabled:!t||u,children:i.isPending?"Restoring...":"Restore"}),u?s.jsx("span",{className:"text-xs text-slate-500",children:"Please wait..."}):null]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h2",{className:"text-sm font-semibold uppercase tracking-wide text-slate-500",children:"Available Backups"}),a?s.jsx("span",{className:"text-xs text-slate-500",children:"Refreshing..."}):null]}),s.jsx("div",{className:"bg-white border border-slate-200 rounded-2xl p-4 max-h-56 overflow-y-auto scrollbar-thin text-sm text-slate-700 shadow-inner",children:r.length===0?s.jsx("p",{className:"text-slate-500",children:"No backups yet"}):s.jsx("ul",{className:"space-y-2",children:r.map(c=>s.jsxs("li",{className:"flex items-center justify-between text-slate-700",children:[s.jsx("span",{children:c}),s.jsx("a",{className:"text-indigo-500 hover:text-indigo-400 text-xs",href:`/api/db/backup/${c}`,children:"Download"})]},c))})})]})]})})},H2={"/":{title:"Operations Dashboard",label:"Loaded Page",gradient:"from-[#d7dbe3] via-[#b4bbc8] to-[#949cb0]",tone:"light"},"/master/company":{title:"Company Operations",label:"Master Data",gradient:"from-sky-500 via-cyan-400 to-emerald-300"},"/master/item":{title:"Inventory Operations",label:"Master Data",gradient:"from-amber-500 via-orange-500 to-rose-500"},"/master/supplier":{title:"Supplier Operations",label:"Master Data",gradient:"from-lime-500 via-green-500 to-emerald-400"},"/master/area":{title:"Area Operations",label:"Master Data",gradient:"from-teal-500 via-cyan-500 to-blue-400"},"/master/salesman":{title:"Salesforce Operations",label:"Master Data",gradient:"from-fuchsia-500 via-purple-500 to-indigo-500"},"/master/customer":{title:"Customer Operations",label:"Master Data",gradient:"from-blue-600 via-indigo-500 to-sky-500"},"/master/expense":{title:"Expense Operations",label:"Master Data",gradient:"from-rose-500 via-red-500 to-orange-400"},"/master/bank":{title:"Banking Operations",label:"Master Data",gradient:"from-emerald-700 via-green-600 to-lime-500"},"/transactions/purchase":{title:"Supplier Operation",label:"Loaded Page",gradient:"from-purple-700 via-indigo-600 to-sky-500"},"/transactions/sales":{title:"Sales Operation",label:"Transactions",gradient:"from-emerald-500 via-teal-500 to-sky-500"},"/transactions/sale-return":{title:"Sales Return Operation",label:"Transactions",gradient:"from-rose-600 via-pink-500 to-amber-400"},"/transactions/purchase-return":{title:"Purchase Return Operation",label:"Transactions",gradient:"from-emerald-500 via-teal-500 to-lime-400"},"/transactions/expense-entry":{title:"Expense Entry Operation",label:"Transactions",gradient:"from-pink-500 via-fuchsia-500 to-purple-500"},"/transactions/customer-receipt":{title:"Customer Receipt Operation",label:"Transactions",gradient:"from-sky-500 via-cyan-500 to-teal-400"},"/transactions/opening-balance":{title:"Opening Balance Operation",label:"Transactions",gradient:"from-slate-700 via-slate-600 to-slate-500"},"/transactions/salesman-receipt":{title:"Salesman Receipt Operation",label:"Transactions",gradient:"from-violet-500 via-purple-500 to-blue-500"},"/transactions/bank":{title:"Bank Transaction Operation",label:"Transactions",gradient:"from-cyan-600 via-blue-600 to-indigo-600"},"/history/transactions":{title:"Transaction History",label:"History",gradient:"from-neutral-700 via-slate-700 to-indigo-700"},"/reports/receivables/customer-ledger":{title:"Receivable Report",label:"Reports",gradient:"from-indigo-500 via-blue-500 to-sky-500"},"/reports/stock":{title:"Stock Report",label:"Reports",gradient:"from-green-500 via-emerald-500 to-lime-400"},"/reports/bank-deposits":{title:"Bank Transaction Report",label:"Reports",gradient:"from-amber-600 via-yellow-500 to-lime-400"},"/editing/sales":{title:"Edit Sales Invoice",label:"Editing",gradient:"from-purple-500 via-violet-500 to-fuchsia-500"},"/editing/purchase":{title:"Edit Purchase Invoice",label:"Editing",gradient:"from-rose-500 via-pink-500 to-purple-500"},"/editing/expense-entry":{title:"Edit Expense Entry",label:"Editing",gradient:"from-orange-500 via-amber-500 to-rose-400"},"/editing/bank-transaction":{title:"Edit Bank Transaction",label:"Editing",gradient:"from-amber-500 via-yellow-500 to-emerald-400"},"/editing/customer-receipt":{title:"Edit Customer Receipt",label:"Editing",gradient:"from-cyan-500 via-sky-500 to-blue-400"},"/editing/supplier-payment":{title:"Edit Supplier Payment",label:"Editing",gradient:"from-rose-500 via-pink-500 to-orange-400"},"/editing/item":{title:"Edit Item Registration",label:"Editing",gradient:"from-emerald-500 via-teal-500 to-cyan-400"}},V2={title:"Operations Console",label:"Loaded Page",gradient:"from-slate-900 via-slate-800 to-slate-900"},W2=()=>{const e=Cn(),[t,n]=y.useState(!1),r=on().format("DD-MM-YYYY"),a=y.useMemo(()=>H2[e.pathname]??V2,[e.pathname]),l=a.tone??"dark",i=l==="light"?"text-slate-800":"text-white",o=l==="light"?"text-slate-500":"text-white/70",u=l==="light"?"text-slate-500":"text-white/75",c=l==="light"?"border-slate-200/70":"border-white/15",p=l==="light"?"inline-flex items-center rounded-xl border border-slate-200 bg-white/90 px-4 py-2 text-sm font-semibold text-slate-700 shadow-sm backdrop-blur-sm transition hover:bg-white":"inline-flex items-center rounded-xl border border-white/25 bg-white/15 px-4 py-2 text-sm font-semibold text-white shadow-lg backdrop-blur-sm transition hover:bg-white/25";return s.jsxs("header",{className:"sticky top-0 z-10 shadow-xl print:hidden",children:[s.jsx("div",{className:`bg-gradient-to-r ${a.gradient} border-b ${c}`,children:s.jsxs("div",{className:`max-w-6xl mx-auto px-8 py-5 flex items-center justify-between ${i}`,children:[s.jsxs("div",{children:[s.jsx("p",{className:`text-xs font-semibold uppercase tracking-[0.35em] ${o}`,children:a.label}),s.jsx("h1",{className:`mt-1 text-lg font-semibold leading-tight ${i}`,children:a.title}),s.jsx("p",{className:`text-sm ${u}`,children:r})]}),s.jsx("div",{className:"flex items-center gap-3",children:s.jsx("button",{className:p,onClick:()=>n(d=>!d),children:t?"Close Utilities":"Backup & Restore"})})]})}),t?s.jsx(Y2,{}):null]})},K2=()=>s.jsxs("div",{className:"min-h-screen flex text-slate-900 print:bg-white",children:[s.jsx(hw,{}),s.jsxs("div",{className:"flex-1 flex flex-col",children:[s.jsx(W2,{}),s.jsx("main",{className:"flex-1 overflow-y-auto p-10 print:p-0 print:m-0 print:bg-white",children:s.jsx("div",{className:"max-w-6xl mx-auto space-y-10 text-slate-800 print:max-w-none print:w-full",children:s.jsx(PN,{})})})]})]}),je=({title:e,description:t,children:n,actions:r,className:a=""})=>s.jsxs("section",{className:`relative overflow-hidden rounded-[28px] border border-[#d8deeb] bg-white/95 shadow-[0_32px_70px_-38px_rgba(15,23,42,0.58)] backdrop-blur-[2px] p-8 space-y-6 print:bg-white print:shadow-none print:border-0 print:p-0 print:space-y-3 ${a}`,children:[s.jsx("div",{className:"pointer-events-none absolute inset-0 rounded-[28px] bg-[radial-gradient(circle_at_top_left,_rgba(255,255,255,0.7),_transparent_65%)] print:hidden"}),s.jsx("div",{className:"pointer-events-none absolute inset-0 rounded-[28px] border border-white/60 opacity-20 print:hidden"}),s.jsxs("div",{className:"relative",children:[s.jsxs("header",{className:"flex items-start justify-between gap-4 print:hidden",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold text-slate-800",children:e}),t?s.jsx("p",{className:"mt-1 text-sm text-slate-500",children:t}):null]}),r?s.jsx("div",{className:"flex items-center gap-2 print:hidden",children:r}):null]}),s.jsx("div",{className:"mt-4 grid gap-4 text-sm text-slate-700 print:gap-3",children:n})]})]}),ol=e=>Number(e??0).toLocaleString(),Fn=e=>`Rs ${Number(e??0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,G2=({title:e,value:t,hint:n,accent:r,icon:a,iconTint:l})=>s.jsxs("div",{className:`group relative overflow-hidden rounded-[26px] border border-slate-200/80 bg-gradient-to-br p-6 text-slate-900 shadow-[0_25px_60px_-35px_rgba(15,23,42,0.65)] backdrop-blur-sm transition ${r}`,children:[s.jsx("div",{className:"pointer-events-none absolute inset-y-0 -left-10 w-2/3 rounded-[26px] bg-[radial-gradient(circle_at_left,_rgba(255,255,255,0.82),_transparent_65%)]"}),s.jsxs("div",{className:"relative flex items-start justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-[11px] uppercase tracking-[0.28em] text-slate-500",children:e}),s.jsx("p",{className:"mt-3 text-[26px] font-semibold leading-tight text-slate-900",children:t}),n?s.jsx("p",{className:"mt-3 text-xs text-slate-500",children:n}):null]}),a?s.jsx("span",{className:`rounded-2xl border bg-white/90 p-3 text-slate-600 shadow-sm backdrop-blur ${l??"border-slate-200/70"}`,children:s.jsx(a,{className:"text-lg"})}):null]})]}),nf=["bg-gradient-to-br from-white via-[#f3f6ff] to-[#e4ecff]","bg-gradient-to-br from-white via-[#f0fbf5] to-[#dff3e7]","bg-gradient-to-br from-white via-[#f5f6fb] to-[#e4e7f3]","bg-gradient-to-br from-white via-[#f8f3ff] to-[#ebe2ff]","bg-gradient-to-br from-white via-[#f1f8ff] to-[#e0efff]"],Yn=({label:e,value:t,sublabel:n,index:r})=>s.jsxs("div",{className:`group relative flex items-center justify-between rounded-[18px] border border-white/60 px-5 py-4 text-slate-800 shadow-[0_32px_70px_-45px_rgba(15,23,42,0.55)] transition ${nf[r%nf.length]}`,children:[s.jsxs("div",{className:"relative z-[1]",children:[s.jsx("p",{className:"text-sm font-semibold text-slate-700",children:e}),n?s.jsx("p",{className:"mt-1 text-xs text-slate-500",children:n}):null]}),s.jsx("p",{className:"relative z-[1] text-base font-semibold text-slate-900",children:t}),s.jsx("div",{className:"pointer-events-none absolute inset-0 rounded-[18px] bg-white/35 opacity-0 transition group-hover:opacity-60"})]}),J2=()=>{const{data:e,isLoading:t,error:n,refetch:r}=ie({queryKey:["dashboard-summary"],queryFn:async()=>(await J.get("/dashboard/summary")).data}),a=(e==null?void 0:e.counts)??{},l=(e==null?void 0:e.sales)??{},i=(e==null?void 0:e.purchases)??{},o=(e==null?void 0:e.receipts)??{},u=(e==null?void 0:e.expenses)??{},c=(e==null?void 0:e.recentSales)??[],p=[{title:"Customers",value:t?"":ol(a.customers),hint:"Active customer profiles",accent:"from-white via-[#eff4ff] to-[#d9e4ff]",icon:Hy,iconTint:"border-indigo-200/80 bg-indigo-50 text-indigo-500"},{title:"Suppliers",value:t?"":ol(a.suppliers),hint:"Trusted vendor partners",accent:"from-white via-[#effaf5] to-[#d7efe4]",icon:Yy,iconTint:"border-emerald-200/80 bg-emerald-50 text-emerald-500"},{title:"Inventory Items",value:t?"":ol(a.items),hint:"SKUs ready to ship",accent:"from-white via-[#fff7ed] to-[#fde6c8]",icon:bc,iconTint:"border-amber-200/80 bg-amber-50 text-amber-500"},{title:"Outstanding Receivables",value:t?"":Fn(l.outstanding),hint:"Balance after receipts",accent:"from-white via-[#f8f1ff] to-[#e3d7ff]",icon:_a,iconTint:"border-purple-200/80 bg-purple-50 text-purple-500"}],d=["from-white via-[#f5f7ff] to-[#e7ecff]"];return s.jsxs("div",{className:"relative -m-10 min-h-screen",children:[s.jsx("div",{className:"pointer-events-none absolute inset-0 -z-10 bg-gradient-to-br from-[#f9fbff] via-[#eef2fb] to-[#e2e9ff]"}),s.jsx("div",{className:"relative px-10 py-12",children:s.jsxs("div",{className:"mx-auto flex max-w-7xl flex-col gap-8",children:[s.jsxs("section",{className:"relative overflow-hidden rounded-[32px] border border-[#d7deef] bg-gradient-to-br from-[#fafbff] via-[#eef3ff] to-[#cfe1ff] px-10 py-7 text-slate-800 shadow-[0_35px_70px_-40px_rgba(15,23,42,0.6)] md:py-8",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 w-1/2 bg-[radial-gradient(circle_at_left,_rgba(255,255,255,0.92),_transparent_70%)]"}),s.jsx("div",{className:"absolute inset-y-0 right-0 w-1/2 bg-[radial-gradient(circle_at_bottom_right,_rgba(154,186,255,0.38),_transparent_65%)]"}),s.jsxs("div",{className:"relative flex flex-col gap-6 md:flex-row md:items-center",children:[s.jsxs("div",{className:"max-w-xl",children:[s.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.32em] text-slate-500",children:"Operations Pulse"}),s.jsx("h1",{className:"mt-3 text-3xl font-semibold text-slate-800",children:"DIGITAL ZONE NEXUS"}),s.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Monitor master data coverage, sales momentum, supplier spend, and liquidity from a single, modern control surface."})]}),s.jsxs("div",{className:"flex items-center gap-3 rounded-full border border-white/70 bg-gradient-to-r from-white/95 via-white/80 to-[#d6e8ff]/70 px-6 py-3 text-sm text-slate-700 shadow-[0_18px_45px_-26px_rgba(15,23,42,0.4)] md:ml-auto",children:[s.jsx(Ih,{className:"text-slate-400"}),s.jsx("span",{className:"font-medium whitespace-nowrap text-slate-600",children:"Data refreshed on load  click cards for deeper drill-downs soon."})]})]})]}),n?s.jsxs("div",{className:"rounded-2xl border border-rose-200 bg-rose-50 px-5 py-4 text-sm text-rose-700 shadow-inner",children:[s.jsx("p",{className:"font-semibold",children:"Unable to load dashboard metrics."}),s.jsxs("button",{className:"mt-2 inline-flex items-center gap-2 text-rose-600 underline",onClick:()=>r(),children:["Retry",s.jsx(Ih,{className:"text-xs"})]})]}):null,s.jsxs("div",{className:"space-y-10",children:[s.jsx("div",{className:"grid gap-5 md:grid-cols-2 xl:grid-cols-4",children:p.map(m=>s.jsx(G2,{...m},m.title))}),s.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsx(je,{title:"Sales Overview",description:t?"Gathering the latest sales activity":"Snapshot of invoice health",className:"bg-gradient-to-br from-white/95 via-[#f5f7ff]/95 to-[#eef2ff]/95 text-slate-800 shadow-[0_40px_85px_-52px_rgba(15,23,42,0.6)] border-white/60",children:s.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[s.jsx(Yn,{index:0,label:"Invoices Issued",value:t?"":ol(l.invoiceCount)}),s.jsx(Yn,{index:1,label:"Total Invoiced",value:t?"":Fn(l.totalAmount)}),s.jsx(Yn,{index:2,label:"Collected at Sale",value:t?"":Fn(l.totalPaid)}),s.jsx(Yn,{index:3,label:"Receipts Posted",value:t?"":Fn(o.totalAmount)}),s.jsx(Yn,{index:4,label:"Outstanding",value:t?"":Fn(l.outstanding),sublabel:"Pending after receipts"})]})}),s.jsx(je,{title:"Purchases Overview",description:t?"Loading purchase insights":"Supplier spend and payments",className:"bg-gradient-to-br from-white/95 via-[#f4f9ff]/95 to-[#eaf2ff]/95 text-slate-800 shadow-[0_40px_85px_-52px_rgba(15,23,42,0.6)] border-white/60",children:s.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[s.jsx(Yn,{index:0,label:"Purchase Invoices",value:t?"":ol(i.invoiceCount)}),s.jsx(Yn,{index:1,label:"Total Procurement",value:t?"":Fn(i.totalAmount)}),s.jsx(Yn,{index:2,label:"Paid to Suppliers",value:t?"":Fn(i.totalPaid)}),s.jsx(Yn,{index:3,label:"Expenses Logged",value:t?"":Fn(u.totalAmount)})]})})]}),s.jsxs("section",{className:"relative overflow-hidden rounded-[30px] border border-white/60 bg-gradient-to-br from-white/95 via-[#f5f6ff]/95 to-[#e9edff]/95 p-8 text-slate-900 shadow-[0_45px_95px_-55px_rgba(15,23,42,0.68)]",children:[s.jsx("div",{className:"pointer-events-none absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(229,236,255,0.55),_transparent_75%)]"}),s.jsx("div",{className:"relative flex items-start justify-between gap-4",children:s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Recent Sales"}),s.jsx("p",{className:"text-sm text-slate-600",children:t?"Preparing latest invoices":"Five most recent invoices"})]})}),s.jsx("div",{className:"relative mt-6 space-y-3 text-sm",children:t?s.jsx("p",{className:"text-slate-600",children:"Loading"}):c.length===0?s.jsx("p",{className:"text-slate-600",children:"No sales recorded yet."}):s.jsx("ul",{className:"space-y-3",children:c.map((m,x)=>s.jsxs("li",{className:`group relative overflow-hidden rounded-2xl border border-[rgba(207,215,240,0.6)] bg-gradient-to-br ${d[x%d.length]} px-5 py-4 text-slate-800 shadow-[0_32px_70px_-50px_rgba(15,23,42,0.58)] transition hover:-translate-y-0.5 hover:shadow-[0_42px_95px_-55px_rgba(15,23,42,0.65)]`,children:[s.jsx("div",{className:"pointer-events-none absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(255,255,255,0.72),_transparent_74%)] opacity-90 transition group-hover:opacity-100"}),s.jsxs("div",{className:"relative flex items-center justify-between text-[11px] uppercase tracking-[0.22em] text-slate-400",children:[s.jsx("span",{className:"inline-flex items-center gap-1 rounded-full bg-white/80 px-3 py-0.5 font-semibold text-slate-600 shadow-[0_4px_10px_-6px_rgba(15,23,42,0.6)]",children:m.invoiceDate}),s.jsx("span",{className:"inline-flex items-center gap-1 rounded-full bg-white/80 px-3 py-0.5 font-semibold text-slate-600 shadow-[0_4px_10px_-6px_rgba(15,23,42,0.6)]",children:m.invoiceNo})]}),s.jsx("p",{className:"relative mt-3 text-base font-semibold text-slate-900",children:m.customer}),s.jsxs("div",{className:"relative mt-3 flex items-center justify-between text-xs text-slate-600",children:[s.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-emerald-100/70 px-3 py-1 font-semibold text-emerald-700 shadow-[0_4px_12px_-6px_rgba(16,185,129,0.45)]",children:["Total ",Fn(m.totalAmount)]}),s.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-sky-100/70 px-3 py-1 font-semibold text-sky-700 shadow-[0_4px_12px_-6px_rgba(14,165,233,0.45)]",children:["Balance ",Fn(m.tradeOffTotal)]})]})]},m.invoiceNo))})})]})]})]})]})})]})},X2=()=>{const e=xy(),t=(e==null?void 0:e.status)===404?"Page not found":"Unexpected application error";return s.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-neutral-950 text-neutral-100 gap-6 p-6",children:[s.jsx("h1",{className:"text-3xl font-semibold",children:t}),s.jsx("p",{className:"text-neutral-400",children:(e==null?void 0:e.statusText)??(e==null?void 0:e.message)??"We ran into a problem while rendering this page."}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(lt,{to:"/",className:"primary inline-flex items-center gap-2",children:"Go to Dashboard"}),s.jsx("button",{type:"button",className:"secondary",onClick:()=>window.location.reload(),children:"Retry"})]})]})},Z2=()=>s.jsxs("div",{className:"bg-neutral-900/60 border border-neutral-800 rounded-2xl p-10 text-center space-y-4",children:[s.jsx("h2",{className:"text-2xl font-semibold text-neutral-100",children:"404  Page Not Found"}),s.jsx("p",{className:"text-neutral-400",children:"We could not find the page you were looking for. Choose another option from the sidebar or head back to the dashboard."}),s.jsx(lt,{to:"/",className:"primary inline-flex items-center gap-2",children:"Go to Dashboard"})]}),H=({label:e,children:t,required:n,description:r,htmlFor:a,className:l=""})=>s.jsxs("label",{className:`flex flex-col gap-2 text-sm ${l}`,htmlFor:a,children:[s.jsxs("span",{className:"text-slate-600 font-semibold",children:[e,n?s.jsx("span",{className:"text-rose-400",children:" *"}):null]}),r?s.jsx("span",{className:"text-xs text-slate-400",children:r}):null,t]}),sf=()=>({code:"",name:"",address:"",phone1:"",phone2:""}),e1=()=>{const e=Ze(),[t,n]=y.useState(sf),r=Me({mutationFn:async l=>(await J.post("/companies",l)).data,onSuccess:()=>{n(sf()),e.invalidateQueries({queryKey:["companies"]})}}),a=l=>{l.preventDefault(),r.mutate({code:t.code.trim(),name:t.name.trim(),address:t.address.trim(),phone1:t.phone1.trim(),phone2:t.phone2.trim()})};return s.jsx("div",{className:"space-y-6",children:s.jsx(je,{title:"Company Registration",description:"Maintain manufacturer details used across the system.",children:s.jsxs("form",{className:"grid gap-4",onSubmit:a,children:[s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsx(H,{label:"Company Code",required:!0,children:s.jsx("input",{value:t.code,onChange:l=>n(i=>({...i,code:l.target.value})),required:!0})}),s.jsx(H,{label:"Company Name",required:!0,children:s.jsx("input",{value:t.name,onChange:l=>n(i=>({...i,name:l.target.value})),required:!0})})]}),s.jsx(H,{label:"Address",required:!0,children:s.jsx("input",{value:t.address,onChange:l=>n(i=>({...i,address:l.target.value})),required:!0})}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsx(H,{label:"Phone 1",children:s.jsx("input",{value:t.phone1,onChange:l=>n(i=>({...i,phone1:l.target.value}))})}),s.jsx(H,{label:"Phone 2",children:s.jsx("input",{value:t.phone2,onChange:l=>n(i=>({...i,phone2:l.target.value}))})})]}),s.jsxs("div",{className:"flex items-center gap-4 justify-end",children:[r.isError?s.jsx("span",{className:"text-xs text-rose-400",children:r.error.message}):null,r.isSuccess?s.jsx("span",{className:"text-xs text-emerald-400",children:"Company saved."}):null,s.jsx("button",{type:"submit",className:"primary",children:r.isPending?"Saving...":"Save Company"})]})]})})})},ye=({label:e,value:t,onSelect:n,placeholder:r,results:a=[],renderItem:l,onSearch:i,className:o="",dataTestId:u,emptyMessage:c="No matches",disabled:p=!1})=>{const[d,m]=y.useState(!1),[x,h]=y.useState("");y.useEffect(()=>{p&&(m(!1),h(""))},[p]);const S=()=>{p||(m(!0),i&&i(x))},C=g=>{if(p)return;const f=g.target.value;h(f),i&&i(f)};return s.jsxs("div",{className:`relative text-sm ${o}`,children:[e?s.jsx("label",{className:"block text-slate-600 mb-1 font-semibold",children:e}):null,s.jsx("input",{className:`w-full rounded-xl border border-slate-200 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-emerald-200 transition ${p?"bg-slate-100 text-slate-400 cursor-not-allowed":"bg-white"}`,value:d?x:(t==null?void 0:t.label)||"",placeholder:r,onChange:C,onFocus:S,onBlur:()=>setTimeout(()=>m(!1),150),"data-test-id":u,disabled:p}),d&&!p?s.jsx("div",{className:"absolute z-10 mt-2 w-full bg-white border border-slate-200 rounded-xl shadow-[0_20px_45px_rgba(15,23,42,0.12)] max-h-64 overflow-y-auto scrollbar-thin",children:a.length===0?s.jsx("p",{className:"p-3 text-slate-500 text-xs",children:c}):s.jsx("ul",{className:"divide-y divide-slate-100",children:a.map(g=>s.jsx("li",{className:"px-3 py-2 hover:bg-slate-100 cursor-pointer text-slate-700",onMouseDown:()=>{p||(n(g),h(""),m(!1))},children:l?l(g):s.jsx("span",{children:g.label})},g.value))})}):null]})},rf=()=>({code:"",name:"",baseUnit:"Pieces",packSize:"",minQuantity:"",purchaseRate:"",tradeRate:"",retailPrice:"",salesTax:""}),Ar=e=>{if(e===""||e===null||e===void 0)return null;const t=Number(e);return Number.isNaN(t)?null:t},t1=()=>{var d;const e=Ze(),[t,n]=y.useState(rf),[r,a]=y.useState(""),[l,i]=y.useState(null),o=ie({queryKey:["companies",{search:r}],queryFn:async()=>(await J.get("/companies",{params:{search:r}})).data}),u=Me({mutationFn:async m=>(await J.post("/items",m)).data,onSuccess:()=>{n(rf()),i(null),e.invalidateQueries({queryKey:["items"]})}}),c=t.baseUnit==="Pack"||t.baseUnit==="Carton",p=m=>{m.preventDefault(),u.mutate({code:t.code.trim(),name:t.name.trim(),company_id:(l==null?void 0:l.id)??null,base_unit:t.baseUnit,pack_size:c?Ar(t.packSize):null,min_quantity:Ar(t.minQuantity),purchase_rate:Ar(t.purchaseRate),trade_rate:Ar(t.tradeRate),retail_price:Ar(t.retailPrice),sales_tax:Ar(t.salesTax)})};return s.jsx("div",{className:"space-y-6",children:s.jsx(je,{title:"Item Registration",description:"Manage inventory items with company linkage and pricing.",children:s.jsxs("form",{className:"grid gap-4",onSubmit:p,children:[s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsx(H,{label:"Item Code",required:!0,children:s.jsx("input",{value:t.code,onChange:m=>n(x=>({...x,code:m.target.value})),required:!0})}),s.jsx(H,{label:"Item Name",required:!0,children:s.jsx("input",{value:t.name,onChange:m=>n(x=>({...x,name:m.target.value})),required:!0})})]}),s.jsx(ye,{label:"Company",placeholder:"Search company",onSearch:a,onSelect:m=>{i(m)},value:l,results:((d=o.data)==null?void 0:d.map(m=>({value:m.id,id:m.id,label:`${m.code}  ${m.name}`})))??[]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsx(H,{label:"Unit of Measure",required:!0,children:s.jsxs("select",{value:t.baseUnit,onChange:m=>{const x=m.target.value;n(h=>({...h,baseUnit:x,packSize:x==="Pack"||x==="Carton"?h.packSize:""}))},required:!0,children:[s.jsx("option",{value:"Pieces",children:"Piece"}),s.jsx("option",{value:"Pack",children:"Pack"}),s.jsx("option",{value:"Carton",children:"Carton"})]})}),s.jsx(H,{label:"Pack/Carton Size",children:s.jsx("input",{type:"number",step:"any",value:t.packSize,onChange:m=>n(x=>({...x,packSize:m.target.value})),disabled:!c,required:c})})]}),s.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[s.jsx(H,{label:"Minimum Quantity",required:!0,children:s.jsx("input",{type:"number",step:"any",value:t.minQuantity,onChange:m=>n(x=>({...x,minQuantity:m.target.value})),required:!0})}),s.jsx(H,{label:"Purchase Rate",required:!0,children:s.jsx("input",{type:"number",step:"any",value:t.purchaseRate,onChange:m=>n(x=>({...x,purchaseRate:m.target.value})),required:!0})}),s.jsx(H,{label:"Trade Rate",required:!0,children:s.jsx("input",{type:"number",step:"any",value:t.tradeRate,onChange:m=>n(x=>({...x,tradeRate:m.target.value})),required:!0})})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsx(H,{label:"Retail Price",children:s.jsx("input",{type:"number",step:"any",value:t.retailPrice,onChange:m=>n(x=>({...x,retailPrice:m.target.value}))})}),s.jsx(H,{label:"Sales Tax (%)",children:s.jsx("input",{type:"number",step:"any",value:t.salesTax,onChange:m=>n(x=>({...x,salesTax:m.target.value}))})})]}),s.jsxs("div",{className:"flex items-center gap-4 justify-end",children:[u.isError?s.jsx("span",{className:"text-xs text-rose-400",children:u.error.message}):null,u.isSuccess?s.jsx("span",{className:"text-xs text-emerald-400",children:"Item saved."}):null,s.jsx("button",{type:"submit",className:"primary",children:u.isPending?"Saving...":"Save Item"})]})]})})})},af=()=>({code:"",name:"",contactPerson:"",address:"",phone:""}),n1=()=>{const[e,t]=y.useState(af),n=Me({mutationFn:async a=>(await J.post("/suppliers",a)).data,onSuccess:()=>{t(af())}}),r=a=>{a.preventDefault(),n.mutate({code:e.code.trim(),name:e.name.trim(),contact_person:e.contactPerson.trim(),address:e.address.trim(),phone:e.phone.trim()})};return s.jsx("div",{className:"space-y-6",children:s.jsx(je,{title:"Supplier Registration",description:"Capture supplier contacts for purchases.",children:s.jsxs("form",{className:"grid gap-4",onSubmit:r,children:[s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsx(H,{label:"Supplier Code",required:!0,children:s.jsx("input",{value:e.code,onChange:a=>t(l=>({...l,code:a.target.value})),required:!0})}),s.jsx(H,{label:"Supplier Name",required:!0,children:s.jsx("input",{value:e.name,onChange:a=>t(l=>({...l,name:a.target.value})),required:!0})})]}),s.jsx(H,{label:"Contact Person",children:s.jsx("input",{value:e.contactPerson,onChange:a=>t(l=>({...l,contactPerson:a.target.value}))})}),s.jsx(H,{label:"Address",required:!0,children:s.jsx("input",{value:e.address,onChange:a=>t(l=>({...l,address:a.target.value})),required:!0})}),s.jsx(H,{label:"Phone",children:s.jsx("input",{value:e.phone,onChange:a=>t(l=>({...l,phone:a.target.value}))})}),s.jsxs("div",{className:"flex items-center gap-4 justify-end",children:[n.isError?s.jsx("span",{className:"text-xs text-rose-400",children:n.error.message}):null,n.isSuccess?s.jsx("span",{className:"text-xs text-emerald-400",children:"Supplier saved."}):null,s.jsx("button",{type:"submit",className:"primary",children:n.isPending?"Saving...":"Save Supplier"})]})]})})})},lf=()=>({code:"",name:""}),s1=()=>{const e=Ze(),[t,n]=y.useState(lf),r=Me({mutationFn:async l=>(await J.post("/areas",l)).data,onSuccess:()=>{n(lf()),e.invalidateQueries({queryKey:["areas"]})}}),a=l=>{l.preventDefault(),r.mutate({code:t.code.trim(),name:t.name.trim()})};return s.jsx("div",{className:"space-y-6",children:s.jsx(je,{title:"Area Registration",description:"Define sales areas for customer grouping.",children:s.jsxs("form",{className:"grid gap-4",onSubmit:a,children:[s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsx(H,{label:"Area Code",required:!0,children:s.jsx("input",{value:t.code,onChange:l=>n(i=>({...i,code:l.target.value})),required:!0})}),s.jsx(H,{label:"Area Name",required:!0,children:s.jsx("input",{value:t.name,onChange:l=>n(i=>({...i,name:l.target.value})),required:!0})})]}),s.jsxs("div",{className:"flex items-center gap-4 justify-end",children:[r.isError?s.jsx("span",{className:"text-xs text-rose-400",children:r.error.message}):null,r.isSuccess?s.jsx("span",{className:"text-xs text-emerald-400",children:"Area saved."}):null,s.jsx("button",{type:"submit",className:"primary",children:r.isPending?"Saving...":"Save Area"})]})]})})})},of=()=>({code:"",name:"",address:"",phone1:"",phone2:""}),r1=()=>{const[e,t]=y.useState(of),n=Me({mutationFn:async a=>(await J.post("/salesmen",a)).data,onSuccess:()=>{t(of())}}),r=a=>{a.preventDefault(),n.mutate({code:e.code.trim(),name:e.name.trim(),address:e.address.trim(),phone1:e.phone1.trim(),phone2:e.phone2.trim()})};return s.jsx("div",{className:"space-y-6",children:s.jsx(je,{title:"Salesman Registration",description:"Record sales representatives with contact information.",children:s.jsxs("form",{className:"grid gap-4",onSubmit:r,children:[s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsx(H,{label:"Salesman Code",required:!0,children:s.jsx("input",{value:e.code,onChange:a=>t(l=>({...l,code:a.target.value})),required:!0})}),s.jsx(H,{label:"Salesman Name",required:!0,children:s.jsx("input",{value:e.name,onChange:a=>t(l=>({...l,name:a.target.value})),required:!0})})]}),s.jsx(H,{label:"Address",required:!0,children:s.jsx("input",{value:e.address,onChange:a=>t(l=>({...l,address:a.target.value})),required:!0})}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsx(H,{label:"Phone 1",children:s.jsx("input",{value:e.phone1,onChange:a=>t(l=>({...l,phone1:a.target.value}))})}),s.jsx(H,{label:"Phone 2",children:s.jsx("input",{value:e.phone2,onChange:a=>t(l=>({...l,phone2:a.target.value}))})})]}),s.jsxs("div",{className:"flex items-center gap-4 justify-end",children:[n.isError?s.jsx("span",{className:"text-xs text-rose-400",children:n.error.message}):null,n.isSuccess?s.jsx("span",{className:"text-xs text-emerald-400",children:"Salesman saved."}):null,s.jsx("button",{type:"submit",className:"primary",children:n.isPending?"Saving...":"Save Salesman"})]})]})})})},cf=()=>({code:"",name:"",address:"",phone1:"",phone2:"",areaId:null}),a1=()=>{var c;const[e,t]=y.useState(cf),[n,r]=y.useState(""),[a,l]=y.useState(null),i=ie({queryKey:["areas",{search:n}],queryFn:async()=>(await J.get("/areas",{params:{search:n}})).data}),o=Me({mutationFn:async p=>(await J.post("/customers",p)).data,onSuccess:()=>{t(cf()),l(null)}}),u=p=>{p.preventDefault(),o.mutate({code:e.code.trim(),name:e.name.trim(),address:e.address.trim(),phone1:e.phone1.trim(),phone2:e.phone2.trim(),area_id:(a==null?void 0:a.id)??e.areaId})};return s.jsx("div",{className:"space-y-6",children:s.jsx(je,{title:"Customer Registration",description:"Store customer profiles and assign sales areas.",children:s.jsxs("form",{className:"grid gap-4",onSubmit:u,children:[s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsx(H,{label:"Customer Code",required:!0,children:s.jsx("input",{value:e.code,onChange:p=>t(d=>({...d,code:p.target.value})),required:!0})}),s.jsx(H,{label:"Customer Name",required:!0,children:s.jsx("input",{value:e.name,onChange:p=>t(d=>({...d,name:p.target.value})),required:!0})})]}),s.jsx(H,{label:"Address",required:!0,children:s.jsx("input",{value:e.address,onChange:p=>t(d=>({...d,address:p.target.value})),required:!0})}),s.jsx(ye,{label:"Sales Area",placeholder:"Search area",onSearch:r,onSelect:p=>{l(p),t(d=>({...d,areaId:p.id}))},value:a,results:((c=i.data)==null?void 0:c.map(p=>({value:p.id,id:p.id,label:`${p.code}  ${p.name}`})))??[]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsx(H,{label:"Phone 1",children:s.jsx("input",{value:e.phone1,onChange:p=>t(d=>({...d,phone1:p.target.value}))})}),s.jsx(H,{label:"Phone 2",children:s.jsx("input",{value:e.phone2,onChange:p=>t(d=>({...d,phone2:p.target.value}))})})]}),s.jsxs("div",{className:"flex items-center gap-4 justify-end",children:[o.isError?s.jsx("span",{className:"text-xs text-rose-400",children:o.error.message}):null,o.isSuccess?s.jsx("span",{className:"text-xs text-emerald-400",children:"Customer saved."}):null,s.jsx("button",{type:"submit",className:"primary",children:o.isPending?"Saving...":"Save Customer"})]})]})})})},uf=()=>({code:"",description:""}),l1=()=>{const e=Ze(),[t,n]=y.useState(uf),r=Me({mutationFn:async l=>(await J.post("/expenses",l)).data,onSuccess:()=>{n(uf()),e.invalidateQueries({queryKey:["expenses"]})}}),a=l=>{l.preventDefault(),r.mutate({code:t.code.trim(),description:t.description.trim()})};return s.jsx("div",{className:"space-y-6",children:s.jsx(je,{title:"Expense Definition",description:"Maintain expense heads for voucher entry.",children:s.jsxs("form",{className:"grid gap-4",onSubmit:a,children:[s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsx(H,{label:"Expense Code",required:!0,children:s.jsx("input",{value:t.code,onChange:l=>n(i=>({...i,code:l.target.value})),required:!0})}),s.jsx(H,{label:"Description",required:!0,children:s.jsx("input",{value:t.description,onChange:l=>n(i=>({...i,description:l.target.value})),required:!0})})]}),s.jsxs("div",{className:"flex items-center gap-4 justify-end",children:[r.isError?s.jsx("span",{className:"text-xs text-rose-400",children:r.error.message}):null,r.isSuccess?s.jsx("span",{className:"text-xs text-emerald-400",children:"Expense saved."}):null,s.jsx("button",{type:"submit",className:"primary",children:r.isPending?"Saving...":"Save Expense"})]})]})})})},df=()=>({code:"",accountNo:"",name:"",address:"",phone1:"",phone2:""}),i1=()=>{const[e,t]=y.useState(df),n=Me({mutationFn:async a=>(await J.post("/banks",a)).data,onSuccess:()=>{t(df())}}),r=a=>{a.preventDefault(),n.mutate({code:e.code.trim(),account_no:e.accountNo.trim(),name:e.name.trim(),address:e.address.trim(),phone1:e.phone1.trim(),phone2:e.phone2.trim()})};return s.jsx("div",{className:"space-y-6",children:s.jsx(je,{title:"Bank Registration",description:"Register bank accounts for payment tracking.",children:s.jsxs("form",{className:"grid gap-4",onSubmit:r,children:[s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsx(H,{label:"Bank Code",required:!0,children:s.jsx("input",{value:e.code,onChange:a=>t(l=>({...l,code:a.target.value})),required:!0})}),s.jsx(H,{label:"Account Number",required:!0,children:s.jsx("input",{value:e.accountNo,onChange:a=>t(l=>({...l,accountNo:a.target.value})),required:!0})})]}),s.jsx(H,{label:"Bank Name",required:!0,children:s.jsx("input",{value:e.name,onChange:a=>t(l=>({...l,name:a.target.value})),required:!0})}),s.jsx(H,{label:"Address",required:!0,children:s.jsx("input",{value:e.address,onChange:a=>t(l=>({...l,address:a.target.value})),required:!0})}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsx(H,{label:"Phone 1",children:s.jsx("input",{value:e.phone1,onChange:a=>t(l=>({...l,phone1:a.target.value}))})}),s.jsx(H,{label:"Phone 2",children:s.jsx("input",{value:e.phone2,onChange:a=>t(l=>({...l,phone2:a.target.value}))})})]}),s.jsxs("div",{className:"flex items-center gap-4 justify-end",children:[n.isError?s.jsx("span",{className:"text-xs text-rose-400",children:n.error.message}):null,n.isSuccess?s.jsx("span",{className:"text-xs text-emerald-400",children:"Bank saved."}):null,s.jsx("button",{type:"submit",className:"primary",children:n.isPending?"Saving...":"Save Bank"})]})]})})})};var gg={exports:{}};(function(e,t){(function(n,r){e.exports=r()})($f,function(){var n={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},r=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,a=/\d/,l=/\d\d/,i=/\d\d?/,o=/\d*[^-_:/,()\s\d]+/,u={},c=function(C){return(C=+C)+(C>68?1900:2e3)},p=function(C){return function(g){this[C]=+g}},d=[/[+-]\d\d:?(\d\d)?|Z/,function(C){(this.zone||(this.zone={})).offset=function(g){if(!g||g==="Z")return 0;var f=g.match(/([+-]|\d\d)/g),b=60*f[1]+(+f[2]||0);return b===0?0:f[0]==="+"?-b:b}(C)}],m=function(C){var g=u[C];return g&&(g.indexOf?g:g.s.concat(g.f))},x=function(C,g){var f,b=u.meridiem;if(b){for(var R=1;R<=24;R+=1)if(C.indexOf(b(R,0,g))>-1){f=R>12;break}}else f=C===(g?"pm":"PM");return f},h={A:[o,function(C){this.afternoon=x(C,!1)}],a:[o,function(C){this.afternoon=x(C,!0)}],Q:[a,function(C){this.month=3*(C-1)+1}],S:[a,function(C){this.milliseconds=100*+C}],SS:[l,function(C){this.milliseconds=10*+C}],SSS:[/\d{3}/,function(C){this.milliseconds=+C}],s:[i,p("seconds")],ss:[i,p("seconds")],m:[i,p("minutes")],mm:[i,p("minutes")],H:[i,p("hours")],h:[i,p("hours")],HH:[i,p("hours")],hh:[i,p("hours")],D:[i,p("day")],DD:[l,p("day")],Do:[o,function(C){var g=u.ordinal,f=C.match(/\d+/);if(this.day=f[0],g)for(var b=1;b<=31;b+=1)g(b).replace(/\[|\]/g,"")===C&&(this.day=b)}],w:[i,p("week")],ww:[l,p("week")],M:[i,p("month")],MM:[l,p("month")],MMM:[o,function(C){var g=m("months"),f=(m("monthsShort")||g.map(function(b){return b.slice(0,3)})).indexOf(C)+1;if(f<1)throw new Error;this.month=f%12||f}],MMMM:[o,function(C){var g=m("months").indexOf(C)+1;if(g<1)throw new Error;this.month=g%12||g}],Y:[/[+-]?\d+/,p("year")],YY:[l,function(C){this.year=c(C)}],YYYY:[/\d{4}/,p("year")],Z:d,ZZ:d};function S(C){var g,f;g=C,f=u&&u.formats;for(var b=(C=g.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(M,U,X){var L=X&&X.toUpperCase();return U||f[X]||n[X]||f[L].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(w,j,k){return j||k.slice(1)})})).match(r),R=b.length,P=0;P<R;P+=1){var A=b[P],v=h[A],E=v&&v[0],T=v&&v[1];b[P]=T?{regex:E,parser:T}:A.replace(/^\[|\]$/g,"")}return function(M){for(var U={},X=0,L=0;X<R;X+=1){var w=b[X];if(typeof w=="string")L+=w.length;else{var j=w.regex,k=w.parser,F=M.slice(L),N=j.exec(F)[0];k.call(U,N),M=M.replace(N,"")}}return function(_){var $=_.afternoon;if($!==void 0){var O=_.hours;$?O<12&&(_.hours+=12):O===12&&(_.hours=0),delete _.afternoon}}(U),U}}return function(C,g,f){f.p.customParseFormat=!0,C&&C.parseTwoDigitYear&&(c=C.parseTwoDigitYear);var b=g.prototype,R=b.parse;b.parse=function(P){var A=P.date,v=P.utc,E=P.args;this.$u=v;var T=E[1];if(typeof T=="string"){var M=E[2]===!0,U=E[3]===!0,X=M||U,L=E[2];U&&(L=E[2]),u=this.$locale(),!M&&L&&(u=f.Ls[L]),this.$d=function(F,N,_,$){try{if(["x","X"].indexOf(N)>-1)return new Date((N==="X"?1e3:1)*F);var O=S(N)(F),Q=O.year,K=O.month,D=O.day,B=O.hours,ee=O.minutes,Z=O.seconds,re=O.milliseconds,he=O.zone,ge=O.week,Te=new Date,ve=D||(Q||K?1:Te.getDate()),tt=Q||Te.getFullYear(),Be=0;Q&&!K||(Be=K>0?K-1:Te.getMonth());var wt,dt=B||0,Lt=ee||0,_n=Z||0,xn=re||0;return he?new Date(Date.UTC(tt,Be,ve,dt,Lt,_n,xn+60*he.offset*1e3)):_?new Date(Date.UTC(tt,Be,ve,dt,Lt,_n,xn)):(wt=new Date(tt,Be,ve,dt,Lt,_n,xn),ge&&(wt=$(wt).week(ge).toDate()),wt)}catch{return new Date("")}}(A,T,v,f),this.init(),L&&L!==!0&&(this.$L=this.locale(L).$L),X&&A!=this.format(T)&&(this.$d=new Date("")),u={}}else if(T instanceof Array)for(var w=T.length,j=1;j<=w;j+=1){E[1]=T[j-1];var k=f.apply(this,E);if(k.isValid()){this.$d=k.$d,this.$L=k.$L,this.init();break}j===w&&(this.$d=new Date(""))}else R.call(this,P)}}})})(gg);var o1=gg.exports;const c1=Rd(o1);on.extend(c1);const Ed="DD-MM-YYYY",u1="YYYY-MM-DD",qe=e=>{if(!e)return"";const t=on(e,[Ed,u1,on.ISO_8601],!0);return t.isValid()?t.format(Ed):e},El=e=>{const t=e.replace(/[^0-9]/g,"");if(t.length>=8){const n=t.slice(0,2),r=t.slice(2,4),a=t.slice(4,8);return`${n}-${r}-${a}`}return e},d1=e=>on(e,Ed,!0).isValid(),p1=()=>{var P,A,v;const[e,t]=y.useState(""),[n,r]=y.useState(!1),[a,l]=y.useState({supplierCode:"",supplierDisplay:"",invoiceNo:"",lastInvoice:"",date:qe(new Date),items:[],amountPaid:"",previousBalance:""}),[i,o]=y.useState(""),[u,c]=y.useState(null),p=Ze(),d=y.useMemo(()=>a.items.reduce((E,T)=>{const M=parseFloat(T.quantity)||0,U=parseFloat(T.purchaseRate)||0;return E+M*U},0),[a.items]),m=ie({queryKey:["suppliers",{search:e}],queryFn:async()=>(await J.get("/suppliers",{params:{search:e}})).data}),x=a.supplierCode,S=((P=ie({queryKey:["purchases","last-invoice",x||"all"],queryFn:async()=>{const E=x?{supplierCode:x}:{};return(await J.get("/purchases/last-invoice",{params:E})).data}}).data)==null?void 0:P.invoiceNo)??"";y.useEffect(()=>{l(E=>E.lastInvoice===S?E:{...E,lastInvoice:S})},[S]);const C=ie({queryKey:["items",{search:i,inStock:!1}],queryFn:async()=>(await J.get("/items",{params:{search:i}})).data}),g=Me({mutationFn:async()=>{const{supplierDisplay:E,...T}=a,M={...T,amountPaid:Number(a.amountPaid)||0,previousBalance:Number(a.previousBalance)||0,subtotal:Number(d.toFixed(2)),items:a.items.map(X=>({itemCode:X.code,quantity:Number(X.quantity)||0,bonus:Number(X.bonus)||0,discountPercent:Number(X.discountPercent)||0,purchaseRate:Number(X.purchaseRate)||0}))};return(await J.post("/purchases",M)).data},onMutate:()=>c(null),onSuccess:()=>{c({type:"success",message:"Purchase saved successfully."}),l({supplierCode:"",supplierDisplay:"",invoiceNo:"",lastInvoice:"",date:qe(new Date),items:[],amountPaid:"",previousBalance:""}),t(""),o(""),p.invalidateQueries({queryKey:["purchases","last-invoice"]}),p.invalidateQueries({queryKey:["stock-report"]})},onError:E=>{var M,U;const T=((U=(M=E==null?void 0:E.response)==null?void 0:M.data)==null?void 0:U.message)||(E==null?void 0:E.message)||"Failed to save purchase.";c({type:"error",message:T})}}),f=E=>{l(T=>({...T,items:[...T.items,{code:E.code,name:E.name,baseUnit:E.base_unit,quantity:"",bonus:"",discountPercent:"",purchaseRate:E.purchase_rate}]})),r(!1)},b=(E,T,M)=>{l(U=>({...U,items:U.items.map((X,L)=>L===E?{...X,[T]:M}:X)}))},R=E=>{l(T=>({...T,items:T.items.filter((M,U)=>U!==E)}))};return s.jsxs("div",{className:"space-y-6",children:[s.jsx(je,{title:"Purchase Entry",description:"Capture supplier invoices with item details.",actions:s.jsx(lt,{to:"/history/transactions?type=purchase",className:"secondary text-xs px-3 py-1",children:"View saved purchases"}),children:s.jsxs("form",{className:"grid gap-4",onSubmit:E=>{if(E.preventDefault(),!a.supplierCode){c({type:"error",message:"Select a supplier before saving."});return}if(!a.invoiceNo.trim()){c({type:"error",message:"Enter an invoice number."});return}if(!a.date.trim()){c({type:"error",message:"Enter an invoice date."});return}if(a.items.length===0){c({type:"error",message:"Add at least one item before saving."});return}g.mutate()},children:[s.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[s.jsx(ye,{label:"Supplier",placeholder:"Search supplier",value:{label:a.supplierDisplay||a.supplierCode},onSelect:E=>l(T=>({...T,supplierCode:E.code,supplierDisplay:E.label})),onSearch:t,results:((A=m.data)==null?void 0:A.map(E=>({value:E.id,code:E.code,label:`${E.code}  ${E.name}`})))??[]}),s.jsx(H,{label:"Invoice No.",required:!0,children:s.jsx("input",{value:a.invoiceNo,onChange:E=>l(T=>({...T,invoiceNo:E.target.value})),required:!0})}),s.jsx(H,{label:"Last Invoice",children:s.jsx("input",{value:a.lastInvoice,readOnly:!0})}),s.jsx(H,{label:"Date",required:!0,children:s.jsx("input",{value:a.date,onChange:E=>l(T=>({...T,date:E.target.value})),required:!0})})]}),s.jsxs("div",{className:"border border-slate-200 bg-white rounded-[24px] overflow-hidden shadow-[0_20px_55px_rgba(15,23,42,0.12)]",children:[s.jsxs("header",{className:"flex items-center justify-between bg-slate-50 px-5 py-4 border-b border-slate-200",children:[s.jsx("h3",{className:"text-sm font-semibold text-slate-700",children:"Items"}),s.jsx("button",{type:"button",className:"primary text-xs",onClick:()=>r(!0),children:"Add Item"})]}),s.jsx("div",{className:"divide-y divide-slate-100",children:a.items.length===0?s.jsx("p",{className:"p-5 text-sm text-slate-500",children:"No items yet"}):a.items.map((E,T)=>s.jsxs("div",{className:"grid md:grid-cols-6 gap-3 px-5 py-4 text-sm text-slate-700",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-slate-800",children:E.code}),s.jsx("p",{className:"text-xs text-slate-500",children:E.name})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-slate-500",children:"Base Unit"}),s.jsx("p",{className:"text-slate-800",children:E.baseUnit})]}),s.jsx("div",{children:s.jsx("input",{type:"number",placeholder:"Quantity",value:E.quantity,onChange:M=>b(T,"quantity",M.target.value)})}),s.jsx("div",{children:s.jsx("input",{type:"number",placeholder:"Bonus",value:E.bonus,onChange:M=>b(T,"bonus",M.target.value)})}),s.jsx("div",{children:s.jsx("input",{type:"number",placeholder:"Discount %",value:E.discountPercent,onChange:M=>b(T,"discountPercent",M.target.value)})}),s.jsx("div",{children:s.jsx("input",{type:"number",placeholder:"Purchase Rate",value:E.purchaseRate,onChange:M=>b(T,"purchaseRate",M.target.value)})}),s.jsx("button",{type:"button",className:"secondary text-xs md:col-span-6 justify-self-end",onClick:()=>R(T),children:"Remove"})]},`${E.code}-${T}`))})]}),s.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[s.jsx(H,{label:"Subtotal",children:s.jsx("input",{value:d.toFixed(2),readOnly:!0})}),s.jsx(H,{label:"Amount Paid",children:s.jsx("input",{type:"number",value:a.amountPaid,onChange:E=>l(T=>({...T,amountPaid:E.target.value}))})}),s.jsx(H,{label:"Previous Balance",children:s.jsx("input",{type:"number",value:a.previousBalance,onChange:E=>l(T=>({...T,previousBalance:E.target.value}))})})]}),s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx("button",{type:"button",className:"secondary",onClick:()=>l(E=>({...E,items:[]})),disabled:g.isPending,children:"Reset Items"}),s.jsx("button",{type:"submit",className:"primary",disabled:g.isPending,children:g.isPending?"Saving...":"Save Purchase"})]}),u?s.jsx("p",{className:`text-sm ${u.type==="error"?"text-rose-400":"text-emerald-400"}`,children:u.message}):null]})}),n?s.jsx("div",{className:"fixed inset-0 bg-slate-900/30 backdrop-blur flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl shadow-[0_24px_60px_rgba(15,23,42,0.18)] w-full max-w-3xl h-[70vh] grid grid-rows-[auto,1fr]",children:[s.jsxs("header",{className:"p-5 border-b border-slate-200 flex items-center justify-between text-slate-800",children:[s.jsx("h3",{className:"text-sm font-semibold",children:"Select Item"}),s.jsx("button",{className:"secondary text-xs",onClick:()=>r(!1),children:"Close"})]}),s.jsxs("div",{className:"p-5 space-y-4 overflow-y-auto scrollbar-thin text-slate-700",children:[s.jsx("input",{placeholder:"Search item",value:i,onChange:E=>o(E.target.value)}),s.jsx("div",{className:"grid gap-3",children:((v=C.data)==null?void 0:v.map(E=>s.jsxs("button",{type:"button",className:"flex justify-between items-center bg-white border border-slate-200 rounded-2xl px-5 py-4 hover:bg-slate-50 shadow-sm transition",onClick:()=>f(E),children:[s.jsxs("div",{children:[s.jsxs("p",{className:"font-semibold text-slate-800",children:[E.code,"  ",E.name]}),s.jsxs("p",{className:"text-xs text-slate-500",children:[E.company_name,"  ",E.base_unit]})]}),s.jsxs("span",{className:"text-sm text-slate-600",children:["Purchase Rate: ",E.purchase_rate]})]},E.id)))??s.jsx("p",{className:"text-sm text-slate-500",children:"No results"})})]})]})}):null]})},cl=e=>(Number.isFinite(Number(e))?Number(e):0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),tr=(e,{decimals:t=0,fallback:n="-"}={})=>{const r=Number(e);return Number.isFinite(r)?r.toLocaleString("en-US",{minimumFractionDigits:t,maximumFractionDigits:t}):n},pf=()=>({customerCode:"",customerDisplay:"",salesmanCode:"",salesmanDisplay:"",date:qe(new Date),items:[],amountPaid:"",previousBalance:""}),Yi=e=>{const t=Number(e.tradePrice)||0,n=Number(e.discountPercent)||0,r=Number(e.tradeOffPrice);return e.tradeOffPrice!==""&&Number.isFinite(r)?r:t*(1-n/100)},m1=()=>{var U,X;const[e,t]=y.useState({nextInvoice:""}),[n,r]=y.useState(null),[a,l]=y.useState(""),[i,o]=y.useState(""),[u,c]=y.useState(""),[p,d]=y.useState(!1),[m,x]=y.useState(0),[h,S]=y.useState(()=>pf());y.useEffect(()=>{let L=!0;return(async()=>{try{const j=await J.get("/metadata/next/sales-invoice");if(!L)return;const k=j==null?void 0:j.data,F=typeof k=="string"?k:(k==null?void 0:k.nextInvoice)??(k==null?void 0:k.invoice)??(k==null?void 0:k.next)??e.nextInvoice;t({nextInvoice:F||""})}catch{if(!L)return;t(j=>j)}})(),()=>{L=!1}},[]),y.useEffect(()=>{if(!h.customerCode){x(0),S(j=>({...j,previousBalance:""}));return}let L=!0;return(async()=>{var j;try{const k=await J.get(`/customers/${encodeURIComponent(h.customerCode)}/balance`);if(!L)return;const F=Number(((j=k==null?void 0:k.data)==null?void 0:j.balance)??0);x(F),S(N=>({...N,previousBalance:F?F.toFixed(2):""}))}catch(k){if(!L)return;r({type:"error",message:k.message||"Failed to fetch balance."})}})(),()=>{L=!1}},[h.customerCode]);const C=y.useMemo(()=>{const L=h.items.reduce((F,N)=>{const _=Number(N.quantity)||0,$=Yi(N);return F+_*$},0),w=Number(h.amountPaid)||0,j=Number(h.previousBalance)||0,k=L-w+j;return{totalAmount:L,amountPaid:w,previousBalance:j,netAmount:k}},[h.amountPaid,h.items,h.previousBalance]),g=y.useMemo(()=>cl(m),[m]),f=ie({queryKey:["customers",{search:a}],queryFn:async()=>(await J.get("/customers",{params:{search:a}})).data}),b=ie({queryKey:["salesmen",{search:i}],queryFn:async()=>(await J.get("/salesmen",{params:{search:i}})).data}),R=ie({queryKey:["items",{search:u,inStock:!0}],enabled:p,queryFn:async()=>(await J.get("/items",{params:{search:u,inStock:!0}})).data}),P=Me({mutationFn:async(L={})=>{const w=!!(L!=null&&L.allowNegativeStock),j={customerCode:h.customerCode,salesmanCode:h.salesmanCode,date:h.date,amountPaid:Number(h.amountPaid)||0,previousBalance:Number(m.toFixed(2)),tradeOffTotal:Number(C.netAmount.toFixed(2)),allowNegativeStock:w,items:h.items.map(F=>{const N=Yi(F);return{itemCode:F.code,quantity:Number(F.quantity)||0,bonus:Number(F.bonus)||0,discountPercent:Number(F.discountPercent)||0,tradePrice:Number(F.tradePrice)||0,tradeOffPrice:Number.isFinite(N)?Number(N.toFixed(2)):0,companyName:F.companyName}})};return(await J.post("/sales",j)).data},onMutate:()=>r(null),onSuccess:L=>{r({type:"success",message:"Sale saved successfully."}),L!=null&&L.nextInvoice?t({nextInvoice:L.nextInvoice}):J.get("/metadata/next/sales-invoice").then(w=>{const j=w==null?void 0:w.data,k=typeof j=="string"?j:(j==null?void 0:j.nextInvoice)??(j==null?void 0:j.invoice)??(j==null?void 0:j.next)??e.nextInvoice;t({nextInvoice:k||""})}).catch(()=>t(w=>w)),S(()=>pf()),x(0),l(""),o(""),c("")}}),A=L=>{S(w=>({...w,items:[...w.items,{code:L.code,name:L.name,baseUnit:L.base_unit,packSize:L.pack_size,companyName:L.company_name,quantity:"",bonus:"",tradeOffPrice:"",discountPercent:"",tradePrice:L.trade_rate}]})),d(!1)},v=(L,w,j)=>{S(k=>({...k,items:k.items.map((F,N)=>N===L?{...F,[w]:j}:F)}))},E=L=>{S(w=>({...w,items:w.items.filter((j,k)=>k!==L)}))},T=()=>{if(!h.customerCode||!h.salesmanCode){typeof window<"u"&&window.alert("Select both customer and salesman before adding items.");return}d(!0)},M=async L=>{var j,k;if(L.preventDefault(),P.isPending)return;if(!h.customerCode||!h.salesmanCode){r({type:"error",message:"Customer and salesman are required."});return}if(h.items.length===0){r({type:"error",message:"Add at least one item before saving."});return}if(h.items.some(F=>!F.quantity||Number(F.quantity)<=0)){r({type:"error",message:"Enter quantity for each item before saving."}),typeof window<"u"&&window.alert("Quantity is required for all items.");return}try{await P.mutateAsync()}catch(F){if(((j=F==null?void 0:F.data)==null?void 0:j.code)==="LOW_STOCK"){const _=(Array.isArray((k=F.data)==null?void 0:k.details)?F.data.details:[]).map(K=>{const D=K.itemCode||K.itemName||"Item",B=Number(K.required??0).toFixed(2),ee=Number(K.available??0).toFixed(2),Z=Number.isFinite(K.shortage)?`  Short by ${Number(K.shortage).toFixed(2)}`:"";return`${D}  Required ${B}, Available ${ee}${Z}`}),$=[F.message];_.length>0&&$.push("",..._),$.push("","Proceed with negative stock?");const O=$.join(`
`);if(typeof window<"u"?window.confirm(O):!1)try{await P.mutateAsync({allowNegativeStock:!0})}catch(K){r({type:"error",message:K.message||"Failed to save sale."})}else r({type:"error",message:"Sale not saved. Adjust quantities or restock items."});return}r({type:"error",message:F.message||"Failed to save sale."})}};return s.jsxs("div",{className:"space-y-6",children:[s.jsx(je,{title:"Sales Entry",description:"Issue sales invoices with real-time item context.",actions:s.jsx(lt,{to:"/history/transactions?type=sales",className:"secondary text-xs px-3 py-1",children:"View saved sales"}),children:s.jsxs("form",{className:"grid gap-4",onSubmit:M,children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-4",children:[s.jsx(H,{label:"Invoice No.",children:s.jsx("input",{value:e.nextInvoice||"",disabled:!0})}),s.jsx(ye,{label:"Customer",placeholder:"Search customer",value:h.customerCode?{label:h.customerDisplay||h.customerCode}:null,onSelect:L=>{x(0),S(w=>({...w,customerCode:L.code,customerDisplay:L.label,amountPaid:"",previousBalance:""}))},onSearch:l,results:((U=f.data)==null?void 0:U.map(L=>({value:L.id,code:L.code,label:`${L.code}  ${L.name}`})))??[]}),s.jsx(H,{label:"Date",required:!0,children:s.jsx("input",{value:h.date,onChange:L=>S(w=>({...w,date:L.target.value}))})}),s.jsx(ye,{label:"Salesman",placeholder:"Search salesman",value:h.salesmanCode?{label:h.salesmanDisplay||h.salesmanCode}:null,onSelect:L=>S(w=>({...w,salesmanCode:L.code,salesmanDisplay:L.label})),onSearch:o,results:((X=b.data)==null?void 0:X.map(L=>({value:L.id,code:L.code,label:`${L.code}  ${L.name}`})))??[]})]}),s.jsxs("div",{className:"border border-slate-200 bg-white rounded-[24px] overflow-hidden shadow-[0_20px_55px_rgba(15,23,42,0.12)]",children:[s.jsxs("header",{className:"flex items-center justify-between px-5 py-4 border-b border-slate-200 bg-gradient-to-r from-sky-900 via-sky-700 to-emerald-500 text-white",children:[s.jsx("h3",{className:"text-sm font-semibold tracking-wide uppercase",children:"Items"}),s.jsx("button",{type:"button",className:"bg-white/15 hover:bg-white/25 text-xs font-semibold text-white px-3 py-1.5 rounded-lg transition",onClick:T,children:"Add Item"})]}),s.jsx("div",{className:"divide-y divide-slate-100 screen-only",children:h.items.length===0?s.jsx("p",{className:"p-5 text-sm text-slate-500",children:"No items yet"}):h.items.map((L,w)=>{const j=Number(L.quantity)||0,k=Number(L.tradePrice)||0;Number(L.discountPercent);const F=Yi(L),N=k-F,_=j*F;return s.jsxs("div",{className:"grid gap-3 md:grid-cols-2 xl:grid-cols-9 items-start px-5 py-4 text-sm text-slate-700 print:[grid-template-columns:minmax(520px,_1fr)_55px_55px_55px_70px_65px_65px_85px] print:gap-x-1 print:gap-y-1.5 print:px-2 print:py-2 print:text-[11px]",children:[s.jsxs("div",{className:"md:col-span-2 xl:col-span-3 print:col-span-1",children:[s.jsxs("p",{className:"font-medium text-slate-800",children:[L.code,"  ",L.name]}),s.jsxs("p",{className:"text-xs text-slate-500",children:["Company: ",L.companyName]}),s.jsxs("p",{className:"text-xs text-slate-500",children:["Base Unit: ",L.baseUnit]})]}),s.jsx("div",{className:`md:col-span-1 xl:col-span-1 print:col-span-1 ${L.baseUnit==="Pieces"?"invisible print:opacity-0":""}`,children:s.jsx("input",{className:"w-full bg-slate-100 text-slate-600 print:px-1 print:py-1 print:text-[11px]",type:"text",placeholder:"Pack Size",value:String(L.packSize??""),readOnly:!0,tabIndex:-1,onFocus:$=>$.target.blur()})}),s.jsx("div",{className:"md:col-span-1 xl:col-span-1 print:col-span-1",children:s.jsx("input",{className:"w-full text-right print:px-1 print:py-1 print:text-[11px] print:text-right",type:"number",placeholder:"Quantity",value:L.quantity,onChange:$=>v(w,"quantity",$.target.value)})}),s.jsx("div",{className:"md:col-span-1 xl:col-span-1 print:col-span-1",children:s.jsx("input",{className:"w-full text-right print:px-1 print:py-1 print:text-[11px] print:text-right",type:"number",placeholder:"Bonus",value:L.bonus,onChange:$=>v(w,"bonus",$.target.value)})}),s.jsx("div",{className:"md:col-span-1 xl:col-span-1 print:col-span-1",children:s.jsx("input",{className:"w-full text-right print:px-1 print:py-1 print:text-[11px] print:text-right",type:"number",placeholder:"Trade Price",value:L.tradePrice,onChange:$=>v(w,"tradePrice",$.target.value)})}),s.jsx("div",{className:"hidden xl:flex xl:col-span-1 items-center justify-end text-slate-500 print:flex print:col-span-1 print:px-1 print:text-right",children:s.jsx("span",{className:"print:text-right",children:N?N.toFixed(2):"0.00"})}),s.jsx("div",{className:"md:col-span-1 xl:col-span-1 print:col-span-1",children:s.jsx("input",{className:"w-full text-right print:px-1 print:py-1 print:text-[11px] print:text-right",type:"number",placeholder:"Trade Off Price",value:L.tradeOffPrice,onChange:$=>v(w,"tradeOffPrice",$.target.value)})}),s.jsx("div",{className:"md:col-span-1 xl:col-span-1 print:col-span-1",children:s.jsx("input",{className:"w-full text-right print:px-1 print:py-1 print:text-[11px] print:text-right",type:"number",placeholder:"Discount %",value:L.discountPercent,onChange:$=>v(w,"discountPercent",$.target.value)})}),s.jsx("div",{className:"hidden print:flex print:col-span-1 print:items-center print:justify-end print:px-1",children:s.jsx("span",{className:"print:text-right",children:_?_.toFixed(2):""})}),s.jsx("button",{type:"button",className:"secondary text-xs md:col-span-2 xl:col-span-1 print:hidden print:px-2 print:py-1 print:text-[10px] justify-self-end",onClick:()=>E(w),children:"Remove"})]},`${L.code}-${w}`)})}),h.items.length===0?null:s.jsx("div",{className:"print-only w-full mt-4",children:s.jsxs("table",{className:"sales-print-table",children:[s.jsxs("colgroup",{children:[s.jsx("col",{className:"sales-print-table__item"}),s.jsx("col",{className:"sales-print-table__size"}),s.jsx("col",{className:"sales-print-table__qty"}),s.jsx("col",{className:"sales-print-table__qty"}),s.jsx("col",{className:"sales-print-table__price"}),s.jsx("col",{className:"sales-print-table__price"}),s.jsx("col",{className:"sales-print-table__price"}),s.jsx("col",{className:"sales-print-table__small"}),s.jsx("col",{className:"sales-print-table__price"}),s.jsx("col",{className:"sales-print-table__price"})]}),s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",children:"Item"}),s.jsx("th",{scope:"col",children:"P. Size"}),s.jsx("th",{scope:"col",children:"Qty"}),s.jsx("th",{scope:"col",children:"Bonus"}),s.jsx("th",{scope:"col",children:"T.P"}),s.jsx("th",{scope:"col",children:"Offer"}),s.jsx("th",{scope:"col",children:"R. Price"}),s.jsx("th",{scope:"col",children:"Dis%"}),s.jsx("th",{scope:"col",children:"Tax"}),s.jsx("th",{scope:"col",children:"Total"})]})}),s.jsx("tbody",{children:h.items.map((L,w)=>{const j=Number(L.quantity)||0,k=Number(L.tradePrice)||0,F=Number(L.discountPercent)||0,N=Yi(L)||0,_=k-N,$=j*N,O=L.packSize??"",Q=Number(L.bonus)||0,K=[L.companyName,L.baseUnit].filter(Boolean).join("  ");return s.jsxs("tr",{children:[s.jsxs("td",{children:[s.jsxs("span",{className:"sales-print-table__item-name",children:[L.code,"  ",L.name]}),K?s.jsx("span",{className:"sales-print-table__item-meta",children:K}):null]}),s.jsx("td",{className:"text-center",children:O!==""?O:"-"}),s.jsx("td",{className:"text-center",children:tr(j,{fallback:"-"})}),s.jsx("td",{className:"text-center",children:tr(Q,{fallback:"-"})}),s.jsx("td",{className:"text-right",children:tr(N,{decimals:0,fallback:"0"})}),s.jsx("td",{className:"text-right",children:tr(_,{decimals:2,fallback:"0.00"})}),s.jsx("td",{className:"text-right",children:tr(k,{decimals:2,fallback:"0.00"})}),s.jsx("td",{className:"text-center",children:tr(F,{decimals:0,fallback:"0"})}),s.jsx("td",{className:"text-right",children:"0.00"}),s.jsx("td",{className:"text-right",children:tr($,{decimals:0,fallback:"0"})})]},`${L.code}-${w}`)})})]})})]}),s.jsx("div",{className:"grid gap-4 rounded-3xl border border-slate-200 bg-gradient-to-r from-slate-50 via-white to-slate-50 px-6 py-5 shadow-[0_12px_35px_rgba(15,23,42,0.08)]",children:s.jsxs("div",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-4 text-sm text-slate-700",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-xs uppercase tracking-[0.2em] text-slate-500",children:"Total Amount"}),s.jsx("p",{className:"text-lg font-semibold text-slate-900",children:cl(C.totalAmount)})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-xs uppercase tracking-[0.2em] text-slate-500",children:"Amount Paid"}),s.jsx("p",{className:"text-lg font-semibold text-slate-900",children:cl(C.amountPaid)})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-xs uppercase tracking-[0.2em] text-slate-500",children:"Previous Balance"}),s.jsx("p",{className:"text-lg font-semibold text-slate-900",children:cl(C.previousBalance)})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-xs uppercase tracking-[0.2em] text-slate-500",children:"Net Balance"}),s.jsx("p",{className:"text-lg font-semibold text-emerald-600",children:cl(C.netAmount)})]})]})}),s.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[s.jsx(H,{label:"Total Amount",children:s.jsx("input",{value:C.totalAmount.toFixed(2),disabled:!0})}),s.jsx(H,{label:"Amount Paid",children:s.jsx("input",{type:"number",value:h.amountPaid,onChange:L=>S(w=>({...w,amountPaid:L.target.value}))})}),s.jsxs(H,{label:"Previous Balance",children:[s.jsx("input",{type:"number",value:h.previousBalance,readOnly:!0}),s.jsxs("p",{className:"text-[11px] text-slate-500 mt-1 block",children:["Original balance: ",g," (negative values indicate customer advance)."]})]}),s.jsx(H,{label:"Trade Off Total",children:s.jsx("input",{value:C.netAmount.toFixed(2),disabled:!0})})]}),s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx("button",{type:"button",className:"secondary",onClick:()=>S(L=>({...L,items:[]})),disabled:P.isPending,children:"Reset Items"}),s.jsx("button",{type:"submit",className:"primary",disabled:P.isPending,children:P.isPending?"Saving...":"Save Sale"})]}),n?s.jsx("p",{className:`text-sm ${n.type==="error"?"text-rose-400":"text-emerald-400"}`,children:n.message}):null]})}),p?s.jsx("div",{className:"fixed inset-0 bg-slate-900/30 backdrop-blur flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl shadow-[0_24px_60px_rgba(15,23,42,0.18)] w-full max-w-3xl h-[70vh] grid grid-rows-[auto,1fr]",children:[s.jsxs("header",{className:"p-5 border-b border-slate-200 flex items-center justify-between text-slate-800",children:[s.jsx("h3",{className:"text-sm font-semibold",children:"Select Item"}),s.jsx("button",{className:"secondary text-xs",onClick:()=>d(!1),children:"Close"})]}),s.jsxs("div",{className:"p-5 space-y-4 overflow-y-auto scrollbar-thin text-slate-700",children:[s.jsx("input",{placeholder:"Search item",value:u,onChange:L=>c(L.target.value)}),s.jsx("div",{className:"grid gap-3",children:R.isLoading?s.jsx("p",{className:"text-sm text-slate-500",children:"Searching"}):R.data&&R.data.length>0?R.data.map(L=>s.jsxs("button",{type:"button",className:"flex justify-between items-center bg-white border border-slate-200 rounded-2xl px-5 py-4 hover:bg-slate-50 shadow-sm transition",onClick:()=>A(L),children:[s.jsxs("div",{children:[s.jsxs("p",{className:"font-semibold text-slate-800",children:[L.code,"  ",L.name]}),s.jsxs("p",{className:"text-xs text-slate-500",children:[L.company_name,"  ",L.base_unit]})]}),s.jsxs("span",{className:"text-sm text-slate-600",children:["Trade Rate: ",L.trade_rate]})]},L.id)):s.jsx("p",{className:"text-sm text-slate-500",children:"No results"})})]})]})}):null]})},h1=()=>{var c,p;const[e,t]=y.useState(""),[n,r]=y.useState(null),[a,l]=y.useState({date:qe(new Date),saleItemId:"",quantity:""}),i=ie({queryKey:["sales",{search:e}],queryFn:async()=>(await J.get("/sales",{params:{search:e}})).data}),o=ie({queryKey:["sale-items",n==null?void 0:n.invoice_no],queryFn:async()=>n?(await J.get(`/sales/${n.invoice_no}`)).data.items:[],enabled:!!n}),u=Me({mutationFn:async()=>{if(!n)throw new Error("Select invoice");const d={saleItemId:a.saleItemId,quantity:Number(a.quantity),date:a.date};return(await J.post(`/sales/${n.invoice_no}/returns`,d)).data}});return y.useEffect(()=>{n&&l(d=>({...d,saleItemId:"",quantity:""}))},[n]),s.jsx(je,{title:"Sale Return",description:"Select invoice then choose the item to return.",actions:s.jsxs("div",{className:"flex items-center gap-3",children:[u.isSuccess?s.jsx("span",{className:"text-xs text-emerald-400",children:"Return logged"}):u.isError?s.jsx("span",{className:"text-xs text-rose-400",children:u.error.message}):null,s.jsx(lt,{to:"/history/transactions?type=sale-return",className:"secondary text-xs px-3 py-1",children:"View saved returns"})]}),children:s.jsxs("form",{className:"grid gap-4",onSubmit:d=>{d.preventDefault(),u.mutate()},children:[s.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[s.jsx(ye,{label:"Invoice",placeholder:"Search invoice",value:n?{label:`${n.invoice_no}  ${n.customer_name}`}:null,onSelect:d=>{var x;const m=(x=i.data)==null?void 0:x.find(h=>h.invoice_no===d.invoice);m&&r(m)},onSearch:t,results:((c=i.data)==null?void 0:c.map(d=>({value:d.invoice_no,invoice:d.invoice_no,label:`${d.invoice_no}  ${d.customer_name}`})))??[]}),s.jsx(H,{label:"Return Date",required:!0,children:s.jsx("input",{value:a.date,onChange:d=>l(m=>({...m,date:d.target.value}))})})]}),s.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[s.jsx(H,{label:"Sale Item",required:!0,children:s.jsxs("select",{value:a.saleItemId,onChange:d=>l(m=>({...m,saleItemId:d.target.value})),children:[s.jsx("option",{value:"",children:"Select item"}),(p=o.data)==null?void 0:p.map(d=>s.jsxs("option",{value:d.id,children:[d.item_code,"  ",d.item_name]},d.id))]})}),s.jsx(H,{label:"Quantity",required:!0,children:s.jsx("input",{type:"number",value:a.quantity,onChange:d=>l(m=>({...m,quantity:d.target.value}))})})]}),s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx("button",{type:"reset",className:"secondary",onClick:()=>l({date:qe(new Date),saleItemId:"",quantity:""}),children:"Reset"}),s.jsx("button",{type:"submit",className:"primary",children:u.isPending?"Recording...":"Save Return"})]})]})})},f1=()=>{var C,g;const[e,t]=y.useState(""),[n,r]=y.useState(null),[a,l]=y.useState(null),[i,o]=y.useState({nextReturn:"PR000001"}),[u,c]=y.useState({date:qe(new Date),purchaseItemId:"",quantity:""}),p=Ze();y.useEffect(()=>{J.get("/metadata/next/purchase-return").then(f=>o(f.data)).catch(()=>o(f=>f))},[]);const d=ie({queryKey:["purchases",{search:e}],queryFn:async()=>(await J.get("/purchases",{params:{search:e}})).data}),m=ie({queryKey:["purchase-items",n==null?void 0:n.invoice_no],queryFn:async()=>n?(await J.get(`/purchases/${n.invoice_no}`)).data.items:[],enabled:!!n}),{mutate:x,reset:h,isPending:S}=Me({mutationFn:async()=>{if(!n)throw new Error("Select invoice");if(!u.purchaseItemId)throw new Error("Choose an item to return");if(!u.quantity||Number(u.quantity)<=0)throw new Error("Enter a quantity greater than zero");const f={purchaseItemId:Number(u.purchaseItemId),quantity:Number(u.quantity),date:u.date};return(await J.post(`/purchases/${n.invoice_no}/returns`,f)).data},onMutate:()=>l(null),onSuccess:f=>{const b=(f==null?void 0:f.return_no)||(f==null?void 0:f.returnNo)||null,R=(f==null?void 0:f.invoice_no)||(n==null?void 0:n.invoice_no)||null,P=[];b&&P.push(`Return ${b} recorded`),R&&P.push(`Invoice ${R}`),l({type:"success",message:P.length?P.join(" - "):"Return logged"}),c(A=>({...A,quantity:""})),p.invalidateQueries({queryKey:["purchase-items",n==null?void 0:n.invoice_no]}),p.invalidateQueries({queryKey:["stock-report"]}),p.invalidateQueries({queryKey:["transaction-history"]}),J.get("/metadata/next/purchase-return").then(A=>o(A.data)).catch(()=>null)},onError:f=>{l({type:"error",message:f.message})}});return y.useEffect(()=>{n&&(c(f=>({...f,purchaseItemId:"",quantity:""})),l(null),h())},[n,h]),s.jsx(je,{title:"Purchase Return",description:"Return items against supplier invoices.",actions:s.jsxs("div",{className:"flex items-center gap-3",children:[a?s.jsx("span",{className:`text-xs ${a.type==="success"?"text-emerald-400":"text-rose-400"}`,children:a.message}):null,s.jsx(lt,{to:"/history/transactions?type=purchase-return",className:"secondary text-xs px-3 py-1",children:"View saved returns"})]}),children:s.jsxs("form",{className:"grid gap-4",onSubmit:f=>{f.preventDefault(),x()},children:[s.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[s.jsx(H,{label:"Return No.",children:s.jsx("input",{value:i.nextReturn,disabled:!0})}),s.jsx(ye,{label:"Invoice",placeholder:"Search invoice",value:n?{label:`${n.invoice_no}  ${n.supplier_name}`}:null,onSelect:f=>{var R;const b=(R=d.data)==null?void 0:R.find(P=>P.invoice_no===f.invoice);b&&r(b),l(null),h()},onSearch:t,results:((C=d.data)==null?void 0:C.map(f=>({value:f.invoice_no,invoice:f.invoice_no,label:`${f.invoice_no}  ${f.supplier_name}`})))??[]}),s.jsx(H,{label:"Return Date",required:!0,children:s.jsx("input",{value:u.date,onChange:f=>c(b=>({...b,date:f.target.value}))})})]}),s.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[s.jsx(H,{label:"Purchase Item",required:!0,children:s.jsxs("select",{value:u.purchaseItemId,onChange:f=>c(b=>({...b,purchaseItemId:f.target.value})),children:[s.jsx("option",{value:"",children:"Select item"}),(g=m.data)==null?void 0:g.map(f=>{const b=Number(f.quantity??0),R=Number(f.bonus??0),P=Number(f.purchase_rate??0),A=Number(f.discount_percent??0),v=f.base_unit?` ${f.base_unit}`:"",E=`${b}${v}${R?` + ${R}${v} bonus`:""}`,T=P?` @ Rs ${P.toFixed(2)}`:"",M=A?` (Disc ${A.toFixed(2)}%)`:"",U=`${f.item_code}  ${f.item_name} - Qty ${E}${T}${M}`;return s.jsx("option",{value:f.id,children:U},f.id)})]})}),s.jsx(H,{label:"Quantity",required:!0,children:s.jsx("input",{type:"number",value:u.quantity,onChange:f=>c(b=>({...b,quantity:f.target.value}))})})]}),s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx("button",{type:"reset",className:"secondary",onClick:()=>{c({date:qe(new Date),purchaseItemId:"",quantity:""}),r(null),l(null),h()},children:"Reset"}),s.jsx("button",{type:"submit",className:"primary",children:S?"Recording...":"Save Return"})]})]})})},x1=()=>{var u;const[e,t]=y.useState(""),[n,r]=y.useState({nextVoucher:"V000001"}),[a,l]=y.useState({expenseCode:"",expenseLabel:"",voucherDate:qe(new Date),cashPayment:"",details:""});y.useEffect(()=>{J.get("/metadata/next/expense-voucher").then(c=>r(c.data))},[]);const i=ie({queryKey:["expenses",{search:e}],queryFn:async()=>(await J.get("/expenses",{params:{search:e}})).data}),o=Me({mutationFn:async()=>{const c={expenseCode:a.expenseCode,voucherDate:a.voucherDate,cashPayment:Number(a.cashPayment)||0,details:a.details};return(await J.post("/expense-entries",c)).data},onSuccess:c=>{c!=null&&c.voucher_no&&r({nextVoucher:c.voucher_no}),l({expenseCode:"",expenseLabel:"",voucherDate:qe(new Date),cashPayment:"",details:""})}});return s.jsx(je,{title:"Expense Entry",description:"Record expenses using predefined codes.",actions:s.jsxs("div",{className:"flex items-center gap-3",children:[o.isSuccess?s.jsx("span",{className:"text-xs text-emerald-400",children:"Voucher saved"}):o.isError?s.jsx("span",{className:"text-xs text-rose-400",children:o.error.message}):null,s.jsx(lt,{to:"/history/transactions?type=expense",className:"secondary text-xs px-3 py-1",children:"View saved expenses"})]}),children:s.jsxs("form",{className:"grid gap-4 md:grid-cols-2",onSubmit:c=>{c.preventDefault(),o.mutate()},children:[s.jsx(H,{label:"Voucher No.",children:s.jsx("input",{value:n.nextVoucher,disabled:!0})}),s.jsx(H,{label:"Voucher Date",required:!0,children:s.jsx("input",{value:a.voucherDate,onChange:c=>l(p=>({...p,voucherDate:c.target.value}))})}),s.jsx(ye,{label:"Expense Code",placeholder:"Search expense",value:a.expenseCode?{label:a.expenseLabel||a.expenseCode}:null,onSelect:c=>l(p=>({...p,expenseCode:c.code,expenseLabel:c.label})),onSearch:t,results:((u=i.data)==null?void 0:u.map(c=>({value:c.id,code:c.code,label:`${c.code}  ${c.description}`})))??[]}),s.jsx(H,{label:"Cash Payment",required:!0,children:s.jsx("input",{type:"number",value:a.cashPayment,onChange:c=>l(p=>({...p,cashPayment:c.target.value}))})}),s.jsx(H,{label:"Details",children:s.jsx("textarea",{rows:3,value:a.details,onChange:c=>l(p=>({...p,details:c.target.value}))})}),s.jsx("div",{className:"flex items-end justify-end gap-3 md:col-span-2",children:s.jsx("button",{type:"submit",className:"primary",children:o.isPending?"Saving...":"Save Expense"})})]})})},y1=()=>{var R,P,A;const[e,t]=y.useState(""),[n,r]=y.useState(""),[a,l]=y.useState({nextReceipt:"R000001"}),i=()=>({customerCode:"",customerLabel:"",receiptDate:qe(new Date),paymentMode:"cash",bankCode:"",bankLabel:"",slipNo:"",slipDate:"",amount:"",details:""}),[o,u]=y.useState(i),[c,p]=y.useState(null),d=Ze();y.useEffect(()=>{J.get("/metadata/next/customer-receipt").then(v=>l(v.data))},[]);const m=ie({queryKey:["customers",{search:e}],queryFn:async()=>(await J.get("/customers",{params:{search:e}})).data}),x=ie({queryKey:["customer-balance",o.customerCode],enabled:!!o.customerCode,queryFn:async()=>(await J.get(`/customers/${encodeURIComponent(o.customerCode)}/balance`)).data}),h=o.paymentMode==="online",S=o.paymentMode==="bank",C=ie({queryKey:["banks",{search:n}],enabled:h||S,queryFn:async()=>(await J.get("/banks",{params:{search:n}})).data}),g=y.useMemo(()=>{var v;return o.customerCode?Number(((v=x.data)==null?void 0:v.balance)??0):0},[(R=x.data)==null?void 0:R.balance,o.customerCode]),f=y.useMemo(()=>{const v=Number(o.amount)||0,E=g-v;return E>0?E:0},[o.amount,g]),b=Me({mutationFn:async v=>(await J.post("/customer-receipts",v)).data,onSuccess:(v,E)=>{v!=null&&v.receipt_no&&l({nextReceipt:v.receipt_no}),E!=null&&E.customerCode&&d.invalidateQueries({queryKey:["customer-balance",E.customerCode]}),u(i()),r(""),p(null),d.invalidateQueries({queryKey:["dashboard-summary"]}),d.invalidateQueries({queryKey:["customers"]}),d.invalidateQueries({queryKey:["bank-deposit-report"]})}});return s.jsx(je,{title:"Customer Receipt",description:"Log received payments against customers.",actions:s.jsxs("div",{className:"flex items-center gap-3",children:[c?s.jsx("span",{className:"text-xs text-rose-400",children:c}):b.isSuccess?s.jsx("span",{className:"text-xs text-emerald-400",children:"Receipt saved"}):b.isError?s.jsx("span",{className:"text-xs text-rose-400",children:b.error.message}):null,s.jsx(lt,{to:"/history/transactions?type=customer-receipt",className:"secondary text-xs px-3 py-1",children:"View saved receipts"})]}),children:s.jsxs("form",{className:"grid gap-4 md:grid-cols-3",onSubmit:v=>{v.preventDefault();const E=Number(o.amount)||0,T=(o.slipNo||"").trim();if(!o.customerCode){p("Select a customer before saving.");return}if(!E||E<=0){p("Enter a valid receipt amount.");return}if(h){if(!o.bankCode){p("Select a bank for online receipts.");return}if(!T){p("Enter the transaction ID for online receipts.");return}}if(S){if(!o.bankCode){p("Select a bank for bank transactions.");return}if(!o.slipDate){p("Choose a slip date for bank transactions.");return}}p(null),b.mutate({customerCode:o.customerCode,receiptDate:o.receiptDate,amount:E,details:o.details,paymentMode:o.paymentMode,bankCode:h||S?o.bankCode:null,slipNo:(h||S)&&T||null,slipDate:S?o.slipDate:null})},children:[s.jsx(H,{label:"Receipt No.",className:"md:col-span-1",children:s.jsx("input",{value:a.nextReceipt,disabled:!0})}),s.jsx(H,{label:"Receipt Date",required:!0,className:"md:col-span-1",children:s.jsx("input",{value:o.receiptDate,onChange:v=>u(E=>({...E,receiptDate:v.target.value}))})}),s.jsx(ye,{className:"md:col-span-1",label:"Customer",placeholder:"Search customer",value:o.customerCode?{label:o.customerLabel||o.customerCode}:null,onSelect:v=>u(E=>({...E,customerCode:v.code,customerLabel:`${v.code}  ${v.name}`})),onSearch:t,results:((P=m.data)==null?void 0:P.map(v=>({value:v.id,code:v.code,name:v.name,label:`${v.code}  ${v.name}`})))??[]}),s.jsx(H,{label:"Previous Balance",className:"md:col-span-1",children:s.jsx("input",{value:g.toFixed(2),disabled:!0,placeholder:x.isFetching?"Loading...":"0.00"})}),s.jsx(H,{label:"Payment Mode",required:!0,htmlFor:"customer-receipt-mode",className:"md:col-span-1",children:s.jsxs("select",{id:"customer-receipt-mode",value:o.paymentMode,onChange:v=>{const E=v.target.value,T=new Date().toISOString().slice(0,10);u(M=>{const U={...M,paymentMode:E};return E==="cash"?(U.bankCode="",U.bankLabel="",U.slipNo="",U.slipDate=""):E==="online"?(U.slipNo="",U.slipDate=""):E==="bank"&&(U.slipNo="",U.slipDate=M.slipDate||T),U}),E==="cash"&&r("")},children:[s.jsx("option",{value:"cash",children:"Cash"}),s.jsx("option",{value:"online",children:"Online"}),s.jsx("option",{value:"bank",children:"Bank Transaction"})]})}),h||S?s.jsx(ye,{className:"md:col-span-1",label:"Bank Name",placeholder:"Search bank",value:o.bankCode?{label:o.bankLabel||o.bankCode}:null,onSelect:v=>u(E=>({...E,bankCode:v.code,bankLabel:`${v.code}  ${v.name}`})),onSearch:r,results:((A=C.data)==null?void 0:A.map(v=>({value:v.id,code:v.code,name:v.name,label:`${v.code}  ${v.name}`})))??[]}):null,h?s.jsx(H,{label:"Transaction ID",required:!0,className:"md:col-span-1",children:s.jsx("input",{value:o.slipNo,onChange:v=>u(E=>({...E,slipNo:v.target.value})),placeholder:"Enter transaction reference"})}):null,S?s.jsxs(s.Fragment,{children:[s.jsx(H,{label:"Bank Code",className:"md:col-span-1",children:s.jsx("input",{value:o.bankCode,disabled:!0,placeholder:"Select a bank"})}),s.jsx(H,{label:"Slip No.",className:"md:col-span-1",children:s.jsx("input",{value:o.slipNo,onChange:v=>u(E=>({...E,slipNo:v.target.value})),placeholder:"Enter slip number"})}),s.jsx(H,{label:"Slip Date",required:!0,htmlFor:"customer-receipt-slip-date",className:"md:col-span-1",children:s.jsx("input",{id:"customer-receipt-slip-date",type:"date",value:o.slipDate,onChange:v=>u(E=>({...E,slipDate:v.target.value}))})})]}):null,s.jsx(H,{label:"Amount",required:!0,className:"md:col-span-1",children:s.jsx("input",{type:"number",value:o.amount,onChange:v=>u(E=>({...E,amount:v.target.value}))})}),s.jsx(H,{label:"Remaining Balance",className:"md:col-span-1",children:s.jsx("input",{value:f.toFixed(2),disabled:!0})}),s.jsx(H,{label:"Details",className:"md:col-span-3",children:s.jsx("textarea",{rows:3,value:o.details,onChange:v=>u(E=>({...E,details:v.target.value}))})}),s.jsx("div",{className:"flex items-end justify-end gap-3 md:col-span-3",children:s.jsx("button",{type:"submit",className:"primary",children:b.isPending?"Saving...":"Save Receipt"})})]})})},g1=()=>{var M,U,X,L,w;const[e,t]=y.useState(""),[n,r]=y.useState(""),[a,l]=y.useState(null),[i,o]=y.useState(null),[u,c]=y.useState({nextPayment:"SP000001"}),p=()=>({supplierCode:"",supplierLabel:"",paymentDate:qe(new Date),paymentMode:"cash",bankCode:"",bankLabel:"",slipNo:"",slipDate:"",amount:"",details:""}),[d,m]=y.useState(p),x=Ze();y.useEffect(()=>{J.get("/metadata/next/supplier-payment").then(j=>c(j.data)).catch(()=>c(j=>j))},[]);const h=ie({queryKey:["supplier-payables",{search:e}],queryFn:async()=>(await J.get("/suppliers/payables",{params:{search:e}})).data}),S=ie({queryKey:["supplier-payable",d.supplierCode],enabled:!!d.supplierCode,queryFn:async()=>(await J.get(`/suppliers/${encodeURIComponent(d.supplierCode)}/payable`)).data}),C=d.paymentMode==="online",g=d.paymentMode==="bank",f=n.trim(),b=f.length>=2,R=ie({queryKey:["banks",{search:f}],enabled:(C||g)&&b,queryFn:async()=>(await J.get("/banks",{params:{search:f}})).data}),P=y.useMemo(()=>{var j;return d.supplierCode?Number(((j=S.data)==null?void 0:j.payable)??0):0},[d.supplierCode,(M=S.data)==null?void 0:M.payable]),A=y.useMemo(()=>{var j;return d.supplierCode?Number(((j=S.data)==null?void 0:j.receivable)??0):0},[d.supplierCode,(U=S.data)==null?void 0:U.receivable]),v=y.useMemo(()=>{var j;return d.supplierCode?Number(((j=S.data)==null?void 0:j.net)??0):0},[d.supplierCode,(X=S.data)==null?void 0:X.net]);y.useEffect(()=>{if(d.paymentMode!=="bank"||d.slipDate)return;const j=new Date().toISOString().slice(0,10);m(k=>k.paymentMode!=="bank"||k.slipDate?k:{...k,slipDate:j})},[d.paymentMode,d.slipDate]),y.useEffect(()=>{if(!d.supplierCode)return;const j=P>0?P.toFixed(2):"";m(k=>!k.supplierCode||Number(k.amount||0)>0&&Math.abs(Number(k.amount)-P)>.01||k.amount===j?k:{...k,amount:j})},[d.supplierCode,P]);const E=Me({mutationFn:async j=>(await J.post("/supplier-payments",j)).data,onMutate:()=>{o(null)},onSuccess:(j,k)=>{o({type:"success",message:"Payment recorded successfully."}),m(p()),t(""),r(""),l(null),x.invalidateQueries({queryKey:["supplier-payables"]}),k!=null&&k.supplierCode&&x.invalidateQueries({queryKey:["supplier-payable",k.supplierCode]}),x.invalidateQueries({queryKey:["dashboard-summary"]}),x.invalidateQueries({queryKey:["bank-deposit-report"]}),x.invalidateQueries({queryKey:["transaction-history"]}),J.get("/metadata/next/supplier-payment").then(F=>c(F.data)).catch(()=>null)},onError:j=>{var F,N;const k=((N=(F=j==null?void 0:j.response)==null?void 0:F.data)==null?void 0:N.message)||(j==null?void 0:j.message)||"Failed to record payment.";o({type:"error",message:k})}}),T=y.useMemo(()=>{var j;return((j=S.data)==null?void 0:j.breakdown)??null},[S.data]);return s.jsx(je,{title:"Supplier Payment",description:"Record payments made against supplier payables.",actions:s.jsxs("div",{className:"flex items-center gap-3",children:[a?s.jsx("span",{className:"text-xs text-rose-400",children:a}):i?s.jsx("span",{className:`text-xs ${i.type==="error"?"text-rose-400":"text-emerald-400"}`,children:i.message}):null,s.jsx(lt,{to:"/history/transactions?type=supplier-payment",className:"secondary text-xs px-3 py-1",children:"View supplier payments"})]}),children:s.jsxs("form",{className:"grid gap-4 md:grid-cols-3",onSubmit:j=>{var N;if(j.preventDefault(),!d.supplierCode){l("Select a supplier with outstanding payable.");return}if(!d.paymentDate.trim()){l("Enter a payment date.");return}if(P<=0){A>0?l("Selected supplier currently has a receivable balance. No payment is due."):l("Selected supplier has no outstanding payable.");return}const k=Number(d.amount||0);if(!Number.isFinite(k)||k<=0){l("Enter a valid payment amount.");return}if(k-P>.01){l("Payment amount cannot exceed outstanding payable.");return}const F=(d.slipNo||"").trim();if(d.paymentMode!=="cash"&&!d.bankCode){l("Select a bank for this payment mode.");return}if(d.paymentMode==="online"&&!F){l("Enter the transaction reference for online payments.");return}if(d.paymentMode==="bank"&&!d.slipDate){l("Select the slip date for bank payments.");return}l(null),E.mutate({supplierCode:d.supplierCode,paymentDate:d.paymentDate,amount:k,details:((N=d.details)==null?void 0:N.trim())||null,paymentMode:d.paymentMode,bankCode:d.paymentMode==="cash"?null:d.bankCode||null,slipNo:d.paymentMode==="cash"?null:F||null,slipDate:d.paymentMode==="bank"?d.slipDate:null})},children:[s.jsx(H,{label:"Payment No.",className:"md:col-span-1",children:s.jsx("input",{value:u.nextPayment,disabled:!0})}),s.jsx(H,{label:"Payment Date",required:!0,className:"md:col-span-1",children:s.jsx("input",{value:d.paymentDate,onChange:j=>{const k=j.target.value;o(null),m(F=>({...F,paymentDate:k}))}})}),s.jsx(H,{label:"Payment Mode",required:!0,className:"md:col-span-1",children:s.jsxs("select",{value:d.paymentMode,onChange:j=>{const k=j.target.value,F=new Date().toISOString().slice(0,10);o(null),l(null),m(N=>{const _={...N,paymentMode:k};return k==="cash"?(_.bankCode="",_.bankLabel="",_.slipNo="",_.slipDate=""):k==="online"?_.slipDate="":k==="bank"&&(_.slipDate=N.slipDate||F),_}),k==="cash"&&r("")},children:[s.jsx("option",{value:"cash",children:"Cash"}),s.jsx("option",{value:"online",children:"Online"}),s.jsx("option",{value:"bank",children:"Bank Transaction"})]})}),s.jsx(ye,{className:"md:col-span-1",label:"Supplier",placeholder:"Search payable suppliers",value:d.supplierCode?{label:d.supplierLabel||d.supplierCode}:null,onSelect:j=>{const k=Number(j.payable??0);m(F=>({...F,supplierCode:j.code,supplierLabel:j.label,amount:k>0?k.toFixed(2):"",details:""})),o(null),l(null)},onSearch:t,results:((L=h.data)==null?void 0:L.map(j=>({value:j.id,code:j.code,label:`${j.code}  ${j.name}`,payable:j.payable,receivable:j.receivable,net:j.net})))??[],renderItem:j=>s.jsxs("div",{className:"flex justify-between items-center w-full",children:[s.jsx("span",{children:j.label}),s.jsxs("span",{className:"text-xs text-right text-slate-500",children:[Number(j.payable??0)>0?`Payable Rs ${Number(j.payable??0).toFixed(2)}`:null,Number(j.receivable??0)>0?`${Number(j.payable??0)>0?"  ":""}Receivable Rs ${Number(j.receivable??0).toFixed(2)}`:null]})]})}),C||g?s.jsx(ye,{className:"md:col-span-1",label:"Bank Name",placeholder:"Type at least two characters",value:d.bankCode?{label:d.bankLabel||d.bankCode}:null,onSelect:j=>{if(!j){o(null),l(null),m(k=>({...k,bankCode:"",bankLabel:"",slipNo:k.paymentMode==="cash"?"":k.slipNo}));return}m(k=>({...k,bankCode:j.code,bankLabel:`${j.code}  ${j.name}`})),o(null),l(null)},onSearch:r,results:b?((w=R.data)==null?void 0:w.map(j=>({value:j.id,code:j.code,name:j.name,label:`${j.code}  ${j.name}`})))??[]:[],emptyMessage:b?"No matching banks found.":"Type at least two characters to search banks."}):null,C||g?s.jsx(H,{label:"Bank Code",className:"md:col-span-1",children:s.jsx("input",{value:d.bankCode,disabled:!0,placeholder:"Select a bank"})}):null,C?s.jsx(H,{label:"Transaction ID",required:!0,className:"md:col-span-1",children:s.jsx("input",{value:d.slipNo,onChange:j=>{const k=j.target.value;o(null),l(null),m(F=>({...F,slipNo:k}))},placeholder:"Enter transaction reference"})}):null,g?s.jsxs(s.Fragment,{children:[s.jsx(H,{label:"Slip No.",className:"md:col-span-1",children:s.jsx("input",{value:d.slipNo,onChange:j=>{const k=j.target.value;o(null),l(null),m(F=>({...F,slipNo:k}))},placeholder:"Enter slip number"})}),s.jsx(H,{label:"Slip Date",required:!0,className:"md:col-span-1",children:s.jsx("input",{type:"date",value:d.slipDate,onChange:j=>{const k=j.target.value;o(null),l(null),m(F=>({...F,slipDate:k}))}})})]}):null,s.jsx(H,{label:"Outstanding Payable",className:"md:col-span-1",children:s.jsx("input",{value:P.toFixed(2),disabled:!0,placeholder:S.isFetching?"Loading...":"0.00"})}),A>0?s.jsx(H,{label:"Supplier Receivable",className:"md:col-span-1",children:s.jsx("input",{value:A.toFixed(2),disabled:!0})}):null,s.jsx(H,{label:"Payment Amount",required:!0,className:"md:col-span-1",children:s.jsx("input",{type:"number",min:"0.01",step:"0.01",value:d.amount,onChange:j=>{const k=j.target.value;o(null),l(null),m(F=>({...F,amount:k}))}})}),s.jsx(H,{label:"Notes",className:"md:col-span-3",children:s.jsx("textarea",{rows:3,value:d.details,onChange:j=>{const k=j.target.value;o(null),m(F=>({...F,details:k}))},placeholder:"Optional remarks"})}),d.supplierCode&&T?s.jsxs("div",{className:"md:col-span-3 border border-slate-200 bg-slate-50 rounded-2xl px-4 py-3 text-xs text-slate-600",children:[s.jsx("p",{className:"font-semibold text-slate-700 mb-2",children:"Payable breakdown"}),s.jsxs("div",{className:"grid gap-2 sm:grid-cols-2 md:grid-cols-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"uppercase tracking-wide text-slate-500",children:"Opening Balances"}),s.jsxs("p",{className:"text-slate-800",children:["Rs ",Number(T.opening).toFixed(2)]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"uppercase tracking-wide text-slate-500",children:"Purchases"}),s.jsxs("p",{className:"text-slate-800",children:["Rs ",Number(T.purchaseTotal).toFixed(2)]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"uppercase tracking-wide text-slate-500",children:"Paid With Purchases"}),s.jsxs("p",{className:"text-slate-800",children:["Rs ",Number(T.purchasePaid).toFixed(2)]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"uppercase tracking-wide text-slate-500",children:"Returns"}),s.jsxs("p",{className:"text-slate-800",children:["Rs ",Number(T.returnsTotal).toFixed(2)]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"uppercase tracking-wide text-slate-500",children:"Previous Payments"}),s.jsxs("p",{className:"text-slate-800",children:["Rs ",Number(T.paymentsTotal).toFixed(2)]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"uppercase tracking-wide text-slate-500",children:"Supplier Receivable"}),s.jsxs("p",{className:"text-slate-800",children:["Rs ",A.toFixed(2)]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"uppercase tracking-wide text-slate-500",children:"Net Balance"}),s.jsxs("p",{className:v<0?"text-emerald-600":"text-slate-800",children:["Rs ",v.toFixed(2)]})]})]})]}):null,s.jsx("div",{className:"flex items-end justify-end gap-3 md:col-span-3",children:s.jsx("button",{type:"submit",className:"primary",children:E.isPending?"Saving...":"Record Payment"})})]})})},v1=()=>{var u,c,p,d,m;const[e,t]=y.useState(""),[n,r]=y.useState({salesmanCode:"",salesmanDisplay:"",receiptDate:qe(new Date),voucherNo:"SR000001"});y.useEffect(()=>{J.get("/metadata/next/salesman-receipt").then(x=>{var h;(h=x.data)!=null&&h.nextReceipt&&r(S=>({...S,voucherNo:x.data.nextReceipt}))})},[]);const a=ie({queryKey:["salesmen",{search:e}],queryFn:async()=>(await J.get("/salesmen",{params:{search:e}})).data}),l=ie({queryKey:["salesman-receivables",n.salesmanCode,n.receiptDate],enabled:!!n.salesmanCode,queryFn:async()=>(await J.get(`/salesmen/${encodeURIComponent(n.salesmanCode)}/receivables`,{params:{date:n.receiptDate}})).data});y.useEffect(()=>{var x;if((x=l.data)!=null&&x.salesman){const{salesman:h}=l.data;r(S=>({...S,salesmanDisplay:`${h.code}  ${h.name}`}))}},[l.data]);const i=!!n.salesmanCode,o=y.useMemo(()=>{var h;return(i?((h=l.data)==null?void 0:h.rows)??[]:[]).reduce((S,C)=>{const g=parseFloat(C.receivedAmount)||0,f=parseFloat(C.netBalance)||0,b=parseFloat(C.previousBalance)||0;return{totalReceived:S.totalReceived+g,totalNet:S.totalNet+f,totalPrevious:S.totalPrevious+b}},{totalReceived:0,totalNet:0,totalPrevious:0})},[i,l.data]);return s.jsx("div",{className:"space-y-6",children:s.jsx(je,{title:"Salesman Receipt",description:"Summarize receivables collected by salesman.",actions:s.jsx(lt,{to:"/history/transactions?type=salesman-receipt",className:"secondary text-xs px-3 py-1",children:"View saved receipts"}),children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[s.jsx(H,{label:"Voucher No.",children:s.jsx("input",{value:n.voucherNo,disabled:!0})}),s.jsx(ye,{label:"Salesman",placeholder:"Search salesman",value:n.salesmanCode?{label:n.salesmanDisplay||n.salesmanCode}:null,onSelect:x=>{r(h=>({...h,salesmanCode:x.code,salesmanDisplay:x.label}))},onSearch:t,results:((u=a.data)==null?void 0:u.map(x=>({value:x.id,code:x.code,label:`${x.code}  ${x.name}`})))??[]}),s.jsx(H,{label:"Receipt Date",required:!0,children:s.jsx("input",{value:n.receiptDate,onChange:x=>r(h=>({...h,receiptDate:x.target.value}))})})]}),l.isFetching?s.jsx("p",{className:"text-xs text-slate-500",children:"Loading receivables"}):null,s.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl shadow-[0_18px_45px_rgba(15,23,42,0.12)] overflow-hidden",children:[s.jsxs("header",{className:"px-6 py-4 border-b border-slate-100 flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold text-slate-700",children:"Collected Receivables"}),n.salesmanDisplay?s.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Voucher ",n.voucherNo,"  ",n.salesmanDisplay,"  ",n.receiptDate]}):null]}),s.jsxs("span",{className:"text-xs text-slate-500",children:[(i?(p=(c=l.data)==null?void 0:c.rows)==null?void 0:p.length:0)??0," record(s)"]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200 text-sm text-slate-700",children:[s.jsx("thead",{className:"bg-slate-50 text-xs uppercase text-slate-500",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2 text-left",children:"Customer Code"}),s.jsx("th",{className:"px-4 py-2 text-left",children:"Customer Name"}),s.jsx("th",{className:"px-4 py-2 text-right",children:"Received Amount"}),s.jsx("th",{className:"px-4 py-2 text-right",children:"Previous Balance"}),s.jsx("th",{className:"px-4 py-2 text-right",children:"Net Balance"}),s.jsx("th",{className:"px-4 py-2 text-left",children:"Remarks"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-100",children:i&&((m=(d=l.data)==null?void 0:d.rows)!=null&&m.length)?l.data.rows.map((x,h)=>s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsx("td",{className:"px-4 py-3 align-middle",children:x.customerCode}),s.jsx("td",{className:"px-4 py-3 align-middle",children:x.customerName}),s.jsx("td",{className:"px-4 py-3 align-middle text-right",children:Number(x.receivedAmount||0).toFixed(2)}),s.jsx("td",{className:"px-4 py-3 align-middle text-right",children:Number(x.previousBalance||0).toFixed(2)}),s.jsx("td",{className:"px-4 py-3 align-middle text-right",children:Number(x.netBalance||0).toFixed(2)}),s.jsx("td",{className:"px-4 py-3 align-middle",children:x.remarks||""})]},h)):s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"px-4 py-6 text-center text-slate-500",children:n.salesmanCode?"No receivables found for the selected criteria.":"Select a salesman to view receivables."})})})]})}),s.jsxs("footer",{className:"px-6 py-4 border-t border-slate-100 bg-slate-50 flex justify-end gap-8 text-sm text-slate-700",children:[s.jsxs("span",{children:["Total Received: ",s.jsx("strong",{children:o.totalReceived.toFixed(2)})]}),s.jsxs("span",{children:["Total Previous: ",s.jsx("strong",{children:o.totalPrevious.toFixed(2)})]}),s.jsxs("span",{children:["Total Net: ",s.jsx("strong",{children:o.totalNet.toFixed(2)})]})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{type:"button",className:"secondary",onClick:()=>{t(""),r(x=>({salesmanCode:"",salesmanDisplay:"",receiptDate:qe(new Date),voucherNo:x.voucherNo}))},children:"Clear Selection"})})]})})})},b1=[{to:"/transactions/bank/deposit",title:"Bank Deposit",description:"Record incoming funds and keep the bank balance up to date."},{to:"/transactions/bank/drawing",title:"Bank Drawing",description:"Capture withdrawals or drawings made from the bank account."}],j1=()=>s.jsx("div",{className:"space-y-6",children:s.jsx(je,{title:"Bank Transactions",description:"Choose the type of bank transaction you want to capture.",children:s.jsx("div",{className:"mt-6 grid gap-4 md:grid-cols-2",children:b1.map(e=>s.jsxs(lt,{to:e.to,className:"group block rounded-3xl border border-slate-200 bg-white p-6 text-left shadow-[0_12px_32px_rgba(15,23,42,0.08)] transition hover:-translate-y-1 hover:border-indigo-200 hover:shadow-[0_18px_45px_rgba(79,70,229,0.18)]",children:[s.jsx("h3",{className:"text-base font-semibold text-slate-800 group-hover:text-indigo-600",children:e.title}),s.jsx("p",{className:"mt-2 text-sm text-slate-500",children:e.description}),s.jsxs("span",{className:"mt-4 inline-flex items-center text-xs font-medium text-indigo-500",children:["Continue",s.jsx("svg",{"aria-hidden":"true",className:"ml-2 h-3.5 w-3.5 transition-transform group-hover:translate-x-1",viewBox:"0 0 16 16",fill:"none",children:s.jsx("path",{d:"M5.5 3.5L10 8L5.5 12.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})]})]},e.to))})})}),nr=e=>`Rs ${Number(e??0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,N1=e=>{if(!e)return e;const t=String(e).match(/^([A-Za-z]*)(\d+)$/);if(!t)return e;const[,n="",r="0"]=t,a=(parseInt(r,10)+1).toString().padStart(r.length,"0");return`${n}${a}`},ou=()=>({bankCode:"",bankName:"",slipNo:"",slipDate:new Date().toISOString().slice(0,10),amount:""}),S1=()=>{var N;const{mode:e}=dN(),t=e==="deposit"||e==="drawing"?e:null,n=t??"deposit",r=t===null,a=n==="drawing",l=a?"Drawing":"Deposit",i=Ze(),[o,u]=y.useState(""),[c,p]=y.useState(ou),[d,m]=y.useState(null),[x,h]=y.useState(null),[S,C]=y.useState(!1),[g,f]=y.useState(null),[b,R]=y.useState(0),[P,A]=y.useState({nextEntry:"BT000001"}),v=ie({queryKey:["banks",{search:o}],queryFn:async()=>(await J.get("/banks",{params:{search:o}})).data});y.useEffect(()=>{J.get("/metadata/next/bank-transaction").then(_=>{var $;($=_==null?void 0:_.data)!=null&&$.nextEntry&&A({nextEntry:_.data.nextEntry})}).catch(()=>null)},[]),y.useEffect(()=>{if(!c.bankCode){h(null),f(null),C(!1);return}let _=!0;return C(!0),f(null),J.get(`/banks/${encodeURIComponent(c.bankCode)}/metrics`).then($=>{var Q;if(!_)return;const O=(Q=$.data)==null?void 0:Q.totals;h(O?{opening:Number(O.opening??0),deposits:Number(O.deposits??0),drawings:Number(O.drawings??0),cashInBank:Number(O.cashInBank??0)}:null)}).catch($=>{_&&(h(null),f($.message))}).finally(()=>{_&&C(!1)}),()=>{_=!1}},[c.bankCode,b]);const E=Me({mutationFn:async _=>(await J.post("/bank-transactions",_)).data,onMutate:()=>m(null),onSuccess:(_,$)=>{var Q,K;const O=((Q=_==null?void 0:_.transaction)==null?void 0:Q.entry_no)||((K=_==null?void 0:_.transaction)==null?void 0:K.entryNo)||null;m({type:"success",message:O?`Transaction ${O} saved.`:"Bank transaction saved."}),p(D=>{const B=ou();return $!=null&&$.bankCode&&(B.bankCode=$.bankCode,B.bankName=($==null?void 0:$.bankName)||D.bankName||""),B}),u(""),f(null),_!=null&&_.totals?h({opening:Number(_.totals.opening??0),deposits:Number(_.totals.deposits??0),drawings:Number(_.totals.drawings??0),cashInBank:Number(_.totals.cashInBank??0)}):$!=null&&$.bankCode?R(D=>D+1):h(null),i.invalidateQueries({queryKey:["bank-deposit-report"]}),i.invalidateQueries({queryKey:["transaction-history"]}),J.get("/metadata/next/bank-transaction").then(D=>{var B;(B=D==null?void 0:D.data)!=null&&B.nextEntry&&A({nextEntry:D.data.nextEntry})}).catch(()=>{O&&A({nextEntry:N1(O)||O})})},onError:_=>{m({type:"error",message:_.message})}}),T=Number(c.amount)||0,M=x?x.cashInBank+(a?-T:T):null,U=c.bankCode&&c.slipDate&&T>0&&!E.isPending,X=y.useMemo(()=>{if(!c.bankCode)return"Select a bank";if(S)return"Calculating";if(g)return"Balance unavailable";if(!x)return"Rs 0.00";const _=nr(x.cashInBank);if(!T)return _;const $=M??x.cashInBank,O=nr(Math.max($,0));return`${_}  ${O} (${l})`},[c.bankCode,S,g,x,T,M,l]),L=y.useMemo(()=>{if(!c.bankCode)return null;if(S)return s.jsx("p",{className:"text-xs text-slate-500",children:"Calculating bank balance"});if(g)return s.jsx("p",{className:"text-xs text-rose-500",children:"Unable to load bank balance."});if(!x)return s.jsx("p",{className:"text-xs text-slate-500",children:"No bank totals recorded yet."});const _=M??x.cashInBank,$=Math.max(_,0),O=`After ${l}`;return s.jsx("div",{className:"rounded-xl border border-slate-200 bg-slate-50 px-4 py-3 text-xs text-slate-600",children:s.jsxs("div",{className:"flex flex-wrap gap-4",children:[s.jsxs("span",{children:["Opening:",s.jsx("strong",{className:"ml-1 text-slate-800",children:nr(x.opening)})]}),s.jsxs("span",{children:["Deposits:",s.jsx("strong",{className:"ml-1 text-slate-800",children:nr(x.deposits)})]}),s.jsxs("span",{children:["Drawings:",s.jsx("strong",{className:"ml-1 text-slate-800",children:nr(x.drawings)})]}),s.jsxs("span",{children:["Current Cash:",s.jsx("strong",{className:"ml-1 text-slate-800",children:nr(x.cashInBank)})]}),T>0?s.jsxs("span",{children:[O,":",s.jsx("strong",{className:"ml-1 text-slate-800",children:nr($)})]}):null]})})},[c.bankCode,S,g,x,M,T,l]),w=()=>{U&&E.mutate({type:n,transactionType:n,bankCode:c.bankCode,bankName:c.bankName,slipNo:c.slipNo||null,slipDate:c.slipDate,amount:T})},j=()=>{p(ou()),u(""),m(null),h(null),f(null),C(!1),J.get("/metadata/next/bank-transaction").then(_=>{var $;($=_==null?void 0:_.data)!=null&&$.nextEntry&&A({nextEntry:_.data.nextEntry})}).catch(()=>null)},k=y.useCallback(()=>{var Z,re,he;if(!c.bankCode||!c.slipDate){m({type:"error",message:"Select a bank and slip date before printing."});return}const _=c.slipDate?qe(c.slipDate):"-",$=Number(c.amount||0).toFixed(2),O=M!==null?Number(Math.max(M,0)).toFixed(2):$,Q=P.nextEntry||"-",K=`<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Bank Transaction</title>
    <style>
      @page { size: A4 portrait; margin: 0; }
      body { margin: 0; }
      .sheet {
        width: 210mm;
        height: 148.5mm;
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 8mm;
        box-sizing: border-box;
        font-family: 'Inter', 'Segoe UI', sans-serif;
      }
      .card {
        width: 100%;
        height: 100%;
        border: 1px solid #cbd5f5;
        border-radius: 16px;
        padding: 22px 26px;
        box-sizing: border-box;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        background: #ffffff;
        color: #0f172a;
      }
      .header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 16px;
      }
      .header h2 {
        margin: 0;
        font-size: 20px;
        letter-spacing: 0.02em;
      }
      .meta {
        width: 100%;
        border-collapse: collapse;
        font-size: 14px;
      }
      .meta th, .meta td {
        padding: 8px 12px;
        border-bottom: 1px solid #e2e8f0;
        text-align: left;
      }
      .meta th {
        width: 40%;
        font-weight: 600;
        color: #475569;
      }
      .footer {
        margin-top: 24px;
        font-size: 12px;
        color: #64748b;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
    </style>
  </head>
  <body>
    <div class="sheet">
      <div class="card">
        <div class="header">
          <h2>Bank Transaction</h2>
          <span>${new Date().toLocaleString()}</span>
        </div>
        <table class="meta">
          <tbody>
            <tr><th>Entry No.</th><td>${Q}</td></tr>
            <tr><th>Transaction Type</th><td>${l}</td></tr>
            <tr><th>Bank Code</th><td>${c.bankCode||"-"}</td></tr>
            <tr><th>Bank Name</th><td>${c.bankName||"-"}</td></tr>
            <tr><th>Slip No.</th><td>${c.slipNo||"-"}</td></tr>
            <tr><th>Slip Date</th><td>${_}</td></tr>
            <tr><th>Amount</th><td>${$}</td></tr>
            <tr><th>Cash in Bank After ${l}</th><td>${O}</td></tr>
          </tbody>
        </table>
        <div class="footer">
          <span>Generated from DIGITAL ZONE NEXUS</span>
          <span>${window.location.origin}</span>
        </div>
      </div>
    </div>
  </body>
</html>`,D=document.createElement("iframe");D.style.position="fixed",D.style.top="-10000px",D.style.left="-10000px",D.style.width="0",D.style.height="0",D.setAttribute("aria-hidden","true"),document.body.appendChild(D);const B=D.contentDocument||((Z=D.contentWindow)==null?void 0:Z.document);if(!B){document.body.removeChild(D),m({type:"error",message:"Unable to prepare print layout."});return}B.open(),B.write(K),B.close();const ee=()=>{D.contentWindow&&(D.contentWindow.focus(),D.contentWindow.print(),setTimeout(()=>{document.body.removeChild(D)},500))};((he=(re=D.contentWindow)==null?void 0:re.document)==null?void 0:he.readyState)==="complete"?ee():D.onload=ee},[c,M,m,l,P.nextEntry]),F=s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsx(H,{label:"Entry No.",children:s.jsx("input",{value:P.nextEntry||"",disabled:!0,placeholder:"Loading"})}),s.jsx(H,{label:"Transaction Type",children:s.jsx("input",{value:l,disabled:!0})}),s.jsx(ye,{label:"Bank Name",placeholder:"Search bank",value:c.bankCode?{label:`${c.bankCode}  ${c.bankName}`}:null,onSelect:_=>{if(!_){p($=>({...$,bankCode:"",bankName:""})),h(null),f(null),C(!1);return}h(null),f(null),p($=>({...$,bankCode:_.code,bankName:_.name})),R($=>$+1)},onSearch:u,results:((N=v.data)==null?void 0:N.map(_=>({value:_.id,code:_.code,name:_.name,label:`${_.code}  ${_.name}`})))??[]}),s.jsx(H,{label:"Bank Code",children:s.jsx("input",{value:c.bankCode,disabled:!0,placeholder:"Select a bank"})}),s.jsx(H,{label:"Selected Bank",children:s.jsx("input",{value:c.bankName,disabled:!0,placeholder:"Select a bank"})}),s.jsx(H,{label:"Amount",required:!0,children:s.jsx("input",{type:"number",min:"0.01",step:"0.01",value:c.amount,onChange:_=>p($=>({...$,amount:_.target.value})),placeholder:"0.00"})}),s.jsx(H,{label:"Slip No.",children:s.jsx("input",{value:c.slipNo,onChange:_=>p($=>({...$,slipNo:_.target.value})),placeholder:"Enter slip number"})}),s.jsx(H,{label:"Slip Date",required:!0,children:s.jsx("input",{type:"date",value:c.slipDate,onChange:_=>p($=>({...$,slipDate:_.target.value}))})}),s.jsx(H,{label:"Cash in Bank",className:"md:col-span-2",children:s.jsx("input",{value:X,disabled:!0,readOnly:!0,placeholder:"Select a bank"})})]}),L?s.jsx("div",{className:"mt-3",children:L}):null]});return r?s.jsx(gy,{to:"/transactions/bank",replace:!0}):s.jsx("div",{className:"space-y-6",children:s.jsx(je,{title:"Bank Transaction",description:"Capture bank deposits or drawings with running balances.",actions:s.jsxs("div",{className:"flex items-center gap-3",children:[d?s.jsx("span",{className:`text-xs ${d.type==="success"?"text-emerald-400":"text-rose-400"}`,children:d.message}):null,s.jsx(lt,{to:`/transactions/bank/${n==="deposit"?"drawing":"deposit"}`,className:"secondary text-xs px-3 py-1",children:n==="deposit"?"Switch to bank drawing":"Switch to bank deposit"}),s.jsx(lt,{to:"/transactions/bank",className:"secondary text-xs px-3 py-1",children:"Bank transaction menu"}),s.jsx(lt,{to:"/history/transactions?type=bank-deposit",className:"secondary text-xs px-3 py-1",children:"View saved transactions"})]}),children:s.jsxs("div",{className:"mt-6 bg-white border border-slate-200 rounded-3xl shadow-[0_18px_45px_rgba(15,23,42,0.12)]",children:[s.jsxs("header",{className:"px-6 py-4 border-b border-slate-100",children:[s.jsxs("h3",{className:"text-sm font-semibold text-slate-700",children:[l," Setup"]}),s.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Provide the ",l.toLowerCase()," details below."]})]}),s.jsxs("div",{className:"px-6 py-8 text-sm text-slate-500 space-y-6",children:[F,s.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-100",children:[s.jsx("button",{type:"button",className:"secondary",onClick:j,children:"Reset"}),s.jsx("button",{type:"button",className:"secondary",onClick:k,disabled:E.isPending,children:"Print"}),s.jsx("button",{type:"button",className:"primary",disabled:!U,onClick:w,children:E.isPending?"Saving...":"Save Transaction"})]})]})]})})})},w1=[{value:"customer",label:"Customer Opening Balance"},{value:"supplier",label:"Supplier Opening Balance"},{value:"bank",label:"Bank Opening Balance"}],k1={customer:{searchEndpoint:"/customers",historyKey:"customer-opening-balances",summaryKey:"customer-opening-balances-summary",submitPath:"/customer-opening-balances",payloadBuilder:({code:e,amount:t})=>({customerCode:e,amount:t}),historyFormatter:e=>({code:e.customerCode,name:e.customerName,extra:null,amount:e.amount,createdAt:e.createdAt}),summaryMetadata:{title:"Customer Opening Balances",description:"Current opening balance totals by customer.",codeHeading:"Customer Code",nameHeading:"Customer Name",extraHeading:null}},supplier:{searchEndpoint:"/suppliers",historyKey:"supplier-opening-balances",summaryKey:"supplier-opening-balances-summary",submitPath:"/supplier-opening-balances",payloadBuilder:({code:e,amount:t})=>({supplierCode:e,amount:t}),historyFormatter:e=>({code:e.supplierCode,name:e.supplierName,extra:null,amount:e.amount,createdAt:e.createdAt}),summaryMetadata:{title:"Supplier Opening Balances",description:"Current opening balance totals by supplier.",codeHeading:"Supplier Code",nameHeading:"Supplier Name",extraHeading:null}},bank:{searchEndpoint:"/banks",historyKey:"bank-opening-balances",summaryKey:"bank-opening-balances-summary",submitPath:"/bank-opening-balances",payloadBuilder:({code:e,amount:t})=>({bankCode:e,amount:t}),historyFormatter:e=>({code:e.bankCode,name:e.bankName,extra:e.accountNo,amount:e.amount,createdAt:e.createdAt}),summaryMetadata:{title:"Bank Opening Balances",description:"Current opening balance totals by bank.",codeHeading:"Bank Code",nameHeading:"Bank Name",extraHeading:"Account No."}}},mf=e=>`Rs ${Number(e??0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,C1=()=>{var R;const e=Ze(),[t,n]=y.useState("customer"),[r,a]=y.useState(""),[l,i]=y.useState(null),[o,u]=y.useState(""),[c,p]=y.useState(null),d=k1[t],m=ie({queryKey:[d.searchEndpoint,{search:r}],queryFn:async()=>(await J.get(d.searchEndpoint,{params:{search:r}})).data}),x=ie({queryKey:[d.historyKey],queryFn:async()=>(await J.get(`/${d.historyKey}`,{params:{limit:20}})).data}),h=ie({queryKey:[d.summaryKey],queryFn:async()=>(await J.get(`/${d.summaryKey}`)).data}),S=Me({mutationFn:async()=>{if(!(l!=null&&l.code))throw new Error("Select a record before saving opening balance.");const P=Number(o),A=d.payloadBuilder({code:l.code,amount:P});return(await J.post(d.submitPath,A)).data},onMutate:()=>p(null),onSuccess:()=>{p({type:"success",message:"Opening balance recorded."}),u(""),i(null),e.invalidateQueries({queryKey:[d.historyKey]}),e.invalidateQueries({queryKey:[d.summaryKey]})},onError:P=>{p({type:"error",message:P.message})}}),C=y.useMemo(()=>x.data?x.data.map(P=>d.historyFormatter(P)):[],[x.data,d]),g=y.useMemo(()=>h.data??[],[h.data]),f=P=>{if(P.preventDefault(),S.isPending)return;if(!(l!=null&&l.code)){p({type:"error",message:"Select a record."});return}const A=Number(o);if(!Number.isFinite(A)||A<=0){p({type:"error",message:"Enter a valid amount greater than zero."});return}S.mutate()},{summaryMetadata:b}=d;return s.jsxs("div",{className:"space-y-6",children:[s.jsx(je,{title:"Opening Balance",description:"Record opening balances for customers, suppliers, or banks.",children:s.jsxs("form",{className:"grid gap-4",onSubmit:f,children:[s.jsx(H,{label:"Opening Balance Category",required:!0,children:s.jsx("select",{value:t,onChange:P=>{n(P.target.value),a(""),i(null),u(""),p(null)},children:w1.map(P=>s.jsx("option",{value:P.value,children:P.label},P.value))})}),s.jsx(ye,{label:`${t.charAt(0).toUpperCase()+t.slice(1)} Record`,placeholder:`Search ${t}`,onSearch:a,onSelect:P=>i(P),value:l,results:((R=m.data)==null?void 0:R.map(P=>({value:P.id,code:P.code,label:`${P.code}  ${P.name}${P.account_no?` (${P.account_no})`:""}`})))??[]}),s.jsx(H,{label:"Amount",required:!0,children:s.jsx("input",{type:"number",step:"any",value:o,onChange:P=>u(P.target.value),required:!0})}),s.jsxs("div",{className:"flex items-center justify-end gap-4",children:[c?s.jsx("span",{className:`text-xs ${c.type==="error"?"text-rose-400":"text-emerald-500"}`,children:c.message}):null,s.jsx("button",{type:"submit",className:"primary",disabled:S.isPending,children:S.isPending?"Saving...":"Save Opening Balance"})]})]})}),s.jsx(je,{title:"Recent Opening Entries",description:`Latest opening-balance records for ${t}s.`,children:x.isLoading?s.jsx("p",{className:"text-sm text-slate-500",children:"Loading"}):C.length?s.jsx("ul",{className:"space-y-3 text-sm text-slate-700",children:C.map((P,A)=>s.jsxs("li",{className:"flex items-center justify-between rounded-2xl border border-slate-200 bg-white px-4 py-3 shadow-sm",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"font-semibold text-slate-800",children:[P.code,"  ",P.name,P.extra?s.jsx("span",{className:"ml-2 text-xs text-slate-500",children:P.extra}):null]}),s.jsxs("p",{className:"text-xs text-slate-500",children:["Logged on ",qe(P.createdAt)]})]}),s.jsx("span",{className:"text-base font-semibold text-emerald-600",children:mf(P.amount)})]},`${P.code}-${P.createdAt}-${A}`))}):s.jsx("p",{className:"text-sm text-slate-500",children:"No opening balances recorded yet."})}),s.jsx(je,{title:b.title,description:b.description,children:h.isLoading?s.jsx("p",{className:"text-sm text-slate-500",children:"Loading"}):h.error?s.jsx("p",{className:"text-sm text-rose-500",children:"Unable to load opening balance summary."}):g.length?s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full text-sm text-left text-slate-700",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-slate-200 text-xs uppercase tracking-wide text-slate-500",children:[s.jsx("th",{className:"px-3 py-2",children:b.codeHeading}),s.jsx("th",{className:"px-3 py-2",children:b.nameHeading}),b.extraHeading?s.jsx("th",{className:"px-3 py-2",children:b.extraHeading}):null,s.jsx("th",{className:"px-3 py-2 text-right",children:"Opening Balance"})]})}),s.jsx("tbody",{children:g.map(P=>s.jsxs("tr",{className:"border-b border-slate-100 last:border-0",children:[s.jsx("td",{className:"px-3 py-2 font-medium text-slate-800",children:P.code}),s.jsx("td",{className:"px-3 py-2",children:P.name}),b.extraHeading?s.jsx("td",{className:"px-3 py-2",children:P.accountNo||""}):null,s.jsx("td",{className:"px-3 py-2 text-right font-semibold text-slate-900",children:mf(P.total)})]},P.id))})]})}):s.jsx("p",{className:"text-sm text-slate-500",children:"No records found."})})]})},E1=e=>Number(e??0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),hf=e=>`Rs ${Number(e??0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,_1=()=>{const[e,t]=y.useState(""),[n,r]=y.useState(""),{data:a,isLoading:l,error:i,refetch:o}=ie({queryKey:["stock-report"],queryFn:async()=>(await J.get("/reports/stock")).data}),u=ie({queryKey:["suppliers","stock-report"],queryFn:async()=>{const h=await J.get("/suppliers",{params:{limit:1e3,offset:0}});return Array.isArray(h.data)?h.data:[]},staleTime:5*60*1e3}),c=a??[],p=y.useMemo(()=>{const h=new Map;for(const S of c)S.companyCode&&!h.has(S.companyCode)&&h.set(S.companyCode,S.company||S.companyCode);return Array.from(h.entries()).map(([S,C])=>({code:S,label:C})).sort((S,C)=>S.label.localeCompare(C.label))},[c]),d=y.useMemo(()=>{const h=u.data??[];if(h.length>0){const C=new Map;for(const g of h){if(!(g!=null&&g.code))continue;const f=g.name?`${g.code}  ${g.name}`:g.code;C.set(g.code,f)}return Array.from(C.entries()).map(([g,f])=>({code:g,label:f})).sort((g,f)=>g.label.localeCompare(f.label))}const S=new Map;for(const C of c)if(Array.isArray(C.suppliers)){for(const g of C.suppliers)if(g!=null&&g.code&&!S.has(g.code)){const f=g.name?`${g.code}  ${g.name}`:g.code;S.set(g.code,f)}}return Array.from(S.entries()).map(([C,g])=>({code:C,label:g})).sort((C,g)=>C.label.localeCompare(g.label))},[u.data,c]),m=y.useMemo(()=>c.filter(h=>{const S=e?h.companyCode===e:!0,C=n?Array.isArray(h.suppliers)&&h.suppliers.some(g=>g.code===n):!0;return S&&C}),[c,e,n]),x=!!(e||n);return s.jsx("div",{className:"space-y-6",children:s.jsxs(je,{title:"Stock Report",description:"Purchased inventory totals with weighted average cost.",actions:i||x?s.jsxs("div",{className:"flex gap-2",children:[x?s.jsx("button",{type:"button",className:"secondary text-xs px-3 py-1",onClick:()=>{t(""),r("")},children:"Clear Filters"}):null,i?s.jsx("button",{type:"button",className:"secondary text-xs px-3 py-1",onClick:()=>o(),children:"Retry"}):null]}):null,children:[i?s.jsx("div",{className:"rounded-2xl border border-rose-200 bg-white text-sm text-rose-700 px-4 py-3 shadow-[0_8px_20px_rgba(244,63,94,0.08)]",children:"Unable to load stock report."}):null,s.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[s.jsxs("label",{className:"text-sm text-slate-600 font-semibold",children:[s.jsx("span",{className:"block mb-1",children:"Company"}),s.jsxs("select",{className:"w-full rounded-xl border border-slate-200 px-3 py-2 text-sm text-slate-700 focus:outline-none focus:ring-2 focus:ring-sky-200",value:e,onChange:h=>t(h.target.value),children:[s.jsx("option",{value:"",children:"All Companies"}),p.map(h=>s.jsx("option",{value:h.code,children:h.label},h.code))]})]}),s.jsxs("label",{className:"text-sm text-slate-600 font-semibold",children:[s.jsx("span",{className:"block mb-1",children:"Supplier"}),s.jsxs("select",{className:"w-full rounded-xl border border-slate-200 px-3 py-2 text-sm text-slate-700 focus:outline-none focus:ring-2 focus:ring-emerald-200",value:n,onChange:h=>r(h.target.value),children:[s.jsx("option",{value:"",children:"All Suppliers"}),d.map(h=>s.jsx("option",{value:h.code,children:h.label},h.code))]})]})]}),s.jsx("div",{className:"overflow-hidden rounded-[26px] border border-slate-200 bg-white shadow-[0_18px_45px_rgba(15,23,42,0.08)]",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200 text-sm text-slate-700",children:[s.jsx("thead",{className:"bg-slate-100/80 text-slate-500 uppercase tracking-wide text-xs",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-5 py-3 text-left",children:"Item"}),s.jsx("th",{className:"px-5 py-3 text-left",children:"Company"}),s.jsx("th",{className:"px-5 py-3 text-right",children:"Quantity"}),s.jsx("th",{className:"px-5 py-3 text-right",children:"Unit"}),s.jsx("th",{className:"px-5 py-3 text-right",children:"Avg. Cost"}),s.jsx("th",{className:"px-5 py-3 text-right",children:"Total Value"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-100",children:l?s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"px-5 py-6 text-center text-slate-500",children:"Loading stock"})}):m.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"px-5 py-6 text-center text-slate-500",children:x?"No items match the selected filters.":"No purchased stock available yet."})}):m.map(h=>s.jsxs("tr",{className:"even:bg-slate-50/60 hover:bg-slate-100/60 transition",children:[s.jsxs("td",{className:"px-5 py-4 align-middle",children:[s.jsx("div",{className:"font-semibold text-slate-800",children:h.name}),s.jsx("div",{className:"text-xs text-slate-500",children:h.code})]}),s.jsx("td",{className:"px-5 py-4 align-middle text-slate-600",children:h.company}),s.jsx("td",{className:"px-5 py-4 align-middle text-right text-slate-800",children:E1(h.quantity)}),s.jsx("td",{className:"px-5 py-4 align-middle text-right text-slate-500",children:h.baseUnit}),s.jsx("td",{className:"px-5 py-4 align-middle text-right text-slate-800",children:hf(h.averageCost)}),s.jsx("td",{className:"px-5 py-4 align-middle text-right text-slate-900 font-semibold",children:hf(h.totalValue)})]},h.code))})]})})]})})},ff=e=>`Rs ${Number(e??0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,R1=()=>{const[e,t]=y.useState(""),{data:n,isLoading:r,error:a,refetch:l}=ie({queryKey:["bank-deposit-report"],queryFn:async()=>{const d=await J.get("/reports/bank-deposits");return Array.isArray(d.data)?d.data:[]}}),i=n??[],o=y.useMemo(()=>{const d=new Map;for(const m of i){const x=m.bank_code||"",h=m.bank_name||x;x&&!d.has(x)&&d.set(x,h?`${x}  ${h}`:x)}return Array.from(d.entries()).map(([m,x])=>({code:m,label:x})).sort((m,x)=>m.label.localeCompare(x.label))},[i]),u=y.useMemo(()=>e?i.filter(d=>d.bank_code===e):i,[i,e]),c=y.useMemo(()=>u.reduce((d,m)=>d+Number(m.cash_amount||0),0),[u]),p=!!e;return s.jsx("div",{className:"space-y-6",children:s.jsxs(je,{title:"Bank Transactions",description:"Review bank deposits and drawings recorded against accounts.",actions:a||p?s.jsxs("div",{className:"flex gap-2",children:[p?s.jsx("button",{type:"button",className:"secondary text-xs px-3 py-1",onClick:()=>t(""),children:"Clear Filter"}):null,a?s.jsx("button",{type:"button",className:"secondary text-xs px-3 py-1",onClick:()=>l(),children:"Retry"}):null]}):null,children:[a?s.jsx("div",{className:"rounded-2xl border border-rose-200 bg-white text-sm text-rose-700 px-4 py-3 shadow-[0_8px_20px_rgba(244,63,94,0.08)]",children:"Unable to load bank deposits."}):null,s.jsx("div",{className:"grid gap-4 md:grid-cols-3",children:s.jsxs("label",{className:"text-sm text-slate-600 font-semibold",children:[s.jsx("span",{className:"block mb-1",children:"Bank"}),s.jsxs("select",{className:"w-full rounded-xl border border-slate-200 px-3 py-2 text-sm text-slate-700 focus:outline-none focus:ring-2 focus:ring-emerald-200",value:e,onChange:d=>t(d.target.value),children:[s.jsx("option",{value:"",children:"All Banks"}),o.map(d=>s.jsx("option",{value:d.code,children:d.label},d.code))]})]})}),s.jsx("div",{className:"overflow-hidden rounded-[26px] border border-slate-200 bg-white shadow-[0_18px_45px_rgba(15,23,42,0.08)]",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200 text-sm text-slate-700",children:[s.jsx("thead",{className:"bg-slate-100/80 text-slate-500 uppercase tracking-wide text-xs",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-5 py-3 text-left",children:"Bank"}),s.jsx("th",{className:"px-5 py-3 text-left",children:"Entry No."}),s.jsx("th",{className:"px-5 py-3 text-left",children:"Type"}),s.jsx("th",{className:"px-5 py-3 text-left",children:"Reference"}),s.jsx("th",{className:"px-5 py-3 text-left",children:"Slip No."}),s.jsx("th",{className:"px-5 py-3 text-left",children:"Deposit Date"}),s.jsx("th",{className:"px-5 py-3 text-right",children:"Amount"}),s.jsx("th",{className:"px-5 py-3 text-left",children:"Created"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-100",children:r?s.jsx("tr",{children:s.jsx("td",{colSpan:8,className:"px-5 py-6 text-center text-slate-500",children:"Loading deposits"})}):u.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:8,className:"px-5 py-6 text-center text-slate-500",children:p?"No deposits match the selected bank.":"No bank deposits recorded yet."})}):u.map(d=>s.jsxs("tr",{className:"even:bg-slate-50/60 hover:bg-slate-100/60 transition",children:[s.jsxs("td",{className:"px-5 py-4 align-middle",children:[s.jsx("div",{className:"font-semibold text-slate-800",children:d.bank_name||d.bank_code||"Unspecified"}),s.jsx("div",{className:"text-xs text-slate-500",children:d.bank_code||"-"})]}),s.jsx("td",{className:"px-5 py-4 align-middle text-slate-600",children:d.entry_no||"-"}),s.jsx("td",{className:"px-5 py-4 align-middle text-slate-600",children:(d.transaction_type||"deposit").charAt(0).toUpperCase()+(d.transaction_type||"deposit").slice(1)}),s.jsx("td",{className:"px-5 py-4 align-middle text-slate-600",children:d.customer_receipt_no?`Receipt ${d.customer_receipt_no}`:"Manual Entry"}),s.jsx("td",{className:"px-5 py-4 align-middle text-slate-600",children:d.slip_no||"-"}),s.jsx("td",{className:"px-5 py-4 align-middle text-slate-600",children:d.slip_date||"-"}),s.jsx("td",{className:"px-5 py-4 align-middle text-right font-semibold text-slate-900",children:ff(d.cash_amount)}),s.jsx("td",{className:"px-5 py-4 align-middle text-slate-500 text-xs",children:d.created_at?new Date(d.created_at).toLocaleString():"-"})]},d.id))}),s.jsx("tfoot",{className:"bg-slate-100/70 text-slate-600 text-sm",children:s.jsxs("tr",{children:[s.jsx("td",{className:"px-5 py-3",colSpan:6,children:"Total Amount"}),s.jsx("td",{className:"px-5 py-3 text-right font-semibold text-slate-900",children:ff(c)}),s.jsx("td",{className:"px-5 py-3"})]})})]})})]})})},pt=e=>`Rs ${Number(e??0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,xf=e=>{const t=Number(e??0);return Math.abs(t)>1e-4?pt(Math.abs(t)):""},yf=e=>{const t=Number(e??0);return Math.abs(t)<1e-4?pt(0):`${pt(Math.abs(t))} ${t>=0?"Dr":"Cr"}`},D1=e=>{if(!e)return"";if(e.description)return e.description;const t={sale:"Sale Invoice",receipt:"Cash Received","sale-return":"Sale Return",adjustment:"Adjustment",credit:"Credit Note"};if(t[e.type])return t[e.type];const n=(e.type||"").replace(/[-_]/g," ").trim();return n?n.replace(/\b\w/g,r=>r.toUpperCase()):"Entry"},gf=()=>{const e=on();return{startDate:e.startOf("month").format("DD-MM-YYYY"),endDate:e.format("DD-MM-YYYY"),customerCode:"",customerLabel:"All customers"}},P1=()=>{var T,M,U,X,L;const e=y.useMemo(()=>gf(),[]),[t,n]=y.useState(e),[r,a]=y.useState(e),[l,i]=y.useState(""),o=y.useRef(null),u=ie({queryKey:["receivable-customer-ledger",r.startDate,r.endDate,r.customerCode||""],enabled:!!(r.startDate&&r.endDate),queryFn:async()=>{const w={startDate:r.startDate,endDate:r.endDate,mode:"detail"};return r.customerCode&&(w.customerCode=r.customerCode),(await J.get("/reports/receivables/customer-ledger",{params:w})).data}}),c=ie({queryKey:["customers",{search:l}],queryFn:async()=>{const w=await J.get("/customers",{params:{search:l}});return Array.isArray(w.data)?w.data:[]}}),p=((T=u.data)==null?void 0:T.rows)??[],d=((M=u.data)==null?void 0:M.totals)??{opening:0,sales:0,returns:0,receipts:0,closing:0},m=((U=u.data)==null?void 0:U.details)??[],x=(d.opening??0)+(d.sales??0),h=(d.returns??0)+(d.receipts??0),S="All customers",C=y.useMemo(()=>{const w=(c.data??[]).map(j=>({value:j.id,code:j.code,label:`${j.code}  ${j.name}`}));return[{value:"__all__",code:"",label:S},...w]},[c.data]),g=w=>{w.preventDefault(),!(!t.startDate||!t.endDate)&&a(j=>j.startDate===t.startDate&&j.endDate===t.endDate&&j.customerCode===t.customerCode?j:{...t})},f=()=>{const w=gf();n(w),a(w),i("")},b=p.length>0,R=m.length>0,P=b||R,A=y.useMemo(()=>{var j;if(!R)return[];const w=((j=u.data)==null?void 0:j.startDate)||r.startDate||"";return m.map(k=>{const F=Array.isArray(k.entries)?k.entries:[],N=[];let _=Number(k.openingBalance??0);N.push({kind:"opening",key:`${k.customerCode}-opening`,date:w,reference:"",description:"Opening Balance",debit:_>=0?_:0,credit:_<0?Math.abs(_):0,balance:_});for(let $=0;$<F.length;$+=1){const O=F[$],Q=Number(O.balanceAfter??_),K=Q-_;N.push({kind:"transaction",key:`${k.customerCode}-${O.reference||"row"}-${$}`,date:O.date||"",reference:O.reference||"",description:D1(O),debit:K>=0?K:0,credit:K<0?Math.abs(K):0,balance:Q}),_=Q}return{...k,ledgerRows:N,closingBalance:N.length?N[N.length-1].balance:k.openingBalance}})},[r.startDate,m,R,(X=u.data)==null?void 0:X.startDate]),v=`
    <style>
      @page { size: A4 portrait; margin: 16mm 14mm 18mm 14mm; }
      body { font-family: Arial, sans-serif; color: #0f172a; margin: 0; padding: 18px; }
      h1 { font-size: 20px; margin-bottom: 12px; text-align: center; }
      h2 { font-size: 14px; margin-top: 18px; margin-bottom: 8px; }
      table { width: 100%; border-collapse: collapse; margin-top: 12px; font-size: 12px; }
      th, td { border: 1px solid #e2e8f0; padding: 6px 8px; text-align: left; }
      th { background: #eff6ff; text-transform: uppercase; font-size: 10px; letter-spacing: 0.05em; }
      tfoot td { font-weight: 600; background: #f1f5f9; }
      .subheading { font-size: 12px; font-weight: 600; margin-top: 16px; color: #475569; }
    </style>
  `,E=()=>{if(!o.current||!P)return;const w=o.current.cloneNode(!0),j=window.open("","_blank","width=1024,height=768");if(!j)return;const{document:k}=j;k.open(),k.write(`<!doctype html><html><head><meta charset="utf-8" /><title>Receivable  Customer Ledger</title>${v}</head><body><h1>Receivable  Customer Ledger</h1></body></html>`),k.close();const F=()=>{const N=k.body;if(!N)return;const _=k.createElement("p");_.textContent=`Range ${r.startDate}  ${r.endDate}${r.customerCode?`  Customer ${r.customerLabel||r.customerCode}`:""}`,_.style.fontSize="11px",_.style.marginBottom="12px",N.insertBefore(_,N.children[1]||null),N.appendChild(w),setTimeout(()=>{j.focus(),j.print()},80)};k.readyState==="complete"?F():j.addEventListener("load",F,{once:!0})};return s.jsx("div",{className:"space-y-6",children:s.jsxs(je,{title:"Receivable  Customer Ledger",description:"Summarize outstanding receivables over a date range.",actions:u.isFetching?s.jsx("span",{className:"text-xs text-slate-500",children:"Updating"}):u.data?s.jsxs("div",{className:"flex items-center gap-3 text-xs text-slate-500",children:[s.jsxs("span",{children:["Range ",u.data.startDate,"  ",u.data.endDate,r.customerCode?`  Customer ${r.customerLabel||r.customerCode}`:""]}),P?s.jsx("button",{type:"button",onClick:E,className:"inline-flex items-center gap-1.5 rounded-xl border border-slate-200 bg-white px-3 py-1.5 text-xs font-medium text-slate-600 shadow-sm transition hover:border-emerald-200 hover:text-emerald-600 hover:ring-2 hover:ring-emerald-100",children:"Print ledger"}):null]}):null,children:[s.jsxs("form",{className:"grid gap-4 md:grid-cols-6",onSubmit:g,children:[s.jsxs("label",{className:"text-sm text-slate-600 font-semibold md:col-span-2",children:[s.jsx("span",{className:"block mb-1",children:"Start Date"}),s.jsx("input",{className:"w-full rounded-xl border border-slate-200 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-emerald-200",value:t.startDate,onChange:w=>n(j=>({...j,startDate:w.target.value})),placeholder:"DD-MM-YYYY"})]}),s.jsxs("label",{className:"text-sm text-slate-600 font-semibold md:col-span-2",children:[s.jsx("span",{className:"block mb-1",children:"End Date"}),s.jsx("input",{className:"w-full rounded-xl border border-slate-200 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-emerald-200",value:t.endDate,onChange:w=>n(j=>({...j,endDate:w.target.value})),placeholder:"DD-MM-YYYY"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx(ye,{label:"Customer (optional)",placeholder:"Search customer",dataTestId:"customer-ledger-customer",value:{label:t.customerLabel||S},onSelect:w=>{const j={...t,customerCode:w.code||"",customerLabel:w.code?w.label:S};i(""),n(j),j.startDate&&j.endDate&&a(j)},onSearch:i,results:C}),t.customerCode?s.jsx("button",{type:"button",className:"mt-2 text-xs text-emerald-600 underline",onClick:()=>{const w={...t,customerCode:"",customerLabel:S};n(w),w.startDate&&w.endDate&&a(w)},children:"Clear customer filter"}):null]}),s.jsxs("div",{className:"flex items-end gap-2 md:col-span-2 lg:col-span-1",children:[s.jsx("button",{type:"submit",className:"primary text-xs px-4 py-2",children:u.isFetching&&r.startDate===t.startDate&&r.endDate===t.endDate&&r.customerCode===t.customerCode?"Generating":"Generate"}),s.jsx("button",{type:"button",className:"secondary text-xs px-4 py-2",onClick:f,children:"Reset"})]})]}),u.isError?s.jsx("div",{className:"rounded-2xl border border-rose-200 bg-white px-4 py-3 text-sm text-rose-700 shadow-[0_8px_20px_rgba(244,63,94,0.08)]",children:((L=u.error)==null?void 0:L.message)||"Unable to generate ledger."}):null,s.jsxs("div",{ref:o,className:"space-y-6",children:[s.jsx("div",{className:"overflow-hidden rounded-[22px] border border-slate-200 bg-white shadow-[0_18px_45px_rgba(15,23,42,0.08)]",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200 text-sm text-slate-700",children:[s.jsx("thead",{className:"bg-slate-50 text-slate-500 uppercase tracking-wide text-xs",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-5 py-3 text-left",children:"Customer"}),s.jsx("th",{className:"px-5 py-3 text-right",children:"Opening"}),s.jsx("th",{className:"px-5 py-3 text-right",children:"Sales"}),s.jsx("th",{className:"px-5 py-3 text-right",children:"Returns"}),s.jsx("th",{className:"px-5 py-3 text-right",children:"Receipts"}),s.jsx("th",{className:"px-5 py-3 text-right",children:"Closing"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-100",children:u.isLoading?s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"px-5 py-6 text-center text-slate-500",children:"Generating ledger"})}):b?p.map(w=>s.jsxs("tr",{className:"even:bg-slate-50/60 hover:bg-slate-100/60 transition",children:[s.jsxs("td",{className:"px-5 py-4 align-middle",children:[s.jsx("div",{className:"font-semibold text-slate-800",children:w.customerName||w.customerCode}),s.jsx("div",{className:"text-xs text-slate-500",children:w.customerCode})]}),s.jsx("td",{className:"px-5 py-4 align-middle text-right text-slate-800",children:pt(w.openingBalance)}),s.jsx("td",{className:"px-5 py-4 align-middle text-right text-slate-800",children:pt(w.salesAmount)}),s.jsx("td",{className:"px-5 py-4 align-middle text-right text-slate-800",children:pt(w.returnsAmount)}),s.jsx("td",{className:"px-5 py-4 align-middle text-right text-slate-800",children:pt(w.receiptsAmount)}),s.jsx("td",{className:"px-5 py-4 align-middle text-right font-semibold text-slate-900",children:pt(w.closingBalance)})]},w.customerCode)):s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"px-5 py-6 text-center text-slate-500",children:"No receivable activity for the selected range."})})}),b?s.jsx("tfoot",{className:"bg-slate-50 text-slate-600 text-sm",children:s.jsxs("tr",{children:[s.jsx("td",{className:"px-5 py-3 font-semibold text-slate-700",children:"Totals"}),s.jsx("td",{className:"px-5 py-3 text-right font-semibold text-slate-900",children:pt(d.opening)}),s.jsx("td",{className:"px-5 py-3 text-right font-semibold text-slate-900",children:pt(d.sales)}),s.jsx("td",{className:"px-5 py-3 text-right font-semibold text-slate-900",children:pt(d.returns)}),s.jsx("td",{className:"px-5 py-3 text-right font-semibold text-slate-900",children:pt(d.receipts)}),s.jsx("td",{className:"px-5 py-3 text-right font-semibold text-slate-900",children:pt(d.closing)})]})}):null]})}),R?s.jsx("div",{className:"space-y-6 pt-6",children:A.map(w=>s.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white shadow-[0_18px_45px_rgba(15,23,42,0.06)]",children:[s.jsx("div",{className:"flex flex-wrap items-center justify-between gap-3 border-b border-slate-100 px-5 py-4",children:s.jsxs("div",{children:[s.jsxs("div",{className:"text-sm font-semibold text-slate-800",children:[w.customerName," (",w.customerCode,")"]}),s.jsxs("div",{className:"text-xs text-slate-500",children:["Opening ",pt(w.openingBalance),"  Closing ",pt(w.closingBalance)]})]})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200 text-xs text-slate-700",children:[s.jsx("thead",{className:"bg-slate-50 text-slate-500 uppercase tracking-wide",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left",children:"Date"}),s.jsx("th",{className:"px-4 py-3 text-left",children:"Ref No"}),s.jsx("th",{className:"px-4 py-3 text-left",children:"Description"}),s.jsx("th",{className:"px-4 py-3 text-right",children:"Debit (Dr)"}),s.jsx("th",{className:"px-4 py-3 text-right",children:"Credit (Cr)"}),s.jsx("th",{className:"px-4 py-3 text-right",children:"Running Balance"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-100",children:w.ledgerRows.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"px-4 py-6 text-center text-slate-500",children:"No activity found within range."})}):w.ledgerRows.map(j=>s.jsxs("tr",{className:j.kind==="opening"?"bg-slate-50/60":"bg-white",children:[s.jsx("td",{className:"px-4 py-3 text-slate-600",children:j.date||""}),s.jsx("td",{className:"px-4 py-3 font-medium text-slate-700",children:j.reference}),s.jsx("td",{className:"px-4 py-3 text-slate-600",children:j.description}),s.jsx("td",{className:"px-4 py-3 text-right text-slate-700",children:xf(j.debit)}),s.jsx("td",{className:"px-4 py-3 text-right text-slate-700",children:xf(j.credit)}),s.jsx("td",{className:"px-4 py-3 text-right font-semibold text-slate-900",children:yf(j.balance)})]},j.key))})]})})]},w.customerCode||w.customerName))}):null,b?s.jsxs("div",{className:"grid gap-3 rounded-2xl border border-slate-200 bg-white p-5 shadow-[0_12px_30px_rgba(15,23,42,0.05)] sm:grid-cols-3",children:[s.jsxs("div",{className:"flex items-center justify-between gap-3 rounded-xl border border-slate-100 bg-slate-50 px-4 py-3",children:[s.jsxs("div",{className:"text-sm font-semibold text-slate-600",children:["Total Debit",s.jsx("span",{className:"ml-2 text-xs font-normal text-slate-500",children:"(Opening + Sales)"})]}),s.jsx("div",{className:"text-sm font-semibold text-slate-900",children:pt(x)})]}),s.jsxs("div",{className:"flex items-center justify-between gap-3 rounded-xl border border-slate-100 bg-slate-50 px-4 py-3",children:[s.jsxs("div",{className:"text-sm font-semibold text-slate-600",children:["Total Credit",s.jsx("span",{className:"ml-2 text-xs font-normal text-slate-500",children:"(Returns + Receipts)"})]}),s.jsx("div",{className:"text-sm font-semibold text-slate-900",children:pt(h)})]}),s.jsxs("div",{className:"flex items-center justify-between gap-3 rounded-xl border border-slate-100 bg-slate-50 px-4 py-3 sm:col-span-1",children:[s.jsxs("div",{className:"text-sm font-semibold text-slate-600",children:["Closing Balance",s.jsx("span",{className:"ml-2 text-xs font-normal text-slate-500",children:"(Dr if +ve  Cr if -ve)"})]}),s.jsx("div",{className:"text-sm font-semibold text-slate-900",children:yf(d.closing)})]})]}):null]})]})})},M1=e=>({code:e.item_code||e.code,name:e.item_name||e.name,baseUnit:e.base_unit||e.baseUnit||"",companyName:e.company_name||e.companyName||"",quantity:e.quantity!==void 0?String(Number(e.quantity)||0):"",bonus:e.bonus!==void 0?String(Number(e.bonus)||0):"",tradeOffPrice:e.trade_off_price!==void 0?String(Number(e.trade_off_price)||0):String(e.tradeOffPrice??""),discountPercent:e.discount_percent!==void 0?String(Number(e.discount_percent)||0):String(e.discountPercent??""),tradePrice:e.trade_price!==void 0?String(Number(e.trade_price)||0):String(e.tradePrice??"")}),L1=()=>{var O,Q,K;const[e,t]=y.useState(""),[n,r]=y.useState(null),[a,l]=y.useState(""),[i,o]=y.useState(null),[u,c]=y.useState(null),[p,d]=y.useState(!1),[m,x]=y.useState(""),[h,S]=y.useState(""),[C,g]=y.useState(!1),[f,b]=y.useState(""),[R,P]=y.useState({customerCode:"",customerDisplay:"",salesmanCode:"",salesmanDisplay:"",date:qe(new Date),items:[],amountPaid:"",previousBalance:""}),A=Ze(),v=ie({queryKey:["sales",{search:a}],queryFn:async()=>(await J.get("/sales",{params:{search:a}})).data}),E=y.useMemo(()=>{var D;return((D=v.data)==null?void 0:D.map(B=>({value:B.invoice_no,invoiceNo:B.invoice_no,label:`${B.invoice_no}  ${B.customer_name}`,meta:B})))??[]},[v.data]);y.useEffect(()=>{v.error&&r({type:"error",message:v.error.message})},[v.error]);const T=ie({queryKey:["customers",{search:m}],queryFn:async()=>(await J.get("/customers",{params:{search:m}})).data}),M=ie({queryKey:["salesmen",{search:h}],queryFn:async()=>(await J.get("/salesmen",{params:{search:h}})).data}),U=ie({queryKey:["items",{search:f,inStock:!0}],queryFn:async()=>(await J.get("/items",{params:{search:f,inStock:!0}})).data}),X=y.useMemo(()=>{const D=R.items.reduce((Z,re)=>{const he=Number(re.quantity)||0,ge=Number(re.tradePrice)||0,Te=Number(re.discountPercent)||0;return Z+he*ge*(1-Te/100)},0),B=Number(R.amountPaid)||0,ee=Number(R.previousBalance)||0;return{totalAmount:D,netAmount:D-B+ee}},[R.items,R.amountPaid,R.previousBalance]),L=D=>{if(!(D!=null&&D.sale))return;const B=D.sale,ee=B.invoice_date?qe(B.invoice_date):"",Z=Number(B.amount_paid??0),re=Number(B.previous_balance??0);c(D),P({customerCode:B.customer_code||"",customerDisplay:B.customer_code&&B.customer_name?`${B.customer_code}  ${B.customer_name}`:B.customer_code||"",salesmanCode:B.salesman_code||"",salesmanDisplay:B.salesman_code&&B.salesman_name?`${B.salesman_code}  ${B.salesman_name}`:B.salesman_code||"",date:ee,items:Array.isArray(D.items)?D.items.map(M1):[],amountPaid:Z?Z.toString():"",previousBalance:re?re.toString():"0"}),o({value:B.invoice_no,invoiceNo:B.invoice_no,label:`${B.invoice_no}  ${B.customer_name||""}`.trim()}),t(B.invoice_no||e),r({type:"success",message:"Invoice loaded. You can now edit the details."})},w=async D=>{var ee,Z;const B=D.trim();if(!B){r({type:"error",message:"Enter the invoice number to load."});return}d(!0),r({type:"info",message:"Loading invoice details"});try{const re=await J.get(`/sales/${encodeURIComponent(B)}`);L(re.data)}catch(re){const he=((Z=(ee=re==null?void 0:re.response)==null?void 0:ee.data)==null?void 0:Z.message)||(re==null?void 0:re.message)||"Failed to load invoice.";c(null),r({type:"error",message:he})}finally{d(!1)}},j=D=>{P(B=>({...B,items:[...B.items,{code:D.code,name:D.name,baseUnit:D.base_unit,companyName:D.company_name,quantity:"",bonus:"",tradeOffPrice:"",discountPercent:"",tradePrice:D.trade_rate!==void 0?String(D.trade_rate):""}]})),g(!1)},k=(D,B,ee)=>{P(Z=>({...Z,items:Z.items.map((re,he)=>he===D?{...re,[B]:ee}:re)}))},F=D=>{P(B=>({...B,items:B.items.filter((ee,Z)=>Z!==D)}))},N=()=>{if(!R.customerCode){typeof window<"u"&&window.alert("Select a customer before adding items.");return}g(!0)},_=Me({mutationFn:async(D={})=>{if(!e)throw new Error("Load an invoice before saving.");const B=!!(D!=null&&D.allowNegativeStock),ee={customerCode:R.customerCode,salesmanCode:R.salesmanCode,date:R.date,amountPaid:Number(R.amountPaid)||0,previousBalance:Number(R.previousBalance)||0,tradeOffTotal:Number(X.netAmount.toFixed(2)),allowNegativeStock:B,items:R.items.map(re=>({itemCode:re.code,quantity:Number(re.quantity)||0,bonus:Number(re.bonus)||0,discountPercent:Number(re.discountPercent)||0,tradePrice:Number(re.tradePrice)||0,tradeOffPrice:Number(re.tradeOffPrice)||0,companyName:re.companyName}))};return(await J.put(`/sales/${encodeURIComponent(e)}`,ee)).data},onMutate:()=>r(null),onSuccess:D=>{L(D),A.invalidateQueries({queryKey:["sales"]})},onError:D=>{var ee,Z;const B=((Z=(ee=D==null?void 0:D.response)==null?void 0:ee.data)==null?void 0:Z.message)||D.message||"Failed to update invoice.";r({type:"error",message:B})}}),$=async D=>{var ee;if(D.preventDefault(),_.isPending)return;if(!e){r({type:"error",message:"Load an invoice before saving."});return}if(!R.customerCode){r({type:"error",message:"Customer is required."});return}if(R.items.length===0){r({type:"error",message:"Add at least one item before saving."});return}if(R.items.some(Z=>!Z.quantity||Number(Z.quantity)<=0)){r({type:"error",message:"Enter quantity for each item before saving."}),typeof window<"u"&&window.alert("Quantity is required for all items.");return}try{await _.mutateAsync(),r({type:"success",message:"Invoice updated successfully."})}catch(Z){const re=(ee=Z==null?void 0:Z.response)==null?void 0:ee.data;if((re==null?void 0:re.code)==="LOW_STOCK"){const ge=(Array.isArray(re.details)?re.details:[]).map(Be=>{const wt=Be.itemCode||Be.itemName||"Item",dt=Number(Be.required??0).toFixed(2),Lt=Number(Be.available??0).toFixed(2),_n=Number.isFinite(Be.shortage)?`  Short by ${Number(Be.shortage).toFixed(2)}`:"";return`${wt}  Required ${dt}, Available ${Lt}${_n}`}),Te=[re.message||Z.message||"Negative stock detected."];ge.length>0&&Te.push("",...ge),Te.push("","Proceed with negative stock?");const ve=Te.join(`
`);if(typeof window<"u"?window.confirm(ve):!1)try{await _.mutateAsync({allowNegativeStock:!0}),r({type:"success",message:"Invoice updated with negative stock allowance."})}catch(Be){r({type:"error",message:Be.message})}else r({type:"error",message:"Invoice not saved. Adjust quantities or restock items."})}else{const he=(re==null?void 0:re.message)||Z.message||"Failed to update invoice.";r({type:"error",message:he})}}};return s.jsxs("div",{className:"space-y-6",children:[s.jsx(je,{title:"Edit Sales Invoice",description:"Load an existing invoice, adjust the details, and save the updated record.",children:s.jsxs("form",{className:"grid gap-4",onSubmit:D=>{D.preventDefault(),w(e)},children:[s.jsx(ye,{label:"Search Sales",placeholder:"Search by customer name or invoice number",value:i,onSelect:D=>{o(D),t(D.invoiceNo),c(null),r(null)},onSearch:l,results:E,renderItem:D=>s.jsxs("div",{className:"flex flex-col text-slate-700",children:[s.jsx("span",{className:"font-medium text-sm text-slate-800",children:D.label}),s.jsxs("span",{className:"text-xs text-slate-500",children:["Net Amount: ",Number(D.meta.total_amount??0).toFixed(2)]})]})}),v.isFetching?s.jsx("p",{className:"text-xs text-slate-500",children:"Searching"}):null,s.jsx(H,{label:"Invoice No.",children:s.jsx("input",{value:e,readOnly:!0,placeholder:"Select an invoice from the search above"})}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{type:"submit",className:"primary text-sm",disabled:p,children:p?"Loading":"Load Invoice"}),s.jsx("button",{type:"button",className:"secondary text-sm",onClick:()=>{t(""),r(null),o(null),l(""),c(null),P({customerCode:"",customerDisplay:"",salesmanCode:"",salesmanDisplay:"",date:qe(new Date),items:[],amountPaid:"",previousBalance:""})},children:"Reset"})]}),n?s.jsx("p",{className:`text-sm ${n.type==="error"?"text-rose-500":n.type==="info"?"text-sky-600":"text-emerald-600"}`,children:n.message}):null]})}),u?s.jsx(je,{title:`Editing Invoice ${e}`,description:"Adjust customer, items, and payment details, then save your changes.",actions:s.jsx(lt,{to:"/history/transactions?type=sales",className:"secondary text-xs px-3 py-1",children:"View history"}),children:s.jsxs("form",{className:"grid gap-4",onSubmit:$,children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-4",children:[s.jsx(ye,{label:"Customer",placeholder:"Search customer",value:R.customerCode?{label:R.customerDisplay||R.customerCode}:null,onSelect:D=>P(B=>({...B,customerCode:D.code,customerDisplay:`${D.code}  ${D.name}`})),onSearch:x,results:((O=T.data)==null?void 0:O.map(D=>({value:D.id,code:D.code,name:D.name,label:`${D.code}  ${D.name}`})))??[]}),s.jsx(H,{label:"Invoice Date",required:!0,children:s.jsx("input",{value:R.date,onChange:D=>P(B=>({...B,date:D.target.value}))})}),s.jsx(ye,{label:"Salesman",placeholder:"Search salesman",value:R.salesmanCode?{label:R.salesmanDisplay||R.salesmanCode}:null,onSelect:D=>P(B=>({...B,salesmanCode:D.code,salesmanDisplay:`${D.code}  ${D.name}`})),onSearch:S,results:((Q=M.data)==null?void 0:Q.map(D=>({value:D.id,code:D.code,name:D.name,label:`${D.code}  ${D.name}`})))??[]})]}),s.jsxs("div",{className:"border border-slate-200 bg-white rounded-[24px] overflow-hidden shadow-[0_20px_55px_rgba(15,23,42,0.12)]",children:[s.jsxs("header",{className:"flex items-center justify-between px-5 py-4 border-b border-slate-200 bg-gradient-to-r from-sky-900 via-sky-700 to-emerald-500 text-white",children:[s.jsx("h3",{className:"text-sm font-semibold tracking-wide uppercase",children:"Items"}),s.jsx("button",{type:"button",className:"bg-white/15 hover:bg-white/25 text-xs font-semibold text-white px-3 py-1.5 rounded-lg transition",onClick:N,children:"Add Item"})]}),s.jsx("div",{className:"divide-y divide-slate-100",children:R.items.length===0?s.jsx("p",{className:"p-5 text-sm text-slate-500",children:"No items yet"}):R.items.map((D,B)=>s.jsxs("div",{className:"grid gap-3 md:grid-cols-2 xl:grid-cols-8 items-start px-5 py-4 text-sm text-slate-700",children:[s.jsxs("div",{className:"md:col-span-2 xl:col-span-3",children:[s.jsxs("p",{className:"font-medium text-slate-800",children:[D.code,"  ",D.name]}),s.jsxs("p",{className:"text-xs text-slate-500",children:["Company: ",D.companyName||""]}),s.jsxs("p",{className:"text-xs text-slate-500",children:["Base Unit: ",D.baseUnit||""]})]}),s.jsx("div",{className:"md:col-span-1 xl:col-span-1",children:s.jsx("input",{className:"w-full",type:"number",placeholder:"Quantity",value:D.quantity,onChange:ee=>k(B,"quantity",ee.target.value)})}),s.jsx("div",{className:"md:col-span-1 xl:col-span-1",children:s.jsx("input",{className:"w-full",type:"number",placeholder:"Bonus",value:D.bonus,onChange:ee=>k(B,"bonus",ee.target.value)})}),s.jsx("div",{className:"md:col-span-1 xl:col-span-1",children:s.jsx("input",{className:"w-full",type:"number",placeholder:"Trade Off Price",value:D.tradeOffPrice,onChange:ee=>k(B,"tradeOffPrice",ee.target.value)})}),s.jsx("div",{className:"md:col-span-1 xl:col-span-1",children:s.jsx("input",{className:"w-full",type:"number",placeholder:"Discount %",value:D.discountPercent,onChange:ee=>k(B,"discountPercent",ee.target.value)})}),s.jsx("div",{className:"md:col-span-1 xl:col-span-1",children:s.jsx("input",{className:"w-full",type:"number",placeholder:"Trade Price",value:D.tradePrice,onChange:ee=>k(B,"tradePrice",ee.target.value)})}),s.jsx("button",{type:"button",className:"secondary text-xs md:col-span-2 xl:col-span-1 justify-self-end",onClick:()=>F(B),children:"Remove"})]},`${D.code}-${B}`))})]}),s.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[s.jsx(H,{label:"Total Amount",children:s.jsx("input",{value:X.totalAmount.toFixed(2),disabled:!0})}),s.jsx(H,{label:"Amount Paid",children:s.jsx("input",{type:"number",value:R.amountPaid,onChange:D=>P(B=>({...B,amountPaid:D.target.value}))})}),s.jsx(H,{label:"Previous Balance",children:s.jsx("input",{type:"number",value:R.previousBalance,onChange:D=>P(B=>({...B,previousBalance:D.target.value}))})}),s.jsx(H,{label:"Net Balance After Payment",children:s.jsx("input",{value:X.netAmount.toFixed(2),disabled:!0})})]}),s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx("button",{type:"button",className:"secondary",onClick:()=>P(D=>({...D,items:[]})),disabled:_.isPending,children:"Clear Items"}),s.jsx("button",{type:"submit",className:"primary",disabled:_.isPending,children:_.isPending?"Saving":"Save Changes"})]}),n?s.jsx("p",{className:`text-sm ${n.type==="error"?"text-rose-500":n.type==="info"?"text-sky-600":"text-emerald-600"}`,children:n.message}):null]})}):null,C?s.jsx("div",{className:"fixed inset-0 bg-slate-900/30 backdrop-blur flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl shadow-[0_24px_60px_rgba(15,23,42,0.18)] w-full max-w-3xl h-[70vh] grid grid-rows-[auto,1fr]",children:[s.jsxs("header",{className:"p-5 border-b border-slate-200 flex items-center justify-between text-slate-800",children:[s.jsx("h3",{className:"text-sm font-semibold",children:"Select Item"}),s.jsx("button",{className:"secondary text-xs",onClick:()=>g(!1),children:"Close"})]}),s.jsxs("div",{className:"p-5 space-y-4 overflow-y-auto scrollbar-thin text-slate-700",children:[s.jsx("input",{placeholder:"Search item",value:f,onChange:D=>b(D.target.value)}),s.jsx("div",{className:"grid gap-3",children:((K=U.data)==null?void 0:K.map(D=>s.jsxs("button",{type:"button",className:"flex justify-between items-center bg-white border border-slate-200 rounded-2xl px-5 py-4 hover:bg-slate-50 shadow-sm transition",onClick:()=>j(D),children:[s.jsxs("div",{children:[s.jsxs("p",{className:"font-semibold text-slate-800",children:[D.code,"  ",D.name]}),s.jsxs("p",{className:"text-xs text-slate-500",children:[D.company_name,"  ",D.base_unit]})]}),s.jsxs("span",{className:"text-sm text-slate-600",children:["Trade Rate: ",D.trade_rate]})]},D.id)))??s.jsx("p",{className:"text-sm text-slate-500",children:"No results"})})]})]})}):null]})},Hi={supplierCode:"",supplierDisplay:"",lastInvoice:"",date:"",items:[],amountPaid:"",previousBalance:""},F1=()=>{var Q,K;const[e,t]=y.useState(""),[n,r]=y.useState(!1),[a,l]=y.useState(null),[i,o]=y.useState(""),[u,c]=y.useState(null),[p,d]=y.useState(null),[m,x]=y.useState(!1),[h,S]=y.useState(""),[C,g]=y.useState(""),[f,b]=y.useState(!1),[R,P]=y.useState(null),[A,v]=y.useState({...Hi}),E=Ze(),T=y.useMemo(()=>A.items.reduce((D,B)=>{const ee=parseFloat(B.quantity)||0,Z=parseFloat(B.purchaseRate)||0;return D+ee*Z},0),[A.items]),M=ie({queryKey:["purchases",{search:i}],queryFn:async()=>(await J.get("/purchases",{params:{search:i}})).data}),U=ie({queryKey:["suppliers",{search:h}],queryFn:async()=>(await J.get("/suppliers",{params:{search:h}})).data}),X=ie({queryKey:["items",{search:C,inStock:!1}],queryFn:async()=>(await J.get("/items",{params:{search:C}})).data});y.useEffect(()=>{M.error&&l({type:"error",message:M.error.message})},[M.error]);const L=y.useMemo(()=>{var D;return((D=M.data)==null?void 0:D.map(B=>({value:B.invoice_no,invoiceNo:B.invoice_no,label:`${B.invoice_no}  ${B.supplier_name}`,meta:B})))??[]},[M.data]),w=D=>{if(!(D!=null&&D.purchase))return;const B=D.purchase,ee=D.items??[];v({supplierCode:B.supplier_code||"",supplierDisplay:B.supplier_code&&B.supplier_name?`${B.supplier_code}  ${B.supplier_name}`:B.supplier_code||"",lastInvoice:B.last_invoice||"",date:qe(B.invoice_date),items:ee.map(Z=>({code:Z.item_code,name:Z.item_name,baseUnit:Z.base_unit,quantity:Z.quantity!=null?String(Z.quantity):"",bonus:Z.bonus!=null?String(Z.bonus):"",discountPercent:Z.discount_percent!=null?String(Z.discount_percent):"",purchaseRate:Z.purchase_rate!=null?String(Z.purchase_rate):""})),amountPaid:B.amount_paid!=null?String(Number(B.amount_paid).toFixed(2)):"",previousBalance:B.previous_balance!=null?String(Number(B.previous_balance).toFixed(2)):""}),S("")},j=async D=>{var ee,Z,re,he;const B=D.trim();if(!B){l({type:"error",message:"Enter the invoice number to load."});return}x(!0),l({type:"info",message:"Loading invoice details"});try{const ge=await J.get(`/purchases/${encodeURIComponent(B)}`);d(ge.data),w(ge.data),t(B),r(!0),(ee=ge.data.purchase)!=null&&ee.supplier_code&&((Z=ge.data.purchase)!=null&&Z.supplier_name)&&c({value:B,invoiceNo:B,label:`${B}  ${ge.data.purchase.supplier_name}`,meta:ge.data.purchase}),l({type:"success",message:"Invoice loaded. You can now review and edit the details."})}catch(ge){const Te=((he=(re=ge==null?void 0:ge.response)==null?void 0:re.data)==null?void 0:he.message)||(ge==null?void 0:ge.message)||"Failed to load invoice.";d(null),v({...Hi}),r(!1),l({type:"error",message:Te})}finally{x(!1)}},k=(D=null)=>{if(!n){l({type:"error",message:"Load an invoice before editing items."});return}if(P(D??null),D!=null){const B=A.items[D];B&&g(B.name||B.code||"")}b(!0)},F=D=>{v(B=>{const ee=[...B.items];if(R!=null&&R>=0&&R<ee.length){const Z=ee[R];ee[R]={...Z,code:D.code,name:D.name,baseUnit:D.base_unit,purchaseRate:Z.purchaseRate!==""&&Z.purchaseRate!=null?Z.purchaseRate:D.purchase_rate!=null?String(D.purchase_rate):""}}else ee.push({code:D.code,name:D.name,baseUnit:D.base_unit,quantity:"",bonus:"",discountPercent:"",purchaseRate:D.purchase_rate!=null?String(D.purchase_rate):""});return{...B,items:ee}}),b(!1),P(null),g("")},N=(D,B,ee)=>{v(Z=>({...Z,items:Z.items.map((re,he)=>he===D?{...re,[B]:ee}:re)}))},_=D=>{v(B=>({...B,items:B.items.filter((ee,Z)=>Z!==D)})),P(null)},$=Me({mutationFn:async()=>{const D=e.trim();if(!D)throw new Error("Missing invoice number.");const B={supplierCode:A.supplierCode,lastInvoice:A.lastInvoice,date:A.date,amountPaid:Number(A.amountPaid)||0,previousBalance:Number(A.previousBalance)||0,subtotal:Number(T.toFixed(2)),items:A.items.map(Z=>({itemCode:Z.code,quantity:Number(Z.quantity)||0,bonus:Number(Z.bonus)||0,discountPercent:Number(Z.discountPercent)||0,purchaseRate:Number(Z.purchaseRate)||0}))};return(await J.put(`/purchases/${encodeURIComponent(D)}`,B)).data},onMutate:()=>l(null),onSuccess:D=>{l({type:"success",message:"Purchase updated successfully."}),d(D),w(D),E.invalidateQueries({queryKey:["purchases"]}),E.invalidateQueries({queryKey:["stock-report"]})},onError:D=>{var ee,Z;const B=((Z=(ee=D==null?void 0:D.response)==null?void 0:ee.data)==null?void 0:Z.message)||(D==null?void 0:D.message)||"Failed to update purchase.";l({type:"error",message:B})}}),O=$.isPending;return s.jsxs("div",{className:"space-y-6",children:[s.jsx(je,{title:"Edit Purchase Invoice",description:"Review and amend posted purchase invoices without altering their unique numbers.",children:s.jsxs("form",{className:"grid gap-6",onSubmit:D=>{if(D.preventDefault(),!n){l({type:"error",message:"Load an invoice before saving changes."});return}if(!A.supplierCode){l({type:"error",message:"Select a supplier before saving."});return}if(!A.date.trim()){l({type:"error",message:"Enter an invoice date."});return}if(A.items.length===0){l({type:"error",message:"Add at least one item before saving."});return}$.mutate()},children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-[minmax(0,2fr),minmax(0,1fr)] items-end",children:[s.jsx(ye,{label:"Search Purchases",placeholder:"Search by supplier name or invoice number",value:u,onSelect:D=>{c(D),t(D.invoiceNo),d(null),l(null),r(!1),v({...Hi})},onSearch:o,results:L,renderItem:D=>s.jsxs("div",{className:"flex flex-col text-slate-700",children:[s.jsx("span",{className:"font-medium text-sm text-slate-800",children:D.label}),s.jsxs("span",{className:"text-xs text-slate-500",children:["Total Amount: ",Number(D.meta.total_amount??0).toFixed(2)]})]})}),s.jsx(H,{label:"Invoice No.",children:s.jsx("input",{value:e,placeholder:"Enter or select an invoice number",readOnly:n,onChange:D=>{t(D.target.value),r(!1)}})})]}),M.isFetching?s.jsx("p",{className:"text-xs text-slate-500",children:"Searching"}):null,s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{type:"button",className:"secondary text-sm",onClick:()=>j(e),disabled:m,children:m?"Loading":"Load Invoice"}),s.jsx("button",{type:"button",className:"secondary text-sm",onClick:()=>{t(""),r(!1),l(null),c(null),o(""),d(null),v({...Hi}),x(!1)},children:"Reset"})]}),n?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[s.jsx(ye,{label:"Supplier",placeholder:"Search supplier",value:{label:A.supplierDisplay||A.supplierCode},onSelect:D=>v(B=>({...B,supplierCode:D.code,supplierDisplay:D.label})),onSearch:S,results:((Q=U.data)==null?void 0:Q.map(D=>({value:D.id,code:D.code,label:`${D.code}  ${D.name}`})))??[]}),s.jsx(H,{label:"Last Invoice",children:s.jsx("input",{value:A.lastInvoice,onChange:D=>v(B=>({...B,lastInvoice:D.target.value}))})}),s.jsx(H,{label:"Invoice Date",required:!0,children:s.jsx("input",{value:A.date,onChange:D=>v(B=>({...B,date:D.target.value}))})})]}),s.jsxs("div",{className:"border border-slate-200 bg-white rounded-[24px] overflow-hidden shadow-[0_18px_45px_rgba(15,23,42,0.12)]",children:[s.jsxs("header",{className:"flex items-center justify-between bg-slate-50 px-5 py-4 border-b border-slate-200",children:[s.jsx("h3",{className:"text-sm font-semibold text-slate-700",children:"Items"}),s.jsx("button",{type:"button",className:"primary text-xs",onClick:k,children:"Add Item"})]}),s.jsx("div",{className:"divide-y divide-slate-100",children:A.items.length===0?s.jsx("p",{className:"p-5 text-sm text-slate-500",children:"No items yet"}):A.items.map((D,B)=>s.jsxs("div",{className:"grid md:grid-cols-6 gap-3 px-5 py-4 text-sm text-slate-700",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-slate-800",children:D.code}),s.jsx("p",{className:"text-xs text-slate-500",children:D.name})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-slate-500",children:"Base Unit"}),s.jsx("p",{className:"text-slate-700",children:D.baseUnit})]}),s.jsx("div",{children:s.jsx("input",{type:"number",placeholder:"Quantity",value:D.quantity,onChange:ee=>N(B,"quantity",ee.target.value)})}),s.jsx("div",{children:s.jsx("input",{type:"number",placeholder:"Bonus",value:D.bonus,onChange:ee=>N(B,"bonus",ee.target.value)})}),s.jsx("div",{children:s.jsx("input",{type:"number",placeholder:"Discount %",value:D.discountPercent,onChange:ee=>N(B,"discountPercent",ee.target.value)})}),s.jsx("div",{children:s.jsx("input",{type:"number",placeholder:"Purchase Rate",value:D.purchaseRate,onChange:ee=>N(B,"purchaseRate",ee.target.value)})}),s.jsxs("div",{className:"flex gap-2 md:col-span-6 justify-self-end",children:[s.jsx("button",{type:"button",className:"secondary text-xs",onClick:()=>k(B),children:"Change Item"}),s.jsx("button",{type:"button",className:"secondary text-xs",onClick:()=>_(B),children:"Remove"})]})]},`${D.code}-${B}`))})]}),s.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[s.jsx(H,{label:"Subtotal",children:s.jsx("input",{value:T.toFixed(2),readOnly:!0})}),s.jsx(H,{label:"Amount Paid",children:s.jsx("input",{type:"number",value:A.amountPaid,onChange:D=>v(B=>({...B,amountPaid:D.target.value}))})}),s.jsx(H,{label:"Previous Balance",children:s.jsx("input",{type:"number",value:A.previousBalance,onChange:D=>v(B=>({...B,previousBalance:D.target.value}))})})]}),s.jsx("div",{className:"flex justify-end gap-3",children:s.jsx("button",{type:"submit",className:"primary",disabled:O,children:O?"Saving":"Save Changes"})})]}):s.jsx("p",{className:"text-sm text-slate-500 border border-dashed border-slate-300 rounded-lg px-4 py-3",children:"Load an invoice to enable editing controls."}),a?s.jsx("p",{className:`text-sm ${a.type==="error"?"text-rose-500":a.type==="info"?"text-sky-600":"text-emerald-600"}`,children:a.message}):null]})}),f?s.jsx("div",{className:"fixed inset-0 bg-slate-900/30 backdrop-blur flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl shadow-[0_24px_60px_rgba(15,23,42,0.18)] w-full max-w-3xl h-[70vh] grid grid-rows-[auto,1fr]",children:[s.jsxs("header",{className:"p-5 border-b border-slate-200 flex items-center justify-between text-slate-800",children:[s.jsx("h3",{className:"text-sm font-semibold",children:"Select Item"}),s.jsx("button",{className:"secondary text-xs",onClick:()=>{b(!1),P(null),g("")},children:"Close"})]}),s.jsxs("div",{className:"p-5 space-y-4 overflow-y-auto scrollbar-thin text-slate-700",children:[s.jsx("input",{placeholder:"Search item",value:C,onChange:D=>g(D.target.value)}),s.jsx("div",{className:"grid gap-3",children:(K=X.data)!=null&&K.length?X.data.map(D=>s.jsxs("button",{type:"button",className:"flex justify-between items-center bg-white border border-slate-200 rounded-2xl px-5 py-4 hover:bg-slate-50 shadow-sm transition",onClick:()=>F(D),children:[s.jsxs("div",{children:[s.jsxs("p",{className:"font-semibold text-slate-800",children:[D.code,"  ",D.name]}),s.jsxs("p",{className:"text-xs text-slate-500",children:[D.company_name,"  ",D.base_unit]})]}),s.jsxs("span",{className:"text-sm text-slate-600",children:["Purchase Rate: ",D.purchase_rate]})]},D.id)):s.jsx("p",{className:"text-sm text-slate-500",children:"No results"})})]})]})}):null]})},Vi={expenseCode:"",expenseLabel:"",voucherDate:"",cashPayment:"",details:""},T1=()=>{var E;const[e,t]=y.useState(""),[n,r]=y.useState(null),[a,l]=y.useState(null),[i,o]=y.useState(""),[u,c]=y.useState(""),[p,d]=y.useState(!1),[m,x]=y.useState(!1),[h,S]=y.useState({...Vi}),C=Ze(),g=ie({queryKey:["expense-entries",{search:i}],queryFn:async()=>(await J.get("/expense-entries",{params:{search:i}})).data}),f=ie({queryKey:["expenses",{search:u}],queryFn:async()=>(await J.get("/expenses",{params:{search:u}})).data});y.useEffect(()=>{g.error&&l({type:"error",message:g.error.message})},[g.error]);const b=y.useMemo(()=>{var T;return((T=g.data)==null?void 0:T.map(M=>({value:M.voucher_no,voucherNo:M.voucher_no,label:`${M.voucher_no}  ${M.expense_description||M.expense_code}`,meta:M})))??[]},[g.data]),R=T=>{S({expenseCode:T.expense_code||"",expenseLabel:T.expense_code&&T.expense_description?`${T.expense_code}  ${T.expense_description}`:T.expense_code||"",voucherDate:T.voucher_date||"",cashPayment:T.cash_payment!=null?String(Number(T.cash_payment).toFixed(2)):"",details:T.details||""}),c("")},P=async T=>{var U,X;const M=T.trim();if(!M){l({type:"error",message:"Enter the voucher number to load."});return}x(!0),l({type:"info",message:"Loading voucher details"});try{const L=await J.get(`/expense-entries/${encodeURIComponent(M)}`);R(L.data),t(M),d(!0),r({value:M,voucherNo:M,label:`${M}  ${L.data.expense_description||L.data.expense_code}`}),l({type:"success",message:"Voucher loaded. You can now edit and save changes."})}catch(L){const w=((X=(U=L==null?void 0:L.response)==null?void 0:U.data)==null?void 0:X.message)||(L==null?void 0:L.message)||"Failed to load voucher.";S({...Vi}),d(!1),r(null),l({type:"error",message:w})}finally{x(!1)}},A=Me({mutationFn:async()=>{const T=e.trim();if(!T)throw new Error("Missing voucher number.");if(!h.expenseCode)throw new Error("Select an expense code before saving.");if(!h.voucherDate.trim())throw new Error("Enter a voucher date before saving.");const M={expenseCode:h.expenseCode,voucherDate:h.voucherDate,cashPayment:Number(h.cashPayment)||0,details:h.details};return(await J.put(`/expense-entries/${encodeURIComponent(T)}`,M)).data},onMutate:()=>l(null),onSuccess:T=>{R(T),C.invalidateQueries({queryKey:["expense-entries"]}),r({value:T.voucher_no,voucherNo:T.voucher_no,label:`${T.voucher_no}  ${T.expense_description||T.expense_code}`}),l({type:"success",message:"Expense entry updated successfully."})},onError:T=>{var U,X;const M=((X=(U=T==null?void 0:T.response)==null?void 0:U.data)==null?void 0:X.message)||(T==null?void 0:T.message)||"Failed to update expense entry.";l({type:"error",message:M})}}),v=A.isPending;return s.jsx("div",{className:"space-y-6",children:s.jsx(je,{title:"Edit Expense Entry",description:"Locate an expense voucher, adjust the allocation, and resave without changing the voucher number.",children:s.jsxs("form",{className:"grid gap-6",onSubmit:T=>{if(T.preventDefault(),!p){l({type:"error",message:"Load a voucher before saving changes."});return}A.mutate()},children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-[minmax(0,2fr),minmax(0,1fr)] items-end",children:[s.jsx(ye,{label:"Search Vouchers",placeholder:"Search by voucher or expense",value:n,onSelect:T=>{r(T),t(T.voucherNo),d(!1),S({...Vi}),l(null)},onSearch:o,results:b,renderItem:T=>s.jsxs("div",{className:"flex flex-col text-slate-700",children:[s.jsx("span",{className:"font-medium text-sm text-slate-800",children:T.label}),s.jsxs("span",{className:"text-xs text-slate-500",children:["Amount: ",Number(T.meta.cash_payment??0).toFixed(2),"  Date: ",T.meta.voucher_date]})]})}),s.jsx(H,{label:"Voucher No.",children:s.jsx("input",{value:e,placeholder:"Enter or select a voucher number",readOnly:p,onChange:T=>{t(T.target.value),d(!1)}})})]}),g.isFetching?s.jsx("p",{className:"text-xs text-slate-500",children:"Searching"}):null,s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{type:"button",className:"secondary text-sm",onClick:()=>P(e),disabled:m,children:m?"Loading":"Load Voucher"}),s.jsx("button",{type:"button",className:"secondary text-sm",onClick:()=>{t(""),d(!1),r(null),o(""),c(""),S({...Vi}),l(null),x(!1)},children:"Reset"})]}),a?s.jsx("p",{className:`text-xs ${a.type==="error"?"text-rose-500":a.type==="success"?"text-emerald-500":"text-slate-500"}`,children:a.message}):null,p?s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsx(ye,{label:"Expense Code",placeholder:"Search expense",value:h.expenseCode?{label:h.expenseLabel||h.expenseCode}:null,onSelect:T=>S(M=>({...M,expenseCode:T.code,expenseLabel:T.label})),onSearch:c,results:((E=f.data)==null?void 0:E.map(T=>({value:T.id,code:T.code,label:`${T.code}  ${T.description}`})))??[]}),s.jsx(H,{label:"Voucher Date",required:!0,children:s.jsx("input",{value:h.voucherDate,onChange:T=>S(M=>({...M,voucherDate:T.target.value}))})}),s.jsx(H,{label:"Cash Payment",required:!0,children:s.jsx("input",{type:"number",value:h.cashPayment,onChange:T=>S(M=>({...M,cashPayment:T.target.value}))})}),s.jsx(H,{label:"Details",children:s.jsx("textarea",{rows:3,value:h.details,onChange:T=>S(M=>({...M,details:T.target.value}))})})]}):null,s.jsx("div",{className:"flex items-center justify-end gap-3",children:s.jsx("button",{type:"submit",className:"primary",disabled:v,children:v?"Saving":"Save Changes"})})]})})})},vg="Pieces",vf=()=>({id:null,code:"",name:"",companyId:null,baseUnit:vg,packSize:"",minQuantity:"",purchaseRate:"",tradeRate:"",retailPrice:"",salesTax:""}),qr=e=>{if(e===""||e===null||e===void 0)return null;const t=Number(e);return Number.isNaN(t)?null:t},O1=()=>{var P,A;const e=Ze(),[t,n]=y.useState(""),[r,a]=y.useState(""),[l,i]=y.useState(null),[o,u]=y.useState(null),[c,p]=y.useState(vf),[d,m]=y.useState(null),x=ie({queryKey:["items",{search:t}],queryFn:async()=>(await J.get("/items",{params:{search:t}})).data}),h=ie({queryKey:["companies",{search:r}],queryFn:async()=>(await J.get("/companies",{params:{search:r}})).data}),S=Me({mutationFn:async v=>{const{id:E,...T}=v;return(await J.put(`/items/${E}`,T)).data},onMutate:()=>m(null),onSuccess:v=>{m({type:"success",message:"Item updated successfully."}),v!=null&&v.id&&e.invalidateQueries({queryKey:["items"]})},onError:v=>{m({type:"error",message:v.message})}}),C=v=>{if(!(v!=null&&v.meta))return;const E=v.meta;i({value:v.value,label:v.label}),p({id:E.id,code:E.code??"",name:E.name??"",companyId:E.company_id??null,baseUnit:E.base_unit??vg,packSize:E.pack_size??"",minQuantity:E.min_quantity??"",purchaseRate:E.purchase_rate??"",tradeRate:E.trade_rate??"",retailPrice:E.retail_price??"",salesTax:E.sales_tax??""}),u(E.company_id?{value:E.company_id,id:E.company_id,label:E.company_code&&E.company_name?`${E.company_code}  ${E.company_name}`:E.company_name||E.company_code||`${E.company_id}`}:null)},g=()=>{i(null),u(null),p(vf()),m(null)},f=y.useMemo(()=>!!c.id,[c.id]),b=c.baseUnit==="Pack"||c.baseUnit==="Carton",R=v=>{if(v.preventDefault(),!S.isPending){if(!c.id){m({type:"error",message:"Select an item to edit."});return}S.mutate({id:c.id,code:c.code.trim(),name:c.name.trim(),company_id:(o==null?void 0:o.id)??null,base_unit:c.baseUnit,pack_size:b?qr(c.packSize):null,min_quantity:qr(c.minQuantity),purchase_rate:qr(c.purchaseRate),trade_rate:qr(c.tradeRate),retail_price:qr(c.retailPrice),sales_tax:qr(c.salesTax)})}};return s.jsx("div",{className:"space-y-6",children:s.jsx(je,{title:"Edit Item",description:"Update existing item details and pricing.",actions:f?s.jsx("button",{type:"button",className:"secondary text-xs",onClick:g,children:"Clear Selection"}):null,children:s.jsxs("div",{className:"grid gap-4",children:[s.jsx(ye,{label:"Find Item",placeholder:"Search item",onSearch:n,onSelect:C,value:l,results:((P=x.data)==null?void 0:P.map(v=>({value:v.id,label:`${v.code}  ${v.name}`,meta:v})))??[]}),s.jsxs("form",{className:"grid gap-4",onSubmit:R,children:[s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsx(H,{label:"Item Code",required:!0,children:s.jsx("input",{value:c.code,onChange:v=>p(E=>({...E,code:v.target.value})),required:!0,disabled:!f})}),s.jsx(H,{label:"Item Name",required:!0,children:s.jsx("input",{value:c.name,onChange:v=>p(E=>({...E,name:v.target.value})),required:!0,disabled:!f})})]}),s.jsx(ye,{label:"Company",placeholder:"Search company",onSearch:a,onSelect:u,value:o,results:((A=h.data)==null?void 0:A.map(v=>({value:v.id,id:v.id,label:`${v.code}  ${v.name}`})))??[]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsx(H,{label:"Unit of Measure",required:!0,children:s.jsxs("select",{value:c.baseUnit,onChange:v=>{const E=v.target.value;p(T=>({...T,baseUnit:E,packSize:E==="Pack"||E==="Carton"?T.packSize:""}))},required:!0,disabled:!f,children:[s.jsx("option",{value:"Pieces",children:"Piece"}),s.jsx("option",{value:"Pack",children:"Pack"}),s.jsx("option",{value:"Carton",children:"Carton"})]})}),s.jsx(H,{label:"Pack/Carton Size",children:s.jsx("input",{type:"number",step:"any",value:c.packSize,onChange:v=>p(E=>({...E,packSize:v.target.value})),disabled:!f||!b,required:b})})]}),s.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[s.jsx(H,{label:"Minimum Quantity",required:!0,children:s.jsx("input",{type:"number",step:"any",value:c.minQuantity,onChange:v=>p(E=>({...E,minQuantity:v.target.value})),required:!0,disabled:!f})}),s.jsx(H,{label:"Purchase Rate",required:!0,children:s.jsx("input",{type:"number",step:"any",value:c.purchaseRate,onChange:v=>p(E=>({...E,purchaseRate:v.target.value})),required:!0,disabled:!f})}),s.jsx(H,{label:"Trade Rate",required:!0,children:s.jsx("input",{type:"number",step:"any",value:c.tradeRate,onChange:v=>p(E=>({...E,tradeRate:v.target.value})),required:!0,disabled:!f})})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsx(H,{label:"Retail Price",children:s.jsx("input",{type:"number",step:"any",value:c.retailPrice,onChange:v=>p(E=>({...E,retailPrice:v.target.value})),disabled:!f})}),s.jsx(H,{label:"Sales Tax (%)",children:s.jsx("input",{type:"number",step:"any",value:c.salesTax,onChange:v=>p(E=>({...E,salesTax:v.target.value})),disabled:!f})})]}),s.jsxs("div",{className:"flex items-center gap-4 justify-end",children:[d?s.jsx("span",{className:`text-xs ${d.type==="error"?"text-rose-400":"text-emerald-400"}`,children:d.message}):null,s.jsx("button",{type:"submit",className:"primary",disabled:!f||S.isPending,children:S.isPending?"Saving...":"Save Changes"})]})]})]})})})},Wi=e=>`Rs ${Number(e??0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,Ki=e=>e==="drawing"?"Drawing":"Deposit",cu=e=>!e||!e.code?"":e.name?`${e.code}  ${e.name}`:e.code,bf=e=>e?e.sourceType==="customer-receipt"?e.sourceReference?`Customer receipt ${e.sourceReference}`:"Customer receipt":e.sourceType==="supplier-payment"?e.sourceReference?`Supplier payment ${e.sourceReference}`:"Supplier payment":"Manual Entry":"Manual Entry",$1=e=>!e||e.isEditable?null:e.sourceType==="customer-receipt"?e.sourceReference?`This entry was generated from customer receipt ${e.sourceReference} and cannot be edited.`:"This entry was generated from a customer receipt and cannot be edited.":e.sourceType==="supplier-payment"?e.sourceReference?`This entry was generated from supplier payment ${e.sourceReference} and cannot be edited.`:"This entry was generated from a supplier payment and cannot be edited.":"This bank entry is locked and cannot be edited.",ul=()=>({transactionType:"deposit",bankCode:"",bankLabel:"",slipNo:"",slipDate:"",amount:""}),I1=()=>{var j;const e=Ze(),[t,n]=y.useState(""),[r,a]=y.useState(""),[l,i]=y.useState(!1),[o,u]=y.useState(null),[c,p]=y.useState(null),[d,m]=y.useState(ul),[x,h]=y.useState(null),[S,C]=y.useState(!1),[g,f]=y.useState(""),b=ie({queryKey:["bank-transactions",{search:t}],queryFn:async()=>(await J.get("/bank-transactions",{params:{search:t}})).data});y.useEffect(()=>{b.error&&h({type:"error",message:b.error.message})},[b.error]);const R=y.useMemo(()=>{var k;return((k=b.data)==null?void 0:k.map(F=>{const N=[];F.entryNo?N.push(F.entryNo):N.push(`Txn ${F.id}`),N.push(`${Ki(F.transactionType)}  ${Wi(F.amount)}`);const _=cu(F.bank);return _&&N.push(_),{value:F.entryNo||String(F.id),entryNo:F.entryNo||"",label:N.join("  "),meta:F}}))??[]},[b.data]),P=g.trim(),A=P.length>=2,v=ie({queryKey:["banks",{search:P}],enabled:A,queryFn:async()=>(await J.get("/banks",{params:{search:P}})).data}),E=()=>{i(!1),p(null),u(null),m(ul),a(""),n(""),h(null),f("")},T=k=>{var N;const F=ul();F.transactionType=k.transactionType||"deposit",F.bankCode=((N=k.bank)==null?void 0:N.code)||"",F.bankLabel=cu(k.bank),F.slipNo=k.slipNo||"",F.slipDate=k.slipDate||"",F.amount=k.amount!=null?Number(k.amount).toFixed(2):"",m(F)},M=async k=>{var N,_;const F=k.trim();if(!F){h({type:"error",message:"Enter the bank entry number to load."});return}C(!0),h({type:"info",message:"Loading bank entry"});try{const O=(await J.get(`/bank-transactions/${encodeURIComponent(F)}`)).data;p(O),a(O.entryNo||F),i(!0),u({value:O.entryNo||F,entryNo:O.entryNo||F,label:O.entryNo?`${O.entryNo}  ${Ki(O.transactionType)}  ${Wi(O.amount)}`:F}),f(""),T(O);const Q=$1(O);h(Q?{type:"info",message:Q}:{type:"success",message:"Bank entry loaded. You can now update and save changes."})}catch($){const O=((_=(N=$==null?void 0:$.response)==null?void 0:N.data)==null?void 0:_.message)||($==null?void 0:$.message)||"Failed to load bank entry.";E(),h({type:"error",message:O})}finally{C(!1)}},U=Me({mutationFn:async()=>{if(!l||!c)throw new Error("Load a bank entry before saving changes.");if(!c.isEditable)throw new Error("This bank entry is locked and cannot be edited.");if(!d.bankCode)throw new Error("Select a bank before saving changes.");if(!d.slipDate)throw new Error("Select the slip date before saving changes.");const k=Number(d.amount);if(!Number.isFinite(k)||k<=0)throw new Error("Enter a valid amount before saving changes.");const F={transactionType:d.transactionType,bankCode:d.bankCode,slipNo:d.slipNo.trim()||null,slipDate:d.slipDate,amount:k};return(await J.put(`/bank-transactions/${encodeURIComponent(c.entryNo||r)}`,F)).data},onMutate:()=>h(null),onSuccess:k=>{const F=k.transaction;p(F),T(F),h({type:"success",message:"Bank entry updated successfully."}),u(N=>F.entryNo?{value:F.entryNo,entryNo:F.entryNo,label:`${F.entryNo}  ${Ki(F.transactionType)}  ${Wi(F.amount)}`}:N),e.invalidateQueries({queryKey:["bank-deposit-report"]}),e.invalidateQueries({queryKey:["transaction-history"]}),e.invalidateQueries({queryKey:["bank-transactions"]})},onError:k=>{var N,_;const F=((_=(N=k==null?void 0:k.response)==null?void 0:N.data)==null?void 0:_.message)||(k==null?void 0:k.message)||"Failed to update bank entry.";h({type:"error",message:F})}}),X=U.isPending,L=!!(c!=null&&c.isEditable),w=bf(c);return s.jsx("div",{className:"space-y-6",children:s.jsx(je,{title:"Edit Bank Transaction",description:"Locate a manual bank deposit or drawing, adjust the details, and resave without altering the entry number.",children:s.jsxs("form",{className:"grid gap-6",onSubmit:k=>{if(k.preventDefault(),!l){h({type:"error",message:"Load a bank entry before saving changes."});return}U.mutate()},children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-[minmax(0,2fr),minmax(0,1fr)] items-end",children:[s.jsx(ye,{label:"Search Bank Entries",placeholder:"Search by entry no., bank, or slip",value:o,onSelect:k=>{u(k),a(k.entryNo||k.value||""),i(!1),p(null),m(ul),h(null)},onSearch:n,results:R,emptyMessage:t.trim()?"No bank transactions match your search.":"Enter an entry number, bank code, or slip to search.",renderItem:k=>s.jsxs("div",{className:"flex flex-col text-slate-700",children:[s.jsx("span",{className:"font-medium text-sm text-slate-800",children:k.label}),k.meta?s.jsxs("span",{className:"text-xs text-slate-500",children:["Source: ",bf(k.meta)]}):null]})}),s.jsx(H,{label:"Entry No.",children:s.jsx("input",{value:r,readOnly:l,placeholder:"Enter entry number",onChange:k=>{a(k.target.value),i(!1),p(null),m(ul),h(null)}})})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{type:"button",className:"secondary text-sm",onClick:()=>M(r),disabled:S,children:S?"Loading":"Load Entry"}),s.jsx("button",{type:"button",className:"secondary text-sm",onClick:E,children:"Reset"})]}),x?s.jsx("p",{className:`text-xs ${x.type==="error"?"text-rose-500":x.type==="success"?"text-emerald-500":"text-slate-500"}`,children:x.message}):null,c?s.jsxs("div",{className:"grid gap-4",children:[s.jsxs("div",{className:"border border-slate-200 bg-slate-50 rounded-2xl px-4 py-3 text-xs text-slate-600",children:[s.jsx("p",{className:"font-semibold text-slate-700 mb-2",children:"Entry snapshot"}),s.jsxs("div",{className:"grid gap-2 sm:grid-cols-2 md:grid-cols-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"uppercase tracking-wide text-slate-500",children:"Entry"}),s.jsx("p",{className:"text-slate-800",children:c.entryNo||""})]}),s.jsxs("div",{children:[s.jsx("p",{className:"uppercase tracking-wide text-slate-500",children:"Type"}),s.jsx("p",{className:"text-slate-800",children:Ki(c.transactionType)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"uppercase tracking-wide text-slate-500",children:"Bank"}),s.jsx("p",{className:"text-slate-800",children:cu(c.bank)||""})]}),s.jsxs("div",{children:[s.jsx("p",{className:"uppercase tracking-wide text-slate-500",children:"Amount"}),s.jsx("p",{className:"text-slate-800",children:Wi(c.amount)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"uppercase tracking-wide text-slate-500",children:"Slip Date"}),s.jsx("p",{className:"text-slate-800",children:c.slipDateDisplay||""})]}),s.jsxs("div",{children:[s.jsx("p",{className:"uppercase tracking-wide text-slate-500",children:"Source"}),s.jsx("p",{className:"text-slate-800",children:w})]})]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[s.jsx(H,{label:"Transaction Type",required:!0,children:s.jsxs("select",{value:d.transactionType,disabled:!L,onChange:k=>m(F=>({...F,transactionType:k.target.value})),children:[s.jsx("option",{value:"deposit",children:"Deposit"}),s.jsx("option",{value:"drawing",children:"Drawing"})]})}),s.jsx(ye,{label:"Bank",placeholder:"Type at least two characters",value:d.bankCode?{label:d.bankLabel||d.bankCode}:null,onSelect:k=>{k&&(m(F=>({...F,bankCode:k.code,bankLabel:`${k.code}  ${k.name}`})),h(null))},onSearch:f,results:A?((j=v.data)==null?void 0:j.map(k=>({value:k.id,code:k.code,name:k.name,label:`${k.code}  ${k.name}`})))??[]:[],emptyMessage:A?"No matching banks found.":"Type at least two characters to search banks.",disabled:!L}),s.jsx(H,{label:"Slip No.",children:s.jsx("input",{value:d.slipNo,disabled:!L,onChange:k=>m(F=>({...F,slipNo:k.target.value})),placeholder:"Enter slip or reference"})}),s.jsx(H,{label:"Slip Date",required:!0,children:s.jsx("input",{type:"date",value:d.slipDate,disabled:!L,onChange:k=>m(F=>({...F,slipDate:k.target.value}))})}),s.jsx(H,{label:"Amount",required:!0,children:s.jsx("input",{type:"number",min:"0.01",step:"0.01",value:d.amount,disabled:!L,onChange:k=>m(F=>({...F,amount:k.target.value}))})})]})]}):null,s.jsx("div",{className:"flex items-center justify-end gap-3",children:s.jsx("button",{type:"submit",className:"primary",disabled:X||!L,children:X?"Saving":"Save Changes"})})]})})})},A1=e=>`Rs ${Number(e??0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,q1=e=>e?e.bankTransactionEntry?`Linked bank entry ${e.bankTransactionEntry}`:e.paymentMode==="cash"?"Cash receipt":"Receipt with bank transaction":"Customer receipt",Gi=()=>({receiptDate:"",amount:"",details:"",paymentMode:"cash",bankCode:"",bankLabel:"",slipNo:"",slipDate:""}),B1=()=>{var j,k,F;const e=Ze(),[t,n]=y.useState(""),[r,a]=y.useState(""),[l,i]=y.useState(!1),[o,u]=y.useState(null),[c,p]=y.useState(null),[d,m]=y.useState(Gi),[x,h]=y.useState(null),[S,C]=y.useState(!1),[g,f]=y.useState(""),b=ie({queryKey:["customer-receipts",{search:t}],queryFn:async()=>(await J.get("/customer-receipts",{params:{search:t}})).data});y.useEffect(()=>{b.error&&h({type:"error",message:b.error.message})},[b.error]);const R=y.useMemo(()=>{var N;return((N=b.data)==null?void 0:N.map(_=>{const $=[];return $.push(_.receipt_no||`Receipt ${_.id}`),$.push(_.receipt_date||""),$.push(`Rs ${Number(_.amount??0).toFixed(2)}`),{value:_.receipt_no||String(_.id),receiptNo:_.receipt_no||"",label:$.join("  "),meta:_}}))??[]},[b.data]),P=g.trim(),A=P.length>=2,v=ie({queryKey:["banks",{search:P}],enabled:A,queryFn:async()=>(await J.get("/banks",{params:{search:P}})).data}),E=d.paymentMode==="online",T=d.paymentMode==="bank";y.useEffect(()=>{if(!T||d.slipDate)return;const N=new Date().toISOString().slice(0,10);m(_=>_.paymentMode!=="bank"||_.slipDate?_:{..._,slipDate:N})},[d.paymentMode,d.slipDate,T]);const M=()=>{i(!1),p(null),u(null),m(Gi),a(""),n(""),h(null),f("")},U=N=>{var _,$;m({receiptDate:N.receiptDateRaw||N.receiptDate||"",amount:N.amount!=null?Number(N.amount).toFixed(2):"",details:N.details||"",paymentMode:N.paymentMode||"cash",bankCode:((_=N.bank)==null?void 0:_.code)||"",bankLabel:($=N.bank)!=null&&$.code?`${N.bank.code}  ${N.bank.name||N.bank.code}`:"",slipNo:N.slipNo||"",slipDate:N.slipDate||""})},X=async N=>{var $,O;const _=N.trim();if(!_){h({type:"error",message:"Enter the receipt number to load."});return}C(!0),h({type:"info",message:"Loading receipt"});try{const K=(await J.get(`/customer-receipts/${encodeURIComponent(_)}`)).data;p(K),a(K.receiptNo||_),i(!0),u({value:K.receiptNo||_,receiptNo:K.receiptNo||_,label:K.receiptNo||_}),f(""),U(K),h({type:"success",message:"Receipt loaded. You can now edit and save changes."})}catch(Q){const K=((O=($=Q==null?void 0:Q.response)==null?void 0:$.data)==null?void 0:O.message)||(Q==null?void 0:Q.message)||"Failed to load receipt.";M(),h({type:"error",message:K})}finally{C(!1)}},L=Me({mutationFn:async()=>{if(!l||!c)throw new Error("Load a receipt before saving changes.");if(!d.receiptDate)throw new Error("Select the receipt date before saving changes.");const N=Number(d.amount);if(!Number.isFinite(N)||N<=0)throw new Error("Enter a valid amount before saving changes.");if(d.paymentMode!=="cash"&&!d.bankCode)throw new Error("Select a bank for this payment mode.");if(d.paymentMode==="online"&&!d.slipNo.trim())throw new Error("Enter the transaction reference for online receipts.");if(d.paymentMode==="bank"&&!d.slipDate)throw new Error("Select the slip date for bank receipts.");const _={receiptDate:d.receiptDate,amount:N,details:d.details,paymentMode:d.paymentMode,bankCode:d.paymentMode==="cash"?null:d.bankCode,slipNo:d.paymentMode==="cash"?null:d.slipNo,slipDate:d.paymentMode==="bank"?d.slipDate:null};return(await J.put(`/customer-receipts/${encodeURIComponent(c.receiptNo||r)}`,_)).data},onMutate:()=>h(null),onSuccess:N=>{const _=N.receipt;p(_),U(_),h({type:"success",message:"Receipt updated successfully."}),u($=>_!=null&&_.receiptNo?{value:_.receiptNo,receiptNo:_.receiptNo,label:_.receiptNo}:$),e.invalidateQueries({queryKey:["customer-receipts"]}),e.invalidateQueries({queryKey:["transaction-history"]}),e.invalidateQueries({queryKey:["bank-deposit-report"]})},onError:N=>{var $,O;const _=((O=($=N==null?void 0:N.response)==null?void 0:$.data)==null?void 0:O.message)||(N==null?void 0:N.message)||"Failed to update receipt.";h({type:"error",message:_})}}),w=L.isPending;return s.jsx("div",{className:"space-y-6",children:s.jsx(je,{title:"Edit Customer Receipt",description:"Locate a saved customer receipt, adjust its details, and resave. Bank transactions stay in sync automatically.",children:s.jsxs("form",{className:"grid gap-6",onSubmit:N=>{if(N.preventDefault(),!l){h({type:"error",message:"Load a receipt before saving changes."});return}L.mutate()},children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-[minmax(0,2fr),minmax(0,1fr)] items-end",children:[s.jsx(ye,{label:"Search Receipts",placeholder:"Search by receipt, customer, or slip",value:o,onSelect:N=>{u(N),a(N.receiptNo||N.value||""),i(!1),p(null),m(Gi),h(null)},onSearch:n,results:R,emptyMessage:t.trim()?"No receipts match your search.":"Enter a receipt number, customer, or slip reference to search."}),s.jsx(H,{label:"Receipt No.",children:s.jsx("input",{value:r,readOnly:l,placeholder:"Enter receipt number",onChange:N=>{a(N.target.value),i(!1),p(null),m(Gi),h(null),u(null),f("")}})})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{type:"button",className:"secondary text-sm",onClick:()=>X(r),disabled:S,children:S?"Loading":"Load Receipt"}),s.jsx("button",{type:"button",className:"secondary text-sm",onClick:M,children:"Reset"})]}),x?s.jsx("p",{className:`text-xs ${x.type==="error"?"text-rose-500":x.type==="success"?"text-emerald-500":"text-slate-500"}`,children:x.message}):null,c?s.jsxs("div",{className:"grid gap-4",children:[s.jsxs("div",{className:"border border-slate-200 bg-slate-50 rounded-2xl px-4 py-3 text-xs text-slate-600",children:[s.jsx("p",{className:"font-semibold text-slate-700 mb-2",children:"Receipt snapshot"}),s.jsxs("div",{className:"grid gap-2 sm:grid-cols-2 md:grid-cols-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"uppercase tracking-wide text-slate-500",children:"Receipt"}),s.jsx("p",{className:"text-slate-800",children:c.receiptNo||""})]}),s.jsxs("div",{children:[s.jsx("p",{className:"uppercase tracking-wide text-slate-500",children:"Customer"}),s.jsx("p",{className:"text-slate-800",children:(j=c.customer)!=null&&j.code?`${c.customer.code}  ${c.customer.name}`:""})]}),s.jsxs("div",{children:[s.jsx("p",{className:"uppercase tracking-wide text-slate-500",children:"Amount"}),s.jsx("p",{className:"text-slate-800",children:A1(c.amount)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"uppercase tracking-wide text-slate-500",children:"Mode"}),s.jsx("p",{className:"text-slate-800",children:(c.paymentMode||"cash").toUpperCase()})]}),s.jsxs("div",{children:[s.jsx("p",{className:"uppercase tracking-wide text-slate-500",children:"Bank Info"}),s.jsx("p",{className:"text-slate-800",children:(k=c.bank)!=null&&k.code?`${c.bank.code}  ${c.bank.name}`:""})]}),s.jsxs("div",{children:[s.jsx("p",{className:"uppercase tracking-wide text-slate-500",children:"Slip / Ref"}),s.jsx("p",{className:"text-slate-800",children:c.slipNo||""})]}),s.jsxs("div",{children:[s.jsx("p",{className:"uppercase tracking-wide text-slate-500",children:"Slip Date"}),s.jsx("p",{className:"text-slate-800",children:c.slipDateDisplay||c.slipDate||""})]}),s.jsxs("div",{children:[s.jsx("p",{className:"uppercase tracking-wide text-slate-500",children:"Source"}),s.jsx("p",{className:"text-slate-800",children:q1(c)})]})]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[s.jsx(H,{label:"Receipt Date",required:!0,children:s.jsx("input",{type:"date",value:d.receiptDate,onChange:N=>m(_=>({..._,receiptDate:N.target.value}))})}),s.jsx(H,{label:"Payment Mode",required:!0,children:s.jsxs("select",{value:d.paymentMode,onChange:N=>{const _=N.target.value,$=new Date().toISOString().slice(0,10);h(null),m(O=>{const Q={...O,paymentMode:_};return _==="cash"?(Q.bankCode="",Q.bankLabel="",Q.slipNo="",Q.slipDate=""):_==="online"?Q.slipDate=O.paymentMode==="bank"?O.slipDate:"":_==="bank"&&(Q.slipDate=O.slipDate||$),Q}),_==="cash"&&f("")},children:[s.jsx("option",{value:"cash",children:"Cash"}),s.jsx("option",{value:"online",children:"Online"}),s.jsx("option",{value:"bank",children:"Bank Transaction"})]})}),E||T?s.jsx(ye,{label:"Bank",placeholder:"Type at least two characters",value:d.bankCode?{label:d.bankLabel||d.bankCode}:null,onSelect:N=>{N&&(m(_=>({..._,bankCode:N.code,bankLabel:`${N.code}  ${N.name}`})),h(null))},onSearch:f,results:A?((F=v.data)==null?void 0:F.map(N=>({value:N.id,code:N.code,name:N.name,label:`${N.code}  ${N.name}`})))??[]:[],emptyMessage:A?"No matching banks found.":"Type at least two characters to search banks."}):null,E||T?s.jsx(H,{label:E?"Transaction Reference":"Slip No.",children:s.jsx("input",{value:d.slipNo,onChange:N=>m(_=>({..._,slipNo:N.target.value})),placeholder:E?"Enter transaction reference":"Enter slip number"})}):null,T?s.jsx(H,{label:"Slip Date",required:!0,children:s.jsx("input",{type:"date",value:d.slipDate,onChange:N=>m(_=>({..._,slipDate:N.target.value}))})}):null,s.jsx(H,{label:"Amount",required:!0,children:s.jsx("input",{type:"number",min:"0.01",step:"0.01",value:d.amount,onChange:N=>m(_=>({..._,amount:N.target.value}))})}),s.jsx(H,{label:"Details",className:"md:col-span-3",children:s.jsx("textarea",{rows:3,value:d.details,onChange:N=>m(_=>({..._,details:N.target.value})),placeholder:"Optional remarks"})})]})]}):null,s.jsx("div",{className:"flex items-center justify-end gap-3",children:s.jsx("button",{type:"submit",className:"primary",disabled:w||!c,children:w?"Saving":"Save Changes"})})]})})})},uu=e=>`Rs ${Number(e??0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,Ji=()=>({paymentDate:"",amount:"",details:"",paymentMode:"cash",bankCode:"",bankLabel:"",slipNo:"",slipDate:""}),z1=()=>{var N,_,$;const e=Ze(),[t,n]=y.useState(""),[r,a]=y.useState(""),[l,i]=y.useState(!1),[o,u]=y.useState(null),[c,p]=y.useState(null),[d,m]=y.useState(Ji),[x,h]=y.useState(null),[S,C]=y.useState(!1),[g,f]=y.useState(""),[b,R]=y.useState(null),P=ie({queryKey:["supplier-payments",{search:t}],queryFn:async()=>(await J.get("/supplier-payments",{params:{search:t}})).data});y.useEffect(()=>{P.error&&h({type:"error",message:P.error.message})},[P.error]);const A=y.useMemo(()=>{var O;return((O=P.data)==null?void 0:O.map(Q=>{const K=[];return K.push(Q.payment_no||`Payment ${Q.id}`),K.push(Q.payment_date||""),K.push(`Rs ${Number(Q.amount??0).toFixed(2)}`),{value:Q.payment_no||String(Q.id),paymentNo:Q.payment_no||"",label:K.join("  "),meta:Q}}))??[]},[P.data]),v=g.trim(),E=v.length>=2,T=ie({queryKey:["banks",{search:v}],enabled:E,queryFn:async()=>(await J.get("/banks",{params:{search:v}})).data}),M=d.paymentMode==="online",U=d.paymentMode==="bank";y.useEffect(()=>{if(!U||d.slipDate)return;const O=new Date().toISOString().slice(0,10);m(Q=>Q.paymentMode!=="bank"||Q.slipDate?Q:{...Q,slipDate:O})},[d.paymentMode,d.slipDate,U]);const X=()=>{i(!1),p(null),u(null),m(Ji),a(""),n(""),h(null),f(""),R(null)},L=O=>{var Q,K;m({paymentDate:O.paymentDateRaw||O.paymentDate||"",amount:O.amount!=null?Number(O.amount).toFixed(2):"",details:O.details||"",paymentMode:O.paymentMode||"cash",bankCode:((Q=O.bank)==null?void 0:Q.code)||"",bankLabel:(K=O.bank)!=null&&K.code?`${O.bank.code}  ${O.bank.name||O.bank.code}`:"",slipNo:O.slipNo||"",slipDate:O.slipDate||""})},w=async O=>{var K,D,B,ee;const Q=O.trim();if(!Q){h({type:"error",message:"Enter the payment number to load."});return}C(!0),h({type:"info",message:"Loading supplier payment"});try{const Z=await J.get(`/supplier-payments/${encodeURIComponent(Q)}`),re=(K=Z.data)==null?void 0:K.payment;p(re),R(((D=Z.data)==null?void 0:D.payable)||null),a((re==null?void 0:re.paymentNo)||Q),i(!0),u({value:(re==null?void 0:re.paymentNo)||Q,paymentNo:(re==null?void 0:re.paymentNo)||Q,label:(re==null?void 0:re.paymentNo)||Q}),f(""),L(re),h({type:"success",message:"Supplier payment loaded. You can now edit and save changes."})}catch(Z){const re=((ee=(B=Z==null?void 0:Z.response)==null?void 0:B.data)==null?void 0:ee.message)||(Z==null?void 0:Z.message)||"Failed to load supplier payment.";X(),h({type:"error",message:re})}finally{C(!1)}},j=Me({mutationFn:async()=>{if(!l||!c)throw new Error("Load a supplier payment before saving changes.");if(!d.paymentDate)throw new Error("Select the payment date before saving changes.");const O=Number(d.amount);if(!Number.isFinite(O)||O<=0)throw new Error("Enter a valid amount before saving changes.");if(d.paymentMode!=="cash"&&!d.bankCode)throw new Error("Select a bank for this payment mode.");if(d.paymentMode==="online"&&!d.slipNo.trim())throw new Error("Enter the transaction reference for online payments.");if(d.paymentMode==="bank"&&!d.slipDate)throw new Error("Select the slip date for bank payments.");const Q={paymentDate:d.paymentDate,amount:O,details:d.details,paymentMode:d.paymentMode,bankCode:d.paymentMode==="cash"?null:d.bankCode,slipNo:d.paymentMode==="cash"?null:d.slipNo,slipDate:d.paymentMode==="bank"?d.slipDate:null};return(await J.put(`/supplier-payments/${encodeURIComponent(c.paymentNo||r)}`,Q)).data},onMutate:()=>h(null),onSuccess:O=>{const Q=O.payment;p(Q),R(O.payableAfter||null),L(Q),h({type:"success",message:"Supplier payment updated successfully."}),u(K=>Q!=null&&Q.paymentNo?{value:Q.paymentNo,paymentNo:Q.paymentNo,label:Q.paymentNo}:K),e.invalidateQueries({queryKey:["supplier-payments"]}),e.invalidateQueries({queryKey:["transaction-history"]}),e.invalidateQueries({queryKey:["bank-deposit-report"]}),e.invalidateQueries({queryKey:["supplier-payable"]})},onError:O=>{var K,D;const Q=((D=(K=O==null?void 0:O.response)==null?void 0:K.data)==null?void 0:D.message)||(O==null?void 0:O.message)||"Failed to update supplier payment.";h({type:"error",message:Q})}}),k=j.isPending,F=y.useMemo(()=>{if(!b||!c)return null;const O=Number(b.payable??0),Q=Number(c.amount??0),K=Number(d.amount),D=Number.isFinite(K)&&K>0?K:Q,B=O+Q-D;return B>0?B:0},[b,c,d.amount]);return s.jsx("div",{className:"space-y-6",children:s.jsx(je,{title:"Edit Supplier Payment",description:"Revise saved supplier payments. Linked bank drawings stay aligned automatically.",children:s.jsxs("form",{className:"grid gap-6",onSubmit:O=>{if(O.preventDefault(),!l){h({type:"error",message:"Load a supplier payment before saving changes."});return}j.mutate()},children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-[minmax(0,2fr),minmax(0,1fr)] items-end",children:[s.jsx(ye,{label:"Search Supplier Payments",placeholder:"Search by payment, supplier, or slip",value:o,onSelect:O=>{u(O),a(O.paymentNo||O.value||""),i(!1),p(null),m(Ji),h(null),R(null)},onSearch:n,results:A,emptyMessage:t.trim()?"No supplier payments match your search.":"Enter a payment number, supplier, or slip to search."}),s.jsx(H,{label:"Payment No.",children:s.jsx("input",{value:r,readOnly:l,placeholder:"Enter payment number",onChange:O=>{a(O.target.value),i(!1),p(null),m(Ji),h(null),u(null),R(null),f("")}})})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{type:"button",className:"secondary text-sm",onClick:()=>w(r),disabled:S,children:S?"Loading":"Load Payment"}),s.jsx("button",{type:"button",className:"secondary text-sm",onClick:X,children:"Reset"})]}),x?s.jsx("p",{className:`text-xs ${x.type==="error"?"text-rose-500":x.type==="success"?"text-emerald-500":"text-slate-500"}`,children:x.message}):null,c?s.jsxs("div",{className:"grid gap-4",children:[s.jsxs("div",{className:"border border-slate-200 bg-slate-50 rounded-2xl px-4 py-3 text-xs text-slate-600",children:[s.jsx("p",{className:"font-semibold text-slate-700 mb-2",children:"Payment snapshot"}),s.jsxs("div",{className:"grid gap-2 sm:grid-cols-2 md:grid-cols-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"uppercase tracking-wide text-slate-500",children:"Payment"}),s.jsx("p",{className:"text-slate-800",children:c.paymentNo||""})]}),s.jsxs("div",{children:[s.jsx("p",{className:"uppercase tracking-wide text-slate-500",children:"Supplier"}),s.jsx("p",{className:"text-slate-800",children:(N=c.supplier)!=null&&N.code?`${c.supplier.code}  ${c.supplier.name}`:""})]}),s.jsxs("div",{children:[s.jsx("p",{className:"uppercase tracking-wide text-slate-500",children:"Amount"}),s.jsx("p",{className:"text-slate-800",children:uu(c.amount)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"uppercase tracking-wide text-slate-500",children:"Mode"}),s.jsx("p",{className:"text-slate-800",children:(c.paymentMode||"cash").toUpperCase()})]}),s.jsxs("div",{children:[s.jsx("p",{className:"uppercase tracking-wide text-slate-500",children:"Bank Info"}),s.jsx("p",{className:"text-slate-800",children:(_=c.bank)!=null&&_.code?`${c.bank.code}  ${c.bank.name}`:""})]}),s.jsxs("div",{children:[s.jsx("p",{className:"uppercase tracking-wide text-slate-500",children:"Slip / Ref"}),s.jsx("p",{className:"text-slate-800",children:c.slipNo||""})]}),s.jsxs("div",{children:[s.jsx("p",{className:"uppercase tracking-wide text-slate-500",children:"Slip Date"}),s.jsx("p",{className:"text-slate-800",children:c.slipDateDisplay||c.slipDate||""})]}),s.jsxs("div",{children:[s.jsx("p",{className:"uppercase tracking-wide text-slate-500",children:"Outstanding (current)"}),s.jsx("p",{className:"text-slate-800",children:b?uu(b.payable):""})]}),typeof F=="number"?s.jsxs("div",{children:[s.jsx("p",{className:"uppercase tracking-wide text-slate-500",children:"Outstanding (after save)"}),s.jsx("p",{className:"text-slate-800",children:uu(F)})]}):null]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[s.jsx(H,{label:"Payment Date",required:!0,children:s.jsx("input",{type:"date",value:d.paymentDate,onChange:O=>m(Q=>({...Q,paymentDate:O.target.value}))})}),s.jsx(H,{label:"Payment Mode",required:!0,children:s.jsxs("select",{value:d.paymentMode,onChange:O=>{const Q=O.target.value,K=new Date().toISOString().slice(0,10);h(null),m(D=>{const B={...D,paymentMode:Q};return Q==="cash"?(B.bankCode="",B.bankLabel="",B.slipNo="",B.slipDate=""):Q==="online"?B.slipDate="":Q==="bank"&&(B.slipDate=D.slipDate||K),B}),Q==="cash"&&f("")},children:[s.jsx("option",{value:"cash",children:"Cash"}),s.jsx("option",{value:"online",children:"Online"}),s.jsx("option",{value:"bank",children:"Bank Transaction"})]})}),M||U?s.jsx(ye,{label:"Bank",placeholder:"Type at least two characters",value:d.bankCode?{label:d.bankLabel||d.bankCode}:null,onSelect:O=>{O&&(m(Q=>({...Q,bankCode:O.code,bankLabel:`${O.code}  ${O.name}`})),h(null))},onSearch:f,results:E?(($=T.data)==null?void 0:$.map(O=>({value:O.id,code:O.code,name:O.name,label:`${O.code}  ${O.name}`})))??[]:[],emptyMessage:E?"No matching banks found.":"Type at least two characters to search banks."}):null,M||U?s.jsx(H,{label:M?"Transaction Reference":"Slip No.",children:s.jsx("input",{value:d.slipNo,onChange:O=>m(Q=>({...Q,slipNo:O.target.value})),placeholder:M?"Enter transaction reference":"Enter slip number"})}):null,U?s.jsx(H,{label:"Slip Date",required:!0,children:s.jsx("input",{type:"date",value:d.slipDate,onChange:O=>m(Q=>({...Q,slipDate:O.target.value}))})}):null,s.jsx(H,{label:"Payment Amount",required:!0,children:s.jsx("input",{type:"number",min:"0.01",step:"0.01",value:d.amount,onChange:O=>m(Q=>({...Q,amount:O.target.value}))})}),s.jsx(H,{label:"Details",className:"md:col-span-3",children:s.jsx("textarea",{rows:3,value:d.details,onChange:O=>m(Q=>({...Q,details:O.target.value})),placeholder:"Optional remarks"})})]})]}):null,s.jsx("div",{className:"flex items-center justify-end gap-3",children:s.jsx("button",{type:"submit",className:"primary",disabled:k||!c,children:k?"Saving":"Save Changes"})})]})})})},U1="purchase",Re=e=>`Rs ${Number(e??0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,At=e=>Number(e??0).toLocaleString(),Nt=e=>{const t=Number(e??0);return Number.isFinite(t)?Math.abs(t%1)<1e-6?t===0?"0.00":t.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0}):t.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):"0"},Go=e=>{const t=(e||"").toString().trim().toLowerCase();return t?t.charAt(0).toUpperCase()+t.slice(1):"Deposit"},jf=e=>{const t=(e||"").toString().trim().toLowerCase();return t==="online"?"Online":t==="bank"?"Bank Transaction":"Cash"},Q1=({sale:e,items:t=[],row:n})=>{const r={amount:Number(e.total_amount??0),paid:Number(e.amount_paid??0),previous:Number(e.previous_balance??0)},a=r.amount-r.paid+r.previous,l=(n==null?void 0:n.entity)||ke(e.customer_code,e.customer_name),i=(n==null?void 0:n.salesman)||ke(e.salesman_code,e.salesman_name);return s.jsxs("div",{className:"space-y-6 print:hidden",children:[s.jsxs("div",{className:"grid gap-3 sm:grid-cols-2 md:grid-cols-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Invoice"}),s.jsx("p",{className:"font-medium text-slate-800",children:e.invoice_no})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Invoice Date"}),s.jsx("p",{className:"font-medium text-slate-800",children:e.invoice_date||""})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Customer"}),s.jsx("p",{className:"font-medium text-slate-800",children:l})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Salesman"}),s.jsx("p",{className:"font-medium text-slate-800",children:i})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Phone"}),s.jsx("p",{className:"font-medium text-slate-800",children:e.customer_phone||(n==null?void 0:n.customerPhone)||""})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Address"}),s.jsx("p",{className:"font-medium text-slate-800",children:e.customer_address||(n==null?void 0:n.customerAddress)||""})]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full text-sm text-slate-700",children:[s.jsx("thead",{className:"bg-slate-100 text-xs uppercase text-slate-500",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-3 py-2 text-left",children:"Item"}),s.jsx("th",{className:"px-3 py-2 text-right",children:"Quantity"}),s.jsx("th",{className:"px-3 py-2 text-right",children:"Bonus"}),s.jsx("th",{className:"px-3 py-2 text-right",children:"Trade Price"}),s.jsx("th",{className:"px-3 py-2 text-right",children:"Discount %"}),s.jsx("th",{className:"px-3 py-2 text-right",children:"Line Total"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-100",children:t.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"px-3 py-4 text-center text-slate-500",children:"No items recorded on this invoice."})}):t.map(o=>{const u=Number(o.quantity??0),c=Number(o.bonus??0),p=Number(o.trade_price??0),d=Number(o.discount_percent??0),m=u*p*(1-d/100);return s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsxs("td",{className:"px-3 py-2",children:[s.jsxs("p",{className:"font-medium text-slate-800",children:[o.item_code,"  ",o.item_name]}),s.jsx("p",{className:"text-xs text-slate-500",children:o.base_unit||""})]}),s.jsx("td",{className:"px-3 py-2 text-right",children:u}),s.jsx("td",{className:"px-3 py-2 text-right",children:c}),s.jsx("td",{className:"px-3 py-2 text-right",children:Re(p)}),s.jsx("td",{className:"px-3 py-2 text-right",children:d.toFixed(2)}),s.jsx("td",{className:"px-3 py-2 text-right",children:Re(m)})]},o.id??`${o.item_code}-${o.item_name}`)})})]})}),s.jsx("div",{className:"grid gap-4 rounded-3xl border border-slate-200 bg-gradient-to-r from-slate-50 via-white to-slate-50 px-6 py-5 shadow-[0_12px_35px_rgba(15,23,42,0.08)]",children:s.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 xl:grid-cols-4 text-sm text-slate-700",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-xs uppercase tracking-[0.2em] text-slate-500",children:"Total Amount"}),s.jsx("p",{className:"text-lg font-semibold text-slate-900",children:Re(r.amount)})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-xs uppercase tracking-[0.2em] text-slate-500",children:"Amount Paid"}),s.jsx("p",{className:"text-lg font-semibold text-slate-900",children:Re(r.paid)})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-xs uppercase tracking-[0.2em] text-slate-500",children:"Previous Balance"}),s.jsx("p",{className:"text-lg font-semibold text-slate-900",children:Re(r.previous)})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-xs uppercase tracking-[0.2em] text-slate-500",children:"Net Balance"}),s.jsx("p",{className:"text-lg font-semibold text-emerald-600",children:Re(a)})]})]})})]})},Y1=({entry:e,row:t})=>{const n=(e==null?void 0:e.invoice_no)||(t==null?void 0:t.reference)||"",r=(e==null?void 0:e.return_date)||(t==null?void 0:t.date)||"",a=ke(e==null?void 0:e.customer_code,e==null?void 0:e.customer_name)||(t==null?void 0:t.entity)||"",l=$t((e==null?void 0:e.updated_at)||(e==null?void 0:e.created_at)),i=Number((e==null?void 0:e.quantity)??(t==null?void 0:t.quantity)??0),o=(e==null?void 0:e.trade_price)??(t==null?void 0:t.trade_price)??(i>0?Number((t==null?void 0:t.value)??0)/i:0),u=Number(o??0),c=i*u,p=ke(e==null?void 0:e.item_code,e==null?void 0:e.item_name)||(t==null?void 0:t.item)||"",d=(e==null?void 0:e.base_unit)||(e==null?void 0:e.unit)||"",m=[{id:(e==null?void 0:e.sale_item_id)||(e==null?void 0:e.id)||`${n}-return`,label:p,unit:d,quantity:i,rate:u,value:c}],x=m.reduce((C,g)=>C+Number(g.quantity??0),0),h=m.reduce((C,g)=>C+Number(g.value??0),0),S=x>0?h/x:u;return s.jsxs("div",{className:"space-y-6 print:hidden",children:[s.jsxs("div",{className:"grid gap-3 sm:grid-cols-2 md:grid-cols-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Invoice"}),s.jsx("p",{className:"font-medium text-slate-800",children:n})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Return Date"}),s.jsx("p",{className:"font-medium text-slate-800",children:r})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Customer"}),s.jsx("p",{className:"font-medium text-slate-800",children:a})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Recorded"}),s.jsx("p",{className:"font-medium text-slate-800",children:l})]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full text-sm text-slate-700",children:[s.jsx("thead",{className:"bg-slate-100 text-xs uppercase text-slate-500",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-3 py-2 text-left",children:"Item"}),s.jsx("th",{className:"px-3 py-2 text-right",children:"Quantity"}),s.jsx("th",{className:"px-3 py-2 text-right",children:"Rate"}),s.jsx("th",{className:"px-3 py-2 text-right",children:"Value"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-100",children:m.map(C=>s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsxs("td",{className:"px-3 py-2",children:[s.jsx("p",{className:"font-medium text-slate-800",children:C.label}),C.unit?s.jsx("p",{className:"text-xs text-slate-500",children:C.unit}):null]}),s.jsx("td",{className:"px-3 py-2 text-right",children:At(C.quantity)}),s.jsx("td",{className:"px-3 py-2 text-right",children:Re(C.rate)}),s.jsx("td",{className:"px-3 py-2 text-right",children:Re(C.value)})]},C.id))})]})}),s.jsx("div",{className:"grid gap-4 rounded-3xl border border-slate-200 bg-gradient-to-r from-slate-50 via-white to-slate-50 px-6 py-5 shadow-[0_12px_35px_rgba(15,23,42,0.08)]",children:s.jsxs("div",{className:"grid gap-4 sm:grid-cols-3 text-sm text-slate-700",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-xs uppercase tracking-[0.2em] text-slate-500",children:"Items Returned"}),s.jsx("p",{className:"text-lg font-semibold text-slate-900",children:At(m.length)})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-xs uppercase tracking-[0.2em] text-slate-500",children:"Quantity Returned"}),s.jsx("p",{className:"text-lg font-semibold text-slate-900",children:At(x)})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-xs uppercase tracking-[0.2em] text-slate-500",children:"Average Rate"}),s.jsx("p",{className:"text-lg font-semibold text-slate-900",children:Re(S)})]}),s.jsxs("div",{className:"space-y-1 sm:col-span-3 md:col-span-3",children:[s.jsx("p",{className:"text-xs uppercase tracking-[0.2em] text-slate-500",children:"Estimated Value"}),s.jsx("p",{className:"text-lg font-semibold text-emerald-600",children:Re(h)})]})]})})]})},H1=({transaction:e,row:t})=>{const n=(e==null?void 0:e.entry_no)||(t==null?void 0:t.entryNo)||"",r=(e==null?void 0:e.slip_date)||(t==null?void 0:t.date)||"",a=(e==null?void 0:e.slip_no)||(t==null?void 0:t.reference)||"",l=ke(e==null?void 0:e.bank_code,e==null?void 0:e.bank_name)||(t==null?void 0:t.entity)||"",i=e!=null&&e.customer_receipt_no?`From receipt ${e.customer_receipt_no}`:e!=null&&e.supplier_payment_no?`Supplier payment ${e.supplier_payment_no}`:(t==null?void 0:t.origin)||"Manual Entry",o=Number((e==null?void 0:e.cash_amount)??(t==null?void 0:t.amount)??0),u=Go((e==null?void 0:e.transaction_type)||(t==null?void 0:t.transactionType)),c=(e==null?void 0:e.id)??(t==null?void 0:t.transactionId)??"",p=(e==null?void 0:e.created_at)||null,d=(e==null?void 0:e.updated_at)||p,m=$t(d||p),x=p?$t(p):"";return s.jsxs("div",{className:"space-y-6 print:hidden",children:[s.jsxs("div",{className:"grid gap-3 sm:grid-cols-2 md:grid-cols-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Entry No."}),s.jsx("p",{className:"font-medium text-slate-800",children:n})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Transaction ID"}),s.jsx("p",{className:"font-medium text-slate-800",children:c})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Transaction Type"}),s.jsx("p",{className:"font-medium text-slate-800",children:u})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Slip / Reference"}),s.jsx("p",{className:"font-medium text-slate-800",children:a})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Slip Date"}),s.jsx("p",{className:"font-medium text-slate-800",children:r})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Bank"}),s.jsx("p",{className:"font-medium text-slate-800",children:l})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Source"}),s.jsx("p",{className:"font-medium text-slate-800",children:i})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Recorded"}),s.jsx("p",{className:"font-medium text-slate-800",children:m||""})]})]}),s.jsx("div",{className:"grid gap-4 rounded-3xl border border-slate-200 bg-gradient-to-r from-slate-50 via-white to-slate-50 px-6 py-5 shadow-[0_12px_35px_rgba(15,23,42,0.08)]",children:s.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 xl:grid-cols-4 text-sm text-slate-700",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-xs uppercase tracking-[0.2em] text-slate-500",children:"Amount"}),s.jsx("p",{className:"text-lg font-semibold text-emerald-600",children:Re(o)})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-xs uppercase tracking-[0.2em] text-slate-500",children:"Transaction Type"}),s.jsx("p",{className:"text-lg font-semibold text-slate-900",children:u})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-xs uppercase tracking-[0.2em] text-slate-500",children:"Source"}),s.jsx("p",{className:"text-lg font-semibold text-slate-900",children:i})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-xs uppercase tracking-[0.2em] text-slate-500",children:"Created"}),s.jsx("p",{className:"text-lg font-semibold text-slate-900",children:x})]})]})})]})},V1=({transaction:e,row:t,title:n})=>{const r=(e==null?void 0:e.entry_no)||(t==null?void 0:t.entryNo)||"",a=Go((e==null?void 0:e.transaction_type)||(t==null?void 0:t.transactionType)),l=(e==null?void 0:e.slip_date)||(t==null?void 0:t.date)||"",i=ke(e==null?void 0:e.bank_code,e==null?void 0:e.bank_name)||(t==null?void 0:t.entity)||"",o=(e==null?void 0:e.slip_no)||(t==null?void 0:t.reference)||"",u=e!=null&&e.customer_receipt_no?`From receipt ${e.customer_receipt_no}`:e!=null&&e.supplier_payment_no?`Supplier payment ${e.supplier_payment_no}`:(t==null?void 0:t.origin)||"Manual Entry",c=Number((e==null?void 0:e.cash_amount)??(t==null?void 0:t.amount)??0),p=(e==null?void 0:e.created_at)||null,d=(e==null?void 0:e.updated_at)||p;return s.jsxs("section",{className:"mx-auto w-full max-w-2xl space-y-6 text-slate-900 print:mx-0 print:w-full print:h-[14.85cm] print:max-h-[14.85cm] print:space-y-3 print:overflow-hidden print:px-3 print:pt-2 print:pb-3",style:{breakInside:"avoid"},children:[s.jsxs("header",{className:"flex flex-col gap-1 border-b border-slate-300 pb-2 print:pb-1",children:[s.jsx("h2",{className:"text-xl font-semibold tracking-tight text-slate-900",children:n}),s.jsx("p",{className:"text-[0.65rem] text-slate-400",children:"Official record of the bank transaction captured below."})]}),s.jsx("div",{className:"rounded-xl border border-slate-200 bg-white/90 p-4 shadow-sm backdrop-blur print:p-3 print:shadow-none",children:s.jsxs("dl",{className:"grid gap-4 text-[0.75rem] sm:grid-cols-3",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx("dt",{className:"text-[0.55rem] uppercase tracking-[0.3em] text-slate-500",children:"Entry No."}),s.jsx("dd",{className:"text-sm font-semibold text-slate-900",children:r})]}),s.jsxs("div",{className:"space-y-0.5",children:[s.jsx("dt",{className:"text-[0.55rem] uppercase tracking-[0.3em] text-slate-500",children:"Transaction Type"}),s.jsx("dd",{className:"text-sm font-semibold text-slate-900",children:a})]}),s.jsxs("div",{className:"space-y-0.5",children:[s.jsx("dt",{className:"text-[0.55rem] uppercase tracking-[0.3em] text-slate-500",children:"Slip Date"}),s.jsx("dd",{className:"text-sm font-semibold text-slate-900",children:l})]})]})}),s.jsx("div",{className:"rounded-xl border border-slate-200 bg-white/90 p-4 shadow-sm backdrop-blur print:p-3 print:shadow-none",children:s.jsxs("dl",{className:"grid gap-4 text-[0.75rem] sm:grid-cols-3",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx("dt",{className:"text-[0.55rem] uppercase tracking-[0.3em] text-slate-500",children:"Bank"}),s.jsx("dd",{className:"text-sm font-semibold text-slate-900",children:i})]}),s.jsxs("div",{className:"space-y-0.5",children:[s.jsx("dt",{className:"text-[0.55rem] uppercase tracking-[0.3em] text-slate-500",children:"Slip / Reference"}),s.jsx("dd",{className:"text-sm font-semibold text-slate-900",children:o})]}),s.jsxs("div",{className:"space-y-0.5",children:[s.jsx("dt",{className:"text-[0.55rem] uppercase tracking-[0.3em] text-slate-500",children:"Source"}),s.jsx("dd",{className:"text-sm font-semibold text-slate-900",children:u})]})]})}),s.jsx("div",{className:"flex justify-end",children:s.jsx("div",{className:"w-full max-w-sm overflow-hidden rounded-xl border border-slate-200 bg-white/85 shadow-sm print:max-w-sm print:shadow-none",children:s.jsx("table",{className:"w-full border-collapse text-[0.75rem] print:text-[0.7rem]",children:s.jsxs("tbody",{children:[s.jsxs("tr",{className:"border-b border-slate-200 last:border-0",children:[s.jsxs("td",{className:"px-4 py-3 print:px-3 print:py-2 align-top",children:[s.jsx("div",{className:"text-[0.6rem] font-semibold uppercase tracking-[0.28em] text-slate-500",children:"Amount"}),s.jsx("div",{className:"text-sm font-semibold text-slate-900",children:Nt(c)})]}),s.jsxs("td",{className:"border-l border-slate-200 px-4 py-3 print:px-3 print:py-2 align-top",children:[s.jsx("div",{className:"text-[0.6rem] font-semibold uppercase tracking-[0.28em] text-slate-500",children:"Created"}),s.jsx("div",{className:"text-sm font-semibold text-slate-900",children:p?$t(p):""})]})]}),s.jsxs("tr",{children:[s.jsxs("td",{className:"px-4 py-3 print:px-3 print:py-2 align-top",children:[s.jsx("div",{className:"text-[0.6rem] font-semibold uppercase tracking-[0.28em] text-slate-500",children:"Updated"}),s.jsx("div",{className:"text-sm font-semibold text-slate-900",children:d?$t(d):""})]}),s.jsxs("td",{className:"border-l border-slate-200 px-4 py-3 print:px-3 print:py-2 align-top",children:[s.jsx("div",{className:"text-[0.6rem] font-semibold uppercase tracking-[0.28em] text-slate-500",children:"Source"}),s.jsx("div",{className:"text-sm font-semibold text-slate-900",children:u})]})]})]})})})})]})};function $t(e){if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?e:t.toLocaleString()}const Hn=({title:e,children:t,actions:n})=>{const r=()=>window.print();return s.jsxs("div",{className:"space-y-4 text-sm text-slate-600 print:no-bg print:shadow-none print:text-dark print:w-full print:max-w-none",children:[s.jsxs("header",{className:"flex items-start justify-between print:hidden",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:e}),s.jsx("p",{className:"text-xs text-slate-500",children:"Review or print this transaction."})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[n||null,s.jsx("button",{type:"button",className:"secondary text-xs px-3 py-1",onClick:r,children:"Print"})]})]}),s.jsx("div",{className:"print:block print:text-dark",children:t})]})},W1=({sale:e,items:t=[],row:n})=>{const r=(e==null?void 0:e.invoice_no)||(n==null?void 0:n.reference)||"",a=(e==null?void 0:e.invoice_date)||(n==null?void 0:n.date)||"",l=ke(e==null?void 0:e.customer_code,e==null?void 0:e.customer_name)||(n==null?void 0:n.entity)||"",i=ke(e==null?void 0:e.salesman_code,e==null?void 0:e.salesman_name)||(n==null?void 0:n.salesman)||"",o=(e==null?void 0:e.customer_phone)||(n==null?void 0:n.customerPhone)||"",u=(e==null?void 0:e.customer_address)||(n==null?void 0:n.customerAddress)||"",c={amount:Number((e==null?void 0:e.total_amount)??(n==null?void 0:n.amount)??0),paid:Number((e==null?void 0:e.amount_paid)??(n==null?void 0:n.received)??0),previous:Number((e==null?void 0:e.previous_balance)??0)},p=c.amount-c.paid+c.previous,d=[{label:"Total Amount",value:c.amount},{label:"Amount Paid",value:c.paid},{label:"Previous Balance",value:c.previous},{label:"Net Balance",value:p}],m=[d.slice(0,2),d.slice(2,4)];return s.jsxs("section",{className:"mx-auto w-full max-w-2xl space-y-6 text-slate-900 print:mx-0 print:w-full print:h-[14.85cm] print:max-h-[14.85cm] print:space-y-3 print:overflow-hidden print:px-3 print:pt-2 print:pb-3",style:{breakInside:"avoid"},children:[s.jsxs("header",{className:"flex flex-col gap-1 border-b border-slate-300 pb-2 print:pb-1",children:[s.jsx("h2",{className:"text-xl font-semibold tracking-tight text-slate-900",children:"Sale Invoice"}),s.jsx("p",{className:"text-[0.65rem] text-slate-400",children:"Official summary of this transaction captured below."})]}),s.jsx("div",{className:"rounded-xl border border-slate-200 bg-white/90 p-4 shadow-sm backdrop-blur print:p-3 print:shadow-none",children:s.jsxs("dl",{className:"grid gap-4 text-[0.75rem] sm:grid-cols-3",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx("dt",{className:"text-[0.55rem] uppercase tracking-[0.3em] text-slate-500",children:"No."}),s.jsx("dd",{className:"text-sm font-semibold text-slate-900",children:r})]}),s.jsxs("div",{className:"space-y-0.5",children:[s.jsx("dt",{className:"text-[0.55rem] uppercase tracking-[0.3em] text-slate-500",children:"Date"}),s.jsx("dd",{className:"text-sm font-semibold text-slate-900",children:a})]}),s.jsxs("div",{className:"space-y-0.5",children:[s.jsx("dt",{className:"text-[0.55rem] uppercase tracking-[0.3em] text-slate-500",children:"Salesman"}),s.jsx("dd",{className:"text-sm font-semibold text-slate-900",children:i})]})]})}),s.jsx("div",{className:"rounded-xl border border-slate-200 bg-white/90 p-4 shadow-sm backdrop-blur print:p-3 print:shadow-none",children:s.jsxs("dl",{className:"grid gap-4 text-[0.75rem] sm:grid-cols-3",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx("dt",{className:"text-[0.55rem] uppercase tracking-[0.3em] text-slate-500",children:"To Customer"}),s.jsx("dd",{className:"text-sm font-semibold text-slate-900",children:l})]}),s.jsxs("div",{className:"space-y-0.5",children:[s.jsx("dt",{className:"text-[0.55rem] uppercase tracking-[0.3em] text-slate-500",children:"Phone"}),s.jsx("dd",{className:"text-sm font-semibold text-slate-900",children:o})]}),s.jsxs("div",{className:"space-y-0.5",children:[s.jsx("dt",{className:"text-[0.55rem] uppercase tracking-[0.3em] text-slate-500",children:"Address"}),s.jsx("dd",{className:"text-sm font-semibold text-slate-900",children:u})]})]})}),s.jsx("div",{children:s.jsx("p",{className:"text-[0.6rem] font-semibold uppercase tracking-[0.3em] text-slate-500",children:"Description"})}),s.jsx("div",{className:"overflow-hidden rounded-xl border border-slate-200 bg-white/80 shadow-sm print:shadow-none",children:s.jsxs("table",{className:"w-full border-collapse text-[0.75rem] print:text-[0.7rem]",children:[s.jsx("thead",{className:"bg-slate-300 text-[0.6rem] uppercase tracking-[0.22em] text-slate-900",children:s.jsxs("tr",{children:[s.jsx("th",{className:"border border-slate-400 px-3 py-2 text-left font-bold text-slate-900",children:"Item"}),s.jsx("th",{className:"border border-slate-400 px-3 py-2 text-center font-bold text-slate-900 w-[85px]",children:"P.SIZE"}),s.jsx("th",{className:"border border-slate-400 px-3 py-2 text-center font-bold text-slate-900 w-[60px]",children:"Qty"}),s.jsx("th",{className:"border border-slate-400 px-3 py-2 text-center font-bold text-slate-900 w-[60px]",children:"Bonus"}),s.jsx("th",{className:"border border-slate-400 px-3 py-2 text-center font-bold text-slate-900 w-[75px]",children:"T.P"}),s.jsx("th",{className:"border border-slate-400 px-3 py-2 text-center font-bold text-slate-900 w-[85px]",children:"Off"}),s.jsx("th",{className:"border border-slate-400 px-3 py-2 text-center font-bold text-slate-900 w-[90px]",children:"Rt Price"}),s.jsx("th",{className:"border border-slate-400 px-3 py-2 text-center font-bold text-slate-900 w-[60px]",children:"Dis%"}),s.jsx("th",{className:"border border-slate-400 px-3 py-2 text-center font-bold text-slate-900 w-[85px]",children:"Total"})]})}),s.jsx("tbody",{children:t.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:9,className:"border border-slate-300 px-3 py-4 text-center text-slate-500",children:"No items recorded on this invoice."})}):t.map((x,h)=>{const S=Number(x.quantity??0),C=Number(x.bonus??0),g=Number(x.trade_price??x.trade_off_price??0),f=x.trade_off_price??null,b=Number(f),R=Number.isFinite(b)?Nt(b):"",P=x.retail_price??x.retailPrice??null,A=Number(P),v=Number.isFinite(A)?Nt(A):"",E=Number(x.discount_percent??0),T=x.pack_size??x.packSize??null,M=Number(T),U=x.base_unit&&x.base_unit!=="Pieces"&&Number.isFinite(M)?At(M):"",X=x.company_name??x.companyName??"",L=x.base_unit||"",w=[X,L].filter(Boolean).join(" - "),j=S*g*(1-E/100);return s.jsxs("tr",{className:h%2===0?"bg-white":"bg-slate-50",children:[s.jsxs("td",{className:"border border-slate-300 px-3 py-2 align-top print:py-1.5",children:[s.jsxs("div",{className:"font-semibold text-slate-900",children:[x.item_code,"  ",x.item_name]}),s.jsx("div",{className:"text-[0.55rem] uppercase tracking-[0.2em] text-slate-400",children:w})]}),s.jsx("td",{className:"border border-slate-300 px-3 py-2 text-center align-top text-slate-900 font-semibold print:py-1.5 w-[85px]",children:U}),s.jsx("td",{className:"border border-slate-300 px-3 py-2 text-center align-top text-slate-900 font-semibold print:py-1.5 w-[60px]",children:At(S)}),s.jsx("td",{className:"border border-slate-300 px-3 py-2 text-center align-top text-slate-900 font-semibold print:py-1.5 w-[60px]",children:At(C)}),s.jsx("td",{className:"border border-slate-300 px-3 py-2 text-center align-top text-slate-900 font-semibold print:py-1.5 w-[75px]",children:Nt(g)}),s.jsx("td",{className:"border border-slate-300 px-3 py-2 text-center align-top text-slate-900 font-semibold print:py-1.5 w-[85px]",children:R}),s.jsx("td",{className:"border border-slate-300 px-3 py-2 text-center align-top text-slate-900 font-semibold print:py-1.5 w-[90px]",children:v}),s.jsx("td",{className:"border border-slate-300 px-3 py-2 text-center align-top text-slate-900 font-semibold print:py-1.5 w-[60px]",children:E.toFixed(2)}),s.jsx("td",{className:"border border-slate-300 px-3 py-2 text-center align-top text-slate-900 font-semibold print:py-1.5 w-[85px]",children:Nt(j)})]},x.id??`${x.item_code}-${x.item_name}`)})})]})}),s.jsx("div",{className:"flex justify-end",children:s.jsx("div",{className:"w-full max-w-sm overflow-hidden rounded-xl border border-slate-200 bg-white/85 shadow-sm print:max-w-sm print:shadow-none",children:s.jsx("table",{className:"w-full border-collapse text-[0.75rem] print:text-[0.7rem]",children:s.jsx("tbody",{children:m.map((x,h)=>s.jsxs("tr",{className:"border-b border-slate-200 last:border-0",children:[x.map(S=>s.jsxs("td",{className:"border-l border-slate-200 first:border-l-0 px-4 py-3 print:px-3 print:py-2 align-top",children:[s.jsx("div",{className:"text-[0.6rem] font-semibold uppercase tracking-[0.28em] text-slate-500",children:S.label}),s.jsx("div",{className:"text-sm font-semibold text-slate-900",children:Nt(S.value)})]},S.label)),x.length<2?s.jsx("td",{className:"border-l border-slate-200 px-4 py-3 print:px-3 print:py-2"}):null]},`totals-row-${h}`))})})})}),s.jsx("div",{className:"border-t border-slate-300"})]})},K1=({entry:e,row:t})=>{const n=(e==null?void 0:e.invoice_no)||(t==null?void 0:t.reference)||"",r=(e==null?void 0:e.return_date)||(t==null?void 0:t.date)||"",a=$t((e==null?void 0:e.updated_at)||(e==null?void 0:e.created_at)),l=ke(e==null?void 0:e.customer_code,e==null?void 0:e.customer_name)||(t==null?void 0:t.entity)||"",i=ke(e==null?void 0:e.item_code,e==null?void 0:e.item_name)||(t==null?void 0:t.item)||"",o=Number((e==null?void 0:e.quantity)??(t==null?void 0:t.quantity)??0),u=(e==null?void 0:e.trade_price)??(t==null?void 0:t.trade_price)??(o>0?Number((t==null?void 0:t.value)??0)/o:0),c=Number(u??0),p=o*c,d=o,m=p,x=d>0?m/d:c;return s.jsxs("section",{className:"mx-auto w-full max-w-2xl space-y-6 text-slate-900 print:mx-0 print:w-full print:h-[14.85cm] print:max-h-[14.85cm] print:space-y-3 print:overflow-hidden print:px-3 print:pt-2 print:pb-3",style:{breakInside:"avoid"},children:[s.jsxs("header",{className:"flex flex-col gap-1 border-b border-slate-300 pb-2 print:pb-1",children:[s.jsx("h2",{className:"text-xl font-semibold tracking-tight text-slate-900",children:"Sale Return"}),s.jsx("p",{className:"text-[0.65rem] text-slate-400",children:"Official summary of this return captured below."})]}),s.jsx("div",{className:"rounded-xl border border-slate-200 bg-white/90 p-4 shadow-sm backdrop-blur print:p-3 print:shadow-none",children:s.jsxs("dl",{className:"grid gap-4 text-[0.75rem] sm:grid-cols-3",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx("dt",{className:"text-[0.55rem] uppercase tracking-[0.3em] text-slate-500",children:"Invoice"}),s.jsx("dd",{className:"text-sm font-semibold text-slate-900",children:n})]}),s.jsxs("div",{className:"space-y-0.5",children:[s.jsx("dt",{className:"text-[0.55rem] uppercase tracking-[0.3em] text-slate-500",children:"Return Date"}),s.jsx("dd",{className:"text-sm font-semibold text-slate-900",children:r})]}),s.jsxs("div",{className:"space-y-0.5",children:[s.jsx("dt",{className:"text-[0.55rem] uppercase tracking-[0.3em] text-slate-500",children:"Recorded"}),s.jsx("dd",{className:"text-sm font-semibold text-slate-900",children:a})]})]})}),s.jsx("div",{className:"rounded-xl border border-slate-200 bg-white/90 p-4 shadow-sm backdrop-blur print:p-3 print:shadow-none",children:s.jsx("dl",{className:"grid gap-4 text-[0.75rem] sm:grid-cols-2",children:s.jsxs("div",{className:"space-y-0.5",children:[s.jsx("dt",{className:"text-[0.55rem] uppercase tracking-[0.3em] text-slate-500",children:"Customer"}),s.jsx("dd",{className:"text-sm font-semibold text-slate-900",children:l})]})})}),s.jsx("div",{children:s.jsx("p",{className:"text-[0.6rem] font-semibold uppercase tracking-[0.3em] text-slate-500",children:"Returned Items"})}),s.jsx("div",{className:"overflow-hidden rounded-xl border border-slate-200 bg-white/80 shadow-sm print:shadow-none",children:s.jsxs("table",{className:"w-full border-collapse text-[0.75rem] print:text-[0.7rem]",children:[s.jsx("thead",{className:"bg-slate-300 text-[0.6rem] uppercase tracking-[0.22em] text-slate-900",children:s.jsxs("tr",{children:[s.jsx("th",{className:"border border-slate-400 px-3 py-2 text-left font-bold text-slate-900",children:"Item"}),s.jsx("th",{className:"border border-slate-400 px-3 py-2 text-center font-bold text-slate-900 w-[70px]",children:"Qty"}),s.jsx("th",{className:"border border-slate-400 px-3 py-2 text-center font-bold text-slate-900 w-[80px]",children:"Rate"}),s.jsx("th",{className:"border border-slate-400 px-3 py-2 text-center font-bold text-slate-900 w-[90px]",children:"Value"})]})}),s.jsx("tbody",{children:s.jsxs("tr",{className:"bg-white",children:[s.jsx("td",{className:"border border-slate-300 px-3 py-2 align-top print:py-1.5",children:s.jsx("div",{className:"font-semibold text-slate-900",children:i})}),s.jsx("td",{className:"border border-slate-300 px-3 py-2 text-center align-top text-slate-900 font-semibold print:py-1.5 w-[70px]",children:At(o)}),s.jsx("td",{className:"border border-slate-300 px-3 py-2 text-center align-top text-slate-900 font-semibold print:py-1.5 w-[80px]",children:Nt(c)}),s.jsx("td",{className:"border border-slate-300 px-3 py-2 text-center align-top text-slate-900 font-semibold print:py-1.5 w-[90px]",children:Nt(p)})]})})]})}),s.jsx("div",{className:"flex justify-end",children:s.jsx("div",{className:"w-full max-w-sm overflow-hidden rounded-xl border border-slate-200 bg-white/85 shadow-sm print:max-w-sm print:shadow-none",children:s.jsx("table",{className:"w-full border-collapse text-[0.75rem] print:text-[0.7rem]",children:s.jsxs("tbody",{children:[s.jsxs("tr",{className:"border-b border-slate-200 last:border-0",children:[s.jsxs("td",{className:"border-l border-slate-200 px-4 py-3 print:px-3 print:py-2 align-top",children:[s.jsx("div",{className:"text-[0.6rem] font-semibold uppercase tracking-[0.28em] text-slate-500",children:"Quantity Returned"}),s.jsx("div",{className:"text-sm font-semibold text-slate-900",children:At(d)})]}),s.jsxs("td",{className:"border-l border-slate-200 px-4 py-3 print:px-3 print:py-2 align-top",children:[s.jsx("div",{className:"text-[0.6rem] font-semibold uppercase tracking-[0.28em] text-slate-500",children:"Average Rate"}),s.jsx("div",{className:"text-sm font-semibold text-slate-900",children:Nt(x)})]})]}),s.jsxs("tr",{children:[s.jsxs("td",{className:"border-l border-slate-200 px-4 py-3 print:px-3 print:py-2 align-top",children:[s.jsx("div",{className:"text-[0.6rem] font-semibold uppercase tracking-[0.28em] text-slate-500",children:"Estimated Value"}),s.jsx("div",{className:"text-sm font-semibold text-slate-900",children:Nt(m)})]}),s.jsxs("td",{className:"border-l border-slate-200 px-4 py-3 print:px-3 print:py-2 align-top",children:[s.jsx("div",{className:"text-[0.6rem] font-semibold uppercase tracking-[0.28em] text-slate-500",children:"Recorded"}),s.jsx("div",{className:"text-sm font-semibold text-slate-900",children:a})]})]})]})})})}),s.jsx("div",{className:"border-t border-slate-300"})]})},G1=({entry:e,row:t})=>{const n=(e==null?void 0:e.return_no)||(t==null?void 0:t.returnNo)||"",r=(e==null?void 0:e.invoice_no)||(t==null?void 0:t.reference)||"",a=(e==null?void 0:e.updated_at)||(e==null?void 0:e.created_at)||(e==null?void 0:e.return_date),l=ke(e==null?void 0:e.supplier_code,e==null?void 0:e.supplier_name)||(t==null?void 0:t.entity)||"",i=ke(e==null?void 0:e.item_code,e==null?void 0:e.item_name)||(t==null?void 0:t.item)||"",o=(e==null?void 0:e.base_unit)||(t==null?void 0:t.unit)||"",u=Number((e==null?void 0:e.quantity)??(t==null?void 0:t.quantity)??0),c=Number((e==null?void 0:e.purchase_rate)??(t==null?void 0:t.purchase_rate)??0),p=u*c,m=(h=>{if(!h)return"";const S=new Date(h);if(Number.isNaN(S.getTime()))return h;const C=String(S.getDate()).padStart(2,"0"),g=String(S.getMonth()+1).padStart(2,"0"),f=S.getFullYear(),b=String(S.getHours()).padStart(2,"0"),R=String(S.getMinutes()).padStart(2,"0");return`${C}-${g}-${f}, ${b}:${R}`})(a),x=o?`${i} (${o})`:i;return s.jsxs("section",{className:"w-full max-w-3xl text-slate-900 print:w-full print:max-w-none",style:{breakInside:"avoid"},children:[s.jsx("header",{className:"mb-6 text-center",children:s.jsx("h2",{className:"text-base font-semibold uppercase tracking-[0.18em] text-slate-900",children:"Purchase Return Report"})}),s.jsxs("div",{className:"space-y-3 text-[0.8rem] leading-relaxed text-slate-900",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-x-10 gap-y-1",children:[s.jsxs("span",{className:"font-semibold uppercase text-slate-900",children:["Return No. ",s.jsx("span",{className:"font-normal normal-case text-slate-800",children:n})]}),s.jsxs("span",{className:"font-semibold uppercase text-slate-900",children:["Invoice ",s.jsx("span",{className:"font-normal normal-case text-slate-800",children:r})]})]}),s.jsx("div",{className:"flex flex-wrap items-center gap-x-10 gap-y-1",children:s.jsxs("span",{className:"font-semibold text-slate-900",children:["Date & Time ",s.jsx("span",{className:"font-normal text-slate-800",children:m})]})}),s.jsxs("div",{className:"font-semibold uppercase text-slate-900",children:["Supplier ",s.jsx("span",{className:"font-normal normal-case text-slate-800",children:l})]})]}),s.jsx("div",{className:"mt-6 overflow-hidden rounded-xl border border-slate-200 print:border-slate-200",style:{borderWidth:"0.35px"},children:s.jsxs("table",{className:"w-full border-collapse text-[0.75rem]",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-slate-100 text-[0.7rem] font-semibold uppercase tracking-wide text-slate-800 print:bg-slate-200",style:{backgroundColor:"#f1f5f9",WebkitPrintColorAdjust:"exact",printColorAdjust:"exact"},children:[s.jsx("th",{className:"border border-slate-200 px-3 py-2 text-left print:border-slate-200",style:{borderWidth:"0.35px"},children:"Sr. No"}),s.jsx("th",{className:"border border-slate-200 px-3 py-2 text-left print:border-slate-200",style:{borderWidth:"0.35px"},children:"Items"}),s.jsx("th",{className:"border border-slate-200 px-3 py-2 text-center print:border-slate-200",style:{borderWidth:"0.35px"},children:"Returned"}),s.jsx("th",{className:"border border-slate-200 px-3 py-2 text-center print:border-slate-200",style:{borderWidth:"0.35px"},children:"Purchase Rate"}),s.jsx("th",{className:"border border-slate-200 px-3 py-2 text-center print:border-slate-200",style:{borderWidth:"0.35px"},children:"Value"})]})}),s.jsxs("tbody",{children:[s.jsxs("tr",{className:"bg-white",children:[s.jsx("td",{className:"border border-slate-200 px-3 py-2 text-center font-semibold text-slate-900 print:border-slate-200",style:{borderWidth:"0.35px"},children:"1"}),s.jsx("td",{className:"border border-slate-200 px-3 py-2 text-slate-900 print:border-slate-200",style:{borderWidth:"0.35px"},children:s.jsx("div",{className:"font-semibold text-slate-900",children:x})}),s.jsx("td",{className:"border border-slate-200 px-3 py-2 text-center font-semibold text-slate-900 print:border-slate-200",style:{borderWidth:"0.35px"},children:At(u)}),s.jsx("td",{className:"border border-slate-200 px-3 py-2 text-center font-semibold text-slate-900 print:border-slate-200",style:{borderWidth:"0.35px"},children:Nt(c)}),s.jsx("td",{className:"border border-slate-200 px-3 py-2 text-center font-semibold text-slate-900 print:border-slate-200",style:{borderWidth:"0.35px"},children:Nt(p)})]}),s.jsxs("tr",{className:"bg-slate-50 font-semibold text-slate-900",children:[s.jsx("td",{className:"border border-slate-200 px-3 py-2 text-right print:border-slate-200",style:{borderWidth:"0.35px"},colSpan:4,children:"Total Value"}),s.jsx("td",{className:"border border-slate-200 px-3 py-2 text-center print:border-slate-200",style:{borderWidth:"0.35px"},children:Nt(p)})]})]})]})})]})},ke=(e,t)=>e&&t?`${e}  ${t}`:e||t||"",bg={purchase:{label:"Purchase Entries",title:"Saved Purchase Invoices",description:"Most recent supplier purchase invoices stored in the system.",endpoint:"/purchases",params:{limit:200},entryPath:"/transactions/purchase",search:{label:"Invoice",placeholder:"Invoice no.",fields:["invoiceNo","reference"]},columns:[{key:"reference",label:"Invoice"},{key:"entity",label:"Supplier"},{key:"date",label:"Invoice Date"},{key:"amount",label:"Total Amount",align:"right",format:Re},{key:"recorded",label:"Recorded",render:e=>$t(e.recorded)}],transform:e=>({id:e.id??`purchase-${e.invoice_no}`,reference:e.invoice_no||"",entity:ke(e.supplier_code,e.supplier_name),date:e.invoice_date||"",amount:Number(e.total_amount??0),recorded:e.updated_at||e.created_at,invoiceNo:e.invoice_no||null}),detail:{makeQueryKey:e=>["purchase-detail",e.invoiceNo??e.reference],fetch:async e=>{const t=e.invoiceNo||e.reference;return!t||t===""?null:(await J.get(`/purchases/${encodeURIComponent(t)}`)).data},render:({row:e,data:t})=>{if(!(t!=null&&t.purchase))return s.jsx("p",{className:"text-sm text-slate-500",children:"Details not available for this invoice."});const{purchase:n,items:r=[]}=t,a={amount:Number(n.total_amount??0),paid:Number(n.amount_paid??0),previous:Number(n.previous_balance??0)};return s.jsxs(Hn,{title:"Purchase Invoice",children:[s.jsxs("div",{className:"grid gap-3 sm:grid-cols-2 md:grid-cols-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Invoice"}),s.jsx("p",{className:"font-medium text-slate-800",children:n.invoice_no})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Invoice Date"}),s.jsx("p",{className:"font-medium text-slate-800",children:n.invoice_date||""})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Supplier"}),s.jsx("p",{className:"font-medium text-slate-800",children:(e==null?void 0:e.entity)||ke(n.supplier_code,n.supplier_name)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Recorded"}),s.jsx("p",{className:"font-medium text-slate-800",children:$t(n.updated_at||n.created_at)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Total Amount"}),s.jsx("p",{className:"font-medium text-slate-800",children:Re(a.amount)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Amount Paid"}),s.jsx("p",{className:"font-medium text-slate-800",children:Re(a.paid)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Previous Balance"}),s.jsx("p",{className:"font-medium text-slate-800",children:Re(a.previous)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Net Payable"}),s.jsx("p",{className:"font-medium text-slate-800",children:Re(a.amount-a.paid+a.previous)})]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full text-sm text-slate-700",children:[s.jsx("thead",{className:"bg-slate-100 text-xs uppercase text-slate-500",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-3 py-2 text-left",children:"Item"}),s.jsx("th",{className:"px-3 py-2 text-right",children:"Quantity"}),s.jsx("th",{className:"px-3 py-2 text-right",children:"Bonus"}),s.jsx("th",{className:"px-3 py-2 text-right",children:"Purchase Rate"}),s.jsx("th",{className:"px-3 py-2 text-right",children:"Discount %"}),s.jsx("th",{className:"px-3 py-2 text-right",children:"Line Total"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-100",children:r.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"px-3 py-4 text-center text-slate-500",children:"No items recorded on this invoice."})}):r.map(l=>{const i=Number(l.quantity??0),o=Number(l.bonus??0),u=Number(l.rate??l.purchase_rate??0),c=Number(l.discount_percent??0),p=Number(l.net??l.net_amount??i*u*(1-c/100));return s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsxs("td",{className:"px-3 py-2",children:[s.jsxs("p",{className:"font-medium text-slate-800",children:[l.item_code,"  ",l.item_name]}),s.jsx("p",{className:"text-xs text-slate-500",children:l.base_unit||""})]}),s.jsx("td",{className:"px-3 py-2 text-right",children:i}),s.jsx("td",{className:"px-3 py-2 text-right",children:o}),s.jsx("td",{className:"px-3 py-2 text-right",children:Re(u)}),s.jsx("td",{className:"px-3 py-2 text-right",children:c.toFixed(2)}),s.jsx("td",{className:"px-3 py-2 text-right",children:Re(p)})]},l.id??`${l.item_code}-${l.item_name}`)})})]})})]})}}},sales:{label:"Sales Entries",title:"Saved Sales Invoices",description:"Customer sales invoices and collected amounts.",endpoint:"/sales",params:{limit:200},entryPath:"/transactions/sales",search:{label:"Invoice",placeholder:"Invoice no.",fields:["invoiceNo","reference"]},columns:[{key:"reference",label:"Invoice"},{key:"entity",label:"Customer"},{key:"salesman",label:"Salesman"},{key:"date",label:"Invoice Date"},{key:"amount",label:"Total Amount",align:"right",format:Re},{key:"received",label:"Amount Paid",align:"right",format:Re}],transform:e=>({id:e.id??`sale-${e.invoice_no}`,reference:e.invoice_no||"",entity:ke(e.customer_code,e.customer_name),salesman:ke(e.salesman_code,e.salesman_name),date:e.invoice_date||"",amount:Number(e.total_amount??0),received:Number(e.amount_paid??0),invoiceNo:e.invoice_no||null,customerPhone:e.customer_phone||e.customer_phone1||null,customerAddress:e.customer_address||null}),detail:{makeQueryKey:e=>["sales-detail",e.invoiceNo??e.reference],fetch:async e=>{const t=e.invoiceNo||e.reference;return t?(await J.get(`/sales/${encodeURIComponent(t)}`)).data:null},render:({row:e,data:t})=>{if(!(t!=null&&t.sale))return s.jsx("p",{className:"text-sm text-slate-500",children:"Details not available for this invoice."});const{sale:n,items:r=[]}=t;return s.jsxs(Hn,{title:"Sales Invoice",children:[s.jsx(Q1,{sale:n,items:r,row:e}),s.jsx("div",{className:"hidden print:block",children:s.jsx(W1,{sale:n,items:r,row:e})})]})}}},"sale-return":{label:"Sale Returns",title:"Saved Sale Returns",description:"Returns recorded against customer invoices.",endpoint:"/sale-returns",params:{limit:200},entryPath:"/transactions/sale-return",search:{label:"Invoice",placeholder:"Invoice no.",fields:["invoiceNo","reference"]},columns:[{key:"reference",label:"Invoice"},{key:"entity",label:"Customer"},{key:"item",label:"Item"},{key:"date",label:"Return Date"},{key:"quantity",label:"Quantity",align:"right",format:At},{key:"value",label:"Estimated Value",align:"right",format:Re}],transform:e=>{const t=Number(e.quantity??0),n=Number(e.trade_price??0);return{id:e.id??`sale-return-${e.invoice_no??""}-${e.id??Math.random()}`,reference:e.invoice_no||"",entity:ke(e.customer_code,e.customer_name),item:ke(e.item_code,e.item_name),date:e.return_date||"",quantity:t,value:t*n,invoiceNo:e.invoice_no||null}},detail:{makeQueryKey:e=>["sale-return-detail",e.id],fetch:async e=>e.raw||e,render:({row:e,data:t})=>{if(!t)return s.jsx("p",{className:"text-sm text-slate-500",children:"Details not available for this return."});const n=t.raw||t;return s.jsxs(Hn,{title:"Sale Return",children:[s.jsx(Y1,{entry:n,row:e}),s.jsx("div",{className:"hidden print:block",children:s.jsx(K1,{entry:n,row:e})})]})}}},"purchase-return":{label:"Purchase Returns",title:"Saved Purchase Returns",description:"Returns logged against supplier invoices.",endpoint:"/purchase-returns",params:{limit:200},entryPath:"/transactions/purchase-return",search:{label:"Invoice",placeholder:"Invoice no.",fields:["returnNo","invoiceNo","reference"]},columns:[{key:"returnNo",label:"Return No."},{key:"reference",label:"Invoice"},{key:"entity",label:"Supplier"},{key:"item",label:"Item"},{key:"date",label:"Return Date"},{key:"quantity",label:"Quantity",align:"right",format:At},{key:"value",label:"Estimated Value",align:"right",format:Re}],transform:e=>{const t=Number(e.quantity??0),n=Number(e.purchase_rate??0);return{id:e.return_no||e.id||`purchase-return-${e.invoice_no??""}-${e.id??Math.random()}`,returnNo:e.return_no||"",reference:e.invoice_no||"",entity:ke(e.supplier_code,e.supplier_name),item:ke(e.item_code,e.item_name),date:e.return_date||"",quantity:t,value:t*n,invoiceNo:e.invoice_no||null}},detail:{makeQueryKey:e=>["purchase-return-detail",e.id],fetch:async e=>e.raw||e,render:({row:e,data:t})=>{if(!t)return s.jsx("p",{className:"text-sm text-slate-500",children:"Details not available for this return."});const n=Number(t.quantity??e.quantity??0),r=Number(t.purchase_rate??e.purchase_rate??0),a=n*r,l=t.return_no||e.returnNo||"",i=t.invoice_no||e.reference||"",o=$t(t.updated_at||t.created_at),u=t.return_date||e.date||"",c=u?qe(u):"",p=ke(t.supplier_code,t.supplier_name)||e.entity,d=ke(t.item_code,t.item_name)||e.item,m=t.base_unit||e.unit||"",x=m?`${d} (${m})`:d;return s.jsxs(Hn,{title:"Purchase Return",children:[s.jsxs("div",{className:"space-y-6 print:hidden",children:[s.jsxs("div",{className:"grid gap-4 text-sm text-slate-700 sm:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Return No."}),s.jsx("p",{className:"font-semibold text-slate-900",children:l})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Invoice"}),s.jsx("p",{className:"font-semibold text-slate-900",children:i})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Return Date"}),s.jsx("p",{className:"font-semibold text-slate-900",children:c})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Recorded"}),s.jsx("p",{className:"font-semibold text-slate-900",children:o})]}),s.jsxs("div",{className:"sm:col-span-2",children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Supplier"}),s.jsx("p",{className:"font-semibold text-slate-900",children:p})]})]}),s.jsx("div",{className:"overflow-hidden rounded-xl border border-slate-300 bg-white shadow-sm",children:s.jsxs("table",{className:"w-full border-collapse text-sm",children:[s.jsx("thead",{className:"bg-slate-100 text-xs uppercase tracking-wide text-slate-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"border-b border-slate-300 px-3 py-2 text-left",children:"Sr. No"}),s.jsx("th",{className:"border-b border-slate-300 px-3 py-2 text-left",children:"Items"}),s.jsx("th",{className:"border-b border-slate-300 px-3 py-2 text-right",children:"Returned"}),s.jsx("th",{className:"border-b border-slate-300 px-3 py-2 text-right",children:"Purchase Rate"}),s.jsx("th",{className:"border-b border-slate-300 px-3 py-2 text-right",children:"Value"})]})}),s.jsxs("tbody",{children:[s.jsxs("tr",{className:"text-slate-900",children:[s.jsx("td",{className:"border-b border-slate-200 px-3 py-2 font-semibold",children:"1"}),s.jsx("td",{className:"border-b border-slate-200 px-3 py-2 font-semibold",children:x}),s.jsx("td",{className:"border-b border-slate-200 px-3 py-2 text-right font-semibold",children:At(n)}),s.jsx("td",{className:"border-b border-slate-200 px-3 py-2 text-right font-semibold",children:Nt(r)}),s.jsx("td",{className:"border-b border-slate-200 px-3 py-2 text-right font-semibold",children:Nt(a)})]}),s.jsxs("tr",{className:"bg-slate-100 text-slate-900",children:[s.jsx("td",{className:"px-3 py-2 text-right font-semibold",colSpan:4,children:"Total Value"}),s.jsx("td",{className:"px-3 py-2 text-right font-semibold",children:Nt(a)})]})]})]})})]}),s.jsx("div",{className:"hidden print:block",children:s.jsx(G1,{entry:t,row:e})})]})}}},expense:{label:"Expense Entries",title:"Saved Expense Vouchers",description:"Voucher-wise expense payments recorded.",endpoint:"/expense-entries",params:{limit:200},entryPath:"/transactions/expense-entry",search:{label:"Voucher",placeholder:"Voucher no.",fields:["voucherNo","reference"]},columns:[{key:"reference",label:"Voucher"},{key:"entity",label:"Expense"},{key:"date",label:"Voucher Date"},{key:"amount",label:"Cash Payment",align:"right",format:Re},{key:"recorded",label:"Recorded",render:e=>$t(e.recorded)}],transform:e=>({id:e.id??`expense-${e.voucher_no}`,reference:e.voucher_no||"",entity:ke(e.expense_code,e.expense_description),date:e.voucher_date||"",amount:Number(e.cash_payment??0),recorded:e.updated_at||e.created_at,voucherNo:e.voucher_no||null}),detail:{makeQueryKey:e=>["expense-detail",e.voucherNo??e.reference],fetch:async e=>{const t=e.voucherNo||e.reference;return!t||t===""?null:(await J.get(`/expense-entries/${encodeURIComponent(t)}`)).data},render:({row:e,data:t})=>t?s.jsxs(Hn,{title:"Expense Voucher",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Voucher No."}),s.jsx("p",{className:"font-medium text-slate-800",children:t.voucher_no||e.reference})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Voucher Date"}),s.jsx("p",{className:"font-medium text-slate-800",children:t.voucher_date||e.date||""})]}),s.jsxs("div",{className:"sm:col-span-2",children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Expense"}),s.jsx("p",{className:"font-medium text-slate-800",children:ke(t.expense_code,t.expense_description)||e.entity})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Cash Payment"}),s.jsx("p",{className:"font-medium text-slate-800",children:Re(t.cash_payment??e.amount)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Recorded"}),s.jsx("p",{className:"font-medium text-slate-800",children:$t(t.updated_at||t.created_at)})]}),s.jsxs("div",{className:"sm:col-span-2",children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Details"}),s.jsx("p",{className:"font-medium text-slate-800 whitespace-pre-wrap",children:t.details||""})]})]}):s.jsx("p",{className:"text-sm text-slate-500",children:"Details not available for this voucher."})}},"customer-receipt":{label:"Customer Receipts",title:"Saved Customer Receipts",description:"Payments collected from customers across all modes.",endpoint:"/customer-receipts",params:{limit:200},entryPath:"/transactions/customer-receipt",search:{label:"Receipt",placeholder:"Receipt no.",fields:["receiptNo","reference"]},columns:[{key:"reference",label:"Receipt"},{key:"entity",label:"Customer"},{key:"mode",label:"Mode"},{key:"date",label:"Receipt Date"},{key:"bank",label:"Bank"},{key:"amount",label:"Amount",align:"right",format:Re}],transform:e=>({id:e.id??`customer-receipt-${e.receipt_no}`,reference:e.receipt_no||"",entity:ke(e.customer_code,e.customer_name),mode:(e.payment_mode||"").toUpperCase()||"",date:e.receipt_date||"",bank:ke(e.bank_code,e.bank_name),amount:Number(e.amount??0),receiptNo:e.receipt_no||null}),detail:{makeQueryKey:e=>["customer-receipt-detail",e.id],fetch:async e=>e.raw||e,render:({row:e,data:t})=>t?s.jsxs(Hn,{title:"Customer Receipt",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Receipt No."}),s.jsx("p",{className:"font-medium text-slate-800",children:t.receipt_no||e.reference})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Receipt Date"}),s.jsx("p",{className:"font-medium text-slate-800",children:t.receipt_date||e.date||""})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Customer"}),s.jsx("p",{className:"font-medium text-slate-800",children:ke(t.customer_code,t.customer_name)||e.entity})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Payment Mode"}),s.jsx("p",{className:"font-medium text-slate-800",children:(t.payment_mode||e.mode||"").toUpperCase()})]}),t.bank_code||t.bank_name||t.bank_id?s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Bank"}),s.jsx("p",{className:"font-medium text-slate-800",children:ke(t.bank_code,t.bank_name)||e.bank||""})]}):null,s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Amount"}),s.jsx("p",{className:"font-medium text-slate-800",children:Re(t.amount??e.amount)})]}),t.slip_no||t.slip_date?s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Reference"}),s.jsxs("p",{className:"font-medium text-slate-800",children:[t.slip_no||""," ",t.slip_date?` ${t.slip_date}`:""]})]}):null,s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Recorded"}),s.jsx("p",{className:"font-medium text-slate-800",children:$t(t.updated_at||t.created_at)})]}),s.jsxs("div",{className:"sm:col-span-2",children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Details"}),s.jsx("p",{className:"font-medium text-slate-800 whitespace-pre-wrap",children:t.details||""})]})]}):s.jsx("p",{className:"text-sm text-slate-500",children:"Details not available for this receipt."})}},"supplier-payment":{label:"Supplier Payments",title:"Recorded Supplier Payments",description:"Payments issued to suppliers against outstanding balances.",endpoint:"/supplier-payments",params:{limit:200},entryPath:"/transactions/supplier-payment",search:{label:"Payment",placeholder:"Payment no.",fields:["paymentNo","reference","slipNo"]},columns:[{key:"reference",label:"Payment"},{key:"entity",label:"Supplier"},{key:"date",label:"Payment Date"},{key:"mode",label:"Mode",render:e=>jf(e.mode)},{key:"bank",label:"Bank"},{key:"amount",label:"Amount",align:"right",format:Re}],transform:e=>({id:e.id??`supplier-payment-${e.payment_no||e.created_at||""}`,reference:e.payment_no||"",entity:ke(e.supplier_code,e.supplier_name),date:e.payment_date||"",amount:Number(e.amount??0),paymentNo:e.payment_no||null,mode:(e.payment_mode||"cash").toLowerCase(),bank:ke(e.bank_code,e.bank_name),slipNo:e.slip_no||null,slipDate:e.slip_date||null,raw:e}),detail:{makeQueryKey:e=>["supplier-payment-detail",e.paymentNo??e.reference],fetch:async e=>e.raw||e,render:({row:e,data:t})=>{const n=t||e.raw||e;if(!n)return s.jsx("p",{className:"text-sm text-slate-500",children:"Details not available for this payment."});const r=Number(n.amount??e.amount??0),a=jf(n.payment_mode||e.mode),l=ke(n.bank_code,n.bank_name)||e.bank||"",i=n.slip_no||e.slipNo||"",o=n.slip_date||e.slipDate||"",u=a!=="Cash"&&l!=="",c=a!=="Cash"&&i,p=a==="Bank Transaction"&&o,d=a==="Online"?"Transaction Reference":"Slip No.";return s.jsxs(Hn,{title:"Supplier Payment",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Payment No."}),s.jsx("p",{className:"font-medium text-slate-800",children:n.payment_no||e.reference})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Payment Date"}),s.jsx("p",{className:"font-medium text-slate-800",children:n.payment_date||e.date||""})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Supplier"}),s.jsx("p",{className:"font-medium text-slate-800",children:ke(n.supplier_code,n.supplier_name)||e.entity})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Payment Mode"}),s.jsx("p",{className:"font-medium text-slate-800",children:a})]}),u?s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Bank"}),s.jsx("p",{className:"font-medium text-slate-800",children:l})]}):null,c?s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:d}),s.jsx("p",{className:"font-medium text-slate-800",children:i})]}):null,p?s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Slip Date"}),s.jsx("p",{className:"font-medium text-slate-800",children:o})]}):null,s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Recorded"}),s.jsx("p",{className:"font-medium text-slate-800",children:$t(n.updated_at||n.created_at)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Amount Paid"}),s.jsx("p",{className:"font-medium text-slate-800",children:Re(r)})]}),s.jsxs("div",{className:"sm:col-span-2",children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Notes"}),s.jsx("p",{className:"font-medium text-slate-800 whitespace-pre-wrap",children:n.details||""})]})]})}}},"salesman-receipt":{label:"Salesman Receipts",title:"Saved Salesman Receipts",description:"Collections submitted by salesmen with customer tallies.",endpoint:"/salesman-receipts",params:{limit:200},entryPath:"/transactions/salesman-receipt",search:{label:"Receipt",placeholder:"Receipt no.",fields:["receiptNo","reference"]},columns:[{key:"reference",label:"Receipt"},{key:"entity",label:"Salesman"},{key:"date",label:"Receipt Date"},{key:"customers",label:"Customers",align:"right",format:At},{key:"amount",label:"Amount Received",align:"right",format:Re}],transform:e=>({id:e.id??`salesman-receipt-${e.receipt_no}`,reference:e.receipt_no||"",entity:ke(e.salesman_code,e.salesman_name),date:e.receipt_date||"",customers:Number(e.customer_count??0),amount:Number(e.total_received??0),receiptNo:e.receipt_no||null}),detail:{makeQueryKey:e=>["salesman-receipt-detail",e.id],fetch:async e=>e.raw||e,render:({row:e,data:t})=>t?s.jsxs(Hn,{title:"Salesman Receipt",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Receipt No."}),s.jsx("p",{className:"font-medium text-slate-800",children:t.receipt_no||e.reference})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Receipt Date"}),s.jsx("p",{className:"font-medium text-slate-800",children:t.receipt_date||e.date||""})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Salesman"}),s.jsx("p",{className:"font-medium text-slate-800",children:ke(t.salesman_code,t.salesman_name)||e.entity})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Customers Covered"}),s.jsx("p",{className:"font-medium text-slate-800",children:At(t.customer_count??e.customers??0)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Total Received"}),s.jsx("p",{className:"font-medium text-slate-800",children:Re(t.total_received??e.amount)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Recorded"}),s.jsx("p",{className:"font-medium text-slate-800",children:$t(t.updated_at||t.created_at)})]})]}):s.jsx("p",{className:"text-sm text-slate-500",children:"Details not available for this receipt."})}},"bank-deposit":{label:"Bank Transactions",title:"Saved Bank Transactions",description:"Deposits and drawings recorded against bank accounts.",endpoint:"/reports/bank-deposits",params:{limit:200},entryPath:"/transactions/bank",search:{label:"Entry",placeholder:"Entry / slip / reference",resolve:e=>[e.entryNo||null,e.reference||null,e.transactionId!=null?String(e.transactionId):null,e.slipNo||null,e.supplierPaymentNo||null].filter(Boolean),emptyMessage:"Provide an entry, slip, or reference number to search.",noRowsMessage:"No bank transactions are loaded yet.",notFoundMessage:e=>`No bank transaction matches ${e}.`},columns:[{key:"entryNo",label:"Entry No."},{key:"transactionType",label:"Type",render:e=>Go(e.transactionType)},{key:"reference",label:"Slip / Reference"},{key:"entity",label:"Bank"},{key:"date",label:"Deposit Date"},{key:"origin",label:"Source"},{key:"amount",label:"Amount",align:"right",format:Re}],transform:e=>({id:e.id??`bank-deposit-${e.slip_no||e.id}`,entryNo:e.entry_no||null,reference:e.slip_no||`Txn ${e.id}`,slipNo:e.slip_no||null,entity:ke(e.bank_code,e.bank_name),date:e.slip_date||"",origin:e.customer_receipt_no?`Receipt ${e.customer_receipt_no}`:e.supplier_payment_no?`Supplier payment ${e.supplier_payment_no}`:"Manual Entry",amount:Number(e.cash_amount??0),transactionId:e.id??null,transactionType:(e.transaction_type||"deposit").toLowerCase(),supplierPaymentNo:e.supplier_payment_no||null}),detail:{makeQueryKey:e=>["bank-deposit-detail",e.id],fetch:async e=>e.raw||e,render:({row:e,data:t})=>{if(!t)return s.jsx("p",{className:"text-sm text-slate-500",children:"Details not available for this deposit."});const r=Go(t.transaction_type||e.transactionType)==="Drawing"?"Bank Drawing":"Bank Deposit";return s.jsxs(Hn,{title:r,children:[s.jsx(H1,{transaction:t,row:e}),s.jsx("div",{className:"hidden print:block",children:s.jsx(V1,{transaction:t,row:e,title:r})})]})}}}},Nf=Object.entries(bg).map(([e,t])=>({value:e,label:t.label})),J1=()=>{const[e]=oS(),t=gc(),n=(e.get("type")||U1).toLowerCase(),r=bg[n],[a,l]=y.useState(null),[i,o]=y.useState(""),[u,c]=y.useState(null),p=r==null?void 0:r.detail,d=!!p,m=(r==null?void 0:r.search)??null,x=!!m,h=(m==null?void 0:m.label)??"Reference",S=(m==null?void 0:m.placeholder)??`${h} no.`,C=x?typeof(m==null?void 0:m.emptyMessage)=="function"?m.emptyMessage():(m==null?void 0:m.emptyMessage)??`Enter a ${h.toLowerCase()} to search.`:"",g=r!=null&&r.label?r.label.toLowerCase():"entries",f=x?typeof(m==null?void 0:m.noRowsMessage)=="function"?m.noRowsMessage():(m==null?void 0:m.noRowsMessage)??`No ${g} are loaded yet.`:"",b=(F="")=>x?typeof(m==null?void 0:m.notFoundMessage)=="function"?m.notFoundMessage(F):typeof(m==null?void 0:m.notFoundMessage)=="string"?m.notFoundMessage.includes("{value}")?m.notFoundMessage.replace("{value}",F):m.notFoundMessage:`${h} ${F} not found in recent records.`:"",R=F=>{if(!x||!F)return[];if(typeof(m==null?void 0:m.resolve)=="function"){const $=m.resolve(F);return Array.isArray($)?$:$==null?[]:[$]}const N=Array.isArray(m==null?void 0:m.fields)&&m.fields.length>0?m.fields:["reference"],_=[];return N.forEach($=>{const O=F[$];Array.isArray(O)?O.forEach(Q=>{Q!=null&&Q!==""&&_.push(Q)}):O!=null&&O!==""&&_.push(O)}),_};y.useEffect(()=>{l(null),o(""),c(null)},[n]);const P=ie({queryKey:["transaction-history",n,r==null?void 0:r.endpoint,r==null?void 0:r.params],enabled:!!r,queryFn:async()=>{const F=await J.get(r.endpoint,{params:r.params});return(Array.isArray(F.data)?F.data:[]).map((_,$)=>{const Q={...r.transform?r.transform(_,$):_,raw:_};return Q.id==null&&(Q.id=`${n}-${$}`),Q})}}),A=P.data??[],v=(r==null?void 0:r.columns)??[],E=v.length+(d?1:0),T=F=>{if(F.preventDefault(),!x)return;const N=i.trim();if(!N){c(C);return}if(A.length===0){c(f);return}const _=N.toLowerCase(),$=K=>R(K).map(D=>String(D).trim().toLowerCase()).filter(Boolean),O=A.find(K=>$(K).some(B=>B===_));if(O){l(O.id),c(null);return}const Q=A.find(K=>$(K).some(B=>B.includes(_)));if(Q){l(Q.id),c(null);return}c(b(N))};y.useEffect(()=>{a&&!A.some(F=>F.id===a)&&l(null)},[A,a]);const M=y.useMemo(()=>A.find(F=>F.id===a),[A,a]),U=y.useMemo(()=>!p||!M?null:p.makeQueryKey(M),[p,M]),X=ie({queryKey:U??["transaction-detail",n,"idle"],queryFn:async()=>!p||!M?null:p.fetch(M),enabled:!!U}),L=y.useMemo(()=>{var $,O,Q;if(!p||!M)return null;const F=X.data??M.raw??null,N=X.error?(($=X.error)==null?void 0:$.message)||((Q=(O=X.error)==null?void 0:O.toString)==null?void 0:Q.call(O))||"Unknown error":null;if(X.isLoading&&!F)return s.jsx("p",{className:"text-sm text-slate-500",children:"Loading full details"});if(!F)return N?s.jsxs("p",{className:"text-sm text-rose-500",children:["Unable to load details: ",N]}):s.jsx("p",{className:"text-sm text-slate-500",children:"No additional details available."});const _=p.render?p.render({row:M,data:F,error:X.error}):s.jsx("pre",{className:"text-xs bg-slate-900 text-slate-100 rounded-xl p-3 overflow-x-auto",children:JSON.stringify(F,null,2)});return N?s.jsxs("div",{className:"space-y-3",children:[s.jsxs("p",{className:"text-xs text-rose-500",children:["Showing cached information due to an error: ",N]}),_]}):_},[p,X.data,X.error,X.isLoading,M]),w=F=>{l(N=>N===F?null:F)},j=F=>{const N=F.target.value;t(`/history/transactions?type=${N}`)},k=r?s.jsxs("div",{className:"flex flex-wrap items-center gap-3 print:hidden",children:[x?s.jsxs("form",{className:"flex items-center gap-2",onSubmit:T,children:[s.jsx("input",{className:"w-32 rounded-lg border border-slate-300 px-2 py-1 text-xs",placeholder:S,value:i,onChange:F=>{o(F.target.value),u&&c(null)}}),s.jsx("button",{type:"submit",className:"secondary text-xs px-3 py-1",children:"Search"})]}):null,s.jsx("select",{className:"text-xs border border-slate-300 rounded-lg px-2 py-1 bg-white",value:n,onChange:j,children:Nf.map(F=>s.jsx("option",{value:F.value,children:F.label},F.value))}),s.jsx(lt,{to:r.entryPath,className:"secondary text-xs px-3 py-1",children:"Go to entry"})]}):null;return r?s.jsx("div",{className:"space-y-6",children:s.jsx(je,{title:r.title,description:r.description,actions:k,children:P.isLoading?s.jsx("p",{className:"text-sm text-slate-500",children:"Loading saved transactions"}):P.error?s.jsxs("p",{className:"text-sm text-rose-500",children:["Unable to load transactions: ",P.error.message]}):A.length===0?s.jsx("p",{className:"text-sm text-slate-500",children:"No records available yet."}):s.jsxs(s.Fragment,{children:[x&&u?s.jsx("p",{className:"mb-2 text-xs text-rose-500",children:u}):null,s.jsx("div",{className:"overflow-x-auto print:hidden",children:s.jsxs("table",{className:"min-w-full text-sm text-slate-700",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-slate-200 text-xs uppercase tracking-wide text-slate-500",children:[d?s.jsx("th",{className:"px-3 py-2 w-12 text-center"}):null,v.map(F=>s.jsx("th",{className:`px-3 py-2 ${F.align==="right"?"text-right":F.align==="center"?"text-center":"text-left"}`,children:F.label},F.key))]})}),s.jsx("tbody",{children:A.map(F=>{const N=F.id===a;return s.jsxs(y.Fragment,{children:[s.jsxs("tr",{className:"border-b border-slate-100 last:border-0 hover:bg-slate-50 transition",children:[d?s.jsx("td",{className:"px-3 py-2 text-center align-middle",children:s.jsx("button",{type:"button",className:"w-7 h-7 inline-flex items-center justify-center border border-slate-300 rounded-full text-base font-semibold text-slate-600 hover:bg-slate-100 transition","aria-expanded":N,"aria-label":N?"Collapse details":"Expand details",title:N?"Hide details":"View full details",onClick:()=>w(F.id),children:N?"":"+"})}):null,v.map(_=>{const $=_.render?_.render(F):_.format?_.format(F[_.key],F):F[_.key]??"";return s.jsx("td",{className:`px-3 py-2 ${_.align==="right"?"text-right":_.align==="center"?"text-center":"text-left"}`,children:$||$===0?$:""},`${F.id}-${_.key}`)})]}),d&&N?s.jsx("tr",{className:"border-b border-slate-100 last:border-0 bg-slate-50/60",children:s.jsx("td",{colSpan:E,className:"px-4 py-4",children:L})}):null]},F.id)})})]})}),d?M?s.jsx("div",{className:"hidden print:block",children:L}):s.jsx("p",{className:"hidden print:block text-sm text-slate-500",children:"Expand a transaction before printing to include its full detail."}):null]})})}):s.jsx(je,{title:"Transaction History",description:"Pick a transaction type to review saved entries.",children:s.jsxs("div",{className:"space-y-3 text-sm text-slate-600",children:[s.jsx("p",{children:"Use the links below to open the available transaction histories:"}),s.jsx("ul",{className:"grid gap-2",children:Nf.map(F=>s.jsx("li",{children:s.jsx(lt,{className:"primary inline-flex items-center justify-center px-3 py-2 text-xs",to:`/history/transactions?type=${F.value}`,children:F.label})},F.value))})]})})},Sf=[{key:"out",label:"Damage-Out",description:"Mark supplier stock as damaged and deduct quantities."},{key:"in",label:"Damage-In",description:"Record replacements or claims credited back to stock."}],wf=()=>{const e=qe(new Date);return{startDate:(()=>{const n=new Date;return qe(new Date(n.getFullYear(),n.getMonth(),1))})(),endDate:e,supplierCode:"",supplierLabel:"",type:"",voucher:""}},X1=()=>{var X,L;const[e,t]=y.useState("out"),[n,r]=y.useState(""),[a,l]=y.useState(""),[i,o]=y.useState(null),[u,c]=y.useState(null),[p,d]=y.useState(null),[m,x]=y.useState(wf),[h,S]=y.useState({nextVoucher:"V000001"}),C=()=>({supplierCode:"",supplierLabel:"",itemCode:"",itemLabel:"",itemPurchaseRate:null,itemPurchaseValue:null,quantity:"",notes:"",date:qe(new Date)}),[g,f]=y.useState(C),b=Ze(),R=ie({queryKey:["damage-suppliers",{search:n}],queryFn:async()=>(await J.get("/suppliers",{params:{search:n}})).data}),P=y.useMemo(()=>{var w;return((w=R.data)==null?void 0:w.map(j=>({value:j.id,code:j.code,label:`${j.code}  ${j.name}`})))??[]},[R.data]),A=ie({queryKey:["damage-items",{supplierCode:g.supplierCode,search:a}],enabled:!!g.supplierCode,queryFn:async({queryKey:w})=>{const[,j]=w;return(await J.get("/supplier-items",{params:{supplierCode:j.supplierCode,search:j.search}})).data}}),v=y.useMemo(()=>{var w;return((w=A.data)==null?void 0:w.map(j=>({value:j.id,code:j.code,label:`${j.code}  ${j.name}`,purchaseRate:j.last_purchase_rate!=null?Number(j.last_purchase_rate):null,purchaseValue:j.last_purchase_value!=null?Number(j.last_purchase_value):null})))??[]},[A.data]);y.useEffect(()=>{if(!g.itemCode){d(null);return}let w=!1;return J.get(`/items/${encodeURIComponent(g.itemCode)}/availability`).then(j=>{var k;w||d(Number(((k=j.data)==null?void 0:k.quantity)??0))}).catch(()=>{w||d(null)}),()=>{w=!0}},[g.itemCode]);const E=Me({mutationFn:async w=>(await J.post("/damage-transactions",w)).data,onMutate:()=>{o(null),c(null)},onSuccess:w=>{const j=w!=null&&w.voucher_no?` (Voucher ${w.voucher_no})`:"";o({type:"success",message:`Damage transaction recorded${j}.`}),f(C()),r(""),l(""),d(null),b.invalidateQueries({queryKey:["damage-transactions-list"]}),b.invalidateQueries({queryKey:["stock-report"]}),b.invalidateQueries({queryKey:["reports/damage"]});const k=w==null?void 0:w.nextVoucher;k?S({nextVoucher:k}):J.get("/metadata/next/damage-voucher").then(F=>S(F.data)).catch(()=>null)},onError:w=>{const j=(w==null?void 0:w.message)||"Failed to record damage transaction.",k=w==null?void 0:w.status;c({message:j,code:k}),o({type:"error",message:j})}});y.useEffect(()=>{J.get("/metadata/next/damage-voucher").then(w=>S(w.data)).catch(()=>null)},[]);const T=ie({queryKey:["damage-transactions-list",m],queryFn:async({queryKey:w})=>{const[,j]=w;return(await J.get("/damage-transactions",{params:{supplierCode:j.supplierCode||void 0,type:j.type||void 0,startDate:j.startDate||void 0,endDate:j.endDate||void 0,voucher:j.voucher||void 0}})).data}}),M=()=>{if(!g.supplierCode)return"Select a supplier.";if(!g.itemCode)return"Select an item purchased from the supplier.";if(!g.date||!d1(g.date))return"Enter a valid transaction date.";const w=Number(g.quantity);return!Number.isFinite(w)||w<=0?"Enter a quantity greater than zero.":g.notes.trim()?e==="out"&&p!=null&&w-p>1e-6?`Quantity exceeds available stock (${p.toFixed(2)}).`:null:"Enter a reason/notes for this transaction."},U=w=>{w.preventDefault();const j=M();if(j){o(null),c({message:j});return}c(null),o(null),E.mutate({type:e,supplierCode:g.supplierCode,itemCode:g.itemCode,quantity:Number(g.quantity),date:g.date,notes:g.notes.trim()})};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs(je,{title:"Damage-IN/Out",description:"Manage damaged inventory adjustments across supplier stock.",actions:i?s.jsx("span",{className:`text-xs ${i.type==="error"?"text-rose-500":"text-emerald-600"}`,children:i.message}):null,children:[s.jsx("div",{className:"flex items-center gap-3",children:Sf.map(w=>s.jsx("button",{type:"button",onClick:()=>{t(w.key),o(null),c(null)},className:`px-4 py-2 rounded-full text-sm font-medium transition ${e===w.key?"bg-slate-900 text-white":"bg-white text-slate-600 border border-slate-200 hover:border-slate-300"}`,children:w.label},w.key))}),s.jsx("p",{className:"text-xs text-slate-500 -mt-2 mb-2",children:(X=Sf.find(w=>w.key===e))==null?void 0:X.description}),u?s.jsx("p",{className:"text-xs text-rose-500",children:u.message}):null,s.jsxs("form",{className:"grid md:grid-cols-3 gap-4",onSubmit:U,children:[s.jsx(H,{label:"Voucher No.",children:s.jsx("input",{value:h.nextVoucher||"V000001",disabled:!0})}),s.jsx(H,{label:"Transaction Date",required:!0,children:s.jsx("input",{value:g.date,onChange:w=>{const j=El(w.target.value);f(k=>({...k,date:j}))},placeholder:"DD-MM-YYYY"})}),s.jsx(ye,{label:"Supplier",placeholder:"Search suppliers",className:"md:col-span-1",value:g.supplierCode?{label:g.supplierLabel||g.supplierCode}:null,onSelect:w=>{f(j=>({...j,supplierCode:(w==null?void 0:w.code)||"",supplierLabel:(w==null?void 0:w.label)||"",itemCode:"",itemLabel:"",itemPurchaseRate:null,itemPurchaseValue:null,quantity:""})),l(""),d(null),c(null),o(null)},onSearch:r,results:P}),s.jsx(ye,{label:"Item",placeholder:"Search supplier items",className:"md:col-span-1",disabled:!g.supplierCode,value:g.itemCode?{label:g.itemLabel||g.itemCode}:null,onSelect:w=>{f(j=>({...j,itemCode:(w==null?void 0:w.code)||"",itemLabel:(w==null?void 0:w.label)||"",itemPurchaseRate:(w==null?void 0:w.purchaseRate)??null,itemPurchaseValue:(w==null?void 0:w.purchaseValue)??null,quantity:""})),d(null),c(null),o(null)},onSearch:l,results:v,renderItem:w=>s.jsxs("div",{className:"flex justify-between items-center w-full",children:[s.jsx("span",{children:w.label}),w.purchaseRate!=null?s.jsxs("span",{className:"text-xs text-slate-500",children:["Rate: ",w.purchaseRate.toFixed(2)]}):null]}),emptyMessage:g.supplierCode?"No matching items":"Select a supplier first"}),s.jsx(H,{label:"Last Purchase Rate",className:"md:col-span-1",children:s.jsx("input",{value:g.itemPurchaseRate!=null?g.itemPurchaseRate.toFixed(2):"--",disabled:!0,placeholder:"--"})}),s.jsx(H,{label:"Last Purchase Value",className:"md:col-span-1",children:s.jsx("input",{value:g.itemPurchaseValue!=null?g.itemPurchaseValue.toFixed(2):"--",disabled:!0,placeholder:"--"})}),s.jsx(H,{label:"Available Stock",className:"md:col-span-1",description:e==="out"?"Damage-Out cannot exceed available stock.":void 0,children:s.jsx("input",{value:p!=null?p.toFixed(2):"--",disabled:!0})}),s.jsx(H,{label:"Quantity",required:!0,children:s.jsx("input",{type:"number",min:"0.01",step:"0.01",value:g.quantity,onChange:w=>{f(j=>({...j,quantity:w.target.value}))},placeholder:"0.00"})}),s.jsx(H,{label:"Notes / Reason",required:!0,className:"md:col-span-2",children:s.jsx("textarea",{value:g.notes,onChange:w=>{f(j=>({...j,notes:w.target.value}))},rows:3,placeholder:"Explain why this stock is damaged or restored"})}),s.jsx("div",{className:"md:col-span-3 flex items-center justify-end",children:s.jsx("button",{type:"submit",className:"primary px-4 py-2",disabled:E.isPending,children:E.isPending?"Saving...":"Save Damage Transaction"})})]})]}),s.jsxs(je,{title:"Damage Transaction Log",description:"Audit trail of all Damage-IN/Out adjustments.",actions:T.isFetching?s.jsx("span",{className:"text-xs text-slate-500",children:"Loading"}):null,children:[s.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[s.jsx(H,{label:"From Date",children:s.jsx("input",{value:m.startDate,onChange:w=>{const j=El(w.target.value);x(k=>({...k,startDate:j}))},placeholder:"DD-MM-YYYY"})}),s.jsx(H,{label:"To Date",children:s.jsx("input",{value:m.endDate,onChange:w=>{const j=El(w.target.value);x(k=>({...k,endDate:j}))},placeholder:"DD-MM-YYYY"})}),s.jsx(ye,{label:"Supplier Filter",placeholder:"All suppliers",className:"md:col-span-1",value:m.supplierCode?{label:m.supplierLabel||m.supplierCode}:null,onSelect:w=>{x(j=>({...j,supplierCode:(w==null?void 0:w.code)||"",supplierLabel:(w==null?void 0:w.label)||""}))},onSearch:r,results:P}),s.jsx(H,{label:"Type",children:s.jsxs("select",{value:m.type,onChange:w=>{x(j=>({...j,type:w.target.value}))},children:[s.jsx("option",{value:"",children:"All"}),s.jsx("option",{value:"out",children:"Damage-Out"}),s.jsx("option",{value:"in",children:"Damage-In"})]})}),s.jsx(H,{label:"Voucher No.",children:s.jsx("input",{value:m.voucher,onChange:w=>{const j=w.target.value.toUpperCase();x(k=>({...k,voucher:j}))},placeholder:"e.g. V000123"})}),s.jsx("div",{className:"md:col-span-1 flex items-end",children:s.jsx("button",{type:"button",className:"secondary px-4 py-2",onClick:()=>x(wf()),children:"Reset Filters"})})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"text-left text-xs text-slate-500 uppercase",children:[s.jsx("th",{className:"py-2 pr-4",children:"Voucher"}),s.jsx("th",{className:"py-2 pr-4",children:"Date"}),s.jsx("th",{className:"py-2 pr-4",children:"Supplier"}),s.jsx("th",{className:"py-2 pr-4",children:"Item"}),s.jsx("th",{className:"py-2 pr-4",children:"Type"}),s.jsx("th",{className:"py-2 pr-4 text-right",children:"Purchase Rate"}),s.jsx("th",{className:"py-2 pr-4 text-right",children:"Damage Value"}),s.jsx("th",{className:"py-2 pr-4 text-right",children:"Quantity"}),s.jsx("th",{className:"py-2 pr-4",children:"Notes"})]})}),s.jsx("tbody",{children:(L=T.data)!=null&&L.length?T.data.map(w=>{const j=w.last_purchase_rate!=null?Number(w.last_purchase_rate):null,k=Number(w.quantity||0),F=j!=null?j*k:null;return s.jsxs("tr",{className:"border-t border-slate-200",children:[s.jsx("td",{className:"py-2 pr-4",children:w.voucher_no}),s.jsx("td",{className:"py-2 pr-4",children:w.transaction_date}),s.jsx("td",{className:"py-2 pr-4",children:`${w.supplier_code}  ${w.supplier_name}`}),s.jsx("td",{className:"py-2 pr-4",children:`${w.item_code}  ${w.item_name}`}),s.jsx("td",{className:"py-2 pr-4 capitalize",children:w.transaction_type==="out"?"Damage-Out":"Damage-In"}),s.jsx("td",{className:"py-2 pr-4 text-right",children:j!=null?j.toFixed(2):"--"}),s.jsx("td",{className:"py-2 pr-4 text-right",children:F!=null?F.toFixed(2):"--"}),s.jsx("td",{className:"py-2 pr-4 text-right",children:k.toFixed(2)}),s.jsx("td",{className:"py-2 pr-4",children:w.notes})]},w.id)}):s.jsx("tr",{children:s.jsx("td",{className:"py-4 text-center text-slate-500",colSpan:9,children:T.isFetching?"Loading transactions":"No damage transactions found."})})})]})})]})]})},kf=()=>{const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),1);return{startDate:qe(t),endDate:qe(e),supplierCode:"",supplierLabel:""}},Z1=()=>{var u;const[e,t]=y.useState(""),[n,r]=y.useState(kf),a=ie({queryKey:["damage-report-suppliers",{search:e}],queryFn:async()=>(await J.get("/suppliers",{params:{search:e}})).data}),l=y.useMemo(()=>{var c;return((c=a.data)==null?void 0:c.map(p=>({value:p.id,code:p.code,label:`${p.code}  ${p.name}`})))??[]},[a.data]),i=ie({queryKey:["reports/damage",n],queryFn:async({queryKey:c})=>{const[,p]=c;return(await J.get("/reports/damage-transactions",{params:{supplierCode:p.supplierCode||void 0,startDate:p.startDate||void 0,endDate:p.endDate||void 0}})).data}}),o=y.useMemo(()=>{var c;return(c=i.data)!=null&&c.length?i.data.reduce((p,d)=>(p.totalOut+=Number(d.total_out||0),p.totalIn+=Number(d.total_in||0),p),{totalOut:0,totalIn:0}):{totalOut:0,totalIn:0}},[i.data]);return s.jsxs(je,{title:"Damage-IN/Out Report",description:"Track damaged stock activity aggregated by supplier and month.",actions:i.isFetching?s.jsx("span",{className:"text-xs text-slate-500",children:"Loading"}):null,children:[s.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[s.jsx(H,{label:"From Date",children:s.jsx("input",{value:n.startDate,onChange:c=>{const p=El(c.target.value);r(d=>({...d,startDate:p}))},placeholder:"DD-MM-YYYY"})}),s.jsx(H,{label:"To Date",children:s.jsx("input",{value:n.endDate,onChange:c=>{const p=El(c.target.value);r(d=>({...d,endDate:p}))},placeholder:"DD-MM-YYYY"})}),s.jsx(ye,{label:"Supplier",placeholder:"All suppliers",value:n.supplierCode?{label:n.supplierLabel||n.supplierCode}:null,onSelect:c=>{r(p=>({...p,supplierCode:(c==null?void 0:c.code)||"",supplierLabel:(c==null?void 0:c.label)||""}))},onSearch:t,results:l}),s.jsx("div",{className:"flex items-end",children:s.jsx("button",{type:"button",className:"secondary px-4 py-2",onClick:()=>r(kf()),children:"Reset Filters"})})]}),s.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-white rounded-xl p-4 border border-slate-200 shadow-sm",children:[s.jsx("p",{className:"text-xs text-slate-500 uppercase",children:"Total Damage-Out"}),s.jsx("p",{className:"text-2xl font-semibold text-rose-500",children:o.totalOut.toFixed(2)})]}),s.jsxs("div",{className:"bg-white rounded-xl p-4 border border-slate-200 shadow-sm",children:[s.jsx("p",{className:"text-xs text-slate-500 uppercase",children:"Total Damage-In"}),s.jsx("p",{className:"text-2xl font-semibold text-emerald-500",children:o.totalIn.toFixed(2)})]}),s.jsxs("div",{className:"bg-white rounded-xl p-4 border border-slate-200 shadow-sm",children:[s.jsx("p",{className:"text-xs text-slate-500 uppercase",children:"Net Damage"}),s.jsx("p",{className:"text-2xl font-semibold text-slate-700",children:(o.totalOut-o.totalIn).toFixed(2)})]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"text-left text-xs text-slate-500 uppercase",children:[s.jsx("th",{className:"py-2 pr-4",children:"Month"}),s.jsx("th",{className:"py-2 pr-4",children:"Supplier"}),s.jsx("th",{className:"py-2 pr-4",children:"Item"}),s.jsx("th",{className:"py-2 pr-4 text-right",children:"Damage-Out"}),s.jsx("th",{className:"py-2 pr-4 text-right",children:"Damage-In"}),s.jsx("th",{className:"py-2 pr-4 text-right",children:"Net"})]})}),s.jsx("tbody",{children:(u=i.data)!=null&&u.length?i.data.map(c=>s.jsxs("tr",{className:"border-t border-slate-200",children:[s.jsx("td",{className:"py-2 pr-4",children:c.month}),s.jsx("td",{className:"py-2 pr-4",children:`${c.supplier_code}  ${c.supplier_name}`}),s.jsx("td",{className:"py-2 pr-4",children:`${c.item_code}  ${c.item_name}`}),s.jsx("td",{className:"py-2 pr-4 text-right",children:Number(c.total_out||0).toFixed(2)}),s.jsx("td",{className:"py-2 pr-4 text-right",children:Number(c.total_in||0).toFixed(2)}),s.jsx("td",{className:"py-2 pr-4 text-right",children:(Number(c.total_out||0)-Number(c.total_in||0)).toFixed(2)})]},`${c.supplier_code}-${c.item_code}-${c.month}`)):s.jsx("tr",{children:s.jsx("td",{className:"py-4 text-center text-slate-500",colSpan:6,children:i.isFetching?"Loading report":"No damage activity in selected range."})})})]})})]})},Le=e=>`Rs ${Number(e??0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,Ft=e=>Number(e??0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),ek=["Customer Wise Sales Summary","Days Wise Sales Summary","Salesman Wise Sales Summary","Area Wise Sales Summary","Date Wise Cash/Credit Sales","Item Wise Sales Detail","Item + Customer Wise Sales","Company + Area Wise Items Summary","Company Wise Items Summary","Date Wise Sales Detail","Customer Wise Sales Invoices","Company Wise Statement (T.P.)","Salesman Wise Items Summary","Date Wise Items Summary","Date Wise Items Damage Out","Date Wise Items Damage In","Company Wise Entire Areas","Company Wise Stock Statement","Company + Percentage Wise Detail","Company Wise Discounted Report","Special Discount Report","Company Wise Town Statement","Date Wise Stock Statement","Company + Customer Wise Summary","Company + Customer Wise Detail","Customer Wise Sales Detail","Company Wise 2nd Discount Detail"],tk=()=>{var Ua,Ks,Qa,Or,hi,Ya,fi,Ha,Gs,Js,Va,xi,yi,I,Y,V,te,ae,ce;const[e,t]=y.useState(null),[n,r]=y.useState(""),[a,l]=y.useState(""),[i,o]=y.useState(null),[u,c]=y.useState(""),[p,d]=y.useState(null),[m,x]=y.useState(""),[h,S]=y.useState(null),[C,g]=y.useState(""),[f,b]=y.useState(null),[R,P]=y.useState(""),[A,v]=y.useState(null),[E,T]=y.useState(()=>({start:on().startOf("month").format("DD-MM-YYYY"),end:on().format("DD-MM-YYYY")})),[M,U]=y.useState(()=>({start:on().startOf("month").format("DD-MM-YYYY"),end:on().format("DD-MM-YYYY")})),X=`
    <style>
      @page { size: A4 portrait; margin: 16mm 14mm 18mm 14mm; }
      html, body { width: 210mm; min-height: 297mm; }
      * { box-sizing: border-box; }
      body { font-family: Arial, sans-serif; margin: 0; padding: 18px; color: #0f172a; }
      h1 { font-size: 20px; margin-bottom: 12px; text-align: center; }
      p { margin: 4px 0; font-size: 12px; }
      table { width: 100%; border-collapse: collapse; margin-top: 12px; font-size: 12px; }
      th, td { border: 1px solid #cbd5f5; padding: 6px 8px; text-align: left; }
      th { background: #e2e8f0; text-transform: uppercase; font-size: 11px; letter-spacing: 0.04em; }
      tfoot td { font-weight: 600; background: #f1f5f9; }
    </style>
  `,L=(z,G)=>{if(!(z!=null&&z.current))return;const ne=z.current.cloneNode(!0);if(!ne)return;const ue=window.open("","_blank","width=1024,height=768");if(!ue)return;const{document:me}=ue;me.open(),me.write(`<!doctype html><html><head><meta charset="utf-8" /><title>${G}</title>${X}</head><body><div id="print-root"></div></body></html>`),me.close();const de=()=>{const fe=me.getElementById("print-root");if(!fe)return;const _e=me.createElement("h1");_e.textContent=G,fe.appendChild(_e),fe.appendChild(ne),setTimeout(()=>{ue.focus(),ue.print()},80)};me.readyState==="complete"?de():ue.addEventListener("load",de,{once:!0})},w=y.useRef(null),j=y.useRef(null),k=y.useRef(null),F=y.useRef(null),N=y.useRef(null),_=y.useRef(null),$=y.useRef(null),O="inline-flex items-center gap-1.5 rounded-xl border border-slate-200 bg-white px-3 py-1.5 text-xs font-medium text-slate-600 shadow-sm transition hover:border-emerald-200 hover:text-emerald-600 hover:ring-2 hover:ring-emerald-100",Q=y.useMemo(()=>{const z=n.trim().toLowerCase();return ek.filter(G=>z?G.toLowerCase().includes(z):!0).map((G,ne)=>({value:`${ne}`,label:G}))},[n]),K=y.useMemo(()=>e!=null&&e.label?e.label.toLowerCase().startsWith("customer wise"):!1,[e]),D=y.useMemo(()=>{if(!(e!=null&&e.label))return!1;const z=e.label.toLowerCase();return z.includes("days wise sales")||z.includes("day wise sales")},[e]),B=y.useMemo(()=>e!=null&&e.label?e.label.toLowerCase().includes("salesman wise sales summary"):!1,[e]),ee=y.useMemo(()=>e!=null&&e.label?e.label.toLowerCase().includes("area wise sales summary"):!1,[e]),Z=y.useMemo(()=>e!=null&&e.label?e.label.toLowerCase().includes("date wise cash/credit sales"):!1,[e]),re=y.useMemo(()=>e!=null&&e.label?e.label.toLowerCase().includes("item wise sales detail"):!1,[e]),he=y.useMemo(()=>e!=null&&e.label?e.label.toLowerCase().includes("item + customer wise sales"):!1,[e]),ge=K||D||B||ee||Z||re||he;y.useEffect(()=>{K||(l(""),o(null))},[K]),y.useEffect(()=>{B||(c(""),d(null))},[B]),y.useEffect(()=>{ee||(x(""),S(null))},[ee]),y.useEffect(()=>{Z||T({start:on().startOf("month").format("DD-MM-YYYY"),end:on().format("DD-MM-YYYY")})},[Z]),y.useEffect(()=>{!re&&!he&&(g(""),b(null))},[re,he]),y.useEffect(()=>{he||(g(""),b(null),P(""),v(null))},[he]);const Te=ie({queryKey:["legacy-report-customers",a],enabled:K,queryFn:async()=>{const z=await J.get("/customers",{params:{search:a||void 0,limit:25,offset:0}});return(Array.isArray(z.data)?z.data:[]).map(ne=>({value:ne.code,label:ne.name?`${ne.code}  ${ne.name}`:ne.code}))}}),ve=!!(M.start&&M.end),tt=!!(E.start&&E.end),Be=ie({queryKey:["legacy-customer-sales-report",K?i==null?void 0:i.value:null,K?M.start:null,K?M.end:null],enabled:!!(K&&(i!=null&&i.value)&&ve),queryFn:async()=>(await J.get("/reports/receivables/customer-ledger",{params:{startDate:M.start,endDate:M.end,customerCode:i.value,mode:"detail"}})).data}),wt=y.useMemo(()=>{var G;if(!((G=Be.data)!=null&&G.invoices))return[];const z=Be.data.invoices.find(ne=>ne.customerCode===(i==null?void 0:i.value));return(z==null?void 0:z.invoices)??[]},[Be.data,i==null?void 0:i.value]),dt=y.useMemo(()=>wt.length===0?{amount:0,paid:0,outstanding:0}:wt.reduce((z,G)=>(z.amount+=Number(G.amount??0),z.paid+=Number(G.amountPaid??0),z.outstanding+=Number(G.outstanding??0),z),{amount:0,paid:0,outstanding:0}),[wt]),Lt=ie({queryKey:["legacy-daywise-sales-report",D?M.start:null,D?M.end:null],enabled:!!(D&&ve),queryFn:async()=>(await J.get("/reports/sales/day-summary",{params:{startDate:M.start,endDate:M.end}})).data}),_n=((Ua=Lt.data)==null?void 0:Ua.rows)??[],xn=((Ks=Lt.data)==null?void 0:Ks.totals)??{totalAmount:0,totalPaid:0,outstanding:0,invoiceCount:0},$a=ie({queryKey:["legacy-report-salesmen",u],enabled:B,queryFn:async()=>{const z=await J.get("/salesmen",{params:{search:u||void 0,limit:50,offset:0}});return(Array.isArray(z.data)?z.data:[]).map(ne=>({value:ne.code,label:ne.name?`${ne.code}  ${ne.name}`:ne.code}))}}),ds=ie({queryKey:["legacy-salesman-sales-report",B?p==null?void 0:p.value:null,B?M.start:null,B?M.end:null],enabled:!!(B&&(p!=null&&p.value)&&ve),queryFn:async()=>(await J.get("/reports/sales/salesman-summary",{params:{salesmanCode:p.value,startDate:M.start,endDate:M.end}})).data}),pi=((Qa=ds.data)==null?void 0:Qa.rows)??[],Ia=((Or=ds.data)==null?void 0:Or.totals)??{totalAmount:0,amountPaid:0,outstanding:0},Rn=ie({queryKey:["legacy-report-areas",m],enabled:ee,queryFn:async()=>{const z=await J.get("/areas",{params:{search:m||void 0,limit:50,offset:0}});return(Array.isArray(z.data)?z.data:[]).map(ne=>({value:ne.code,label:ne.name?`${ne.code}  ${ne.name}`:ne.code}))}}),en=ie({queryKey:["legacy-area-sales-report",ee?h==null?void 0:h.value:null,ee?M.start:null,ee?M.end:null],enabled:!!(ee&&(h!=null&&h.value)&&ve),queryFn:async()=>(await J.get("/reports/sales/area-summary",{params:{areaCode:h.value,startDate:M.start,endDate:M.end}})).data}),Aa=((hi=en.data)==null?void 0:hi.rows)??[],Fr=((Ya=en.data)==null?void 0:Ya.totals)??{totalAmount:0,count:0},xt=ie({queryKey:["legacy-date-cash-credit-report",Z?E.start:null,Z?E.end:null],enabled:!!(Z&&tt),queryFn:async()=>(await J.get("/reports/sales/date-cash-credit",{params:{startDate:E.start,endDate:E.end}})).data}),tn=((fi=xt.data)==null?void 0:fi.rows)??[],Ws=((Ha=xt.data)==null?void 0:Ha.totals)??{cash:0,credit:0,total:0,count:0},Tr=ie({queryKey:["legacy-report-items",C],enabled:re||he,queryFn:async()=>{const z=await J.get("/items",{params:{search:C||void 0,limit:50,offset:0}});return(Array.isArray(z.data)?z.data:[]).map(ne=>({value:ne.code,label:ne.name?`${ne.code}  ${ne.name}`:ne.code}))}}),Dn=ie({queryKey:["legacy-item-sales-report",re?f==null?void 0:f.value:null,re?M.start:null,re?M.end:null],enabled:!!(re&&(f!=null&&f.value)&&ve),queryFn:async()=>(await J.get("/reports/sales/item-summary",{params:{itemCode:f.value,startDate:M.start,endDate:M.end}})).data}),mi=((Gs=Dn.data)==null?void 0:Gs.rows)??[],Ht=((Js=Dn.data)==null?void 0:Js.totals)??{quantity:0,value:0,count:0},qa=ie({queryKey:["legacy-report-customers",R],enabled:he,queryFn:async()=>{const z=await J.get("/customers",{params:{search:R||void 0,limit:50,offset:0}});return(Array.isArray(z.data)?z.data:[]).map(ne=>({value:ne.code,label:ne.name?`${ne.code}  ${ne.name}`:ne.code}))}}),Qn=ie({queryKey:["legacy-item-customer-sales-report",he?f==null?void 0:f.value:null,he?A==null?void 0:A.value:null,he?M.start:null,he?M.end:null],enabled:!!(he&&(f!=null&&f.value)&&(A!=null&&A.value)&&ve),queryFn:async()=>(await J.get("/reports/sales/item-customer-summary",{params:{itemCode:f.value,customerCode:A.value,startDate:M.start,endDate:M.end}})).data}),Ba=((Va=Qn.data)==null?void 0:Va.rows)??[],za=((xi=Qn.data)==null?void 0:xi.totals)??{quantity:0,value:0,count:0};return s.jsx(je,{title:"Sales Report Launcher",description:"Choose a sales report template. Detailed functionality will be added later.",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-end",children:[s.jsx(H,{label:"Sales Report",description:"Search and pick the sales report template you need.",required:!0,children:s.jsx(ye,{placeholder:"Search sales reports",value:e,onSelect:z=>t(z),onSearch:r,results:Q,emptyMessage:n.trim()?"No reports found.":"Start typing a report name."})}),e?s.jsx("button",{type:"button",onClick:()=>{t(null),r("")},className:"inline-flex items-center justify-center rounded-xl border border-slate-200 bg-white px-4 py-2 text-sm font-medium text-slate-600 shadow-sm transition hover:border-rose-200 hover:text-rose-600 hover:ring-2 hover:ring-rose-100",children:"Clear selection"}):null]}),K?s.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[s.jsxs(H,{label:"Customer",required:!0,description:"Choose the customer the sales report should focus on.",children:[s.jsx(ye,{placeholder:"Search customers",value:i,onSelect:z=>{o(z),l("")},onSearch:l,results:Te.data??[],emptyMessage:a.trim()?"No customers found.":"Start typing a customer code or name."}),Te.isFetching?s.jsx("p",{className:"mt-1 text-xs text-slate-400",children:"Loading customers"}):null]}),s.jsx(H,{label:"Start Date",required:!0,description:"Beginning of the reporting window (DD-MM-YYYY).",children:s.jsx("input",{className:"w-full rounded-xl border border-slate-200 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-emerald-200",value:M.start,onChange:z=>U(G=>({...G,start:z.target.value})),placeholder:"DD-MM-YYYY"})}),s.jsx(H,{label:"End Date",required:!0,description:"End of the reporting window (DD-MM-YYYY).",children:s.jsx("input",{className:"w-full rounded-xl border border-slate-200 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-emerald-200",value:M.end,onChange:z=>U(G=>({...G,end:z.target.value})),placeholder:"DD-MM-YYYY"})})]}):null,!K&&B?s.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[s.jsxs(H,{label:"Salesman",required:!0,description:"Select the salesman whose sales you want to review.",children:[s.jsx(ye,{placeholder:"Search salesmen",value:p,onSelect:z=>{d(z),c("")},onSearch:c,results:$a.data??[],emptyMessage:u.trim()?"No salesmen found.":"Start typing a code or name."}),$a.isFetching?s.jsx("p",{className:"mt-1 text-xs text-slate-400",children:"Loading salesmen"}):null]}),s.jsx(H,{label:"Start Date",required:!0,description:"Beginning of the reporting window (DD-MM-YYYY).",children:s.jsx("input",{className:"w-full rounded-xl border border-slate-200 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-emerald-200",value:M.start,onChange:z=>U(G=>({...G,start:z.target.value})),placeholder:"DD-MM-YYYY"})}),s.jsx(H,{label:"End Date",required:!0,description:"End of the reporting window (DD-MM-YYYY).",children:s.jsx("input",{className:"w-full rounded-xl border border-slate-200 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-emerald-200",value:M.end,onChange:z=>U(G=>({...G,end:z.target.value})),placeholder:"DD-MM-YYYY"})})]}):null,!K&&!B&&ee?s.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[s.jsxs(H,{label:"Area",required:!0,description:"Select the area to review sales for.",children:[s.jsx(ye,{placeholder:"Search areas",value:h,onSelect:z=>{S(z),x("")},onSearch:x,results:Rn.data??[],emptyMessage:m.trim()?"No areas found.":"Start typing an area code or name."}),Rn.isFetching?s.jsx("p",{className:"mt-1 text-xs text-slate-400",children:"Loading areas"}):null]}),s.jsx(H,{label:"Start Date",required:!0,description:"Beginning of the reporting window (DD-MM-YYYY).",children:s.jsx("input",{className:"w-full rounded-xl border border-slate-200 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-emerald-200",value:M.start,onChange:z=>U(G=>({...G,start:z.target.value})),placeholder:"DD-MM-YYYY"})}),s.jsx(H,{label:"End Date",required:!0,description:"End of the reporting window (DD-MM-YYYY).",children:s.jsx("input",{className:"w-full rounded-xl border border-slate-200 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-emerald-200",value:M.end,onChange:z=>U(G=>({...G,end:z.target.value})),placeholder:"DD-MM-YYYY"})})]}):null,!K&&D?s.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[s.jsx(H,{label:"Start Date",required:!0,description:"Beginning of the reporting window (DD-MM-YYYY).",children:s.jsx("input",{className:"w-full rounded-xl border border-slate-200 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-emerald-200",value:M.start,onChange:z=>U(G=>({...G,start:z.target.value})),placeholder:"DD-MM-YYYY"})}),s.jsx(H,{label:"End Date",required:!0,description:"End of the reporting window (DD-MM-YYYY).",children:s.jsx("input",{className:"w-full rounded-xl border border-slate-200 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-emerald-200",value:M.end,onChange:z=>U(G=>({...G,end:z.target.value})),placeholder:"DD-MM-YYYY"})})]}):null,!K&&!B&&!ee&&!re&&Z?s.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[s.jsx(H,{label:"Start Date",required:!0,description:"Beginning of the reporting window (DD-MM-YYYY).",children:s.jsx("input",{className:"w-full rounded-xl border border-slate-200 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-emerald-200",value:E.start,onChange:z=>T(G=>({...G,start:z.target.value})),placeholder:"DD-MM-YYYY"})}),s.jsx(H,{label:"End Date",required:!0,description:"End of the reporting window (DD-MM-YYYY).",children:s.jsx("input",{className:"w-full rounded-xl border border-slate-200 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-emerald-200",value:E.end,onChange:z=>T(G=>({...G,end:z.target.value})),placeholder:"DD-MM-YYYY"})})]}):null,!K&&!B&&re?s.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[s.jsxs(H,{label:"Item",required:!0,description:"Select the item to inspect.",children:[s.jsx(ye,{placeholder:"Search items",value:f,onSelect:z=>{b(z),g("")},onSearch:g,results:Tr.data??[],emptyMessage:C.trim()?"No items found.":"Start typing a code or name."}),Tr.isFetching?s.jsx("p",{className:"mt-1 text-xs text-slate-400",children:"Loading items"}):null]}),s.jsx(H,{label:"Start Date",required:!0,description:"Beginning of the reporting window (DD-MM-YYYY).",children:s.jsx("input",{className:"w-full rounded-xl border border-slate-200 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-emerald-200",value:M.start,onChange:z=>U(G=>({...G,start:z.target.value})),placeholder:"DD-MM-YYYY"})}),s.jsx(H,{label:"End Date",required:!0,description:"End of the reporting window (DD-MM-YYYY).",children:s.jsx("input",{className:"w-full rounded-xl border border-slate-200 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-emerald-200",value:M.end,onChange:z=>U(G=>({...G,end:z.target.value})),placeholder:"DD-MM-YYYY"})})]}):null,!K&&!B&&he?s.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-end md:gap-6",children:[s.jsxs(H,{label:"Item",required:!0,description:"Select the item first.",children:[s.jsx(ye,{placeholder:"Search items",value:f,onSelect:z=>{b(z),g("")},onSearch:g,results:Tr.data??[],emptyMessage:C.trim()?"No items found.":"Start typing a code or name."}),Tr.isFetching?s.jsx("p",{className:"mt-1 text-xs text-slate-400",children:"Loading items"}):null]}),s.jsxs(H,{label:"Customer",required:!0,description:"Pick the customer for the item.",children:[s.jsx(ye,{placeholder:"Search customers",value:A,onSelect:z=>{v(z),P("")},onSearch:P,results:qa.data??[],emptyMessage:R.trim()?"No customers found.":"Start typing a code or name."}),qa.isFetching?s.jsx("p",{className:"mt-1 text-xs text-slate-400",children:"Loading customers"}):null]}),s.jsx(H,{className:"md:w-[190px]",label:"Start Date",required:!0,description:"Beginning of the reporting window (DD-MM-YYYY).",children:s.jsx("input",{className:"w-full rounded-xl border border-slate-200 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-emerald-200",value:M.start,onChange:z=>U(G=>({...G,start:z.target.value})),placeholder:"DD-MM-YYYY"})}),s.jsx(H,{className:"md:w-[190px]",label:"End Date",required:!0,description:"End of the reporting window (DD-MM-YYYY).",children:s.jsx("input",{className:"w-full rounded-xl border border-slate-200 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-emerald-200",value:M.end,onChange:z=>U(G=>({...G,end:z.target.value})),placeholder:"DD-MM-YYYY"})})]}):null,e?s.jsxs("div",{className:"border border-dashed border-slate-300 rounded-xl p-4 text-sm text-slate-600 bg-white/60",children:[s.jsx("p",{className:"font-semibold text-slate-700",children:"Preview"}),s.jsxs("p",{className:"mt-2",children:[s.jsx("span",{className:"font-medium",children:e.label})," workflow will be wired in a future update.",K?" Configure the customer and date range above so the upcoming report runner knows which dataset to prepare.":D?" Choose a date range to view total sales for each day.":B?" Pick a salesman and date range to review their invoices.":ee?" Select an area and date window to list invoices for that territory.":Z?" Provide a date range to break down cash versus credit invoices.":re?" Select an item and range to list its invoices.":he?" Choose item + customer to detail their invoices.":" For now, this selector helps you navigate to the desired sales report quickly."]}),ge?s.jsxs("ul",{className:"mt-3 space-y-1 text-xs text-slate-500",children:[s.jsxs("li",{children:[" Date range: ",(Z?E.start:M.start)||""," to ",(Z?E.end:M.end)||""]}),K?s.jsxs("li",{children:[" Customer: ",(i==null?void 0:i.label)||"Not selected"]}):null,B?s.jsxs("li",{children:[" Salesman: ",(p==null?void 0:p.label)||"Not selected"]}):null,ee?s.jsxs("li",{children:[" Area: ",(h==null?void 0:h.label)||"Not selected"]}):null,re?s.jsxs("li",{children:[" Item: ",(f==null?void 0:f.label)||"Not selected"]}):null,he?s.jsxs("li",{children:[" Item: ",(f==null?void 0:f.label)||"Not selected","  Customer: ",(A==null?void 0:A.label)||"Not selected"]}):null,Z?s.jsx("li",{children:" Mode: Cash vs Credit summary"}):null]}):null,K?s.jsx("div",{className:"mt-4",children:i!=null&&i.value?Be.isError?s.jsxs("p",{className:"text-xs text-rose-600",children:["Unable to load invoices: ",((yi=Be.error)==null?void 0:yi.message)||"Unknown error."]}):Be.isLoading||Be.isFetching?s.jsx("p",{className:"text-xs text-slate-500",children:"Loading customer invoices"}):wt.length===0?s.jsx("p",{className:"text-xs text-slate-500",children:"No invoices found for the selected range. Try widening the dates."}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"mb-3 flex justify-end",children:s.jsx("button",{type:"button",className:O,onClick:()=>L(w,`Customer Sales Summary - ${(i==null?void 0:i.label)??""} (${M.start} to ${M.end})`),children:"Print report"})}),s.jsx("div",{ref:w,className:"overflow-hidden rounded-2xl border border-slate-200 bg-white",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200 text-xs text-slate-700",children:[s.jsx("thead",{className:"bg-slate-100/80 text-slate-500 uppercase tracking-wide",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2 text-left",children:"Invoice No."}),s.jsx("th",{className:"px-4 py-2 text-left",children:"Date"}),s.jsx("th",{className:"px-4 py-2 text-right",children:"Amount"}),s.jsx("th",{className:"px-4 py-2 text-right",children:"Paid"}),s.jsx("th",{className:"px-4 py-2 text-right",children:"Outstanding"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-100",children:wt.map(z=>s.jsxs("tr",{className:"odd:bg-white even:bg-slate-50/70",children:[s.jsx("td",{className:"px-4 py-2 font-medium text-slate-800",children:z.invoiceNo}),s.jsx("td",{className:"px-4 py-2 text-slate-600",children:z.invoiceDate}),s.jsx("td",{className:"px-4 py-2 text-right text-slate-800",children:Le(z.amount)}),s.jsx("td",{className:"px-4 py-2 text-right text-emerald-600",children:Le(z.amountPaid)}),s.jsx("td",{className:"px-4 py-2 text-right font-semibold text-slate-900",children:Le(z.outstanding)})]},z.invoiceNo))}),wt.length>0?s.jsx("tfoot",{className:"bg-slate-100/80 text-slate-700 font-semibold",children:s.jsxs("tr",{children:[s.jsx("td",{className:"px-4 py-2",colSpan:2,children:"Totals"}),s.jsx("td",{className:"px-4 py-2 text-right",children:Le(dt.amount)}),s.jsx("td",{className:"px-4 py-2 text-right text-emerald-700",children:Le(dt.paid)}),s.jsx("td",{className:"px-4 py-2 text-right text-slate-900",children:Le(dt.outstanding)})]})}):null]})})]}):s.jsx("p",{className:"text-xs text-slate-500",children:"Select a customer to list invoices for the chosen date range."})}):null,D?s.jsx("div",{className:"mt-4",children:ve?Lt.isError?s.jsxs("p",{className:"text-xs text-rose-600",children:["Unable to load daily sales: ",((I=Lt.error)==null?void 0:I.message)||"Unknown error."]}):Lt.isLoading||Lt.isFetching?s.jsx("p",{className:"text-xs text-slate-500",children:"Loading day-wise totals"}):_n.length===0?s.jsx("p",{className:"text-xs text-slate-500",children:"No sales recorded in the selected date range."}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"mb-3 flex justify-end",children:s.jsx("button",{type:"button",className:O,onClick:()=>L(j,`Day Wise Sales Summary (${M.start} to ${M.end})`),children:"Print report"})}),s.jsx("div",{ref:j,className:"overflow-hidden rounded-2xl border border-slate-200 bg-white",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200 text-xs text-slate-700",children:[s.jsx("thead",{className:"bg-slate-100/80 text-slate-500 uppercase tracking-wide",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2 text-left",children:"S/N"}),s.jsx("th",{className:"px-4 py-2 text-left",children:"Date"}),s.jsx("th",{className:"px-4 py-2 text-right",children:"Invoices"}),s.jsx("th",{className:"px-4 py-2 text-right",children:"Total Sales"}),s.jsx("th",{className:"px-4 py-2 text-right",children:"Paid"}),s.jsx("th",{className:"px-4 py-2 text-right",children:"Outstanding"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-100",children:_n.map((z,G)=>s.jsxs("tr",{className:"odd:bg-white even:bg-slate-50/70",children:[s.jsx("td",{className:"px-4 py-2 text-slate-600",children:G+1}),s.jsx("td",{className:"px-4 py-2 font-medium text-slate-800",children:z.date}),s.jsx("td",{className:"px-4 py-2 text-right text-slate-600",children:z.invoiceCount}),s.jsx("td",{className:"px-4 py-2 text-right text-slate-800",children:Le(z.totalAmount)}),s.jsx("td",{className:"px-4 py-2 text-right text-emerald-600",children:Le(z.totalPaid)}),s.jsx("td",{className:"px-4 py-2 text-right font-semibold text-slate-900",children:Le(z.outstanding)})]},z.storageDate||z.date))}),s.jsx("tfoot",{className:"bg-slate-100/80 text-slate-700 font-semibold",children:s.jsxs("tr",{children:[s.jsx("td",{className:"px-4 py-2",colSpan:2,children:"Totals"}),s.jsx("td",{className:"px-4 py-2 text-right",children:xn.invoiceCount}),s.jsx("td",{className:"px-4 py-2 text-right",children:Le(xn.totalAmount)}),s.jsx("td",{className:"px-4 py-2 text-right text-emerald-700",children:Le(xn.totalPaid)}),s.jsx("td",{className:"px-4 py-2 text-right text-slate-900",children:Le(xn.outstanding)})]})})]})})]}):s.jsx("p",{className:"text-xs text-slate-500",children:"Enter both start and end dates to generate the summary."})}):null,B?s.jsx("div",{className:"mt-4",children:p!=null&&p.value&&ve?ds.isError?s.jsxs("p",{className:"text-xs text-rose-600",children:["Unable to load salesman summary: ",((Y=ds.error)==null?void 0:Y.message)||"Unknown error."]}):ds.isLoading||ds.isFetching?s.jsx("p",{className:"text-xs text-slate-500",children:"Loading salesman invoices"}):pi.length===0?s.jsx("p",{className:"text-xs text-slate-500",children:"No invoices found for the selected salesman in this range."}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"mb-3 flex justify-end",children:s.jsx("button",{type:"button",className:O,onClick:()=>L(k,`Salesman Sales Summary - ${(p==null?void 0:p.label)??""} (${M.start} to ${M.end})`),children:"Print report"})}),s.jsx("div",{ref:k,className:"overflow-hidden rounded-2xl border border-slate-200 bg-white",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200 text-xs text-slate-700",children:[s.jsx("thead",{className:"bg-slate-100/80 text-slate-500 uppercase tracking-wide",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2 text-left",children:"S/N"}),s.jsx("th",{className:"px-4 py-2 text-left",children:"Invoice No."}),s.jsx("th",{className:"px-4 py-2 text-left",children:"Date"}),s.jsx("th",{className:"px-4 py-2 text-right",children:"Amount"}),s.jsx("th",{className:"px-4 py-2 text-right",children:"Paid"}),s.jsx("th",{className:"px-4 py-2 text-right",children:"Outstanding"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-100",children:pi.map((z,G)=>s.jsxs("tr",{className:"odd:bg-white even:bg-slate-50/70",children:[s.jsx("td",{className:"px-4 py-2 text-slate-600",children:G+1}),s.jsx("td",{className:"px-4 py-2 font-medium text-slate-800",children:z.invoiceNo}),s.jsx("td",{className:"px-4 py-2 text-slate-600",children:z.invoiceDate}),s.jsx("td",{className:"px-4 py-2 text-right text-slate-800",children:Le(z.totalAmount)}),s.jsx("td",{className:"px-4 py-2 text-right text-emerald-600",children:Le(z.amountPaid)}),s.jsx("td",{className:"px-4 py-2 text-right font-semibold text-slate-900",children:Le(z.outstanding)})]},z.invoiceNo||G))}),s.jsx("tfoot",{className:"bg-slate-100/80 text-slate-700 font-semibold",children:s.jsxs("tr",{children:[s.jsx("td",{className:"px-4 py-2",colSpan:3,children:"Totals"}),s.jsx("td",{className:"px-4 py-2 text-right",children:Le(Ia.totalAmount)}),s.jsx("td",{className:"px-4 py-2 text-right text-emerald-700",children:Le(Ia.amountPaid)}),s.jsx("td",{className:"px-4 py-2 text-right text-slate-900",children:Le(Ia.outstanding)})]})})]})})]}):s.jsx("p",{className:"text-xs text-slate-500",children:"Select a salesman and provide start/end dates to view their invoices."})}):null,ee?s.jsx("div",{className:"mt-4",children:h!=null&&h.value&&ve?en.isError?s.jsxs("p",{className:"text-xs text-rose-600",children:["Unable to load area summary: ",((V=en.error)==null?void 0:V.message)||"Unknown error."]}):en.isLoading||en.isFetching?s.jsx("p",{className:"text-xs text-slate-500",children:"Loading area invoices"}):Aa.length===0?s.jsx("p",{className:"text-xs text-slate-500",children:"No invoices found for the selected area in this range."}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"mb-3 flex justify-end",children:s.jsx("button",{type:"button",className:O,onClick:()=>L(F,`Area Sales Summary - ${(h==null?void 0:h.label)??""} (${M.start} to ${M.end})`),children:"Print report"})}),s.jsx("div",{ref:F,className:"overflow-hidden rounded-2xl border border-slate-200 bg-white",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200 text-xs text-slate-700",children:[s.jsx("thead",{className:"bg-slate-100/80 text-slate-500 uppercase tracking-wide",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2 text-left",children:"S/N"}),s.jsx("th",{className:"px-4 py-2 text-left",children:"Invoice No."}),s.jsx("th",{className:"px-4 py-2 text-left",children:"Date"}),s.jsx("th",{className:"px-4 py-2 text-left",children:"Customer"}),s.jsx("th",{className:"px-4 py-2 text-right",children:"Amount"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-100",children:Aa.map((z,G)=>s.jsxs("tr",{className:"odd:bg-white even:bg-slate-50/70",children:[s.jsx("td",{className:"px-4 py-2 text-slate-600",children:G+1}),s.jsx("td",{className:"px-4 py-2 font-medium text-slate-800",children:z.invoiceNo}),s.jsx("td",{className:"px-4 py-2 text-slate-600",children:z.invoiceDate}),s.jsxs("td",{className:"px-4 py-2 text-slate-700",children:[z.customerName,s.jsx("span",{className:"block text-[10px] text-slate-400",children:z.customerCode})]}),s.jsx("td",{className:"px-4 py-2 text-right font-semibold text-slate-900",children:Le(z.totalAmount)})]},z.invoiceNo||G))}),s.jsx("tfoot",{className:"bg-slate-100/80 text-slate-700 font-semibold",children:s.jsxs("tr",{children:[s.jsxs("td",{className:"px-4 py-2",colSpan:4,children:["Totals (Invoices: ",Fr.count,")"]}),s.jsx("td",{className:"px-4 py-2 text-right",children:Le(Fr.totalAmount)})]})})]})})]}):s.jsx("p",{className:"text-xs text-slate-500",children:"Choose an area and provide start/end dates to list area-wise invoices."})}):null,Z?s.jsx("div",{className:"mt-4",children:tt?xt.isError?s.jsxs("p",{className:"text-xs text-rose-600",children:["Unable to load cash/credit summary: ",((te=xt.error)==null?void 0:te.message)||"Unknown error."]}):xt.isLoading||xt.isFetching?s.jsx("p",{className:"text-xs text-slate-500",children:"Loading invoices"}):tn.length===0?s.jsx("p",{className:"text-xs text-slate-500",children:"No invoices found for the selected dates."}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"mb-3 flex justify-end",children:s.jsx("button",{type:"button",className:O,onClick:()=>L(N,`Date Wise Cash/Credit Sales (${E.start} to ${E.end})`),children:"Print report"})}),s.jsx("div",{ref:N,className:"overflow-hidden rounded-2xl border border-slate-200 bg-white",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200 text-xs text-slate-700",children:[s.jsx("thead",{className:"bg-slate-100/80 text-slate-500 uppercase tracking-wide",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2 text-left",children:"S/N"}),s.jsx("th",{className:"px-4 py-2 text-left",children:"Invoice No."}),s.jsx("th",{className:"px-4 py-2 text-left",children:"Date"}),s.jsx("th",{className:"px-4 py-2 text-left",children:"Customer"}),s.jsx("th",{className:"px-4 py-2 text-right",children:"Cash"}),s.jsx("th",{className:"px-4 py-2 text-right",children:"Credit"}),s.jsx("th",{className:"px-4 py-2 text-right",children:"Total"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-100",children:tn.map((z,G)=>s.jsxs("tr",{className:"odd:bg-white even:bg-slate-50/70",children:[s.jsx("td",{className:"px-4 py-2 text-slate-600",children:G+1}),s.jsx("td",{className:"px-4 py-2 font-medium text-slate-800",children:z.invoiceNo}),s.jsx("td",{className:"px-4 py-2 text-slate-600",children:z.invoiceDate}),s.jsxs("td",{className:"px-4 py-2 text-slate-700",children:[z.customerName,s.jsx("span",{className:"block text-[10px] text-slate-400",children:z.customerCode})]}),s.jsx("td",{className:"px-4 py-2 text-right text-slate-800",children:Le(z.cash)}),s.jsx("td",{className:"px-4 py-2 text-right text-slate-600",children:Le(z.credit)}),s.jsx("td",{className:"px-4 py-2 text-right font-semibold text-slate-900",children:Le(z.total)})]},z.invoiceNo||G))}),s.jsx("tfoot",{className:"bg-slate-100/80 text-slate-700 font-semibold",children:s.jsxs("tr",{children:[s.jsxs("td",{className:"px-4 py-2",colSpan:4,children:["Totals (Invoices: ",Ws.count,")"]}),s.jsx("td",{className:"px-4 py-2 text-right",children:Le(Ws.cash)}),s.jsx("td",{className:"px-4 py-2 text-right",children:Le(Ws.credit)}),s.jsx("td",{className:"px-4 py-2 text-right",children:Le(Ws.total)})]})})]})})]}):s.jsx("p",{className:"text-xs text-slate-500",children:"Enter both start and end dates to generate the summary."})}):null,re?s.jsx("div",{className:"mt-4",children:f!=null&&f.value&&ve?Dn.isError?s.jsxs("p",{className:"text-xs text-rose-600",children:["Unable to load item summary: ",((ae=Dn.error)==null?void 0:ae.message)||"Unknown error."]}):Dn.isLoading||Dn.isFetching?s.jsx("p",{className:"text-xs text-slate-500",children:"Loading item invoices"}):mi.length===0?s.jsx("p",{className:"text-xs text-slate-500",children:"No invoices found for the selected item in this range."}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"mb-3 flex justify-end",children:s.jsx("button",{type:"button",className:O,onClick:()=>L(_,`Item Sales Detail - ${(f==null?void 0:f.label)??""} (${M.start} to ${M.end})`),children:"Print report"})}),s.jsx("div",{ref:_,className:"overflow-hidden rounded-2xl border border-slate-200 bg-white",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200 text-xs text-slate-700",children:[s.jsx("thead",{className:"bg-slate-100/80 text-slate-500 uppercase tracking-wide",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2 text-left",children:"S/N"}),s.jsx("th",{className:"px-4 py-2 text-left",children:"Invoice No."}),s.jsx("th",{className:"px-4 py-2 text-left",children:"Invoice Date"}),s.jsx("th",{className:"px-4 py-2 text-left",children:"Base"}),s.jsx("th",{className:"px-4 py-2 text-right",children:"Unit"}),s.jsx("th",{className:"px-4 py-2 text-right",children:"Rate (Trade Price)"}),s.jsx("th",{className:"px-4 py-2 text-right",children:"Dis%"}),s.jsx("th",{className:"px-4 py-2 text-right",children:"Tax"}),s.jsx("th",{className:"px-4 py-2 text-right",children:"Value"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-100",children:mi.map((z,G)=>s.jsxs("tr",{className:"odd:bg-white even:bg-slate-50/70",children:[s.jsx("td",{className:"px-4 py-2 text-slate-600",children:G+1}),s.jsx("td",{className:"px-4 py-2 font-medium text-slate-800",children:z.invoiceNo}),s.jsx("td",{className:"px-4 py-2 text-slate-600",children:z.invoiceDate}),s.jsx("td",{className:"px-4 py-2 text-slate-700",children:z.baseUnit||""}),s.jsx("td",{className:"px-4 py-2 text-right text-slate-700",children:Ft(z.quantity)}),s.jsx("td",{className:"px-4 py-2 text-right text-slate-800",children:Ft(z.rate)}),s.jsx("td",{className:"px-4 py-2 text-right text-slate-600",children:Ft(z.discountPercent)}),s.jsx("td",{className:"px-4 py-2 text-right text-slate-600",children:Ft(z.taxPercent)}),s.jsx("td",{className:"px-4 py-2 text-right font-semibold text-slate-900",children:Ft(z.value)})]},`${z.invoiceNo}-${G}`))}),s.jsx("tfoot",{className:"bg-slate-100/80 text-slate-700 font-semibold",children:s.jsxs("tr",{children:[s.jsxs("td",{className:"px-4 py-2",colSpan:4,children:["Totals (Invoices: ",Ht.count,")"]}),s.jsx("td",{className:"px-4 py-2 text-right text-slate-700",children:Ft(Ht.quantity)}),s.jsx("td",{className:"px-4 py-2",colSpan:3}),s.jsx("td",{className:"px-4 py-2 text-right",children:Ft(Ht.value)})]})})]})})]}):s.jsx("p",{className:"text-xs text-slate-500",children:"Select an item and provide start/end dates to list its sales."})}):null,he?s.jsx("div",{className:"mt-4",children:f!=null&&f.value&&(A!=null&&A.value)&&ve?Qn.isError?s.jsxs("p",{className:"text-xs text-rose-600",children:["Unable to load item/customer summary: ",((ce=Qn.error)==null?void 0:ce.message)||"Unknown error."]}):Qn.isLoading||Qn.isFetching?s.jsx("p",{className:"text-xs text-slate-500",children:"Loading combined invoices"}):Ba.length===0?s.jsx("p",{className:"text-xs text-slate-500",children:"No invoices found for this item and customer within the selected range."}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"mb-3 flex justify-end",children:s.jsx("button",{type:"button",className:O,onClick:()=>L($,`Item + Customer Sales - ${(f==null?void 0:f.label)??""} / ${(A==null?void 0:A.label)??""} (${M.start} to ${M.end})`),children:"Print report"})}),s.jsx("div",{ref:$,className:"overflow-hidden rounded-2xl border border-slate-200 bg-white",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200 text-xs text-slate-700",children:[s.jsx("thead",{className:"bg-slate-100/80 text-slate-500 uppercase tracking-wide",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2 text-left",children:"S/N"}),s.jsx("th",{className:"px-4 py-2 text-left",children:"Invoice No."}),s.jsx("th",{className:"px-4 py-2 text-left",children:"Invoice Date"}),s.jsx("th",{className:"px-4 py-2 text-left",children:"Customer Name"}),s.jsx("th",{className:"px-4 py-2 text-left",children:"Base"}),s.jsx("th",{className:"px-4 py-2 text-right",children:"Unit"}),s.jsx("th",{className:"px-4 py-2 text-right",children:"Rate (Trade Price)"}),s.jsx("th",{className:"px-4 py-2 text-right",children:"Dis%"}),s.jsx("th",{className:"px-4 py-2 text-right",children:"Tax"}),s.jsx("th",{className:"px-4 py-2 text-right",children:"Value"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-100",children:Ba.map((z,G)=>s.jsxs("tr",{className:"odd:bg-white even:bg-slate-50/70",children:[s.jsx("td",{className:"px-4 py-2 text-slate-600",children:G+1}),s.jsx("td",{className:"px-4 py-2 font-medium text-slate-800",children:z.invoiceNo}),s.jsx("td",{className:"px-4 py-2 text-slate-600",children:z.invoiceDate}),s.jsx("td",{className:"px-4 py-2 text-slate-700",children:z.customerName}),s.jsx("td",{className:"px-4 py-2 text-slate-700",children:z.baseUnit||""}),s.jsx("td",{className:"px-4 py-2 text-right text-slate-700",children:Ft(z.quantity)}),s.jsx("td",{className:"px-4 py-2 text-right text-slate-800",children:Ft(z.rate)}),s.jsx("td",{className:"px-4 py-2 text-right text-slate-600",children:Ft(z.discountPercent)}),s.jsx("td",{className:"px-4 py-2 text-right text-slate-600",children:Ft(z.taxPercent)}),s.jsx("td",{className:"px-4 py-2 text-right font-semibold text-slate-900",children:Ft(z.value)})]},`${z.invoiceNo}-${G}`))}),s.jsx("tfoot",{className:"bg-slate-100/80 text-slate-700 font-semibold",children:s.jsxs("tr",{children:[s.jsxs("td",{className:"px-4 py-2",colSpan:5,children:["Totals (Invoices: ",za.count,")"]}),s.jsx("td",{className:"px-4 py-2 text-right text-slate-700",children:Ft(za.quantity)}),s.jsx("td",{className:"px-4 py-2",colSpan:3}),s.jsx("td",{className:"px-4 py-2 text-right",children:Ft(za.value)})]})})]})})]}):s.jsx("p",{className:"text-xs text-slate-500",children:"Select both item and customer plus a date range to list combined sales."})}):null]}):s.jsx("p",{className:"text-sm text-slate-500",children:"Select a report above to see more details when the implementation arrives."})]})})},nk=new $S,sk=nS([{path:"/",element:s.jsx(K2,{}),errorElement:s.jsx(X2,{}),children:[{index:!0,element:s.jsx(J2,{})},{path:"registration",element:s.jsx(gy,{to:"/master/company",replace:!0})},{path:"master/company",element:s.jsx(e1,{})},{path:"master/item",element:s.jsx(t1,{})},{path:"master/supplier",element:s.jsx(n1,{})},{path:"master/area",element:s.jsx(s1,{})},{path:"master/salesman",element:s.jsx(r1,{})},{path:"master/customer",element:s.jsx(a1,{})},{path:"master/expense",element:s.jsx(l1,{})},{path:"master/bank",element:s.jsx(i1,{})},{path:"transactions/purchase",element:s.jsx(p1,{})},{path:"transactions/sales",element:s.jsx(m1,{})},{path:"transactions/sale-return",element:s.jsx(h1,{})},{path:"transactions/purchase-return",element:s.jsx(f1,{})},{path:"transactions/expense-entry",element:s.jsx(x1,{})},{path:"transactions/customer-receipt",element:s.jsx(y1,{})},{path:"transactions/supplier-payment",element:s.jsx(g1,{})},{path:"transactions/opening-balance",element:s.jsx(C1,{})},{path:"transactions/salesman-receipt",element:s.jsx(v1,{})},{path:"transactions/bank",element:s.jsx(j1,{})},{path:"transactions/bank/:mode",element:s.jsx(S1,{})},{path:"transactions/damage",element:s.jsx(X1,{})},{path:"history/transactions",element:s.jsx(J1,{})},{path:"reports/receivables/customer-ledger",element:s.jsx(P1,{})},{path:"reports/stock",element:s.jsx(_1,{})},{path:"reports/bank-deposits",element:s.jsx(R1,{})},{path:"reports/damage",element:s.jsx(Z1,{})},{path:"reports/legacy",element:s.jsx(tk,{})},{path:"editing/sales",element:s.jsx(L1,{})},{path:"editing/purchase",element:s.jsx(F1,{})},{path:"editing/expense-entry",element:s.jsx(T1,{})},{path:"editing/item",element:s.jsx(O1,{})},{path:"editing/bank-transaction",element:s.jsx(I1,{})},{path:"editing/customer-receipt",element:s.jsx(B1,{})},{path:"editing/supplier-payment",element:s.jsx(z1,{})},{path:"*",element:s.jsx(Z2,{})}]}]);du.createRoot(document.getElementById("root")).render(s.jsx(ss.StrictMode,{children:s.jsx(IS,{client:nk,children:s.jsx(hS,{router:sk})})}));
